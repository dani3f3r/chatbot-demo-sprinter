(() => {
  var e = {
      641: () => {
        var e, t;
        (e = {
          416: (e, t, n) => {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 }),
              (t.AudioCodesUA = void 0);
            const i = n(813);
            class r {
              constructor() {
                return (
                  (this._isInitialized = !1),
                  (this.serverConfig = {}),
                  (this.account = {
                    user: null,
                    userAuth: null,
                    displayName: null,
                    password: null,
                    registerExpires: 600,
                    useSessionTimer: !1,
                  }),
                  (this.constraints = { audio: !0, video: !0 }),
                  (this.chromiumBased = [
                    { n: "Edge", s: "edg/" },
                    { n: "Opera", s: "opr/" },
                    { n: "Samsung", s: "samsungbrowser/" },
                    { n: "Yandex", s: "yabrowser/" },
                  ]),
                  (this.modes = {
                    video_call_audio_answer_firefox_fix: !0,
                    video_call_audio_answer_safari_fix: !0,
                    ice_timeout_fix: 2e3,
                    chrome_rtp_timeout_fix: 13,
                    sbc_ha_pairs_mode: void 0,
                    ringing_header_mode: void 0,
                    sbc_switch_register5xx_mode: !0,
                    cache_register_auth_mode: !0,
                    check_remote_sdp_mode: !0,
                  }),
                  (this.credentials = []),
                  (this.listeners = {}),
                  (this.registerExtraHeaders = null),
                  (this.jssipUA = null),
                  (this.browser = ""),
                  (this.browserVersion = 0),
                  (this.browserName = ""),
                  (this.os = "other"),
                  (this.reconnectMin = 2),
                  (this.reconnectMax = 30),
                  (this.u17 = void 0),
                  (this.activeCalls = 0),
                  (this.wsPingStarted = !1),
                  (this.wsSocket = null),
                  (this.wsOnMessage = null),
                  (this.wsPingMs = 0),
                  (this.wsOrigPingMs = 0),
                  (this.wsThrottlingPingMs = 0),
                  (this.wsVisibility = !1),
                  (this.wsCall = !1),
                  (this.wsLog = 0),
                  (this.wsPongTimeout = !0),
                  (this.wsIsThrottling = !1),
                  (this.wsPingJob = null),
                  (this.wsPingTime = null),
                  (this.wsNextPingTime = null),
                  (this.wsPongReceived = !1),
                  (this.wsPongSupported = null),
                  (this.wsPongTimeoutTime = null),
                  (this.wsPongDelays = null),
                  (this.wsPongDelaysIx = 0),
                  (this.wsPongReport = 0),
                  (this.wsPongReportCounter = 0),
                  (this.wsPongDist = !1),
                  (this.wsIsPingDebugLog = !1),
                  (this.dtmfUseWebRTC = !0),
                  (this.dtmfDuration = 250),
                  (this.dtmfInterToneGap = 250),
                  (this.enableAddVideo = !1),
                  (this.oauthToken = null),
                  (this.oauthTokenUseInInvite = !0),
                  (this.networkPriority = void 0),
                  (r.ac_log = console.log),
                  (r.js_log = null),
                  void 0 === r.instance && (r.instance = this),
                  this._detectBrowser(),
                  this._detectOS(),
                  (this.webrtcapi = l),
                  (this.replacedCall = null),
                  (this.codecFilter = null),
                  (this.AUDIO = Symbol("audio")),
                  (this.VIDEO = Symbol("video")),
                  (this.RECVONLY_VIDEO = Symbol("recvonly_video")),
                  r.instance
                );
              }
              version() {
                return "1.19.0";
              }
              getBrowserName() {
                return this.browserName;
              }
              getBrowser() {
                return this.browser;
              }
              getBrowserVersion() {
                return this.browserVersion;
              }
              getOS() {
                return this.os;
              }
              getWR() {
                return this.webrtcapi;
              }
              checkAvailableDevices() {
                return this.getWR().checkAvailableDevices();
              }
              getServerAddress() {
                if (null === this.wsSocket) return null;
                let e = this.wsSocket.url;
                return e.endsWith("/") && (e = e.slice(0, -1)), e;
              }
              setOAuthToken(e, t = !0) {
                (this.oauthToken = e),
                  (this.oauthTokenUseInInvite = t),
                  this.setRegisterExtraHeaders(this.registerExtraHeaders);
              }
              setUserAgent(e) {
                this.u17 = e;
              }
              setConstraints(e, t, n) {
                let i = this.browser,
                  s = this.browser + "|" + this.os;
                if (null === e || e === i || e === s) {
                  if (
                    (r.ac_log(
                      `AC: setConstraints ${e} ${t}  ${JSON.stringify(n)}`
                    ),
                    "audio" !== t && "video" !== t)
                  )
                    throw new TypeError(`Wrong type: ${t}`);
                  this.constraints[t] = n;
                } else
                  r.ac_log(
                    `AC: setConstraints ${e} - ignored, no current browser`
                  );
              }
              setConstraint(e, t, n) {
                if (
                  (null != n
                    ? r.ac_log(
                        `AC: setConstraint ${e} ${t}=${JSON.stringify(n)}`
                      )
                    : r.ac_log(`AC: setConstraint remove ${e} ${t}`),
                  "audio" !== e && "video" !== e)
                )
                  throw new TypeError(`Wrong type: ${e}`);
                null != n
                  ? (!0 === this.constraints[e] && (this.constraints[e] = {}),
                    (this.constraints[e][t] = n))
                  : !0 !== this.constraints[e] &&
                    !1 !== this.constraints[e] &&
                    (delete this.constraints[e][t],
                    0 === Object.keys(this.constraints[e]).length &&
                      (this.constraints[e] = !0));
              }
              setBrowsersConstraints(e) {
                let t = this.browser,
                  n = this.browser + "|" + this.os;
                for (let i in e) {
                  if (i !== t && i !== n) continue;
                  let r = e[i];
                  void 0 !== r.audio &&
                    this.setConstraints(i, "audio", r.audio),
                    void 0 !== r.video &&
                      this.setConstraints(i, "video", r.video);
                }
              }
              setCodecFilter(e) {
                e &&
                  (r.ac_log(`AC: setCodecFilter ${JSON.stringify(e)}`),
                  (this.codecFilter = this._cf_unpack(e)));
              }
              setServerConfig(e, t, n = []) {
                (this.serverConfig = {
                  addresses: e,
                  domain: t,
                  iceServers: this._convertIceList(n),
                }),
                  r.ac_log(
                    `AC: setServerConfig() ${JSON.stringify(this.serverConfig)}`
                  );
              }
              setReconnectIntervals(e, t) {
                r.ac_log(`AC: setReconnectIntervals min=${e} max=${t}`),
                  (this.reconnectMin = e),
                  (this.reconnectMax = t);
              }
              setAccount(e, t, n, i) {
                (null != t && 0 !== t.length) || (t = void 0),
                  (null != i && 0 !== i.length) || (i = e);
                let r = this.account;
                (r.user = e),
                  (r.displayName = t),
                  (r.password = n),
                  (r.authUser = i);
              }
              setRegisterExpires(e) {
                r.ac_log(`AC: setRegisterExpires=${e}`),
                  (this.account.registerExpires = e);
              }
              setUseSessionTimer(e) {
                r.ac_log(`AC: setUseSessionTimer=${e}`),
                  (this.account.useSessionTimer = e);
              }
              setDtmfOptions(e, t = null, n = null) {
                r.ac_log(
                  `AC: setDtmfOptions useWebRTC=${e} duration=${t} interToneGap=${n}`
                ),
                  (this.dtmfUseWebRTC = e),
                  null !== t && (this.dtmfDuration = t),
                  null !== n && (this.dtmfInterToneGap = n);
              }
              setEnableAddVideo(e) {
                r.ac_log(`AC: setEnableAddVideo=${e}`),
                  (this.enableAddVideo = e);
              }
              getEnableAddVideo() {
                return this.enableAddVideo;
              }
              getAccount() {
                return this.account;
              }
              setListeners(e) {
                r.ac_log("AC: setListeners()");
                for (let t of [
                  "loginStateChanged",
                  "outgoingCallProgress",
                  "callTerminated",
                  "callConfirmed",
                  "callShowStreams",
                  "incomingCall",
                  "callHoldStateChanged",
                ])
                  if (!(t in e)) throw new Error(`${t} listener is missed`);
                this.listeners = e;
              }
              static getSessionStatusName(e) {
                switch (e) {
                  case 0:
                    return "NULL (0)";
                  case 1:
                    return "INVITE_SENT (1)";
                  case 2:
                    return "1XX_RECEIVED (2)";
                  case 3:
                    return "INVITE_RECEIVED (3)";
                  case 4:
                    return "WAITING_FOR_ANSWER (4)";
                  case 5:
                    return "ANSWERED (5)";
                  case 6:
                    return "WAITING_FOR_ACK (6)";
                  case 7:
                    return "CANCELED (7)";
                  case 8:
                    return "TERMINATED (8)";
                  case 9:
                    return "CONFIRMED (9)";
                  default:
                    return "Unknown (" + e + ")";
                }
              }
              setAcLogger(e) {
                r.ac_log = e;
              }
              setJsSipLogger(e) {
                r.js_log = e;
              }
              isInitialized() {
                return this._isInitialized;
              }
              setModes(e = {}) {
                r.ac_log(`AC: setModes() ${JSON.stringify(e)}`),
                  Object.assign(this.modes, e),
                  this._normalizeModes();
              }
              _normalizeModes() {
                function e(e, t) {
                  return "number" == typeof e && e <= t ? void 0 : e;
                }
                let t = this.modes;
                (t.sbc_ha_pairs_mode = e(t.sbc_ha_pairs_mode, 0)),
                  (t.chrome_rtp_timeout_fix = e(t.chrome_rtp_timeout_fix, 0));
              }
              init(e = !0) {
                if (
                  (r.ac_log(`AC: init() autoLogin=${e}`), this._isInitialized)
                )
                  return;
                (this._isInitialized = !0),
                  i.debug.enable("JsSIP:*"),
                  (i.debug.formatArgs = function () {
                    r.js_log && (this.log = r.js_log);
                  });
                let t = [];
                for (let e of this.serverConfig.addresses)
                  e instanceof Array
                    ? t.push({
                        socket: new i.WebSocketInterface(e[0]),
                        weight: e[1],
                      })
                    : t.push(new i.WebSocketInterface(e));
                let n = {
                  sockets: t,
                  uri:
                    "sip:" +
                    this.account.displayName +
                    "@" +
                    this.serverConfig.domain,
                  contact_uri:
                    "sip:" +
                    this.account.user +
                    "@" +
                    this._randomToken(12) +
                    ".invalid;transport=ws",
                  authorization_user: this.account.authUser,
                  password: this.account.password,
                  register: e,
                  session_timers: this.account.useSessionTimer,
                  register_expires: this.account.registerExpires,
                  user_agent: this.u17,
                  connection_recovery_min_interval: this.reconnectMin,
                  connection_recovery_max_interval: this.reconnectMax,
                };
                this.account.displayName &&
                  this.account.displayName.length > 0 &&
                  (n.display_name = this.account.displayName),
                  (this.jssipUA = new i.UA(n)),
                  this.setRegisterExtraHeaders(this.registerExtraHeaders),
                  this._setUACallbacks(),
                  r.ac_log(
                    `AC: applied SDK modes: ${JSON.stringify(
                      this.modes,
                      (e, t) => (void 0 === t ? "<undefined>" : t)
                    )}`
                  ),
                  (this.jssipUA.modes = this.modes);
                for (let e of this.credentials) this.jssipUA.addCredential(e);
                (this.credentials = []), this.jssipUA.start();
              }
              deinit() {
                (this._isInitialized = !1),
                  (this.oauthToken = null),
                  (this.registerExtraHeaders = null),
                  this.jssipUA && this.jssipUA.stop();
              }
              setRegisterExtraHeaders(e) {
                if (((this.registerExtraHeaders = e), this.jssipUA)) {
                  let t = null !== e ? e : [];
                  null !== this.oauthToken &&
                    ((t = t.slice()),
                    t.push(`Authorization: Bearer ${this.oauthToken}`)),
                    this.jssipUA.registrator().setExtraHeaders(t);
                }
              }
              getRegisterExtraHeaders() {
                return this.registerExtraHeaders;
              }
              login() {
                r.ac_log("AC: login()"), this.jssipUA.register();
              }
              logout() {
                r.ac_log("AC: logout()"),
                  this.jssipUA.isRegistered() && this.jssipUA.unregister();
              }
              switchSBC(e = !0) {
                return r.ac_log("AC: switchSBC()"), this.jssipUA.switchSBC(e);
              }
              getNumberOfSBC() {
                return this.jssipUA.getNumberOfSBC();
              }
              setWebSocketKeepAlive(e, t = !0, n = !0, i = 0, s = !1) {
                if (
                  (r.ac_log(
                    `AC: setWebSocketKeepAlive pingInterval=${e} pongTimeout=${t} timerThrottlingBestEffort=${JSON.stringify(
                      n
                    )} pongReport=${i} pongDist=${s}`
                  ),
                  "number" != typeof e || "boolean" != typeof t)
                )
                  throw new TypeError(
                    "setWebSocketKeepAlive: wrong type of first or second argument"
                  );
                let o;
                (this.wsPingMs = this.wsOrigPingMs = 1e3 * e),
                  (this.wsPongTimeout = t),
                  (this.wsPongReport = i),
                  (this.wsPongDist = s),
                  (this.wsPongReportCounter = 0),
                  (this.wsIsThrottling = !1),
                  (o =
                    !0 === n
                      ? {
                          log: 0,
                          chrome: {
                            interval: 1,
                            visibility: !0,
                            call: !0,
                            log: 1,
                          },
                        }
                      : !1 === n
                      ? { log: 0 }
                      : n);
                let l = o[this.browser];
                (this.wsThrottlingPingMs =
                  l && void 0 !== l.interval ? 1e3 * l.interval : 0),
                  (this.wsVisibility =
                    !(!l || void 0 === l.visibility) && l.visibility),
                  (this.wsCall = !(!l || void 0 === l.call) && l.call),
                  (this.wsLog = l && void 0 !== l.log ? l.log : o.log),
                  (this.wsPongDelays = new Array(
                    this.wsPongReport > 0 ? this.wsPongReport : 50
                  )),
                  (this.wsPongDelaysIx = 0),
                  0 !== this.wsOrigPingMs &&
                    0 !== this.wsThrottlingPingMs &&
                    this.wsVisibility &&
                    document.addEventListener(
                      "visibilitychange",
                      this._onVisibilityChange.bind(this)
                    );
              }
              _pingLog() {
                return ` (ping=${this.wsPingMs / 1e3} sec)`;
              }
              _visibilityLog(e) {
                let t =
                  "AC: keep-alive: Page is " +
                  (document.hidden ? "hidden" : "visible");
                document.hidden &&
                  (this.wsCall &&
                    (t +=
                      ", " +
                      (0 === this.activeCalls
                        ? "no active call"
                        : "active call")),
                  (t +=
                    " and " +
                    (this.wsIsThrottling ? "was" : "was not") +
                    " trottling")),
                  e && (t += this._pingLog()),
                  r.ac_log(t);
              }
              _activeCallsLog(e) {
                let t =
                  "AC: keep-alive: " +
                  (0 === this.activeCalls ? "Call ended" : "Call started");
                0 === this.activeCalls &&
                  (this.wsVisibility &&
                    (t +=
                      ", page is " + (document.hidden ? "hidden" : "visible")),
                  (t +=
                    " and " +
                    (this.wsIsThrottling ? "was" : "was not") +
                    " trottling")),
                  e && (t += this._pingLog()),
                  r.ac_log(t);
              }
              _onActiveCallsChange(e) {
                if (
                  ((this.activeCalls += e),
                  this.wsCall &&
                    0 !== this.wsPingMs &&
                    0 !== this.wsThrottlingPingMs)
                )
                  if (
                    (this.activeCalls < 0 &&
                      r.ac_log("Warning: keep-alive: activeCalls < 0"),
                    0 === this.activeCalls)
                  ) {
                    if (
                      (!this.wsVisibility || document.hidden) &&
                      this.wsIsThrottling &&
                      this.wsPingMs < this.wsThrottlingPingMs
                    )
                      return (
                        (this.wsPingMs = this.wsThrottlingPingMs),
                        void this._activeCallsLog(!0)
                      );
                    this.wsLog >= 2 && this._activeCallsLog(!1);
                  } else if (1 === this.activeCalls && e > 0) {
                    if (this.wsPingMs > this.wsOrigPingMs)
                      return (
                        (this.wsPingMs = this.wsOrigPingMs),
                        void this._activeCallsLog(!0)
                      );
                    this.wsLog >= 2 && this._activeCallsLog(!1);
                  }
              }
              _onVisibilityChange() {
                if (
                  this.wsVisibility &&
                  0 !== this.wsPingMs &&
                  0 !== this.wsThrottlingPingMs
                )
                  if (document.hidden) {
                    if (
                      this.wsCall &&
                      0 === this.activeCalls &&
                      this.wsIsThrottling &&
                      this.wsPingMs < this.wsThrottlingPingMs
                    )
                      return (
                        (this.wsPingMs = this.wsThrottlingPingMs),
                        void this._visibilityLog(!0)
                      );
                    this.wsLog >= 2 && this._visibilityLog(!1);
                  } else {
                    if (this.wsPingMs > this.wsOrigPingMs)
                      return (
                        (this.wsPingMs = this.wsOrigPingMs),
                        void this._visibilityLog(!0)
                      );
                    this.wsLog >= 2 && this._visibilityLog(!1);
                  }
              }
              _onMessageHook(e) {
                "\r\n" === e.data ? this._onPong() : this.wsOnMessage(e);
              }
              _onPong() {
                if (!this.wsPingStarted) return;
                let e;
                (this.wsPongReceived = !0),
                  null === this.wsPongSupported &&
                    (r.ac_log("AC: keep-alive: Server supports CRLF pong"),
                    (this.wsPongSupported = !0)),
                  null !== this.wsPongTimeoutTime
                    ? ((e = Date.now() - this.wsPongTimeoutTime),
                      (this.wsPongTimeoutTime = null),
                      r.ac_log(
                        `AC: keep-alive: Received pong that exceeded the timeout, delay=${e}`
                      ))
                    : (e = Date.now() - this.wsPingTime);
                let t = this.wsPingMs - e;
                t < 0 &&
                  (r.ac_log(
                    `AC: nextPing calculated to ${t}ms, so resetting to 0ms.`
                  ),
                  (t = 0)),
                  null !== this.wsPingJob && clearTimeout(this.wsPingJob),
                  (this.wsPingJob = setTimeout(this._sendPing.bind(this), t)),
                  (this.wsPongDelays[this.wsPongDelaysIx] = e),
                  (this.wsPongDelaysIx = this.wsPongDelaysIx + 1),
                  this.wsPongDelaysIx === this.wsPongDelays.length &&
                    (this.wsPongDelaysIx = 0),
                  this.wsPongReport > 0 && this.wsPongReportCounter++;
              }
              _onPongTimeout(e) {
                if (
                  (r.ac_log(
                    `AC: keep-alive: Pong timeout (not received within ${
                      e / 1e3
                    } seconds)`
                  ),
                  r.ac_log(
                    `AC: keep-alive: Previous pongs statistics: ${this._createPongReport(
                      !0
                    )}`
                  ),
                  this.wsPongTimeout)
                ) {
                  r.ac_log("AC: keep-alive: Close websocket connection"),
                    this._stopWsKeepAlive();
                  let e = this.wsSocket;
                  (e.onopen = void 0),
                    (e.onerror = void 0),
                    (e.onclose = void 0),
                    (e.onmessage = void 0),
                    setTimeout(() => {
                      try {
                        e.close();
                      } catch (e) {
                        r.ac_log("AC: Close websocket error", e);
                      }
                    }, 0),
                    (this.wsWebSocketInterface._ws = null),
                    this.wsWebSocketInterface._onClose.call(
                      this.wsWebSocketInterface,
                      { wasClean: !1, code: 1001, reason: "Going Away" }
                    );
                } else
                  r.ac_log(
                    "AC: keep-alive: Warning: websocket is not closed, because pongTimeout=false"
                  );
              }
              _sendPing() {
                try {
                  let e = Date.now();
                  if (null !== this.wsPingTime) {
                    let t = e - this.wsNextPingTime;
                    this.wsLog >= 3 &&
                      r.ac_log(`AC: keep-alive: timer deviation (ms): ${t}`);
                    let n = this.wsPingMs;
                    if (
                      (Math.abs(t) >= 1e4 &&
                        ((this.wsLog > 0 || !this.wsIsThrottling) &&
                          (r.ac_log(
                            `AC: keep-alive detected timer throttling: ${Math.round(
                              t / 1e3
                            )} seconds ${t > 0 ? "later" : "earlier"}`
                          ),
                          0 === this.wsLog &&
                            r.ac_log(
                              "AC: keep-alive: The next timer throttling will not be shown in the logs, because log==0"
                            )),
                        (this.wsIsThrottling = !0),
                        this.wsPingMs < this.wsThrottlingPingMs &&
                          ((this.wsPingMs = this.wsThrottlingPingMs),
                          r.ac_log(
                            `AC: keep-alive: ping interval increased ${this._pingLog()}`
                          ))),
                      null !== this.wsPongSupported ||
                        this.wsPongReceived ||
                        (r.ac_log(
                          "AC: keep-alive: Server does not support CRLF pong."
                        ),
                        (this.wsPongSupported = !1)),
                      this.wsPongSupported &&
                        !this.wsPongReceived &&
                        null === this.wsPongTimeoutTime)
                    ) {
                      if ((this._onPongTimeout(n), this.wsPongTimeout)) return;
                      this.wsPongTimeoutTime = this.wsPingTime;
                    }
                  }
                  (this.wsPingTime = e),
                    (this.wsNextPingTime = this.wsPingTime + this.wsPingMs),
                    (this.wsPongReceived = !1),
                    this.wsSocket.readyState === WebSocket.OPEN
                      ? (this.wsIsPingDebugLog && r.ac_log("AC: send ping"),
                        this.wsSocket.send("\r\n\r\n"))
                      : r.ac_log(
                          `AC: keep-alive: Warning: Cannot send Ping, websocket state=${this.wsSocket.readyState}`
                        ),
                    (this.wsPingJob = setTimeout(
                      this._sendPing.bind(this),
                      this.wsPingMs
                    )),
                    this.wsPongReport > 0 &&
                      this.wsPongReportCounter >= this.wsPongReport &&
                      ((this.wsPongReportCounter = 0),
                      r.ac_log(
                        `AC: keep-alive: Pong statistics: ${this._createPongReport(
                          this.wsPongDist
                        )}`
                      ));
                } catch (e) {
                  r.ac_log("AC: keep-alive: send ping error", e);
                }
              }
              _startWsKeepAlive() {
                let e = this.jssipUA._transport;
                (this.wsWebSocketInterface = e.socket),
                  (this.wsSocket = this.wsWebSocketInterface._ws),
                  0 !== this.wsPingMs &&
                    ((this.wsOnMessage = this.wsSocket.onmessage),
                    (this.wsSocket.onmessage = this._onMessageHook.bind(this)),
                    this._stopWsKeepAlive(),
                    (this.wsPingTime = null),
                    (this.wsPingStarted = !0),
                    (this.wsPongSupported = null),
                    (this.wsPingJob = setTimeout(
                      this._sendPing.bind(this),
                      this.wsPingMs
                    )));
              }
              _stopWsKeepAlive() {
                (this.wsPingStarted = !1),
                  null !== this.wsPingJob &&
                    (clearTimeout(this.wsPingJob), (this.wsPingJob = null));
              }
              _createPongReport(e) {
                let t,
                  n = "",
                  i = !1,
                  r = 1e6,
                  s = 0;
                e && (t = new Array((this.wsPingMs / 1e3) * 4).fill(0));
                let o = 0;
                for (let n = 0; n < this.wsPongDelays.length; n++) {
                  let l = this.wsPongDelays[n];
                  if (
                    void 0 !== l &&
                    (o++, l < r && (r = l), l > s && (s = l), e)
                  ) {
                    let e = Math.floor(l / 250);
                    e >= t.length && ((e = t.length - 1), (i = !0)), t[e]++;
                  }
                }
                if (e) {
                  n = "\r\npongs distribution (1/4 second step): ";
                  for (let e = 0; e < t.length; e++)
                    (n += t[e].toString()),
                      e !== t.length - 1 && (n += (e + 1) % 4 == 0 ? "," : " ");
                  i && (n += " (+)");
                }
                return `pongs=${o} delay=${r}..${s} ms${n}`;
              }
              setPingDebugLog(e) {
                this.wsIsPingDebugLog = e;
              }
              _setUACallbacks() {
                this.jssipUA.on("connecting", () => {
                  r.ac_log("AC>>: connecting"),
                    this.listeners.loginStateChanged(!1, "connecting", null);
                }),
                  this.jssipUA.on("connected", () => {
                    r.ac_log(
                      'AC>>: loginStateChanged: isLogin=false "connected"'
                    ),
                      this._startWsKeepAlive(),
                      this.listeners.loginStateChanged(!1, "connected", null);
                  }),
                  this.jssipUA.on("disconnected", () => {
                    this._stopWsKeepAlive(),
                      r.ac_log(
                        'AC>>: loginStateChanged: isLogin=false "disconnected"'
                      ),
                      this.listeners.loginStateChanged(
                        !1,
                        "disconnected",
                        null
                      );
                  }),
                  this.jssipUA.on("registered", (e) => {
                    r.ac_log('AC>>: loginStateChanged: isLogin=true "login"'),
                      this.listeners.loginStateChanged(!0, "login", e.response);
                  }),
                  this.jssipUA.on("unregistered", (e) => {
                    r.ac_log('AC>>: loginStateChanged: isLogin=false "logout"'),
                      this.listeners.loginStateChanged(
                        !1,
                        "logout",
                        e.response
                      );
                  }),
                  this.jssipUA.on("registrationFailed", (e) => {
                    let t = e.response ? e.response.status_code : 0;
                    if (t >= 300 && t < 400) {
                      let t = e.response.parseHeader("contact");
                      if (t) {
                        let e = t.uri,
                          n = "wss://" + e.host;
                        if (
                          (e.port &&
                            443 !== e.port &&
                            (n += ":" + e.port.toString()),
                          r.ac_log(`AC: registerRedirect("${n}")`),
                          this.jssipUA.registerRedirect(n))
                        )
                          return;
                      } else
                        r.ac_log(
                          'AC: 3xx response without "Contact" is ignored'
                        );
                    } else if (
                      t >= 500 &&
                      t < 600 &&
                      r.instance.modes.sbc_switch_register5xx_mode &&
                      r.instance.switchSBC(!1)
                    )
                      return;
                    r.ac_log(
                      'AC>>: loginStateChanged: isLogin=false "login failed"'
                    ),
                      this.listeners.loginStateChanged(
                        !1,
                        "login failed",
                        e.response ? e.response : null
                      );
                  }),
                  this.listeners.incomingMessage &&
                    this.jssipUA.on("newMessage", (e) => {
                      "remote" === e.originator &&
                        (r.ac_log("AC>>: incomingMessage", e),
                        this.listeners.incomingMessage(
                          null,
                          r.instance._get_from(e.request),
                          r.instance._get_content_type(e.request),
                          e.request.body,
                          e.request
                        ));
                    }),
                  this.listeners.incomingNotify &&
                    this.jssipUA.on("sipEvent", (e) => {
                      r.ac_log("AC>>: incoming out of dialog NOTIFY", e),
                        this.listeners.incomingNotify(
                          null,
                          e.event ? e.event.event : null,
                          r.instance._get_from(e.request),
                          r.instance._get_content_type(e.request),
                          e.request.body,
                          e.request
                        ) || e.request.reply(481);
                    }),
                  this.listeners.incomingSubscribe &&
                    this.jssipUA.on("newSubscribe", (e) => {
                      let t = e.request,
                        n = t.parseHeader("event"),
                        i = t.getHeaders("accept");
                      r.ac_log("AC>>: incomingSubscribe", t, n.event, i);
                      let s = this.listeners.incomingSubscribe(t, n.event, i);
                      s > 0 && t.reply(s);
                    }),
                  this.jssipUA.on("newRTCSession", (e) => {
                    r.ac_log(
                      `AC: event ${
                        "remote" === e.originator ? "incoming" : "outgoing"
                      } "newRTCSession"`,
                      e
                    );
                    let t,
                      n = new s(e.session);
                    if (
                      (n.js_session.on("sipEvent", function (e) {
                        if (!r.instance.listeners.incomingNotify) return;
                        let t = this.data.ac_session;
                        r.ac_log("AC>>: incoming NOTIFY", t, e),
                          (e.taken = r.instance.listeners.incomingNotify(
                            t,
                            e.event ? e.event.event : null,
                            r.instance._get_from(e.request),
                            r.instance._get_content_type(e.request),
                            e.request.body,
                            e.request
                          ));
                      }),
                      n.js_session.on("newInfo", function (e) {
                        if (!r.instance.listeners.incomingInfo) return;
                        if ("local" === e.originator) return;
                        let t = this.data.ac_session;
                        r.ac_log("AC>>: incoming INFO", t, e),
                          r.instance.listeners.incomingInfo(
                            t,
                            r.instance._get_from(e.request),
                            r.instance._get_content_type(e.request),
                            e.request.body,
                            e.request
                          );
                      }),
                      n.js_session.on("replaces", function (e) {
                        (r.instance.replacedCall = this.data.ac_session),
                          r.ac_log(
                            "AC>>: incoming INVITE with Replaces. This call will be replaced:",
                            this.data.ac_session
                          ),
                          e.accept();
                      }),
                      n.js_session.on("sdp", function (e) {
                        r.instance._sdp_checking(this, e);
                      }),
                      n.js_session.on("connecting", function (e) {
                        r.ac_log("AC>>: connecting");
                        let t = r.instance.codecFilter;
                        t &&
                          (r.instance._cf_filter(
                            "audio",
                            this.data.ac_session,
                            t.audio
                          ),
                          r.instance._cf_filter(
                            "video",
                            this.data.ac_session,
                            t.video
                          ));
                      }),
                      n.js_session.on("reinvite", function (e) {
                        if (!r.instance.listeners.callIncomingReinvite) return;
                        let t = this.data.ac_session;
                        r.ac_log("AC>>: callIncomingReinvite start"),
                          r.instance.listeners.callIncomingReinvite(
                            t,
                            !0,
                            e.request
                          ),
                          (e.callback = function () {
                            r.ac_log("AC>>: callIncomingIncomingReinvite end"),
                              r.instance.listeners.callIncomingReinvite(
                                t,
                                !1,
                                null
                              );
                          });
                      }),
                      n.js_session.on("hold", function (e) {
                        let t = this.data.ac_session,
                          n = "remote" === e.originator;
                        r.ac_log(
                          `AC>>: callHoldStateChanged isHold=true isRemote=${n} session:`,
                          t
                        ),
                          r.instance.listeners.callHoldStateChanged(t, !0, n);
                      }),
                      n.js_session.on("unhold", function (e) {
                        let t = this.data.ac_session,
                          n = "remote" === e.originator;
                        r.ac_log(
                          `AC>>: callHoldStateChanged isHold=false isRemote=${n} session:`,
                          t
                        ),
                          r.instance.listeners.callHoldStateChanged(t, !1, n);
                      }),
                      n.js_session.on("progress", function (e) {
                        if ("remote" === e.originator) {
                          let t = this.data.ac_session;
                          r.ac_log("AC>>: outgoingCallProgress", t),
                            r.instance.listeners.outgoingCallProgress(
                              t,
                              e.response
                            );
                        }
                      }),
                      n.js_session.on("failed", function (e) {
                        let t = this.data.ac_session,
                          n = null;
                        if (
                          "Redirected" === e.cause &&
                          e.message &&
                          e.message.headers
                        ) {
                          let t = e.message.parseHeader("Contact");
                          t && (n = t.uri.toString());
                        }
                        r.ac_log(
                          "AC>>: callTerminated (failed)",
                          t,
                          e.cause,
                          n
                        ),
                          r.instance.listeners.callTerminated(
                            t,
                            e.message,
                            e.cause,
                            n
                          );
                      }),
                      n.js_session.on("accepted", function (e) {
                        let t = this.data.ac_session;
                        (t.data._accepted = !0),
                          "remote" === e.originator &&
                            (t.data._ok_response = e.response);
                      }),
                      "remote" === e.originator &&
                        null !== r.instance.replacedCall &&
                        n.js_session.removeAllListeners("confirmed"),
                      n.js_session.on("confirmed", function () {
                        let e,
                          t = this.data.ac_session,
                          i = null;
                        "_ok_response" in t.data
                          ? ((i = t.data._ok_response),
                            delete t.data._ok_response,
                            (e = "ACK sent"))
                          : (e = "ACK received"),
                          n.data._video_call_audio_answer_firefox &&
                            ((n.data._video_call_audio_answer_firefox = !1),
                            r.ac_log(
                              "AC: [video call/audio answer] Firefox workaround. Send re-INVITE"
                            ),
                            n.sendReInvite({ showStreams: !0 })),
                          r.ac_log("AC>>: callConfirmed", t, e),
                          r.instance._onActiveCallsChange.call(r.instance, 1),
                          r.instance.listeners.callConfirmed(t, i, e);
                      }),
                      n.js_session.on("ended", function (e) {
                        let t = this.data.ac_session;
                        t.data._screenSharing &&
                          t._onEndedScreenSharing.call(t, "call terminated"),
                          r.ac_log("AC>>: callTerminated (ended)", t, e.cause),
                          r.instance._onActiveCallsChange.call(r.instance, -1),
                          r.instance.listeners.callTerminated(
                            t,
                            e.message,
                            e.cause
                          );
                      }),
                      n.js_session.on("refer", function (e) {
                        if (r.instance.listeners.transfereeCreatedCall) {
                          let t,
                            n = this.data.ac_session;
                          if (
                            ((t =
                              !r.instance.listeners.transfereeRefer ||
                              r.instance.listeners.transfereeRefer(
                                n,
                                e.request
                              )),
                            t)
                          ) {
                            let t;
                            r.ac_log("AC>>: incoming REFER accepted"),
                              (t = n.isScreenSharing()
                                ? n.doesScreenSharingReplaceCamera()
                                : n.hasSendVideo());
                            let i = r.instance._callOptions(t, !0);
                            e.accept((e) => {
                              e.data._created_by_refer = n;
                            }, i);
                          } else
                            r.ac_log("AC>>: incoming REFER rejected"),
                              e.reject();
                        } else r.ac_log("AC>>: incoming REFER rejected, because transfereeCreatedCall is not set"), e.reject();
                      }),
                      n._setEnabledReceiveVideo(r.instance.enableAddVideo),
                      n.js_session.connection
                        ? (r.instance._set_connection_listener(n),
                          r.ac_log(
                            'AC: connection exists, set "track" listener'
                          ))
                        : (r.ac_log(
                            "AC: peer connection does not exist, wait creation"
                          ),
                          n.js_session.on("peerconnection", () => {
                            r.instance._set_connection_listener(n),
                              r.ac_log(
                                'AC: [event connection] connection created, set "track" listener'
                              );
                          })),
                      (t =
                        "remote" === e.originator
                          ? e.request.from
                          : e.request.to),
                      (n.data._user = t.uri.user),
                      (n.data._host = t.uri.host),
                      (n.data._display_name = t.display_name),
                      (n.data._create_time = new Date()),
                      "remote" === e.originator)
                    ) {
                      let t,
                        i,
                        s,
                        l = null;
                      if (
                        (null !== r.instance.replacedCall &&
                          ((l = r.instance.replacedCall),
                          (r.instance.replacedCall = null)),
                        e.request.body)
                      ) {
                        s = !0;
                        let n = new o(e.request.body);
                        [t, i] = n.getMediaDirection("video", !0);
                      } else
                        (s = !1),
                          (n.data._incoming_invite_without_sdp = !0),
                          (t = i = !0),
                          r.ac_log("AC: warning incoming INVITE without SDP");
                      n._setVideoState(t, i),
                        r.ac_log(
                          `AC>>: incomingCall ${
                            n.hasVideo() ? "video" : "audio"
                          } from "${n.data._display_name}" ${n.data._user}`,
                          n,
                          l
                        ),
                        r.instance.listeners.incomingCall(n, e.request, l, s);
                    } else
                      n.js_session.data._created_by_refer
                        ? (r.ac_log("AC>>: outgoing call created by REFER"),
                          (n.data._created_by_refer =
                            n.js_session.data._created_by_refer),
                          r.instance.listeners.transfereeCreatedCall(n))
                        : r.ac_log(
                            "AC>>: outgoing call created by phone.call()"
                          );
                  });
              }
              _get_from(e) {
                return {
                  user: e.from.uri.user,
                  host: e.from.uri.host,
                  displayName: e.from.display_name ? e.from.display_name : null,
                };
              }
              _get_content_type(e) {
                let t = e.headers["Content-Type"];
                return t && t.length > 0 ? t[0].parsed : null;
              }
              _set_connection_listener(e) {
                r.instance
                  .getWR()
                  .connection.addEventListener(
                    e.js_session.connection,
                    "track",
                    (t) => {
                      if (
                        (r.ac_log(
                          `AC>>: "track" event kind= ${t.track.kind}`,
                          t
                        ),
                        t.streams.length > 0)
                      ) {
                        let n = t.streams[0];
                        r.ac_log(`AC: set call remote stream id=${n.id}`, e),
                          (e.data._remoteMediaStream = n);
                      } else
                        r.ac_log('AC: Warning "track" event without stream');
                      if ("video" === t.track.kind) {
                        if (!e.hasEnabledReceiveVideo()) {
                          e.data._video_call_audio_answer_safari &&
                            ((t.track.onmute = () => {
                              r.ac_log(
                                'AC: [video call/audio answer] Safari fix. Fired video track "mute" event.  Call callShowStream'
                              ),
                                (t.track.onmute = null);
                              let n = e.getRTCLocalStream(),
                                i = e.getRTCRemoteStream();
                              r.ac_log("AC>>: callShowStreams", e, n, i),
                                r.instance.listeners.callShowStreams(e, n, i);
                            }),
                            r.ac_log(
                              'AC: [video call/audio answer] Safari fix. Set video track "mute" event listener'
                            ),
                            (e.data._video_call_audio_answer_safari = !1)),
                            r.ac_log(
                              'AC>>: event "track" video and !hasEnabledReceiveVideo therefore change transceiver direction.',
                              e
                            );
                          let n = r.instance
                            .getWR()
                            .connection.getTransceiver(
                              e.js_session.connection,
                              "video"
                            );
                          if (null !== n) {
                            let t = e.hasEnabledSendVideo()
                              ? "sendonly"
                              : "inactive";
                            r.instance.getWR().transceiver.setDirection(n, t);
                          }
                        }
                        return void (
                          r.instance.codecFilter &&
                          r.instance._cf_filter(
                            "video",
                            e,
                            r.instance.codecFilter.video
                          )
                        );
                      }
                      let n = e.getRTCLocalStream(),
                        i = e.getRTCRemoteStream();
                      r.ac_log("AC>>: callShowStreams", e, n, i),
                        r.instance.listeners.callShowStreams(e, n, i);
                    }
                  );
              }
              _check_remote_sdp(e, t) {
                try {
                  t.codec_map || (t.codec_map = {});
                  let n = e.getMedia("audio");
                  r.instance._check_remote_m(n, t.codec_map);
                  let i = e.getMedia("video");
                  i && r.instance._check_remote_m(i, t.codec_map);
                } catch (e) {
                  r.ac_log("AC:SDP exception", e);
                }
              }
              _check_remote_m(e, t) {
                let n = {};
                function i(e, t) {
                  let n = t.indexOf(" ", e);
                  return -1 === n
                    ? ["?", "?"]
                    : [t.substring(e, n), t.substring(n + 1).toLowerCase()];
                }
                for (let t of e)
                  if (t.startsWith("a=rtpmap:")) {
                    let [e, r] = i(9, t);
                    n[e] || (n[e] = {}), (n[e].rtpmap = r);
                  } else if (t.startsWith("a=fmtp:")) {
                    let [e, r] = i(7, t);
                    n[e] || (n[e] = {}), (n[e].fmtp = r);
                  }
                for (let e of Object.keys(n))
                  if (t[e])
                    n[e].rtpmap === t[e].rtpmap
                      ? n[e].fmtp !== t[e].fmtp &&
                        r.ac_log(
                          `AC:SDP [The same payload type and codec name, different fmtp] pt=${e} rtpmap=${n[e].rtpmap} fmtp=${n[e].fmtp}, previously was fmtp=${t[e].fmtp}`
                        )
                      : (parseInt(e) >= 64 || (n[e].rtpmap && t[e].rtpmap)) &&
                        r.ac_log(
                          `AC:SDP [The same payload type, different codec names] pt=${e} rtpmap=${n[e].rtpmap}, previously was rtpmap=${t[e].rtpmap}`
                        );
                  else {
                    let i,
                      s = n[e];
                    for (let [e, n] of Object.entries(t))
                      if (s.rtpmap === n.rtpmap && s.fmtp === n.fmtp) {
                        i = e;
                        break;
                      }
                    if (i) {
                      let n = t[i];
                      s.fmtp || n.fmtp
                        ? r.ac_log(
                            `AC:SDP [The same codec name used with different payload types] pt=${e} rtpmap=${s.rtpmap} fmtp=${s.fmtp}, previously was pt=${i} rtpmap=${n.rtpmap} fmtp=${n.fmtp}`
                          )
                        : r.ac_log(
                            `AC:SDP [The same codec name used with different payload types] pt=${e} rtpmap=${s.rtpmap}, previously was pt=${i} rtpmap=${n.rtpmap}`
                          );
                    } else t[e] = s;
                  }
              }
              _sdp_checking(e, t) {
                let n,
                  i,
                  s,
                  l = t.originator + " " + t.type,
                  a = e.data.ac_session;
                try {
                  (n = new o(t.sdp)),
                    ([i, s] = n.getMediaDirection(
                      "video",
                      "remote" === t.originator
                    ));
                } catch (t) {
                  return void r.ac_log("AC: cannot parse SDP", t);
                }
                let u = a.data._initial;
                switch (
                  ("answer" === t.type && (a.data._initial = !1),
                  r.ac_log(
                    `AC: Event "sdp" ${
                      u ? "initial" : ""
                    } ${l}   Session state:${r.getSessionStatusName(e._status)}`
                  ),
                  l)
                ) {
                  case "remote offer":
                    r.instance.modes.check_remote_sdp_mode &&
                      r.instance._check_remote_sdp(n, e.data);
                    break;
                  case "remote answer":
                    if (
                      (r.instance.modes.check_remote_sdp_mode &&
                        r.instance._check_remote_sdp(n, e.data),
                      a.isLocalHold() || a.isRemoteHold())
                    )
                      break;
                    a._setVideoState(i, s);
                    break;
                  case "local offer":
                    r.instance.networkPriority &&
                      r.instance._set_senders_dscp(e);
                    break;
                  case "local answer":
                    if (a.isLocalHold() || a.isRemoteHold()) break;
                    r.instance.networkPriority &&
                      r.instance._set_senders_dscp(e),
                      a._setVideoState(i, s);
                }
              }
              _set_senders_dscp(e) {
                if ("chrome" !== r.instance.browser) return;
                r.ac_log("AC: _set_senders_dscp()");
                let t = r.instance.networkPriority;
                r.instance._set_dscp(e, "audio", t),
                  r.instance._set_dscp(e, "video", t);
              }
              _set_dscp(e, t, n) {
                let i = e.connection,
                  s = r.instance.getWR().connection.getTransceiver(i, t);
                return s || "video" !== t
                  ? Promise.resolve()
                      .then(() => {
                        let e = s.sender.getParameters();
                        if (!e)
                          throw new Error(
                            "sender getParameters() returns undefined"
                          );
                        let i = e.encodings;
                        if (!i)
                          throw new Error("parameters encodings is undefined");
                        if (0 === i.length)
                          throw new Error(
                            "parameters encodings is empty array"
                          );
                        let o = i[0].networkPriority;
                        if (!o)
                          throw new Error(
                            "parameters encodings networkPriority is undefined"
                          );
                        return (
                          o === n ||
                          ((i[0].networkPriority = n),
                          s.sender
                            .setParameters(e)
                            .then(
                              () => (r.ac_log(`AC: DSCP: ${t} "${n}"`), !0)
                            ))
                        );
                      })
                      .catch(
                        (e) => (r.ac_log(`AC: DSCP: ${t} error: ${e}`), !1)
                      )
                  : Promise.resolve(!1);
              }
              _cf_unpack(e) {
                function t(e, t) {
                  let n,
                    i = t.indexOf("/"),
                    r = t.indexOf("#");
                  n = -1 !== i ? i : -1 !== r ? r : void 0;
                  let s = {
                    mimeType: (e + "/" + t.substring(0, n)).toLowerCase(),
                  };
                  return (
                    -1 !== i &&
                      ((n = -1 !== r ? r : void 0),
                      (s.clockRate = parseInt(t.substring(i + 1, n)))),
                    -1 !== r && (s.sdpFmtpLine = t.substring(r + 1)),
                    s
                  );
                }
                if (!e) return null;
                let n = {};
                for (let i in e) {
                  n[i] = {};
                  for (let r in e[i]) n[i][r] = e[i][r].map((e) => t(i, e));
                }
                return n;
              }
              _cf_pack(e) {
                return e.map((e) =>
                  (function (e) {
                    let t = e.mimeType.substring(6).toLowerCase();
                    return (
                      e.clockRate && (t += "/" + e.clockRate),
                      e.sdpFmtpLine && (t += "#" + e.sdpFmtpLine),
                      t
                    );
                  })(e)
                );
              }
              _cf_str(e) {
                return JSON.stringify(r.instance._cf_pack(e));
              }
              _cf_match(e, t) {
                let n = e.mimeType.toLowerCase();
                for (let i of t)
                  if (i.mimeType === n) {
                    if (i.clockRate && i.clockRate !== e.clockRate) continue;
                    if (i.sdpFmtpLine && i.sdpFmtpLine !== e.sdpFmtpLine)
                      continue;
                    return !0;
                  }
                return !1;
              }
              _cf_find(e, t) {
                let n = [];
                for (let i of t) {
                  let t = i.mimeType.toLowerCase();
                  if (e.mimeType === t) {
                    if (e.clockRate && e.clockRate !== i.clockRate) continue;
                    if (e.sdpFmtpLine && e.sdpFmtpLine !== i.sdpFmtpLine)
                      continue;
                    n.push(i);
                  }
                }
                return n;
              }
              _cf_filter(e, t, n) {
                if (n && !t.data[`_used_${e}_codec_filter`])
                  try {
                    let i = t.getRTCPeerConnection(),
                      s = r.instance.getWR().connection.getTransceiver(i, e);
                    if (!s)
                      return void (
                        "audio" === e &&
                        r.ac_log(
                          "AC: codec-filter: cannot get audio transceiver"
                        )
                      );
                    if (
                      ((t.data[`_used_${e}_codec_filter`] = !0),
                      !RTCRtpSender.getCapabilities ||
                        !RTCRtpReceiver.getCapabilities ||
                        !s.setCodecPreferences)
                    )
                      return void r.ac_log(
                        "AC: codec-filter is not supported."
                      );
                    let o = RTCRtpSender.getCapabilities(e).codecs,
                      l = RTCRtpReceiver.getCapabilities(e).codecs,
                      a = [];
                    for (let e of l)
                      -1 ===
                        o.findIndex(
                          (t) =>
                            e.mimeType === t.mimeType &&
                            e.clockRate === t.clockRate &&
                            e.sdpFmtpLine === t.sdpFmtpLine
                        ) && a.push(e);
                    let u = o.concat(a);
                    if (
                      (r.ac_log(
                        `AC: ${e} codec-filter original: ${r.instance._cf_str(
                          u
                        )}\n(receiver: ${a.length})`
                      ),
                      n.remove && n.remove.length > 0)
                    ) {
                      let t = u.length;
                      (u = u.filter((e) => !r.instance._cf_match(e, n.remove))),
                        u.length < t &&
                          r.ac_log(
                            `AC: ${e} codec-filter remaining: ${r.instance._cf_str(
                              u
                            )}`
                          );
                    }
                    if (n.priority && n.priority.length > 0) {
                      let t = [];
                      for (let e of n.priority) {
                        let n = r.instance._cf_find(e, u);
                        0 !== n.length &&
                          ((t = t.concat(n)),
                          (u = u.filter((e) => !n.includes(e))));
                      }
                      (u = t.concat(u)),
                        r.ac_log(
                          `AC: ${e} codec-filter changed priority: ${r.instance._cf_str(
                            u
                          )}`
                        );
                    }
                    return void s.setCodecPreferences(u);
                  } catch (e) {
                    return void r.ac_log("AC: codec filter exception", e);
                  }
              }
              _convertIceList(e) {
                let t = [];
                for (let n of e)
                  "string" == typeof n && (n = { urls: "stun:" + n }),
                    t.push(n);
                return t;
              }
              _randomToken(e) {
                let t = "";
                for (let n = 0; n < e; n++)
                  t += Math.floor(36 * Math.random()).toString(36);
                return t;
              }
              _detectBrowser() {
                try {
                  let e = navigator.userAgent;
                  if (
                    ((this.browser = "other"),
                    (this.browserName = e),
                    (this.browserVersion = 0),
                    navigator.mozGetUserMedia)
                  )
                    (this.browser = "firefox"),
                      (this.browserName = e.match(/Firefox\/([.\d]+)$/)[0]),
                      (this.browserVersion = parseInt(
                        e.match(/Firefox\/(\d+)\./)[1],
                        10
                      ));
                  else if (navigator.webkitGetUserMedia) {
                    (this.browser = "chrome"),
                      (this.browserName = e.match(/Chrom(e|ium)\/([\d]+)/)[0]),
                      (this.browserVersion = parseInt(
                        e.match(/Chrom(e|ium)\/(\d+)\./)[2],
                        10
                      ));
                    let t = e.toLowerCase();
                    for (let e = 0; e < this.chromiumBased.length; e++) {
                      let n = this.chromiumBased[e].s,
                        i = t.indexOf(n);
                      if (-1 !== i) {
                        let r = t.substring(i + n.length).match(/([.\d]+)/)[1];
                        this.browserName +=
                          " (" + this.chromiumBased[e].n + "/" + r + ")";
                        break;
                      }
                    }
                  } else
                    window.safari
                      ? ((this.browser = "safari"),
                        (this.browserName =
                          "Safari/" + e.match(/Version\/([.\d]+)/)[1]),
                        (this.browserVersion = parseInt(
                          e.match(/Version\/(\d+)\./)[1],
                          10
                        )))
                      : -1 !== e.indexOf("Edge/") &&
                        ((this.browser = "other"),
                        (this.browserName = e.match(/Edge\/([.\d]+)/)[0]),
                        (this.browserVersion = parseInt(
                          e.match(/Edge\/(\d+).(\d+)$/)[2],
                          10
                        )));
                  /iPad|iPhone|iPod/.test(e) &&
                    ((this.browserName = e),
                    e.includes("CriOS")
                      ? ((this.browser = "chrome"),
                        (this.browserVersion = parseInt(
                          e.match(/CriOS\/(\d+)\./)[1],
                          10
                        )))
                      : e.includes("FxiOS")
                      ? ((this.browser = "firefox"),
                        (this.browserVersion = parseInt(
                          e.match(/FxiOS\/(\d+)\./)[1],
                          10
                        )))
                      : ((this.browser = "safari"),
                        (this.browserVersion = parseInt(
                          e.match(/Version\/(\d+)\./)[1],
                          10
                        ))));
                } catch (e) {
                  r.ac_log("AC: Browser detection error", e),
                    (this.browser = "other"),
                    (this.browserName = navigator.userAgent),
                    (this.browserVersion = 0);
                }
              }
              _detectOS() {
                this._detectOS1(), "other" === this.os && this._detectOS2();
              }
              _detectOS1() {
                try {
                  let e = navigator.userAgentData
                    ? navigator.userAgentData.platform
                    : void 0;
                  if (!e) return;
                  (e = e.toLowerCase()),
                    ("windows" !== e &&
                      "linux" !== e &&
                      "android" !== e &&
                      "macos" !== e) ||
                      (this.os = e);
                } catch (e) {
                  r.ac_log("AC: detectOS1 error", e), (this.os = "other");
                }
              }
              _detectOS2() {
                try {
                  let e = navigator.platform;
                  if (!e) return;
                  (e = e.toLowerCase()),
                    e.startsWith("win")
                      ? (this.os = "windows")
                      : e.startsWith("android")
                      ? (this.os = "android")
                      : e.startsWith("linux")
                      ? navigator.userAgent.includes("Android")
                        ? (this.os = "android")
                        : (this.os = "linux")
                      : e.startsWith("mac")
                      ? (this.os = "macos")
                      : /ipad|iphone|ipod/.test(e) && (this.os = "ios");
                } catch (e) {
                  r.ac_log("AC: detectOS2 error", e), (this.os = "other");
                }
              }
              _mediaConstraints(e) {
                let t = r.instance,
                  n = { audio: t.constraints.audio };
                return e && (n.video = t.constraints.video), n;
              }
              _callOptions(e, t, n = null, i = null) {
                let s = {},
                  o = r.instance;
                return (
                  "chrome" === o.browser &&
                    o.networkPriority &&
                    (s = { rtcConstraints: { optional: [{ googDscp: !0 }] } }),
                  null !== i && Object.assign(s, i),
                  (s.mediaConstraints = o._mediaConstraints(e)),
                  void 0 === s.pcConfig && (s.pcConfig = {}),
                  (s.pcConfig.iceServers = o.serverConfig.iceServers),
                  null !== n && (n = n.slice()),
                  null !== o.oauthToken &&
                    o.oauthTokenUseInInvite &&
                    t &&
                    (null === n && (n = []),
                    n.push("Authorization: Bearer " + o.oauthToken)),
                  null !== n && (s.extraHeaders = n),
                  s
                );
              }
              call(e, t, n = null, i = null) {
                if (
                  (!1 === e
                    ? (e = r.instance.AUDIO)
                    : !0 === e && (e = r.instance.VIDEO),
                  "symbol" != typeof e ||
                    ![r.instance.AUDIO, r.instance.VIDEO].includes(e))
                )
                  throw new TypeError(`Illegal videoOption=${e.toString()}`);
                (t = t.replace(/\s+/g, "")),
                  r.ac_log(`AC: call ${e.description} to ${t}`);
                let s = this._callOptions(e === r.instance.VIDEO, !0, n, i),
                  o = this.jssipUA.call(t, s);
                s.mediaStream && (o._localMediaStreamLocallyGenerated = !0);
                let l = o.data.ac_session;
                return (
                  l._setEnabledSendVideo(e === r.instance.VIDEO),
                  e === r.instance.VIDEO && l._setEnabledReceiveVideo(!0),
                  l
                );
              }
              sendMessage(e, t, n = "text/plain") {
                return (
                  r.ac_log(`AC: sendMessage to: ${e} "${t}"`),
                  new Promise((i, r) => {
                    let s = {
                      contentType: n,
                      eventHandlers: {
                        succeeded: (e) => i(e),
                        failed: (e) => r(e),
                      },
                    };
                    this.jssipUA.sendMessage(e, t, s);
                  })
                );
              }
              isScreenSharingSupported() {
                return r.instance.getWR().hasDisplayMedia();
              }
              openScreenSharing() {
                return this.isScreenSharingSupported()
                  ? (r.ac_log("AC: openScreenSharing()"),
                    r.instance
                      .getWR()
                      .getDisplayMedia()
                      .then((e) => e)
                      .catch((e) => {
                        throw (r.ac_log("AC: openScreenSharing() error", e), e);
                      }))
                  : (r.ac_log(
                      "AC: openScreenSharing: screen sharing is not supported in the browser"
                    ),
                    Promise.reject("Screen sharing is not supported"));
              }
              closeScreenSharing(e) {
                if ((r.ac_log("AC: closeScreenSharing()"), e)) {
                  let t = e.getVideoTracks();
                  if (0 == t.length) return;
                  let n = t[0];
                  "live" === n.readyState &&
                    (n.stop(), n.dispatchEvent(new Event("ended")));
                }
              }
              setNetworkPriority(e) {
                if (
                  (r.ac_log(`AC: setNetworkPriority ${e}`),
                  void 0 !== e &&
                    "high" !== e &&
                    "medium" !== e &&
                    "low" !== e &&
                    "very-low" !== e)
                )
                  throw new TypeError(
                    `setNetworkPriority: illegal value: ${e}`
                  );
                this.networkPriority = e;
              }
              subscribe(...e) {
                return this.jssipUA.subscribe(...e);
              }
              notify(...e) {
                return this.jssipUA.notify(...e);
              }
              addCredential(e) {
                if (!e.realm || !e.password || !e.username)
                  throw new TypeError("wrong credential structure");
                this.credentials.push(e);
              }
            }
            t.AudioCodesUA = r;
            class s {
              constructor(e) {
                (this.js_session = e),
                  (this.data = {
                    _user: null,
                    _display_name: null,
                    _create_time: null,
                    _initial: !0,
                    _remoteMediaStream: null,
                    _wasUsedSendVideo: !1,
                    _screenSharing: null,
                    _video: {
                      send: !1,
                      receive: !1,
                      enabledSend: !1,
                      enabledReceive: !1,
                    },
                  }),
                  (e.data.ac_session = this);
              }
              getRTCPeerConnection() {
                return this.js_session.connection;
              }
              getRTCLocalStream() {
                return this.js_session._localMediaStream;
              }
              getRTCRemoteStream() {
                return this.data._remoteMediaStream;
              }
              isEstablished() {
                return this.js_session.isEstablished();
              }
              isTerminated() {
                return this.js_session.isEnded();
              }
              isOutgoing() {
                return "outgoing" === this.js_session.direction;
              }
              isAudioMuted() {
                return this.js_session.isMuted().audio;
              }
              isVideoMuted() {
                return this.js_session.isMuted().video;
              }
              wasAccepted() {
                return !0 === this.data._accepted;
              }
              getReplacesHeader() {
                if (
                  !this.js_session.isEstablished() ||
                  !this.js_session._dialog
                )
                  return (
                    r.ac_log("getReplacesHeader(): call is not established"),
                    null
                  );
                let e = this.js_session._dialog.id;
                return `${e.call_id};to-tag=${e.remote_tag};from-tag=${e.local_tag}`;
              }
              muteAudio(e) {
                r.ac_log(`AC: muteAudio() arg=${e} `),
                  e
                    ? this.js_session.mute({ audio: !0, video: !1 })
                    : this.js_session.unmute({ audio: !0, video: !1 });
              }
              muteVideo(e) {
                r.ac_log(`AC: muteVideo() arg=${e} `),
                  e
                    ? this.js_session.mute({ audio: !1, video: !0 })
                    : this.js_session.unmute({ audio: !1, video: !0 });
              }
              sendDTMF(e) {
                let t = r.instance.dtmfUseWebRTC;
                t &&
                  "safari" === r.instance.browser &&
                  void 0 ===
                    r.instance
                      .getWR()
                      .connection.getDTMFSender(this.js_session.connection) &&
                  (t = !1),
                  r.ac_log(
                    `AC: sendDTMF() tone=${e} ${t ? "[RFC2833]" : "[INFO]"}`
                  );
                let n = {
                  duration: r.instance.dtmfDuration,
                  interToneGap: r.instance.dtmfInterToneGap,
                  transportType: t ? "RFC2833" : "INFO",
                };
                this.js_session.sendDTMF(e, n);
              }
              sendInfo(e, t, n) {
                r.ac_log("AC: sendInfo()", e, t, n);
                let i = null !== n ? { extraHeaders: n } : void 0;
                this.js_session.sendInfo(t, e, i);
              }
              duration() {
                let e = this.js_session.start_time;
                if (!e) return 0;
                let t = this.js_session.end_time;
                return (
                  t || (t = new Date()),
                  Math.floor((t.getTime() - e.getTime()) / 1e3)
                );
              }
              hasSendVideo() {
                return this.data._video.send;
              }
              hasReceiveVideo() {
                return this.data._video.receive;
              }
              hasVideo() {
                return this.hasSendVideo() && this.hasReceiveVideo();
              }
              getVideoState() {
                return this.hasSendVideo() && this.hasReceiveVideo()
                  ? "sendrecv"
                  : this.hasSendVideo()
                  ? "sendonly"
                  : this.hasReceiveVideo()
                  ? "recvonly"
                  : "inactive";
              }
              _setVideoState(e, t) {
                r.ac_log(`AC: _setVideoState(send=${e}, receive=${t})`),
                  (this.data._video.send = e),
                  (this.data._video.receive = t);
              }
              hasEnabledSendVideo() {
                return this.data._video.enabledSend;
              }
              hasEnabledReceiveVideo() {
                return this.data._video.enabledReceive;
              }
              getEnabledVideoState() {
                return this.hasEnabledSendVideo() &&
                  this.hasEnabledReceiveVideo()
                  ? "sendrecv"
                  : this.hasEnabledSendVideo()
                  ? "sendonly"
                  : this.hasEnabledReceiveVideo()
                  ? "recvonly"
                  : "inactive";
              }
              _setEnabledSendVideo(e) {
                r.ac_log(`AC: _setEnabledSendVideo(${e})`),
                  (this.data._video.enabledSend = e);
              }
              _setEnabledReceiveVideo(e) {
                r.ac_log(`AC: _setEnabledReceiveVideo(${e})`),
                  (this.data._video.enabledReceive = e);
              }
              answer(e, t = null, n = null) {
                if (this.data._answer_called)
                  return void r.ac_log(
                    "AC: answer() is already called. [Ignored]"
                  );
                if (
                  ((this.data._answer_called = !0),
                  !1 === e
                    ? (e = r.instance.AUDIO)
                    : !0 === e && (e = r.instance.VIDEO),
                  "symbol" != typeof e ||
                    ![
                      r.instance.AUDIO,
                      r.instance.RECVONLY_VIDEO,
                      r.instance.VIDEO,
                    ].includes(e))
                )
                  throw new TypeError(`Illegal videoOption=${e.toString()}`);
                if (
                  (r.ac_log(`AC: ${e.description} answer`),
                  this.hasVideo() ||
                    (e !== r.instance.RECVONLY_VIDEO &&
                      e !== r.instance.VIDEO) ||
                    (r.ac_log(
                      'AC: incoming INVITE without video, so answer can be only "audio"'
                    ),
                    (e = r.instance.AUDIO)),
                  this.hasVideo() && e === r.instance.AUDIO)
                ) {
                  let e = r.instance,
                    t = e.browser,
                    n = e.modes,
                    i = e.browserVersion;
                  "firefox" === t && n.video_call_audio_answer_firefox_fix
                    ? (this.data._video_call_audio_answer_firefox = !0)
                    : "safari" === t &&
                      ((!0 === n.video_call_audio_answer_safari_fix &&
                        i < 14) ||
                        "force" === n.video_call_audio_answer_safari_fix) &&
                      (this.data._video_call_audio_answer_safari = !0);
                }
                switch (e) {
                  case r.instance.AUDIO:
                    this._setEnabledSendVideo(!1),
                      this.data._incoming_invite_without_sdp
                        ? this._setEnabledReceiveVideo(
                            r.instance.enableAddVideo
                          )
                        : this._setEnabledReceiveVideo(
                            !this.hasVideo() && r.instance.enableAddVideo
                          ),
                      this._setVideoState(!1, !1);
                    break;
                  case r.instance.VIDEO:
                    this._setEnabledSendVideo(!0),
                      this._setEnabledReceiveVideo(!0),
                      this._setVideoState(!0, !0);
                    break;
                  case r.instance.RECVONLY_VIDEO:
                    this._setEnabledSendVideo(!1),
                      this._setEnabledReceiveVideo(!0),
                      this._setVideoState(!1, !0);
                }
                let i = r.instance._callOptions(
                  e === r.instance.VIDEO,
                  !1,
                  t,
                  n
                );
                Promise.resolve()
                  .then(() =>
                    i.mediaStream
                      ? i.mediaStream
                      : r.instance.getWR().getUserMedia(i.mediaConstraints)
                  )
                  .then((e) => {
                    (i.mediaStream = e),
                      (this.js_session._localMediaStreamLocallyGenerated = !0),
                      r.ac_log("AC: answer options:", i),
                      this.js_session.answer(i);
                  })
                  .catch((e) => {
                    r.ac_log("AC: getUserMedia failure", e), this.reject(488);
                  });
              }
              reject(e = 486, t = null) {
                r.ac_log("AC: reject()");
                try {
                  let n = { status_code: e };
                  t && (n.extraHeaders = t), this.js_session.terminate(n);
                } catch (e) {
                  r.ac_log("AC: call reject error:", e);
                }
              }
              terminate() {
                r.ac_log("AC: terminate()");
                try {
                  this.js_session.terminate();
                } catch (e) {
                  r.ac_log("AC: call terminate error:", e);
                }
              }
              redirect(e, t = 302, n = null) {
                r.ac_log(`AC: redirect() callTo=${e}`);
                try {
                  let i = {
                    status_code: t,
                    extraHeaders: [
                      "Contact: " + r.instance.jssipUA.normalizeTarget(e),
                    ],
                  };
                  n && i.extraHeaders.push(...n), this.js_session.terminate(i);
                } catch (e) {
                  r.ac_log("AC: call redirect error:", e);
                }
              }
              isLocalHold() {
                return this.js_session.isOnHold().local;
              }
              isRemoteHold() {
                return this.js_session.isOnHold().remote;
              }
              isReadyToReOffer() {
                return this.js_session._isReadyToReOffer();
              }
              hold(e) {
                return (
                  r.ac_log(`AC: hold(${e})`),
                  new Promise((t, n) => {
                    (e ? this.js_session.hold : this.js_session.unhold).call(
                      this.js_session,
                      {},
                      () => {
                        r.ac_log("AC: hold()/unhold() is completed"), t();
                      }
                    ) || (r.ac_log("AC: hold()/unhold() failed"), n());
                  })
                );
              }
              enableReceiveVideo(e) {
                this._setEnabledReceiveVideo(e);
                let t = this.getRTCPeerConnection(),
                  n = r.instance.getWR().connection.getTransceiver(t, "video");
                if (null !== n) {
                  let e = this.getEnabledVideoState();
                  r.instance.getWR().transceiver.setDirection(n, e);
                }
                return (
                  r.ac_log(
                    `AC: enableReceiveVideo(${e}) ${
                      null !== n ? "" : "No video transceiver"
                    }`
                  ),
                  null !== n
                );
              }
              startSendingVideo(e = {}) {
                let t = e && !1 !== e.enabledReceiveVideo;
                return this.hasEnabledSendVideo()
                  ? (r.ac_log("AC: startSendingVideo(). Already started"),
                    Promise.reject("video already started"))
                  : (r.ac_log("AC: startSendingVideo()"),
                    r.instance
                      .getWR()
                      .getUserMedia({ video: r.instance.constraints.video })
                      .catch((e) => {
                        throw (
                          (r.ac_log(
                            "AC: startSendingVideo() getUserMedia failure",
                            e
                          ),
                          e)
                        );
                      })
                      .then((e) => {
                        let n = e.getVideoTracks()[0];
                        this.getRTCLocalStream().addTrack(n),
                          this._setEnabledSendVideo(!0),
                          this._setEnabledReceiveVideo(t);
                        let i = this.data._wasUsedSendVideo;
                        return r.instance
                          .getWR()
                          .connection.addVideo(
                            this.getRTCPeerConnection(),
                            this.getRTCLocalStream(),
                            n,
                            this.hasEnabledReceiveVideo(),
                            i
                          )
                          .then(() => {
                            !i &&
                              r.instance.codecFilter &&
                              r.instance._cf_filter(
                                "video",
                                this,
                                r.instance.codecFilter.video
                              );
                          })
                          .catch((e) => {
                            throw (
                              (r.ac_log(
                                "AC: startSendingVideo(). Adding video error",
                                e
                              ),
                              e)
                            );
                          });
                      })
                      .then(() => this._renegotiate(e)));
              }
              stopSendingVideo(e = {}) {
                return this.hasEnabledSendVideo()
                  ? (r.ac_log("AC: stopSendingVideo()"),
                    r.instance
                      .getWR()
                      .connection.removeVideo(
                        this.getRTCPeerConnection(),
                        this.getRTCLocalStream()
                      )
                      .catch((e) => {
                        throw (
                          (r.ac_log(
                            "AC: stopSendingVideo(). Remove video error",
                            e
                          ),
                          e)
                        );
                      })
                      .then(
                        () => (
                          this._setEnabledSendVideo(!1),
                          (this.data._wasUsedSendVideo = !0),
                          this._renegotiate(e)
                        )
                      ))
                  : (r.ac_log("AC: stopSendingVideo(). Already stopped"),
                    Promise.reject("video already stopped"));
              }
              _doRenegotiate(e) {
                return this.js_session.isEnded()
                  ? Promise.reject("call is ended")
                  : new Promise((t) => {
                      if (!this.js_session.renegotiate(e, () => t(!0)))
                        return t(!1);
                    });
              }
              _renegotiate(e, t = 30, n = 500) {
                return (
                  r.ac_log(`AC: _renegotiate() attemptsLeft=${t}`),
                  this._doRenegotiate(e)
                    .then((i) => {
                      if (i) return r.ac_log("AC: Renegotiation success"), !0;
                      if (t <= 1) throw new Error("Too many attempts");
                      return new Promise((e) => setTimeout(e, n)).then(() =>
                        this._renegotiate(e, t - 1, n)
                      );
                    })
                    .catch((e) => {
                      throw (r.ac_log("AC: Renegotiation failed", e), e);
                    })
                );
              }
              sendReInvite(e = {}) {
                return (
                  r.ac_log("AC: sendReInvite()"),
                  this._renegotiate(e).then(() => {
                    if (e.showStreams) {
                      let e = this.getRTCLocalStream(),
                        t = this.getRTCRemoteStream();
                      r.ac_log(
                        "AC>>: [after send re-INVITE] callShowStreams",
                        this,
                        e,
                        t
                      ),
                        r.instance.listeners.callShowStreams(this, e, t);
                    }
                  })
                );
              }
              startScreenSharing(e, t = {}) {
                if ((r.ac_log("AC: startScreenSharing"), !e))
                  return Promise.reject("missed stream argument");
                if (this.data._screenSharing)
                  return Promise.reject(
                    "the call is already using screen-sharing"
                  );
                let n,
                  i = t && !1 !== t.enabledReceiveVideo,
                  s = e.getVideoTracks()[0];
                t.localScreenSharing &&
                  ((n = this._onEndedScreenSharingTrack.bind(this)),
                  s.addEventListener("ended", n)),
                  (this.data._screenSharing = {
                    stream: e,
                    onended: n,
                    hadSendVideo: this.hasSendVideo(),
                  });
                let o = this.data._wasUsedSendVideo;
                return (
                  this._setEnabledSendVideo(!0),
                  this._setEnabledReceiveVideo(i),
                  r.instance
                    .getWR()
                    .connection.addVideo(
                      this.getRTCPeerConnection(),
                      this.getRTCLocalStream(),
                      s,
                      this.hasEnabledReceiveVideo(),
                      o
                    )
                    .then(() => {
                      !o &&
                        r.instance.codecFilter &&
                        r.instance._cf_filter(
                          "video",
                          this,
                          r.instance.codecFilter.video
                        );
                    })
                    .catch((e) => {
                      throw (
                        (r.ac_log("AC: startScreenSharing() error", e),
                        (this.data._screenSharing = null),
                        e)
                      );
                    })
                    .then(() =>
                      this._renegotiate({
                        extraHeaders: ["X-Screen-Sharing: on"],
                      })
                    )
                );
              }
              stopScreenSharing() {
                return (
                  r.ac_log("AC: stopScreenSharing"),
                  this.data._screenSharing
                    ? this._onEndedScreenSharing("called stopScreenSharing()")
                    : Promise.reject("the call does not use screen-sharing")
                );
              }
              isScreenSharing() {
                return !!this.data._screenSharing;
              }
              doesScreenSharingReplaceCamera() {
                let e = this.data._screenSharing;
                return e && e.hadSendVideo;
              }
              _onEndedScreenSharingTrack() {
                return this._onEndedScreenSharing("track ended");
              }
              _onEndedScreenSharing(e) {
                let t = this.data._screenSharing;
                this.data._screenSharing = null;
                let n = t.stream,
                  i = t.onended;
                return (
                  n &&
                    i &&
                    n.getVideoTracks()[0].removeEventListener("ended", i),
                  Promise.resolve()
                    .then(() => {
                      if (!this.isTerminated()) {
                        let e = this.getRTCPeerConnection(),
                          n = this.getRTCLocalStream(),
                          i = { extraHeaders: ["X-Screen-Sharing: off"] };
                        return t.hadSendVideo
                          ? (r.ac_log(
                              "AC: screen sharing stopped - restore previously sending video track"
                            ),
                            r.instance
                              .getWR()
                              .connection.replaceSenderTrack(e, "video", n),
                            this._renegotiate(i))
                          : (r.ac_log(
                              "AC: screen sharing stopped - stop send video"
                            ),
                            this.stopSendingVideo(i));
                      }
                    })
                    .then(() => {
                      r.instance.listeners.callScreenSharingEnded &&
                        (r.ac_log(
                          `AC>>: callScreenSharingEnded "${e}"`,
                          this,
                          n
                        ),
                        r.instance.listeners.callScreenSharingEnded(this, n));
                    })
                );
              }
              setRemoteHoldState() {
                this.js_session._remoteHold = !0;
              }
              sendRefer(e, t = null) {
                if (!r.instance.listeners.transferorNotification)
                  throw new Error("transferorNotification listener is missed");
                let n = this,
                  i = {
                    eventHandlers: {
                      requestSucceeded() {
                        r.ac_log(
                          "AC>>: transferorNotification progress [REFER accepted]"
                        ),
                          r.instance.listeners.transferorNotification(n, 0);
                      },
                      requestFailed() {
                        r.ac_log(
                          "AC>>: transferorNotification failed [REFER failed]"
                        ),
                          r.instance.listeners.transferorNotification(n, -1);
                      },
                      trying() {
                        r.ac_log(
                          "AC>>: transferorNotification progress [NOTIFY 1xx]"
                        ),
                          r.instance.listeners.transferorNotification(n, 0);
                      },
                      progress() {
                        r.ac_log(
                          "AC>>: transferorNotification progress [NOTIFY 1xx]"
                        ),
                          r.instance.listeners.transferorNotification(n, 0);
                      },
                      accepted() {
                        r.ac_log(
                          "AC>>: transferorNotification success [NOTIFY 2xx]"
                        ),
                          r.instance.listeners.transferorNotification(n, 1);
                      },
                      failed() {
                        r.ac_log(
                          "AC>>: transferorNotification failed [NOTIFY >= 300]"
                        ),
                          r.instance.listeners.transferorNotification(n, -1);
                      },
                    },
                  };
                null !== t && (i.replaces = t.js_session),
                  this.js_session.refer(e, i);
              }
            }
            class o {
              constructor(e) {
                (this.start = []), (this.media = []);
                let t = e
                    .split("\n")
                    .map((e) => e.trim())
                    .filter((e) => e.length > 0),
                  n = this.start;
                for (let e of t)
                  e.startsWith("m=") && ((n = []), this.media.push(n)),
                    n.push(e);
              }
              getMedia(e) {
                for (let t of this.media)
                  if (t.length > 0 && t[0].startsWith("m=" + e)) return t;
                return null;
              }
              checkSendRecv(e) {
                switch (e) {
                  case "a=sendrecv":
                    return "sendrecv";
                  case "a=sendonly":
                    return "sendonly";
                  case "a=recvonly":
                    return "recvonly";
                  case "a=inactive":
                    return "inactive";
                  default:
                    return null;
                }
              }
              getMediaDirectionValue(e) {
                let t,
                  n = this.getMedia(e);
                if (null === n) return null;
                let i = "sendrecv";
                for (let e of this.start)
                  if (null !== (t = this.checkSendRecv(e))) {
                    i = t;
                    break;
                  }
                for (let e of n)
                  if (null !== (t = this.checkSendRecv(e))) {
                    i = t;
                    break;
                  }
                return i;
              }
              getMediaDirection(e, t) {
                let n = this.getMediaDirectionValue(e);
                switch (n) {
                  case "sendrecv":
                    return [!0, !0, n];
                  case "sendonly":
                    return t ? [!1, !0, n] : [!0, !1, n];
                  case "recvonly":
                    return t ? [!0, !1, n] : [!1, !0, n];
                  case null:
                  case "inactive":
                    return [!1, !1, n];
                }
              }
              toString() {
                let e = this.start;
                for (let t of this.media) e = e.concat(t);
                return e.join("\r\n") + "\r\n";
              }
            }
            let l = {
              getUserMedia: (e) => (
                r.ac_log(
                  `[webrtc] getUserMedia constraints=${JSON.stringify(e)}`
                ),
                navigator.mediaDevices.getUserMedia(e)
              ),
              hasDisplayMedia: () =>
                navigator.mediaDevices &&
                navigator.mediaDevices.getDisplayMedia,
              getDisplayMedia: () => (
                r.ac_log("[webrtc] getDisplayMedia"),
                navigator.mediaDevices.getDisplayMedia({ video: !0 })
              ),
              mediaDevices: {
                enumerateDevices: () =>
                  navigator.mediaDevices &&
                  navigator.mediaDevices.enumerateDevices
                    ? navigator.mediaDevices.enumerateDevices()
                    : Promise.reject("WebRTC is not supported"),
                addDeviceChangeListener(e) {
                  navigator.mediaDevices &&
                    navigator.mediaDevices.addEventListener("devicechange", e);
                },
                removeDeviceChangeListener(e) {
                  navigator.mediaDevices &&
                    navigator.mediaDevices.removeEventListener(
                      "devicechange",
                      e
                    );
                },
              },
              checkAvailableDevices() {
                if (
                  !navigator.mediaDevices ||
                  !navigator.mediaDevices.getUserMedia
                )
                  return Promise.reject("WebRTC is not supported");
                let e = !1,
                  t = !1,
                  n = !1;
                return navigator.mediaDevices.enumerateDevices().then(
                  (i) => (
                    i.forEach(function (i) {
                      switch (i.kind) {
                        case "videoinput":
                          e = !0;
                          break;
                        case "audioinput":
                          t = !0;
                          break;
                        case "audiooutput":
                          n = !0;
                      }
                    }),
                    void 0 === navigator.webkitGetUserMedia && (n = !0),
                    n
                      ? t
                        ? Promise.resolve(e)
                        : Promise.reject(
                            "Missing a microphone! Please connect one and reload"
                          )
                      : Promise.reject(
                          "Missing a speaker! Please connect one and reload"
                        )
                  )
                );
              },
              transceiver: {
                setDirection(e, t) {
                  let n = "";
                  null !== e.sender.track
                    ? (n = e.sender.track.kind)
                    : null !== e.receiver.track && (n = e.receiver.track.kind),
                    r.ac_log(`[webrtc] set ${n} transceiver direction=${t}`),
                    (e.direction = t);
                },
              },
              stream: {
                getInfo(e) {
                  function t(e) {
                    return e.length > 0 ? e[0].enabled.toString() : "-";
                  }
                  return null === e
                    ? Promise.resolve("stream is null")
                    : Promise.resolve(
                        `audio: ${t(e.getAudioTracks())} video: ${t(
                          e.getVideoTracks()
                        )}`
                      );
                },
              },
              connection: {
                getTransceiversInfo(e) {
                  function t(e) {
                    return null === e
                      ? "none"
                      : `d=${e.direction} c=${e.currentDirection}`;
                  }
                  let n = e.getTransceivers(),
                    i = r.instance
                      .getWR()
                      .connection.getTransceiver(e, "audio"),
                    s = r.instance
                      .getWR()
                      .connection.getTransceiver(e, "video");
                  return Promise.resolve(
                    `(${n.length}) audio ${t(i)} video ${t(s)}`
                  );
                },
                getTransceiver(e, t) {
                  for (let n of e.getTransceivers()) {
                    if (
                      null !== n.sender &&
                      null !== n.sender.track &&
                      n.sender.track.kind === t
                    )
                      return n;
                    if (
                      null !== n.receiver &&
                      null !== n.receiver.track &&
                      n.receiver.track.kind === t
                    )
                      return n;
                  }
                  return null;
                },
                addEventListener: (e, t, n) => (
                  r.ac_log(`[webrtc] Connection addEventListener ${t}`),
                  "track" !== t
                    ? Promise.reject(`Wrong event name: ${t}`)
                    : (e.addEventListener(t, n), Promise.resolve())
                ),
                getDTMFSender(e) {
                  let t = e
                    .getSenders()
                    .find((e) => e.track && "audio" === e.track.kind);
                  if (t && t.dtmf) return t.dtmf;
                },
                addVideo(e, t, n, i, s) {
                  r.ac_log("[webrtc] Connection addVideo");
                  let o = r.instance
                    .getWR()
                    .connection.getTransceiver(e, "video");
                  if (null !== o) {
                    let e = i ? "sendrecv" : "sendonly";
                    r.instance.getWR().transceiver.setDirection(o, e);
                  }
                  return null === o || (null === o.sender.track && !s)
                    ? (r.ac_log("[webrtc] addVideo (connection addTrack)"),
                      e.addTrack(n, t),
                      Promise.resolve(!0))
                    : (r.ac_log(
                        "[webrtc] addVideo (video transceiver sender replaceTrack)"
                      ),
                      o.sender.replaceTrack(n).then(() => !1));
                },
                removeVideo(e, t) {
                  r.ac_log("[webrtc] Connection removeVideo");
                  let n = r.instance
                    .getWR()
                    .connection.getTransceiver(e, "video");
                  if (null === n)
                    return Promise.reject("no video transceiver found");
                  if ((e.removeTrack(n.sender), t))
                    for (let e of t.getVideoTracks())
                      t.removeTrack(e), e.stop();
                  return Promise.resolve();
                },
                replaceSenderTrack(e, t, n) {
                  r.ac_log(`[webrtc] ReplaceSenderTrack ${t}`);
                  let i = null;
                  for (let n of e.getSenders())
                    if (null !== n.track && n.track.kind === t) {
                      i = n;
                      break;
                    }
                  if (null === i) return Promise.reject(`No ${t} sender`);
                  let s =
                    "audio" === t ? n.getAudioTracks() : n.getVideoTracks();
                  return 0 === s.length
                    ? Promise.reject(`No ${t} track`)
                    : i.replaceTrack(s[0]);
                },
                getStats(e, t) {
                  let n = "";
                  return e.getStats(null).then(
                    (e) => (
                      e.forEach((e) => {
                        if (t.includes(e.type)) {
                          n += " {";
                          let t = !0;
                          for (let i of Object.keys(e))
                            t ? (t = !1) : (n += ","), (n += i + "=" + e[i]);
                          n += "} \r\n";
                        }
                      }),
                      n
                    )
                  );
                },
              },
            };
          },
          675: (e, t) => {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 }),
              (t.default = class {
                constructor(e, t) {
                  (this.useAudioElement = !1),
                    (this.sounds = {}),
                    (this.sound = null),
                    (this.ringer = null),
                    (this.ssound = null),
                    (this.audioCtx = null),
                    (this.dtmfTones = {
                      1: [{ f: [697, 1209], t: 0.2 }],
                      2: [{ f: [697, 1336], t: 0.2 }],
                      3: [{ f: [697, 1477], t: 0.2 }],
                      4: [{ f: [770, 1209], t: 0.2 }],
                      5: [{ f: [770, 1336], t: 0.2 }],
                      6: [{ f: [770, 1477], t: 0.2 }],
                      7: [{ f: [852, 1209], t: 0.2 }],
                      8: [{ f: [852, 1336], t: 0.2 }],
                      9: [{ f: [852, 1477], t: 0.2 }],
                      "*": [{ f: [941, 1209], t: 0.2 }],
                      0: [{ f: [941, 1336], t: 0.2 }],
                      "#": [{ f: [941, 1477], t: 0.2 }],
                      A: [{ f: [697, 1633], t: 0.2 }],
                      B: [{ f: [770, 1633], t: 0.2 }],
                      C: [{ f: [852, 1633], t: 0.2 }],
                      D: [{ f: [941, 1633], t: 0.2 }],
                    }),
                    (this.browser = t),
                    (this.logger = e);
                }
                init(
                  e = { logger: null, audioCtx: null, useAudioElement: void 0 }
                ) {
                  (this.logger = e.logger ? e.logger : console.log),
                    (this.audioCtx = e.audioCtx
                      ? e.audioCtx
                      : new (window.AudioContext ||
                          window.webkitAudioContext)()),
                    !0 === e.useAudioElement || !1 === e.useAudioElement
                      ? (this.useAudioElement = e.useAudioElement)
                      : (this.useAudioElement = ![
                          "safari",
                          "safari|ios",
                        ].includes(this.browser)),
                    this.logger(
                      `AudioPlayer2: init ${
                        this.useAudioElement ? "AudioElement" : "AudioContext"
                      } (${this.browser})`
                    );
                }
                setSpeakerId(e) {
                  this.logger(`AudioPlayer2: setSpeakerId(${e})`),
                    (this.speakerDeviceId = null !== e ? e : "");
                }
                setRingerId(e) {
                  this.logger(`AudioPlayer2: setRingerId(${e})`),
                    (this.ringerDeviceId = e || null);
                }
                isDisabled() {
                  return (
                    "interrupted" === this.audioCtx.state &&
                      this.logger(
                        "AudioPlayer2: isDisabled() state = interrupted ! Hello from iOS"
                      ),
                    !!["chrome", "safari", "safari|ios"].includes(
                      this.browser
                    ) && "suspended" === this.audioCtx.state
                  );
                }
                enable() {
                  return ["chrome", "safari", "safari|ios"].includes(
                    this.browser
                  )
                    ? this.audioCtx.resume()
                    : Promise.resolve();
                }
                downloadSounds(e, t) {
                  this.logger(
                    `AudioPlayer2: downloadSounds ${e} ${JSON.stringify(t)}`
                  ),
                    !this.useAudioElement &&
                      ["safari", "safari|ios"].includes(this.browser) &&
                      this._setDecodeAudioDataShim(this.audioCtx);
                  let n = [];
                  for (let i of t) {
                    let t, r;
                    "string" == typeof i
                      ? (t = r = i)
                      : ((t = Object.keys(i)[0]), (r = i[t]));
                    let s = e + r + ".mp3";
                    n.push(
                      this.useAudioElement
                        ? this._downloadSound1(t, s)
                        : this._downloadSound2(t, s)
                    );
                  }
                  return Promise.allSettled(n);
                }
                generateTonesSuite(e) {
                  this.logger("AudioPlayer2: generateTonesSuite");
                  let t = [];
                  for (let n of Object.keys(e)) {
                    let i = e[n];
                    t.push(
                      this.useAudioElement
                        ? this._generateTone1(n, i)
                        : this._generateTone2(n, i)
                    );
                  }
                  return Promise.allSettled(t);
                }
                play(e, t = void 0) {
                  return this.isDisabled()
                    ? (this.logger(
                        `AudioPlayer2: play: ${JSON.stringify(
                          e
                        )} [Sound is disabled]`
                      ),
                      Promise.resolve())
                    : this.useAudioElement
                    ? t
                      ? this._playStream1(e, t)
                      : this._play1(e)
                    : this._play2(e, t);
                }
                playRing(e) {
                  return this.isDisabled()
                    ? (this.logger(
                        `AudioPlayer2: playRing: ${JSON.stringify(
                          e
                        )} [Sound is disabled]`
                      ),
                      Promise.resolve())
                    : this.useAudioElement
                    ? this._playRing1(e)
                    : Promise.resolve();
                }
                stop() {
                  this.useAudioElement ? this._stop1() : this._stop2();
                }
                playShortSound(e) {
                  return this.audioCtx
                    ? this.useAudioElement
                      ? this._playShortSound1(e)
                      : this._playShortSound2(e)
                    : Promise.reject("No audio context");
                }
                _downloadSound1(e, t) {
                  let n = new Audio(t);
                  return (
                    (this.sounds[e] = {
                      audioElem: n,
                      deviceId: "",
                      source: null,
                      streamDestination: null,
                    }),
                    new Promise((e, t) => {
                      (n.oncanplaythrough = e),
                        ["safari", "safari|ios"].includes(this.browser) &&
                          ((n.oncanplay = e), (n.onloadedmetadata = e)),
                        (n.onerror = t);
                    })
                  );
                }
                _generateTone1(e, t) {
                  return this._generateTone(t).then((t) => {
                    let n = new Audio(),
                      i = this._createBlob1(t);
                    (n.src = URL.createObjectURL(i)),
                      (this.sounds[e] = {
                        audioElem: n,
                        deviceId: "",
                        source: null,
                        streamDestination: null,
                      });
                  });
                }
                _createBlob1(e) {
                  function t(e, t, n) {
                    for (let i = 0; i < n.length; i++)
                      e.setUint8(t + i, n.charCodeAt(i));
                  }
                  let n = e.getChannelData(0),
                    i = e.sampleRate,
                    r = new ArrayBuffer(44 + 2 * n.length),
                    s = new DataView(r);
                  return (
                    t(s, 0, "RIFF"),
                    s.setUint32(4, 36 + 2 * n.length, !0),
                    t(s, 8, "WAVE"),
                    t(s, 12, "fmt "),
                    s.setUint32(16, 16, !0),
                    s.setUint16(20, 1, !0),
                    s.setUint16(22, 1, !0),
                    s.setUint32(24, i, !0),
                    s.setUint32(28, 2 * i, !0),
                    s.setUint16(32, 2, !0),
                    s.setUint16(34, 16, !0),
                    t(s, 36, "data"),
                    s.setUint32(40, 2 * n.length, !0),
                    (function (e, t, n, i) {
                      for (let r = 0; r < n.length; r++, t += 2) {
                        let s = n[r] / i,
                          o = Math.max(-1, Math.min(1, s));
                        e.setInt16(t, o < 0 ? 32768 * o : 32767 * o, !0);
                      }
                    })(
                      s,
                      44,
                      n,
                      (function (e) {
                        let t = 0,
                          n = 0;
                        for (let i = 0; i < e.length; i++) {
                          let r = e[i];
                          (t = Math.max(t, r)), (n = Math.min(n, r));
                        }
                        return (t - n) / 2;
                      })(n)
                    ),
                    new Blob([r], { type: "audio/wav" })
                  );
                }
                _play1(e) {
                  return (
                    this.logger(
                      `AudioPlayer2 [AudioElement]: play: ${JSON.stringify(e)}`
                    ),
                    this._play1_impl(e, "sound", this.speakerDeviceId)
                  );
                }
                _playRing1(e) {
                  return this.ringerDeviceId
                    ? (this.logger(
                        `AudioPlayer2 [AudioElement]: playRing: ${JSON.stringify(
                          e
                        )}`
                      ),
                      this._play1_impl(e, "ringer", this.ringerDeviceId))
                    : Promise.resolve();
                }
                _playShortSound1(e) {
                  return this._play1_impl(e, "ssound", this.speakerDeviceId);
                }
                _play1_impl(e, t, n) {
                  try {
                    this._silentStop1(this[t]);
                    let i = (this[t] =
                      this.sounds[null == e ? void 0 : e.name]);
                    return i
                      ? i.source
                        ? void this.logger(
                            `AudioPlayer2 [AudioElement]: sound "${
                              null == e ? void 0 : e.name
                            }" was used for streaming`
                          )
                        : Promise.resolve()
                            .then(() =>
                              void 0 !== n && void 0 !== i.audioElem.setSinkId
                                ? i.deviceId === n
                                  ? Promise.resolve()
                                  : (this.logger(
                                      `AudioPlayer2 [AudioElement]: "${
                                        null == e ? void 0 : e.name
                                      }": setSinkId deviceId="${n}"`
                                    ),
                                    i.audioElem.setSinkId(n))
                                : Promise.resolve()
                            )
                            .then(() => {
                              i.deviceId = n;
                            })
                            .catch((e) => {
                              this.logger(
                                `AudioPlayer2 [AudioElement]: HTMLAudioElement.setSinkId error "${e.message}" [used default speaker]`
                              );
                            })
                            .then(() => {
                              (i.audioElem.volume =
                                void 0 !== e.volume ? e.volume : 1),
                                (i.audioElem.loop =
                                  !!e.loop && void 0 === e.repeat);
                              let n = void 0 !== e.repeat ? e.repeat : 1;
                              return new Promise((e) => {
                                (i.audioElem.onended = () => {
                                  --n > 0 && this[t]
                                    ? ((i.audioElem.currentTime = 0),
                                      i.audioElem.play().catch((e) => {
                                        this.logger(
                                          "AudioPlayer2 [AudioElement]: play error",
                                          e
                                        );
                                      }))
                                    : e();
                                }),
                                  (i.audioElem.currentTime = 0),
                                  i.audioElem.play().catch((e) => {
                                    this.logger(
                                      "AudioPlayer2 [AudioElement]: play error",
                                      e
                                    );
                                  });
                              });
                            })
                      : void this.logger(
                          `AudioPlayer2 [AudioElement]: missed sound: "${
                            null == e ? void 0 : e.name
                          }"`
                        );
                  } catch (e) {
                    this.logger("AudioPlayer2 Error");
                  }
                }
                _playStream1(e, t) {
                  return (
                    this.logger(
                      `AudioPlayer2 [AudioElement]: play stream: ${JSON.stringify(
                        e
                      )}`
                    ),
                    this._silentStop1(this.sound),
                    (this.sound = this.sounds[null == e ? void 0 : e.name]),
                    this.sound
                      ? new Promise((n) => {
                          (this.sound.audioElem.volume =
                            void 0 !== e.volume ? e.volume : 1),
                            (this.sound.audioElem.loop =
                              !!e.loop && void 0 === e.repeat);
                          let i = void 0 !== e.repeat ? e.repeat : 1;
                          (this.sound.audioElem.onended = () => {
                            --i > 0 && this.sound
                              ? ((this.sound.audioElem.currentTime = 0),
                                this.sound.audioElem.play().catch((e) => {
                                  this.logger(
                                    "AudioPlayer2 [AudioElement]: streaming error",
                                    e
                                  );
                                }))
                              : (this.logger(
                                  "AudioPlayer2 [AudioElement]: stopped"
                                ),
                                n());
                          }),
                            (this.sound.audioElem.currentTime = 0),
                            this.sound.source ||
                              (this.sound.source =
                                this.audioCtx.createMediaElementSource(
                                  this.sound.audioElem
                                )),
                            (this.sound.streamDestination = t),
                            this.sound.source.connect(
                              this.sound.streamDestination
                            ),
                            this.sound.audioElem.play().catch((e) => {
                              this.logger(
                                "AudioPlayer2 [AudioElement]: streaming error",
                                e
                              );
                            });
                        })
                      : (this.logger(
                          `AudioPlayer2 [AudioElement]: missed media file: "${
                            null == e ? void 0 : e.name
                          }"`
                        ),
                        Promise.reject())
                  );
                }
                _stop1() {
                  this.logger("AudioPlayer2 [AudioElement]: stop"),
                    this._silentStop1(this.sound),
                    (this.sound = null),
                    this._silentStop1(this.ringer),
                    (this.ringer = null);
                }
                _silentStop1(e) {
                  if (e && (e.audioElem.pause(), e.source))
                    try {
                      e.source && e.source.disconnect(),
                        e.streamDestination && e.streamDestination.disconnect(),
                        (e.streamDestination = null);
                    } catch (e) {
                      this.logger(
                        "AudioPlayer2 [AudioElement]: disconnect AudioContext error",
                        e
                      );
                    }
                }
                _downloadSound2(e, t) {
                  return fetch(t, { credentials: "same-origin" })
                    .then((e) => {
                      if (e.status >= 200 && e.status <= 299)
                        return e.arrayBuffer().catch(() => {
                          throw "download body error";
                        });
                      throw 404 === e.status
                        ? "file not found"
                        : "download error";
                    })
                    .then((e) =>
                      this.audioCtx.decodeAudioData(e).catch(() => {
                        throw "decoding error";
                      })
                    )
                    .then((t) => {
                      this.sounds[e] = {
                        data: t,
                        source: null,
                        gain: null,
                        streamDestination: null,
                      };
                    })
                    .catch((e) => {
                      this.logger(
                        "AudioPlayer2 [AudioContext]: " + e + ": " + t
                      );
                    });
                }
                _generateTone2(e, t) {
                  return this._generateTone(t).then((t) => {
                    t &&
                      (this.sounds[e] = {
                        data: t,
                        source: null,
                        gain: null,
                        streamDestination: null,
                      });
                  });
                }
                _play2(e, t = null) {
                  this.logger(
                    `AudioPlayer2 [AudioContext]: ${
                      t ? "playStream" : "play"
                    }: ${JSON.stringify(e)}`
                  ),
                    this._silentStop2(this.sound);
                  let n = this.sounds[null == e ? void 0 : e.name];
                  return n
                    ? ((this.sound = n = Object.assign({}, n)),
                      new Promise((i, r) => {
                        try {
                          (n.source = this.audioCtx.createBufferSource()),
                            (n.source.buffer = n.data),
                            (n.source.onended = () => {
                              this.logger(
                                `AudioPlayer2 [AudioContext]:  onended ${
                                  null == e ? void 0 : e.name
                                }`
                              ),
                                this._silentStop2(n),
                                i(!0);
                            }),
                            (n.source.onerror = () => {
                              this.logger(
                                `AudioPlayer2 [AudioContext]:  onerror ${
                                  null == e ? void 0 : e.name
                                }`
                              ),
                                this._silentStop2(n),
                                r(new Error("onerror callback"));
                            }),
                            (n.gain = this.audioCtx.createGain());
                          let s = e.volume ? e.volume : 1;
                          n.gain.gain.setValueAtTime(
                            s,
                            this.audioCtx.currentTime
                          ),
                            n.source.connect(n.gain),
                            t
                              ? ((n.streamDestination = t),
                                n.gain.connect(n.streamDestination))
                              : ((n.streamDestination = null),
                                n.gain.connect(this.audioCtx.destination)),
                            (!0 === e.loop || e.repeat) &&
                              ((n.source.loop = !0), (n.source.loopStart = 0));
                          let o = null;
                          e.repeat &&
                            (o = this.sound.source.buffer.duration * e.repeat),
                            n.source.start(0, 0),
                            o && n.source.stop(this.audioCtx.currentTime + o);
                        } catch (e) {
                          this.logger(
                            "AudioPlayer2 [AudioContext]: play error",
                            e
                          ),
                            this._silentStop2(n),
                            r(e);
                        }
                      }))
                    : (this.logger(
                        `AudioPlayer2 [AudioContext]: missed media: "${
                          null == e ? void 0 : e.name
                        }"`
                      ),
                      Promise.reject());
                }
                _playShortSound2(e) {
                  let t, n;
                  function i() {
                    try {
                      t && t.stop(), n && n.disconnect(), t && t.disconnect();
                    } catch (e) {
                      this.logger(
                        "AudioPlayer [AudioContext]: playShortSound: release error",
                        e
                      );
                    }
                  }
                  return new Promise((r, s) => {
                    try {
                      let o = this.sounds[null == e ? void 0 : e.name];
                      if (!o) return null == e || e.name, void s("No sound");
                      (t = this.audioCtx.createBufferSource()),
                        (t.buffer = o.data),
                        (t.onended = () => {
                          i(), r();
                        }),
                        (t.onerror = (e) => {
                          i(), s(e);
                        }),
                        (n = this.audioCtx.createGain());
                      let l = e.volume ? e.volume : 1;
                      n.gain.setValueAtTime(l, this.audioCtx.currentTime),
                        t.connect(n),
                        n.connect(this.audioCtx.destination),
                        t.start();
                    } catch (e) {
                      this.logger(
                        "AudioPlayer [AudioContext]: playShortSound error",
                        e
                      ),
                        s(e);
                    }
                  });
                }
                _stop2() {
                  this.logger("AudioPlayer2 [AudioContext]: stop"),
                    this._silentStop2(this.sound),
                    (this.sound = null);
                }
                _silentStop2(e) {
                  if (e && e.source) {
                    try {
                      e.source && e.source.stop();
                    } catch (e) {}
                    try {
                      e.gain && e.gain.disconnect(),
                        e.source && e.source.disconnect(),
                        e.streamDestination && e.streamDestination.disconnect(),
                        (e.gain = null),
                        (e.source = null),
                        (e.streamDestination = null);
                    } catch (e) {
                      this.logger(
                        "AudioPlayer2 [AudioContext]: release resources error",
                        e
                      );
                    }
                  }
                }
                _setDecodeAudioDataShim(e) {
                  let t = e.decodeAudioData;
                  e.decodeAudioData = (n) =>
                    new Promise((i, r) => {
                      t.call(
                        e,
                        n,
                        (e) => i(e),
                        (e) => r(e)
                      );
                    });
                }
                _setStartRenderingShim(e) {
                  let t = e.startRendering;
                  e.startRendering = () =>
                    new Promise((n) => {
                      (e.oncomplete = (e) => {
                        n(e.renderedBuffer);
                      }),
                        t.call(e);
                    });
                }
                _generateTone(e) {
                  function t(e) {
                    return void 0 === e ? [] : Array.isArray(e) ? e : [e];
                  }
                  try {
                    let n = 0,
                      i = 0;
                    for (let r of e)
                      (n += r.t), (i = Math.max(i, t(r.f).length));
                    let r = 1,
                      s = this.audioCtx.sampleRate,
                      o = s * n,
                      l = new (window.OfflineAudioContext ||
                        window.webkitOfflineAudioContext)(r, o, s);
                    ("safari" !== this.browser &&
                      "safari|ios" !== this.browser) ||
                      this._setStartRenderingShim(l);
                    let a = new Array(i);
                    for (let e = 0; e < a.length; e++)
                      (a[e] = l.createOscillator()),
                        a[e].connect(l.destination);
                    let u = 0;
                    for (let n = 0, i = e.length; n < i; n++) {
                      let i = e[n],
                        r = t(i.f);
                      for (let e = 0; e < a.length; e++) {
                        let t = e < r.length ? r[e] : 0;
                        a[e].frequency.setValueAtTime(t, l.currentTime + u);
                      }
                      u += i.t;
                    }
                    for (let e of a) e.start(0), e.stop(l.currentTime + n);
                    return l.startRendering().then((e) => {
                      for (let e of a) e.disconnect();
                      return e;
                    });
                  } catch (e) {
                    return (
                      this.logger("AudioPlayer2: cannot generate tone", e),
                      Promise.reject(e)
                    );
                  }
                }
              });
          },
          159: () => {
            class e extends HTMLElement {
              constructor() {
                super(),
                  this.attachShadow({ mode: "open" }),
                  this.shadowRoot &&
                    (this.shadowRoot.innerHTML =
                      '\n        <div id="c2c_keypad_div">\n    <table id="c2c_keypad_table" cellpadding="5" cellspacing="3">\n        <tr>\n            <td><button id="c2c_keypad_1">1</button></td>\n            <td><button id="c2c_keypad_2">2</button></td>\n            <td><button id="c2c_keypad_3">3</button></td>\n        </tr>\n        <tr>\n            <td><button id="c2c_keypad_4">4</button></td>\n            <td><button id="c2c_keypad_5">5</button></td>\n            <td><button id="c2c_keypad_6">6</button></td>\n        </tr>\n        <tr>\n            <td><button id="c2c_keypad_7">7</button></td>\n            <td><button id="c2c_keypad_8">8</button></td>\n            <td><button id="c2c_keypad_9">9</button></td>\n        </tr>\n        <tr>\n            <td><button id="c2c_keypad_*">*</button></td>\n            <td><button id="c2c_keypad_0">0</button></td>\n            <td><button id="c2c_keypad_#">#</button></td>\n        </tr>\n    </table>\n</div>\n        ');
              }
              connectedCallback() {
                var e, t;
                const n = document.createElement("style");
                if (
                  ((n.textContent =
                    '\n#c2c_keypad_div {\n    display: none;\n}\n\n#c2c_keypad_table {\n    font-family: Verdana, Arial, Helvetica, sans-serif;\n    text-align: center;\n    margin: 10px auto;\n    padding: 30px;\n    background-color: white;\n    border-radius: 25px;\n    text-align: center;\n    border: 1px solid #c3c3c3;\n}\n\n#c2c_keypad_table button {\n    font-family: "Helvetica", "Arial", sans-serif;\n    font-style: normal;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    height: 56px;\n    width: 56px;\n    border-radius: 50%;\n    text-align: center;\n    color: #000;\n    background-color: #e0e0e0;\n    cursor: pointer;\n    border: none;\n    font-size: 24px;\n    &:hover {\n        background-color: darkgray;\n    }\n}\n'),
                  null === (e = this.shadowRoot) ||
                    void 0 === e ||
                    e.appendChild(n),
                  (this.buttons =
                    null === (t = this.shadowRoot) || void 0 === t
                      ? void 0
                      : t.querySelectorAll("#c2c_keypad_table button")),
                  this.buttons)
                )
                  for (const e of this.buttons)
                    e.onclick = (t) => {
                      this.dispatchEvent(
                        new CustomEvent("keyPadBtnClick", {
                          detail: { event: t, value: e.innerText },
                        })
                      );
                    };
              }
            }
            customElements.define("click-to-call-keypad", e);
          },
          976: () => {
            class e extends HTMLElement {
              constructor() {
                super(),
                  this.attachShadow({ mode: "open" }),
                  this.shadowRoot &&
                    (this.shadowRoot.innerHTML =
                      '\n        <div id="c2c_video_div">\n        <video id="c2c_local_video" style="display: none;" autoplay playsinline></video>\n        <video id="c2c_remote_video" style="display: none;" autoplay playsinline></video>\n    </div>\n        ');
              }
            }
            customElements.define("click-to-call-video", e);
          },
          338: function (e, t, n) {
            "use strict";
            var i =
                (this && this.__awaiter) ||
                function (e, t, n, i) {
                  return new (n || (n = Promise))(function (r, s) {
                    function o(e) {
                      try {
                        a(i.next(e));
                      } catch (e) {
                        s(e);
                      }
                    }
                    function l(e) {
                      try {
                        a(i.throw(e));
                      } catch (e) {
                        s(e);
                      }
                    }
                    function a(e) {
                      var t;
                      e.done
                        ? r(e.value)
                        : ((t = e.value),
                          t instanceof n
                            ? t
                            : new n(function (e) {
                                e(t);
                              })).then(o, l);
                    }
                    a((i = i.apply(e, t || [])).next());
                  });
                },
              r =
                (this && this.__rest) ||
                function (e, t) {
                  var n = {};
                  for (var i in e)
                    Object.prototype.hasOwnProperty.call(e, i) &&
                      t.indexOf(i) < 0 &&
                      (n[i] = e[i]);
                  if (
                    null != e &&
                    "function" == typeof Object.getOwnPropertySymbols
                  ) {
                    var r = 0;
                    for (i = Object.getOwnPropertySymbols(e); r < i.length; r++)
                      t.indexOf(i[r]) < 0 &&
                        Object.prototype.propertyIsEnumerable.call(e, i[r]) &&
                        (n[i[r]] = e[i[r]]);
                  }
                  return n;
                };
            Object.defineProperty(t, "__esModule", { value: !0 });
            const s = n(416),
              o = n(675),
              l = n(753),
              a = n(57);
            n(159), n(976);
            const u = n(813),
              c = [
                "Connection Error",
                "Request Timeout",
                "SIP Failure Code",
                "Internal Error",
                "Rejected",
                "Redirected",
                "Unavailable",
                "Not Found",
                "Address Incomplete",
                "Incompatible SDP",
                "Missing SDP",
                "Authentication Error",
                "WebRTC Error",
                "No Answer",
                "Expires",
                "No ACK",
                "Dialog Error",
                "User Denied Media Access",
                "Bad Media Description",
                "RTP Timeout",
              ];
            class d extends HTMLElement {
              setCallerPhone(e) {
                var t;
                (
                  null === (t = null == e ? void 0 : e.c2c_config) ||
                  void 0 === t
                    ? void 0
                    : t.callerPhone
                )
                  ? (this.internalConf.general.callerPhone =
                      e.c2c_config.callerPhone)
                  : (this.internalConf.general.callerPhone = "anonymous");
              }
              constructor() {
                super(),
                  (this.callDuration = 0),
                  (this.callTimer = null),
                  (this.c_sbcDisconnectCounterMax = 5),
                  (this.c_defaultDtmfDelay = "2000"),
                  (this.c_token = ""),
                  (this.c_dtmfDelay = 0),
                  (this.c_localVideo = null),
                  (this.c_remoteVideo = null),
                  (this.c_activeCall = null),
                  (this.c_hasCamera = !1),
                  (this.c_hasMicrophone = !0),
                  (this.c_restoreCall = null),
                  (this.c_x_header = null),
                  (this.c_sbcDisconnectTimer = null),
                  (this.c_callAfterConnection = null),
                  (this.c_isWsConnected = !1),
                  (this.c_streamDest = null),
                  (this.c_sbcDisconnectCounter = 0),
                  (this.c_screenSharingStream = null),
                  (this.c_remoteVideoDeviceId = ""),
                  (this.g_widgetDiv = null),
                  (this.g_callButton = null),
                  (this.g_callButtonOriginalTitle = ""),
                  (this.g_status_line = null),
                  (this.g_selectDevicesButton = null),
                  (this.g_selectDevicesDiv = null),
                  (this.g_keypadButton = null),
                  (this.g_keypadDiv = null),
                  (this.g_screenSharingButton = null),
                  (this.g_videoSpan = null),
                  (this.g_videoCheckbox = null),
                  (this.g_cameraButton = null),
                  (this.g_cameraLineSvg = null),
                  (this.g_messageId = 0),
                  (this.g_isSelfVideo = !1),
                  (this.g_selfVideoSpan = null),
                  (this.g_selfVideoChk = null);
                const e = JSON.parse(this.config),
                  t = new URLSearchParams(window.location.search);
                (this.internalConf = new l.Click2CallConfig(e, t)),
                  this.setCallerPhone(e),
                  (this.c_phone = new s.AudioCodesUA()),
                  this.c_setConsoleLoggersStyle(this.c_phone),
                  (this.c_audioPlayer = new o.default(
                    console.log,
                    this.c_phone.getBrowserName()
                  )),
                  (this.c_devices = new a.SelectDevices(this.c_phone)),
                  this.attachShadow({ mode: "open" }),
                  this.render();
              }
              static get observedAttributes() {
                return [
                  "config",
                  "form",
                  "isOngoingCall",
                  "generateCode",
                  "payload",
                  "displayClickToCallMessages",
                ];
              }
              displayElement(e, t = "flex") {
                const n = this.g_getElement(e);
                n && (n.style.display = t);
              }
              handleDTMF(e) {
                this.c_sendDtmf(e.detail.value);
              }
              initiateViewForSlot(e) {
                const t = this.g_getElementByQuerySelector(`slot[name="${e}"]`);
                t && 0 === t.assignedNodes().length
                  ? t.remove()
                  : this.g_getElementByQuerySelector(
                      `div[name="${e}"]`
                    ).remove();
              }
              renderDefaultSlots() {
                this.initiateViewForSlot("on-going-call");
              }
              connectedCallback() {
                var e, t, n, i, r, s;
                const o = document.createElement("style");
                (o.textContent =
                  '\n.click-to-call-body-frame {\n    font:\n        80%/1.5 system-ui,\n        sans-serif;\n    margin: 0;\n    place-items: center;\n    padding: 0 1rem 1rem 1rem;\n}\n\n#main_div {\n    margin-top: 0px;\n    padding-top: 0px;\n    width: 100%;\n    height: calc(100% - 84px);\n}\n\n#c2c_connection_speed_div {\n    display: none;\n    font-size: 18px;\n}\n\n#c2c_test_call_quality_div {\n    display: none;\n    font-size: 18px;\n}\n\n#c2c_widget_div {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: auto;\n    margin-top: 1rem;\n}\n\n#c2c_status_line {\n    display: none;\n}\n\n#c2c_keypad_btn {\n    font-size: 18px;\n    padding-top: 2px;\n    display: none;\n}\n\n#c2c_keypad_svg {\n    width: 26px;\n    height: 26px;\n    stroke: black;\n}\n\n#c2c_test_btn {\n    font-size: 18px;\n    padding-top: 2px;\n    display: none;\n}\n\n#c2c_test_svg {\n    width: 22px;\n    height: 22px;\n}\n\n#c2c_screen_sharing_btn {\n    display: none;\n}\n\n#c2c_screen_sharing_svg {\n    width: 26px;\n    height: 26px;\n}\n\nbutton#c2c_call_btn.c2c_call_btn_hangup, button#c2c_keypad_btn {\n    background: #f05656;\n    border-color: #f05656;\n    flex-basis: unset;\n    width: auto;\n    font-family: Roboto;\n    font-size: 14px;\n    font-weight: 500;\n    line-height: 13px;\n    letter-spacing: 0.1599999964237213px;\n    text-align: center;\n    margin-bottom: 25px;\n    margin-right: 8px\n}\n\nbutton#c2c_keypad_btn {\n    background: linear-gradient(102.97deg, #56aaff 0%, #8636ff 100%);\n    border: 1px solid transparent;\n}\n\n.c2c_call_btn_ready {\n    color: #ffffff;\n    background: #ffffff;\n}\n\n.c2c_call_svg_disabled {\n    transform: rotate(-90deg);\n    fill: gray;\n}\n\n.c2c_call_svg_ready {\n    fill: white;\n}\n\n#c2c_video_chk_span {\n    color: #150cef;\n    display: none;\n}\n\n#c2c_camera_btn {\n    padding: 0px 5px 3px 5px;\n    border: 0px none #99e6ff;\n    background-color: #99e6ff;\n    display: none;\n}\n\n#c2c_camera_svg {\n    width: 26px;\n    height: 26px;\n    stroke: black;\n}\n\n#c2c_camera_line_svg.c2c_camera_on {\n    stroke: none;\n}\n\n#c2c_camera_line_svg.c2c_camera_off {\n    stroke: black;\n}\n\n#c2c_self_video_chk_span {\n    display: none;\n}\n\n#c2c_select_devices_div {\n    display: none;\n    width: 100%;\n    margin-top: 1rem;\n}\n\n#c2c_video_div {\n    display: none;\n    flex-wrap: wrap;\n    justify-content: center;\n}\n#c2c_call_btn,\n#select_devices_done_btn,\n#c2c_screen_sharing_btn,\n#c2c_keypad_btn {\n    align-items: center;\n    justify-content: center;\n    padding: 6px 16px;\n    border-radius: 4px;\n    font-family: "SF UI Display";\n    font-size: 0.875rem;\n    line-height: 1.75;\n    min-width: 64px;\n    color: #ffffff;\n    background: linear-gradient(102.97deg, #56aaff 0%, #8636ff 100%);\n    border: 1px solid transparent;\n    width: auto;\n    cursor: pointer;\n    flex-basis: 100%;\n    outline: none;\n    height: 40px;\n    svg {\n        margin-right: 6px;\n    }\n    span {\n        width: 100%;\n        display: flex;\n        justify-content: space-between;\n    }\n}\n\n#c2c_select_devices_btn {\n    font-size: 18px;\n    padding-top: 2px;\n    display: none;\n    align-items: center;\n    justify-content: center;\n    padding: 6px 16px;\n    border-radius: 4px;\n    font-family: "SF UI Display";\n    font-size: 0.875rem;\n    line-height: 1.75;\n    color: #2196f3;\n    background: #f5f5f5;\n    border: 1px solid #eaeaef;\n    box-shadow: none;\n    font-weight: 400;\n    cursor: pointer;\n    height: 40px;\n    margin-left: 8px;\n}\n\n#c2c_call_btn,\n#c2c_select_devices_btn {\n    display: flex;\n}\n\n#c2c_select_devices_btn:hover {\n    background-color: rgba(33, 150, 243, 0.04);\n    border: 1px solid #2196f3;\n}\n\n#c2c_call_btn:disabled {\n    opacity: 0.3;\n    corsor: default;\n}\n\n#c2c_call_btn:hover {\n    background: linear-gradient(102.97deg, #3399ff 0%, #751aff 100%);\n}\n\n#select_devices_done_btn {\n    margin: 1rem 0;\n    width: 100%;\n}\n\n#c2c_call_svg {\n    width: 22px;\n    height: 22px;\n}\n\n#microphone,\n#speaker {\n    display: flex;\n    width: 100%;\n    height: 2.4375rem;\n    border-radius: 4px;\n    border: 1px solid rgba(80, 93, 111, 0.5);\n    outline: none;\n    background-color: white;\n    color: black;\n}\n\n#c2c_devices {\n    width: 100%;\n}\n\n#c2c_select_devices_btn svg {\n    width: 22px !important;\n    height: 22px !important;\n    display: block;\n    float: left;\n    transition: all 0.5s ease;\n    overflow: hidden;\n    vertical-align: middle;\n    touch-action: none;\n    fill: rgb(33, 150, 243);\n}\n\n#microphone_dev,\n#speaker_dev,\n#camera_dev {\n    display: flex;\n    flex-direction: column;\n    margin-bottom: 1rem;\n}\n\n.field-label {\n    font-family: "SF UI Display";\n    font-weight: 400;\n    font-size: 1rem;\n    line-height: 1.4375em;\n    pointer-events: auto;\n    user-select: none;\n    background: transparent;\n    color: #505d6f;\n}\n\n.d-flex {\n    display: flex;\n}\n\n.d-flex > div:first-child {\n    flex-grow: 1;\n}\n\n.d-flex > div:last-child {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n#on-going-call {\n    flex-direction: column;\n    align-items: center;\n}\n\n#on-going-call #on-going-call-duration,\n#on-going-call #on-going-call-message,\n#on-going-call #on-going-call-number {\n    font-family: "SF UI Display";\n    font-size: 17px;\n    font-weight: 600;\n    line-height: 21px;\n    letter-spacing: 0px;\n    text-align: left;\n    color: #505d6f;\n    margin: 1rem 0;\n}\n\n#on-going-call, #on-going-call-icon {\n    display: none;\n}\n\n#on-going-call-icon {\n    margin: 1rem 0;\n}\n'),
                  null === (e = this.shadowRoot) ||
                    void 0 === e ||
                    e.appendChild(o),
                  this.renderDefaultSlots(),
                  (null ===
                    (i =
                      null ===
                        (n =
                          null === (t = this.internalConf) || void 0 === t
                            ? void 0
                            : t.uiConfig) || void 0 === n
                        ? void 0
                        : n.call) || void 0 === i
                    ? void 0
                    : i.isHideCallIcon) &&
                    (this.g_getElement("c2c_call_svg").style.display = "none"),
                  (null ===
                    (s =
                      null === (r = this.internalConf) || void 0 === r
                        ? void 0
                        : r.general) || void 0 === s
                    ? void 0
                    : s.dtmfKeypadEnabled) &&
                    this.g_getElement("keypad").addEventListener(
                      "keyPadBtnClick",
                      this.handleDTMF.bind(this)
                    );
              }
              disconnectedCallback() {
                this.g_getElement("keypad").removeEventListener(
                  "keyPadBtnClick",
                  this.handleDTMF
                );
              }
              setOngoingCall(e) {
                this.isOngoingCall &&
                  "function" == typeof window[this.isOngoingCall] &&
                  (0, window[this.isOngoingCall])(e);
              }
              resetConf() {
                const e = new URLSearchParams(window.location.search),
                  t = JSON.parse(this.config);
                (this.internalConf = new l.Click2CallConfig(t, e)),
                  this.setCallerPhone(t);
              }
              attributeChangedCallback(e, t, n) {
                var i, r;
                if (t !== n) {
                  this.c_hangupCall(), this.resetConf();
                  const e =
                    null ===
                      (r =
                        this.form &&
                        (null === (i = JSON.parse(this.form)) || void 0 === i
                          ? void 0
                          : i.isValid)) ||
                    void 0 === r ||
                    r;
                  this.g_callButton &&
                    (e
                      ? (this.g_callButton.disabled = !1)
                      : this.g_guiState_disabled("caller number is empty"));
                }
              }
              get config() {
                var e;
                return null !== (e = this.getAttribute("config")) &&
                  void 0 !== e
                  ? e
                  : "{}";
              }
              set config(e) {
                this.setAttribute("config", e);
              }
              get form() {
                var e;
                return null !== (e = this.getAttribute("form")) && void 0 !== e
                  ? e
                  : "{}";
              }
              set form(e) {
                this.setAttribute("form", e);
              }
              get isOngoingCall() {
                var e;
                return null !== (e = this.getAttribute("isOngoingCall")) &&
                  void 0 !== e
                  ? e
                  : "";
              }
              set isOngoingCall(e) {
                this.setAttribute("isOngoingCall", e);
              }
              get generateCode() {
                var e;
                return null !== (e = this.getAttribute("generateCode")) &&
                  void 0 !== e
                  ? e
                  : "";
              }
              set generateCode(e) {
                this.setAttribute("generateCode", e);
              }
              get displayClickToCallMessages() {
                var e;
                return null !==
                  (e = this.getAttribute("displayClickToCallMessages")) &&
                  void 0 !== e
                  ? e
                  : "";
              }
              set displayClickToCallMessages(e) {
                this.setAttribute("displayClickToCallMessages", e);
              }
              get payload() {
                var e;
                return null !== (e = this.getAttribute("payload")) &&
                  void 0 !== e
                  ? e
                  : "{}";
              }
              set payload(e) {
                this.setAttribute("payload", e);
              }
              init() {
                var e, t, n, i;
                (
                  null ===
                    (t =
                      null === (e = this.internalConf) || void 0 === e
                        ? void 0
                        : e.general) || void 0 === t
                    ? void 0
                    : t.logger
                )
                  ? this.c_setWebsocketLoggers(
                      null ===
                        (i =
                          null === (n = this.internalConf) || void 0 === n
                            ? void 0
                            : n.general) || void 0 === i
                        ? void 0
                        : i.logger
                    )
                      .catch((e) => {
                        this.c_setConsoleLoggersStyle(this.c_phone),
                          this.c_log("Cannot connect to logger server", e);
                      })
                      .finally(() => {
                        this.c_initPhone();
                      })
                  : (this.c_setConsoleLoggersStyle(this.c_phone),
                    this.c_initPhone());
              }
              c_setWebsocketLoggers(e) {
                return new Promise((t, n) => {
                  const i = new WebSocket("wss://" + e, "wslog");
                  (i.onopen = () => {
                    t(i);
                  }),
                    (i.onerror = (e) => {
                      n(e);
                    });
                }).then((t) => {
                  const n = (...e) => {
                    const n = [this.c_timestamp() + e[0]]
                      .concat(e.slice(1))
                      .join();
                    t.readyState === WebSocket.OPEN
                      ? t.send(n + "\n")
                      : console.log(n);
                  };
                  this.c_log(`Sending log to "${e}"`),
                    (this.c_log = n),
                    this.c_phone.setAcLogger(n),
                    this.c_phone.setJsSipLogger(n);
                });
              }
              c_initPhone() {
                return i(this, void 0, void 0, function* () {
                  var e,
                    t,
                    n,
                    i,
                    s,
                    o,
                    l,
                    a,
                    c,
                    d,
                    h,
                    _,
                    f,
                    g,
                    p,
                    v,
                    m,
                    y,
                    C,
                    b,
                    S,
                    T,
                    w,
                    E,
                    A,
                    R;
                  if (
                    (this.c_log(
                      `------ Date: ${new Date().toDateString()} -------`
                    ),
                    this.c_log(
                      null ===
                        (t =
                          null === (e = this.internalConf) || void 0 === e
                            ? void 0
                            : e.general) || void 0 === t
                        ? void 0
                        : t.userAgent
                    ),
                    this.c_log(`SDK: ${this.c_phone.version()}`),
                    this.c_log(`SIP: ${u.C.USER_AGENT}`),
                    this.c_log(
                      `Browser: ${this.c_phone.getBrowserName()}  Internal name: ${this.c_phone.getBrowser()}|${this.c_phone.getOS()}`
                    ),
                    this.c_phone.setUserAgent(
                      `${
                        null ===
                          (i =
                            null === (n = this.internalConf) || void 0 === n
                              ? void 0
                              : n.general) || void 0 === i
                          ? void 0
                          : i.userAgent
                      } ${this.c_phone.version()} ${this.c_phone.getBrowserName()}`
                    ),
                    null ===
                      (o =
                        null === (s = this.internalConf) || void 0 === s
                          ? void 0
                          : s.general) || void 0 === o
                      ? void 0
                      : o.selectDevicesEnabled)
                  ) {
                    const e = sessionStorage.getItem("c2c_selectedDevices");
                    null !== e && this.c_devices.load(JSON.parse(e)),
                      yield this.c_devices.enumerate(!1);
                  }
                  if (
                    ((
                      null ===
                        (a =
                          null === (l = this.internalConf) || void 0 === l
                            ? void 0
                            : l.general) || void 0 === a
                        ? void 0
                        : a.urlToken
                    )
                      ? (this.c_token = this.internalConf.general.urlToken)
                      : this.c_log(
                          'Error: URL parameter "token" is ignored. To enable set configuration "urlToken: true"'
                        ),
                    (this.c_dtmfDelay =
                      null !==
                        (h =
                          null ===
                            (d =
                              null === (c = this.internalConf) || void 0 === c
                                ? void 0
                                : c.general) || void 0 === d
                            ? void 0
                            : d.restoreCallMaxDelay) && void 0 !== h
                        ? h
                        : parseInt(this.c_defaultDtmfDelay)),
                    !this.g_initGUI())
                  )
                    return;
                  if (
                    ((this.c_localVideo = this.g_getLocalVideoElement()),
                    (this.c_remoteVideo = this.g_getRemoteVideoElement()),
                    !this.c_localVideo || !this.c_remoteVideo)
                  )
                    return;
                  if (
                    !navigator.mediaDevices ||
                    !navigator.mediaDevices.getUserMedia
                  )
                    return (
                      this.g_info("No WebRTC"),
                      void this.g_guiState_disabled(
                        "WebRTC API is not supported in this browser !"
                      )
                    );
                  try {
                    (this.c_hasCamera =
                      yield this.c_phone.checkAvailableDevices()),
                      this.c_log(
                        "Camera is " +
                          (this.c_hasCamera ? "present" : "missing")
                      );
                  } catch (e) {
                    if (
                      !(null ===
                        (f =
                          null === (_ = this.internalConf) || void 0 === _
                            ? void 0
                            : _.general) || void 0 === f
                        ? void 0
                        : f.allowCallWithoutMicrophone)
                    )
                      return (
                        this.g_info("No microphone or speaker !"),
                        void this.g_guiState_disabled(
                          "No microphone or speaker !"
                        )
                      );
                    this.c_log(
                      'Microphone is missed. Used "allowCallWithoutMicrophone" mode'
                    ),
                      (this.c_hasMicrophone = !1);
                  }
                  const I = sessionStorage.getItem("c2c_restoreCall");
                  if (null !== I) {
                    sessionStorage.removeItem("c2c_restoreCall"),
                      (this.c_restoreCall = JSON.parse(I));
                    const e = Math.ceil(
                      Math.abs(this.c_restoreCall.time - new Date().getTime()) /
                        1e3
                    );
                    e >
                      (null ===
                        (p =
                          null === (g = this.internalConf) || void 0 === g
                            ? void 0
                            : g.general) || void 0 === p
                        ? void 0
                        : p.restoreCallMaxDelay) &&
                      (this.c_log(
                        "No restore call, delay is too long (" + e + " seconds)"
                      ),
                      (this.c_restoreCall = null));
                  }
                  if (
                    (window.addEventListener(
                      "beforeunload",
                      this.c_onBeforeUnload
                    ),
                    this.c_audioPlayer.init({ logger: this.c_log }),
                    (null ===
                      (m =
                        null === (v = this.internalConf) || void 0 === v
                          ? void 0
                          : v.sound) || void 0 === m
                      ? void 0
                      : m.downloadSounds) &&
                      (yield this.c_audioPlayer.downloadSounds(
                        "./sounds/",
                        this.internalConf.sound.downloadSounds
                      )),
                    (null ===
                      (C =
                        null === (y = this.internalConf) || void 0 === y
                          ? void 0
                          : y.sound) || void 0 === C
                      ? void 0
                      : C.generateTones) &&
                      (yield this.c_audioPlayer.generateTonesSuite(
                        this.internalConf.sound.generateTones
                      )),
                    null ===
                      (S =
                        null === (b = this.internalConf) || void 0 === b
                          ? void 0
                          : b.general) || void 0 === S
                      ? void 0
                      : S.dtmfKeypadEnabled)
                  ) {
                    const e = this.c_audioPlayer.dtmfTones,
                      { A: t, B: n, C: i, D: s } = e,
                      o = r(e, ["A", "B", "C", "D"]);
                    o && (yield this.c_audioPlayer.generateTonesSuite(o));
                  }
                  if (
                    (this.c_log("audioPlayer2: sounds are ready"),
                    this.c_devices)
                  ) {
                    const e = this.c_devices.getSelected("speaker").deviceId;
                    this.c_audioPlayer.setSpeakerId(e);
                  }
                  if (
                    (this.g_guiState_beforeCall(), null !== this.c_restoreCall)
                  )
                    this.c_log("Trying to restore call", this.c_restoreCall),
                      this.c_call(
                        this.internalConf.general.call,
                        this.g_isVideoCall()
                      );
                  else {
                    const e = (
                      null ===
                        (w =
                          null === (T = this.internalConf) || void 0 === T
                            ? void 0
                            : T.general) || void 0 === w
                        ? void 0
                        : w.callAutoStart
                    )
                      ? null ===
                          (R =
                            null ===
                              (A =
                                null === (E = this.internalConf) || void 0 === E
                                  ? void 0
                                  : E.general) || void 0 === A
                              ? void 0
                              : A.callAutoStart) || void 0 === R
                        ? void 0
                        : R.toLowerCase()
                      : "no";
                    ("yes force" === e ||
                      ("yes" === e && !this.c_audioPlayer.isDisabled())) &&
                      (this.c_audioPlayer.isDisabled()
                        ? this.c_log(
                            "Start call automatically. Warning: audio player is disabled. So you cannot hear beeps!"
                          )
                        : this.c_log("Start call automatically"),
                      this.c_call(
                        this.internalConf.general.call,
                        this.g_isVideoCall()
                      ));
                  }
                });
              }
              g_guiState_beforeCall() {
                var e, t, n, i, r, s, o, l, a, u, c;
                if (
                  ((this.callDuration = 0),
                  this.c_log("guiState: before call"),
                  (null ===
                    (t =
                      null === (e = this.internalConf) || void 0 === e
                        ? void 0
                        : e.general) || void 0 === t
                    ? void 0
                    : t.selectDevicesEnabled) &&
                    this.g_selectDevicesButton &&
                    ((this.g_selectDevicesButton.style.display = "block"),
                    (this.g_selectDevicesButton.disabled = !1),
                    this.g_selectDevicesDiv &&
                      (this.g_selectDevicesDiv.style.display = "none"),
                    this.displayElement("main_div", "block")),
                  this.displayElement("form-fields", "contents"),
                  this.displayElement("click-to-call-content-icon"),
                  this.displayElement("on-going-call", "none"),
                  this.displayElement("on-going-call-icon", "none"),
                  this.displayElement("on-going-call-duration", "none"),
                  this.displayElement("on-going-call-number", "none"),
                  this.displayElement("on-going-call-message", "none"),
                  this.setOngoingCall(!1),
                  this.g_callButton &&
                    ((this.g_callButton.style.display = "flex"),
                    (this.g_callButton.disabled = !1),
                    (this.g_callButton.className = "c2c_call_btn_ready"),
                    (this.g_callButton.querySelector("div").innerText =
                      null ===
                        (r =
                          null ===
                            (i =
                              null === (n = this.internalConf) || void 0 === n
                                ? void 0
                                : n.uiConfig) || void 0 === i
                            ? void 0
                            : i.call) || void 0 === r
                        ? void 0
                        : r.callText),
                    this.g_callButton
                      .querySelector("svg")
                      .setAttribute("class", "c2c_call_svg_ready"),
                    (this.g_callButton.title = this.g_callButtonOriginalTitle),
                    (this.g_callButton.onclick = this.g_makeCall.bind(this))),
                  null ===
                    (o =
                      this.form &&
                      (null === (s = JSON.parse(this.form)) || void 0 === s
                        ? void 0
                        : s.isValid)) ||
                    void 0 === o ||
                    o ||
                    this.g_guiState_disabled("caller number is empty"),
                  this.g_videoSpan)
                ) {
                  const e =
                    "video" ===
                      (null ===
                        (a =
                          null === (l = this.internalConf) || void 0 === l
                            ? void 0
                            : l.general) || void 0 === a
                        ? void 0
                        : a.type) && this.c_hasCamera;
                  (this.g_videoSpan.style.display = e ? "flex" : "none"),
                    this.g_videoCheckbox &&
                      (this.g_videoCheckbox.checked =
                        null ===
                          (c =
                            null === (u = this.internalConf) || void 0 === u
                              ? void 0
                              : u.general) || void 0 === c
                          ? void 0
                          : c.videoCheckboxDefault);
                }
                this.g_cameraButton &&
                  ((this.g_cameraButton.style.display = "none"),
                  this.g_cameraLineSvg &&
                    (this.g_cameraButton.style.display = "none")),
                  this.g_keypadButton &&
                    this.g_keypadDiv &&
                    ((this.g_keypadButton.style.display = "none"),
                    (this.g_keypadDiv.style.display = "none")),
                  this.g_selfVideoSpan &&
                    (this.g_selfVideoSpan.style.display = "none"),
                  this.g_screenSharingButton &&
                    (this.g_screenSharingButton.style.display = "none");
              }
              g_isVideoCall() {
                var e, t, n, i;
                return (
                  !(
                    !this.c_hasCamera ||
                    "audio" ===
                      (null ===
                        (t =
                          null === (e = this.internalConf) || void 0 === e
                            ? void 0
                            : e.general) || void 0 === t
                        ? void 0
                        : t.type)
                  ) &&
                  null !==
                    (i =
                      null === (n = this.g_videoCheckbox) || void 0 === n
                        ? void 0
                        : n.checked) &&
                  void 0 !== i &&
                  i
                );
              }
              g_makeCall() {
                var e, t;
                if (
                  null ===
                    (t =
                      null === (e = this.internalConf) || void 0 === e
                        ? void 0
                        : e.callBacks) || void 0 === t
                    ? void 0
                    : t.g_create_x_header
                )
                  try {
                    this.c_x_header =
                      this.internalConf.callBacks.g_create_x_header();
                  } catch (e) {
                    return (
                      this.g_info(e),
                      void this.c_log(
                        "Exception in function create_x_header",
                        e
                      )
                    );
                  }
                const n = this.g_isVideoCall();
                this.c_clickEvent(
                  "call",
                  this.c_call,
                  this.internalConf.general.call,
                  n
                );
              }
              g_ongoing_call() {
                this.setOngoingCall(!0),
                  this.displayElement("on-going-call"),
                  this.displayElement("on-going-call-icon"),
                  this.displayElement("form-fields", "none"),
                  this.displayElement("click-to-call-content-icon", "none");
              }
              g_guiState_calling() {
                var e, t, n;
                this.c_log("guiState: calling"),
                  this.g_selectDevicesButton &&
                    (this.g_selectDevicesButton.style.display = "none"),
                  this.g_ongoing_call(),
                  this.g_callButton &&
                    ((this.g_callButton.className = "c2c_call_btn_hangup"),
                    (this.g_callButton.title = "Hang up"),
                    (this.g_callButton.querySelector("div").innerText =
                      null ===
                        (n =
                          null ===
                            (t =
                              null === (e = this.internalConf) || void 0 === e
                                ? void 0
                                : e.uiConfig) || void 0 === t
                            ? void 0
                            : t.call) || void 0 === n
                        ? void 0
                        : n.endCallText),
                    this.g_callButton
                      .querySelector("svg")
                      .setAttribute("class", "c2c_call_svg_calling"),
                    this.g_callButton
                      .querySelector("svg")
                      .setAttribute("class", "c2c_call_svg_calling"),
                    (this.g_callButton.onclick = () => {
                      this.c_clickEvent("hangup", this.c_hangupCall.bind(this));
                    })),
                  this.g_videoSpan && (this.g_videoSpan.style.display = "none");
              }
              c_hangupCall() {
                null !== this.c_activeCall &&
                  (this.c_activeCall.terminate(),
                  (this.c_activeCall = null),
                  this.c_phone.deinit()),
                  this.resetConf(),
                  this.g_guiState_beforeCall();
              }
              handleGenerateError(e = "") {
                const t = null != e ? e : "Cannot generate authentication code";
                this.c_log(t), this.displayErrorMessage(t);
              }
              defaultGetAuth(e = "") {
                var t, n;
                if (e)
                  fetch(e, {
                    method: "POST",
                    headers: {
                      Authorization: `Bearer ${this.internalConf.general.urlToken}`,
                      "Content-Type": "application/json",
                      Accept: "application/json",
                    },
                    body: JSON.stringify({
                      callerPhone:
                        null ===
                          (n =
                            null === (t = this.internalConf) || void 0 === t
                              ? void 0
                              : t.general) || void 0 === n
                          ? void 0
                          : n.callerPhone,
                    }),
                  })
                    .then((e) => e.json())
                    .then((e) => {
                      this.c_phone.setOAuthToken(
                        null == e ? void 0 : e.authenticationCode
                      ),
                        this.c_initStack({
                          user: this.internalConf.general.callerPhone,
                          displayName: this.internalConf.general.callerPhone,
                          password: "",
                        });
                    })
                    .catch((e) => {
                      var t;
                      this.handleGenerateError(
                        null !== (t = e.message) && void 0 !== t ? t : ""
                      );
                    });
                else {
                  const e = "Error: authURL is not set";
                  this.c_log(e), this.displayErrorMessage(e);
                }
              }
              displayErrorMessage(e) {
                window.dispatchEvent(
                  new CustomEvent("displayClickToCallMessages", {
                    detail: { severity: "error", title: "Error!", message: e },
                    bubbles: !0,
                    composed: !0,
                  })
                );
              }
              c_sbc_connect_sequence() {
                return i(this, void 0, void 0, function* () {
                  var e, t, n, i, r;
                  this.g_info("Connecting"),
                    (null === (e = this.internalConf.general) || void 0 === e
                      ? void 0
                      : e.caller) &&
                    (null ===
                      (n =
                        null === (t = this.internalConf) || void 0 === t
                          ? void 0
                          : t.general) || void 0 === n
                      ? void 0
                      : n.password)
                      ? this.c_initStack({
                          user: this.internalConf.general.caller,
                          displayName: this.internalConf.general.callerPhone,
                          password: this.internalConf.general.password,
                        })
                      : this.generateCode &&
                        "function" == typeof window[this.generateCode]
                      ? (0, window[this.generateCode])(
                          this.internalConf,
                          JSON.parse(this.payload)
                        )
                          .then((e) => {
                            var t;
                            this.c_phone.setOAuthToken(
                              null === (t = null == e ? void 0 : e.data) ||
                                void 0 === t
                                ? void 0
                                : t.authenticationCode
                            ),
                              this.c_initStack({
                                user: this.internalConf.general.callerPhone,
                                displayName:
                                  this.internalConf.general.callerPhone,
                                password: "",
                              });
                          })
                          .catch((e) => {
                            var t;
                            this.handleGenerateError(
                              null !== (t = e.message) && void 0 !== t ? t : ""
                            );
                          })
                      : this.defaultGetAuth(
                          null ===
                            (r =
                              null === (i = this.internalConf) || void 0 === i
                                ? void 0
                                : i.server) || void 0 === r
                            ? void 0
                            : r.authURL
                        );
                });
              }
              c_searchServerAddress(e, t) {
                t = t.toLowerCase();
                for (let n = 0; n < e.length; n++) {
                  const i = e[n];
                  if ((i instanceof Array ? i[0] : i).toLowerCase() === t)
                    return n;
                }
                return -1;
              }
              g_setSelfVideoState(e) {
                this.g_selfVideoChk &&
                  ((this.g_isSelfVideo = e),
                  (this.g_selfVideoChk.checked = this.g_isSelfVideo));
              }
              c_initStack(e = null) {
                try {
                  if (null !== this.c_restoreCall) {
                    const e = this.c_searchServerAddress(
                      this.internalConf.server.addresses,
                      this.c_restoreCall.address
                    );
                    -1 !== e
                      ? (this.c_log(
                          'Page reloading, raise priority of previously connected server: "' +
                            this.c_restoreCall.address +
                            '"'
                        ),
                        (this.internalConf.server.addresses[e] = [
                          this.c_restoreCall.address,
                          1e3,
                        ]))
                      : this.c_log(
                          "Cannot find previously connected server: " +
                            this.c_restoreCall.address +
                            " in configuration"
                        );
                  }
                  this.c_phone.setServerConfig(
                    this.internalConf.server.addresses,
                    this.internalConf.server.domain,
                    this.internalConf.server.iceServers
                  ),
                    this.c_phone.setAccount(
                      null == e ? void 0 : e.user,
                      null == e ? void 0 : e.displayName,
                      null == e ? void 0 : e.password
                    ),
                    this.c_phone.setWebSocketKeepAlive(
                      this.internalConf.general.pingInterval,
                      this.internalConf.general.pongTimeout,
                      this.internalConf.general.timerThrottlingBestEffort,
                      this.internalConf.general.pongReport,
                      this.internalConf.general.pongDist
                    ),
                    this.c_phone.setListeners({
                      loginStateChanged: (e, t) => {
                        var n, i, r;
                        switch (t) {
                          case "connecting":
                            this.c_log(
                              "phone>>> loginStateChanged: connecting"
                            ),
                              this.g_getElement("on-going-call-message") &&
                                (this.displayElement("on-going-call-message"),
                                (this.g_getElement(
                                  "on-going-call-message"
                                ).innerText =
                                  null ===
                                    (r =
                                      null ===
                                        (i =
                                          null === (n = this.internalConf) ||
                                          void 0 === n
                                            ? void 0
                                            : n.uiConfig) || void 0 === i
                                        ? void 0
                                        : i.callSatus) || void 0 === r
                                    ? void 0
                                    : r.pending)),
                              this.displayElement(
                                "on-going-call-duration",
                                "none"
                              ),
                              this.displayElement(
                                "on-going-call-number",
                                "none"
                              );
                            break;
                          case "connected":
                            if (
                              (this.c_log(
                                "phone>>> loginStateChanged: connected"
                              ),
                              (this.c_isWsConnected = !0),
                              null !== this.c_activeCall)
                            ) {
                              this.c_log(
                                "phone: active call exists (SBC might have switched over to secondary)"
                              );
                              break;
                            }
                            null !== this.c_restoreCall
                              ? (this.g_setSelfVideoState(
                                  this.c_restoreCall.selfVideo
                                ),
                                this.c_makeCall(
                                  this.c_restoreCall.callTo,
                                  "sendrecv" === this.c_restoreCall.video ||
                                    "sendonly" === this.c_restoreCall.video,
                                  {
                                    extraHeaders: [
                                      "Replaces: " +
                                        this.c_restoreCall.replaces,
                                    ],
                                  }
                                ))
                              : this.c_callAfterConnection &&
                                this.c_makeCall(
                                  this.c_callAfterConnection.user,
                                  this.c_callAfterConnection.video,
                                  this.c_callAfterConnection.options
                                );
                            break;
                          case "disconnected":
                            this.c_log(
                              "phone>>> loginStateChanged: disconnected"
                            ),
                              (this.c_isWsConnected = !1),
                              this.c_phone.isInitialized() &&
                                this.c_sbcDisconnectCounter++ >=
                                  this.c_sbcDisconnectCounterMax &&
                                null === this.c_activeCall &&
                                (this.c_log("phone: too many disconnections."),
                                this.c_phone.deinit(),
                                this.g_info("Cannot connect to SBC server"),
                                this.g_guiState_beforeCall());
                            break;
                          case "login failed":
                            this.c_log(
                              "phone>>> loginStateChanged: login failed"
                            );
                            break;
                          case "login":
                            this.c_log("phone>>> loginStateChanged: login");
                            break;
                          case "logout":
                            this.c_log("phone>>> loginStateChanged: logout");
                        }
                      },
                      outgoingCallProgress: (e, t) => {
                        var n, i, r;
                        this.c_log("phone>>> outgoing call progress"),
                          this.g_info("Ringing", !0),
                          this.c_audioPlayer.play(
                            null ===
                              (r =
                                null ===
                                  (i =
                                    null === (n = this.internalConf) ||
                                    void 0 === n
                                      ? void 0
                                      : n.sound) || void 0 === i
                                  ? void 0
                                  : i.play) || void 0 === r
                              ? void 0
                              : r.outgoingCallProgress
                          );
                      },
                      callTerminated: (e, t, n, i) => {
                        var r, s, o, l, a, u, d, h;
                        if (
                          (c.some((e) => e === n) &&
                            this.displayErrorMessage(n),
                          this.c_log(
                            `phone>>> call terminated callback, cause=${n}`
                          ),
                          (this.c_activeCall = null),
                          "Redirected" === n)
                        )
                          return (
                            this.c_log(`Redirect call to ${i}`),
                            void this.c_makeCall(i, this.g_isVideoCall())
                          );
                        this.c_audioPlayer.stop();
                        const _ = n;
                        this.g_info(_, !0),
                          e.isOutgoing() && !e.wasAccepted()
                            ? this.c_audioPlayer.play(
                                null ===
                                  (o =
                                    null ===
                                      (s =
                                        null === (r = this.internalConf) ||
                                        void 0 === r
                                          ? void 0
                                          : r.sound) || void 0 === s
                                      ? void 0
                                      : s.play) || void 0 === o
                                  ? void 0
                                  : o.busy
                              )
                            : this.c_audioPlayer.play(
                                null ===
                                  (u =
                                    null ===
                                      (a =
                                        null === (l = this.internalConf) ||
                                        void 0 === l
                                          ? void 0
                                          : l.sound) || void 0 === a
                                      ? void 0
                                      : a.play) || void 0 === u
                                  ? void 0
                                  : u.disconnect
                              );
                        const f =
                          null ===
                            (h =
                              null === (d = this.internalConf) || void 0 === d
                                ? void 0
                                : d.general) || void 0 === h
                            ? void 0
                            : h.keepConnectionAfterCall;
                        0 === f || void 0 === f
                          ? this.c_phone.deinit()
                          : (this.c_sbcDisconnectTimer = setTimeout(() => {
                              this.c_log(
                                "The time interval between the end of the call and SBC disconnection is over"
                              ),
                                this.c_phone.deinit();
                            }, 1e3 * f)),
                          this.g_guiState_beforeCall(),
                          this.g_setVideoVisible(this.c_localVideo, !1),
                          this.g_setVideoVisible(this.c_remoteVideo, !1),
                          this.c_localVideo &&
                            (this.c_localVideo.srcObject = null),
                          this.c_remoteVideo &&
                            (this.c_remoteVideo.srcObject = null),
                          (this.c_restoreCall = null),
                          this.stopTimer();
                      },
                      callConfirmed: (e, t, n) =>
                        i(this, void 0, void 0, function* () {
                          var t, n, i, r, s, o, l, a, u, c, d, h, _, f, g;
                          if (
                            ((this.callDuration = 0),
                            this.displayElement(
                              "on-going-call-message",
                              "none"
                            ),
                            this.displayElement("on-going-call-duration"),
                            this.displayElement("on-going-call-number"),
                            this.g_getElement("on-going-call-duration") &&
                              (this.g_getElement(
                                "on-going-call-duration"
                              ).innerText = "00:00:00"),
                            (this.callTimer = setInterval(() => {
                              this.callDuration++;
                              const e =
                                ((t = this.callDuration),
                                [
                                  Math.floor(t / 3600),
                                  Math.floor((t % 3600) / 60),
                                  t % 60,
                                ]
                                  .map((e) => (e < 10 ? `0${e}` : e))
                                  .join(":"));
                              var t;
                              this.g_getElement("on-going-call-duration") &&
                                (this.g_getElement(
                                  "on-going-call-duration"
                                ).innerText = e);
                            }, 1e3)),
                            this.c_log("phone>>> callConfirmed"),
                            this.c_audioPlayer.stop(),
                            this.g_setVideoVisible(
                              this.c_localVideo,
                              this.g_isSelfVideo &&
                                this.c_activeCall.hasSendVideo()
                            ),
                            this.g_setVideoVisible(
                              this.c_remoteVideo,
                              this.c_activeCall.hasReceiveVideo()
                            ),
                            this.g_guiState_duringCall(),
                            this.g_info("Call is established", !0),
                            null !== this.c_restoreCall)
                          )
                            this.c_restoreCall.hold.includes("remote") &&
                              (this.c_log("Restore remote hold"),
                              this.g_info("Hold"),
                              this.c_activeCall.setRemoteHoldState()),
                              this.c_restoreCall.screenSharing &&
                                (this.c_log("Restore screen sharing"),
                                this.c_screenSharingToggle());
                          else if (
                            (null ===
                              (i =
                                null ===
                                  (n =
                                    null === (t = this.internalConf) ||
                                    void 0 === t
                                      ? void 0
                                      : t.sound) || void 0 === n
                                  ? void 0
                                  : n.play) || void 0 === i
                              ? void 0
                              : i.dtmf) &&
                            null !==
                              (null ===
                                (o =
                                  null ===
                                    (s =
                                      null === (r = this.internalConf) ||
                                      void 0 === r
                                        ? void 0
                                        : r.sound) || void 0 === s
                                    ? void 0
                                    : s.play) || void 0 === o
                                ? void 0
                                : o.dtmf)
                          ) {
                            this.c_dtmfDelay > 0 &&
                              (this.c_log(
                                `Wait ${this.c_dtmfDelay}ms before DTMF sending...`
                              ),
                              yield this.c_delay(this.c_dtmfDelay)),
                              this.c_log(
                                `Send DTMF sequence: ${
                                  null ===
                                    (u =
                                      null ===
                                        (a =
                                          null === (l = this.internalConf) ||
                                          void 0 === l
                                            ? void 0
                                            : l.sound) || void 0 === a
                                        ? void 0
                                        : a.play) || void 0 === u
                                    ? void 0
                                    : u.dtmf
                                }`
                              );
                            for (const e of null ===
                              (h =
                                null ===
                                  (d =
                                    null === (c = this.internalConf) ||
                                    void 0 === c
                                      ? void 0
                                      : c.sound) || void 0 === d
                                  ? void 0
                                  : d.play) || void 0 === h
                              ? void 0
                              : h.dtmf)
                              this.c_activeCall.sendDTMF(e);
                          }
                          (this.c_hasMicrophone && !e.data["test-call"]) ||
                            (this.g_info("Warning: No microphone or test call"),
                            this.c_log('Play "noMicrophoneSound"'),
                            this.c_audioPlayer.play(
                              null ===
                                (g =
                                  null ===
                                    (f =
                                      null === (_ = this.internalConf) ||
                                      void 0 === _
                                        ? void 0
                                        : _.sound) || void 0 === f
                                    ? void 0
                                    : f.play) || void 0 === g
                                ? void 0
                                : g.noMicrophoneSound,
                              this.c_streamDest
                            ));
                        }),
                      callShowStreams: (e, t, n) => {
                        var i;
                        this.c_log("phone>>> callShowStreams"),
                          this.c_audioPlayer.stop();
                        const r = e.data["test-call"] ? 0 : 1;
                        !this.c_devices && this.c_remoteVideo
                          ? ((this.c_remoteVideo.srcObject = n),
                            (this.c_remoteVideo.volume = r))
                          : null === (i = this.c_setRemoteVideoSinkId()) ||
                            void 0 === i ||
                            i
                              .catch((e) => {
                                this.c_log(
                                  `Warning: remove video HTMLVideoElement.setSinkId(): "${e.message}" [Used default browser speaker]`,
                                  e
                                );
                              })
                              .finally(() => {
                                this.c_remoteVideo &&
                                  ((this.c_remoteVideo.srcObject = n),
                                  (this.c_remoteVideo.volume = r));
                              }),
                          this.g_isSelfVideo &&
                            this.c_activeCall.hasSendVideo() &&
                            this.c_showSelfVideo(!0);
                      },
                      incomingCall: (e, t) => {
                        this.c_log("phone>>> incomingCall"), e.reject();
                      },
                      callHoldStateChanged: (e, t, n) => {
                        this.c_log("phone>>> callHoldStateChanged"),
                          e.isRemoteHold()
                            ? this.g_guiState_onRemoteHold()
                            : this.g_guiState_duringCall();
                      },
                      callIncomingReinvite: (e, t, n) => {
                        if (t)
                          return void (e.data["screen-sharing-header"] =
                            n.getHeader("x-screen-sharing"));
                        this.g_setVideoVisible(
                          this.c_remoteVideo,
                          e.hasReceiveVideo()
                        ),
                          e.hasReceiveVideo() &&
                            !e.hasSendVideo() &&
                            this.c_hasCamera &&
                            (e.hasEnabledSendVideo()
                              ? this.c_log(
                                  "Other side disable receive video for video call"
                                )
                              : this.g_info(
                                  "You are invited to turn on your camera",
                                  !0
                                ));
                        const i = e.data["screen-sharing-header"];
                        e.hasReceiveVideo() && "on" === i
                          ? this.c_log(
                              "Started receiving remote screen sharing"
                            )
                          : "off" === i &&
                            this.c_log(
                              "Stopped receiving remote screen sharing"
                            );
                      },
                      incomingNotify: (e, t, n, i, r, s) => {
                        if (
                          (this.c_log(
                            `phone>>> incoming NOTIFY "${t}"`,
                            e,
                            n,
                            i,
                            r
                          ),
                          null !== e)
                        )
                          return !1;
                        if ("vq" === t) {
                          const e = this.c_getXVoiceQuality(s);
                          return (
                            e
                              ? this.c_log(
                                  `NOTIFY: "X-VoiceQuality" header: color="${e.color}"`
                                )
                              : this.c_log(
                                  'NOTIFY: missing "X-VoiceQuality" header'
                                ),
                            !0
                          );
                        }
                        return !1;
                      },
                      callScreenSharingEnded: (e, t) => {
                        this.c_log("phone>>> callScreenSharingEnded"),
                          this.g_screenSharingWorking(!1),
                          this.c_phone.closeScreenSharing(
                            this.c_screenSharingStream
                          ),
                          (this.c_screenSharingStream = null);
                      },
                    }),
                    (this.c_sbcDisconnectCounter = 0),
                    this.c_phone.setEnableAddVideo(
                      "audio" !== this.internalConf.general.type
                    ),
                    this.c_phone.setNetworkPriority(
                      this.internalConf.general.networkPriority
                    ),
                    this.c_phone.setModes(this.internalConf.general.modes),
                    this.c_phone.init(!1);
                } catch (e) {
                  this.c_log(e);
                }
              }
              c_getXVoiceQuality(e) {
                const t = e.getHeader("X-VoiceQuality");
                if (!t) return;
                const n = t.trim().split(" ");
                if (2 !== n.length)
                  return void console.log(
                    "X-VoiceQuality header: parsing problem: must be 2 tokens"
                  );
                const i = parseInt(n[0]);
                if (!isNaN(i))
                  return { score: i, color: n[1].trim().toLowerCase() };
                console.log(
                  "X-VoiceQuality header: parsing problem: the first token is not number"
                );
              }
              g_guiState_onRemoteHold() {
                this.c_log("guiState: on remote hold");
              }
              c_showSelfVideo(e) {
                this.c_localVideo &&
                  (e &&
                  null !== this.c_activeCall &&
                  this.c_activeCall.hasSendVideo()
                    ? (this.c_log("show self-video"),
                      (this.c_localVideo.srcObject =
                        this.c_activeCall.getRTCLocalStream()),
                      (this.c_localVideo.volume = 0),
                      this.g_setVideoVisible(this.c_localVideo, !0))
                    : (this.c_log("hide self-video"),
                      (this.c_localVideo.srcObject = null),
                      this.g_setVideoVisible(this.c_localVideo, !1)));
              }
              c_setRemoteVideoSinkId() {
                var e;
                let t = this.c_devices.getSelected("speaker").deviceId;
                return (
                  null === t && (t = ""),
                  this.c_remoteVideoDeviceId === t
                    ? (this.c_log(
                        "c2c: remote video: sinkId is already assigned"
                      ),
                      Promise.resolve())
                    : this.c_remoteVideo && !this.c_remoteVideo.setSinkId
                    ? Promise.reject(new Error("setSinkId is not implemented"))
                    : (this.c_log(`c2c: remove video: setSinkId "${t}"`),
                      this.c_remoteVideo &&
                        (this.c_remoteVideo.srcObject = null),
                      null === (e = this.c_remoteVideo) || void 0 === e
                        ? void 0
                        : e.setSinkId(t).then(() => {
                            this.c_log(
                              "c2c: remote video: setSinkId completed"
                            ),
                              (this.c_remoteVideoDeviceId = t);
                          }))
                );
              }
              c_delay(e) {
                return new Promise((t) => {
                  setTimeout(() => t(), e);
                });
              }
              c_screenSharingToggle() {
                return i(this, void 0, void 0, function* () {
                  if (null !== this.c_activeCall)
                    return this.c_activeCall.isScreenSharing()
                      ? this.c_activeCall.stopScreenSharing()
                      : Promise.resolve()
                          .then(() => {
                            if (null === this.c_screenSharingStream)
                              return this.c_phone
                                .openScreenSharing()
                                .then((e) => {
                                  this.c_screenSharingStream = e;
                                });
                          })
                          .then(
                            () => (
                              this.g_screenSharingStarting(),
                              this.c_activeCall.startScreenSharing(
                                this.c_screenSharingStream
                              )
                            )
                          )
                          .then(() => {
                            this.c_activeCall.hasSendVideo() ||
                              this.c_log(
                                "Warning: Currently other side does not accept the screen sharing video"
                              ),
                              this.g_screenSharingWorking(!0);
                          })
                          .catch((e) => {
                            this.c_log("guiScreenSharing: error: " + e),
                              this.g_screenSharingWorking(!1);
                          });
                  this.c_log("screenSharingToggle: no active call");
                });
              }
              g_screenSharingWorking(e) {
                var t, n, i, r, s, o;
                this.g_screenSharingButton &&
                  ((this.g_screenSharingButton.disabled = !1),
                  e
                    ? ((this.g_screenSharingButton.title =
                        null ===
                          (i =
                            null ===
                              (n =
                                null === (t = this.internalConf) || void 0 === t
                                  ? void 0
                                  : t.uiConfig) || void 0 === n
                              ? void 0
                              : n.screenSharing) || void 0 === i
                          ? void 0
                          : i.stop),
                      this.g_cameraButtonDisable(!0))
                    : ((this.g_screenSharingButton.title =
                        null ===
                          (o =
                            null ===
                              (s =
                                null === (r = this.internalConf) || void 0 === r
                                  ? void 0
                                  : r.uiConfig) || void 0 === s
                              ? void 0
                              : s.screenSharing) || void 0 === o
                          ? void 0
                          : o.start),
                      this.g_cameraButtonDisable(!1)));
              }
              g_screenSharingStarting() {
                this.g_screenSharingButton &&
                  (this.g_screenSharingButton.disabled = !0),
                  this.g_cameraButtonDisable(!0);
              }
              g_cameraButtonDisable(e) {
                this.g_cameraButton && (this.g_cameraButton.disabled = e);
              }
              g_guiState_duringCall() {
                var e, t, n, i, r, s, o, l, a, u, c, d;
                this.c_log("guiState: during call"),
                  this.g_videoSpan && (this.g_videoSpan.style.display = "none"),
                  this.g_callButton &&
                    this.g_callButton
                      .querySelector("svg")
                      .setAttribute("class", "c2c_call_svg_hangup"),
                  "video" ===
                    (null ===
                      (t =
                        null === (e = this.internalConf) || void 0 === e
                          ? void 0
                          : e.general) || void 0 === t
                      ? void 0
                      : t.type) &&
                    this.c_hasCamera &&
                    this.g_cameraButton &&
                    this.g_cameraLineSvg &&
                    ((this.g_cameraButton.style.display = "flex"),
                    (this.g_cameraButton.title =
                      this.c_activeCall.hasEnabledSendVideo()
                        ? null ===
                            (r =
                              null ===
                                (i =
                                  null === (n = this.internalConf) ||
                                  void 0 === n
                                    ? void 0
                                    : n.uiConfig) || void 0 === i
                                ? void 0
                                : i.camera) || void 0 === r
                          ? void 0
                          : r.stop
                        : null ===
                            (l =
                              null ===
                                (o =
                                  null === (s = this.internalConf) ||
                                  void 0 === s
                                    ? void 0
                                    : s.uiConfig) || void 0 === o
                                ? void 0
                                : o.camera) || void 0 === l
                        ? void 0
                        : l.start),
                    this.g_cameraLineSvg.setAttribute(
                      "class",
                      this.c_activeCall.hasEnabledSendVideo()
                        ? "c2c_camera_on"
                        : "c2c_camera_off"
                    )),
                  this.g_screenSharingButton &&
                    (null ===
                      (u =
                        null === (a = this.internalConf) || void 0 === a
                          ? void 0
                          : a.general) || void 0 === u
                      ? void 0
                      : u.screenSharingEnabled) &&
                    (this.g_screenSharingButton.style.display = "flex"),
                  this.g_keypadButton &&
                    (null ===
                      (d =
                        null === (c = this.internalConf) || void 0 === c
                          ? void 0
                          : c.general) || void 0 === d
                      ? void 0
                      : d.dtmfKeypadEnabled) &&
                    (this.g_keypadButton.style.display = "flex"),
                  this.g_selfVideoSpan &&
                    (this.g_selfVideoSpan &&
                    this.c_hasCamera &&
                    this.c_activeCall.hasSendVideo()
                      ? (this.g_selfVideoSpan.style.display = "flex")
                      : (this.g_selfVideoSpan.style.display = "none"));
              }
              stopTimer() {
                null !== this.callTimer &&
                  (clearInterval(this.callTimer), (this.callTimer = null));
              }
              c_makeCall(e, t, n = {}) {
                var i, r, s, o, l;
                try {
                  if (
                    ((this.c_callAfterConnection = null),
                    null !== this.c_activeCall)
                  )
                    throw "Already exists active call";
                  const a =
                      null !== (i = n.extraHeaders) && void 0 !== i ? i : [],
                    u = null !== (r = n.extraOptions) && void 0 !== r ? r : {};
                  this.g_info("Calling", !0),
                    (null ===
                      (o =
                        null === (s = this.internalConf) || void 0 === s
                          ? void 0
                          : s.server) || void 0 === o
                      ? void 0
                      : o.iceTransportPolicyRelay) &&
                      (this.c_log(
                        "Used TURN debugging iceTransportPolicy: 'relay'"
                      ),
                      (u.pcConfig = { iceTransportPolicy: "relay" })),
                    (this.c_hasMicrophone && !n.testCall) ||
                      ((this.c_streamDest =
                        this.c_audioPlayer.audioCtx.createMediaStreamDestination()),
                      (u.mediaStream = this.c_streamDest.stream)),
                    this.c_x_header && a.push(this.c_x_header),
                    this.internalConf.general.urlToken &&
                      a.push(`X-Token: ${this.internalConf.general.urlToken}`),
                    (null === (l = this.internalConf.server) || void 0 === l
                      ? void 0
                      : l.accountId) &&
                      a.push(
                        `X-Account-ID: ${this.internalConf.server.accountId}`
                      );
                  const c = t ? this.c_phone.VIDEO : this.c_phone.AUDIO;
                  (this.c_activeCall = this.c_phone.call(c, e, a, u)),
                    n.testCall &&
                      (this.c_activeCall.data["test-call"] = n.testCall);
                } catch (e) {
                  this.c_log("Error While Calling");
                }
              }
              g_setVideoVisible(e, t) {
                const n = e.style;
                (n.display = "flex"),
                  t
                    ? ((n.width = this.internalConf.general.videoSize.width),
                      (n.height = this.internalConf.general.videoSize.height))
                    : ((n.width = 0), (n.height = 0));
              }
              c_call(e, t, n) {
                return i(this, void 0, void 0, function* () {
                  if (
                    (null !== this.c_sbcDisconnectTimer &&
                      (clearTimeout(this.c_sbcDisconnectTimer),
                      (this.c_sbcDisconnectTimer = null)),
                    this.c_audioPlayer.stop(),
                    this.g_guiState_calling(),
                    this.c_phone.isInitialized())
                  )
                    this.c_isWsConnected
                      ? this.c_makeCall(e, t, n)
                      : this.c_log(
                          "SIP is already initialized. websocket is disconnected. Wait connection..."
                        );
                  else
                    try {
                      (this.c_callAfterConnection = {
                        user: e,
                        video: t,
                        options: n,
                      }),
                        yield this.c_sbc_connect_sequence();
                    } catch (e) {
                      this.c_log(
                        "phone initialization or SBC connecting error:",
                        e
                      ),
                        this.g_info(e),
                        this.g_guiState_beforeCall();
                    }
                });
              }
              c_clickEvent(e, t, ...n) {
                this.c_log(`phone>> onclick event: "${e}"`),
                  this.c_audioPlayer.isDisabled()
                    ? (this.c_log("Let enable sound..."),
                      this.c_audioPlayer
                        .enable()
                        .then(() => {
                          this.c_log("Sound is enabled");
                        })
                        .catch((e) => {
                          this.c_log("Cannot enable sound", e);
                        })
                        .finally(() => {
                          t.call(this, ...n);
                        }))
                    : t.call(this, ...n);
              }
              c_onBeforeUnload() {
                var e;
                if (
                  (this.c_log && this.c_log("phone>>> beforeunload event"),
                  null !== this.c_phone &&
                    (null === (e = this.c_phone) || void 0 === e
                      ? void 0
                      : e.isInitialized()) &&
                    null !== this.c_activeCall &&
                    !this.c_activeCall.data["test-call"])
                )
                  if (this.c_activeCall.isEstablished()) {
                    const e = {
                      callTo: this.c_activeCall.data._user,
                      video: this.c_activeCall.getVideoState(),
                      replaces: this.c_activeCall.getReplacesHeader(),
                      time: new Date().getTime(),
                      hold: `${this.c_activeCall.isLocalHold() ? "local" : ""}${
                        this.c_activeCall.isRemoteHold() ? "remote" : ""
                      }`,
                      address: this.c_phone.getServerAddress(),
                      selfVideo: this.g_isSelfVideo,
                    };
                    this.c_activeCall.isScreenSharing() &&
                      ((e.screenSharing = !0),
                      (e.video =
                        this.c_activeCall.doesScreenSharingReplaceCamera()
                          ? "sendrecv"
                          : "inactive")),
                      sessionStorage.setItem(
                        "c2c_restoreCall",
                        JSON.stringify(e)
                      );
                  } else this.c_activeCall.terminate();
              }
              g_guiState_disabled(e) {
                this.c_log("guiState: disabled", e),
                  this.g_callButton && (this.g_callButton.disabled = !0),
                  this.g_widgetDiv &&
                    (this.g_widgetDiv.className = "c2c_widget_disabled");
              }
              g_info(e, t = !1) {
                this.g_status_line &&
                  ((this.g_status_line.innerHTML = e),
                  (this.g_status_line.dataset.id = (++this
                    .g_messageId).toString()),
                  t &&
                    ((e) => {
                      var t, n;
                      setTimeout(() => {
                        this.g_status_line &&
                          this.g_status_line.dataset.id === e &&
                          (this.g_status_line.innerHTML = "");
                      }, 1e3 * (null === (n = null === (t = this.internalConf) || void 0 === t ? void 0 : t.general) || void 0 === n ? void 0 : n.messageDisplayTime));
                    })(this.g_status_line.dataset.id));
              }
              g_getElement(e) {
                var t, n, i;
                return (null === (t = this.shadowRoot) || void 0 === t
                  ? void 0
                  : t.getElementById(e)) || document.getElementById(e)
                  ? null !==
                      (i =
                        null === (n = this.shadowRoot) || void 0 === n
                          ? void 0
                          : n.getElementById(e)) && void 0 !== i
                    ? i
                    : document.getElementById(e)
                  : null;
              }
              g_getElementByQuerySelector(e) {
                var t, n, i;
                return (null === (t = this.shadowRoot) || void 0 === t
                  ? void 0
                  : t.querySelector(e)) || document.querySelector(e)
                  ? null !==
                      (i =
                        null === (n = this.shadowRoot) || void 0 === n
                          ? void 0
                          : n.querySelector(e)) && void 0 !== i
                    ? i
                    : document.querySelector(e)
                  : null;
              }
              g_getRemoteVideoElement() {
                var e, t;
                return null ===
                  (t =
                    null === (e = this.g_getElement("video")) || void 0 === e
                      ? void 0
                      : e.shadowRoot) || void 0 === t
                  ? void 0
                  : t.getElementById("c2c_remote_video");
              }
              g_getLocalVideoElement() {
                var e, t;
                return null ===
                  (t =
                    null === (e = this.g_getElement("video")) || void 0 === e
                      ? void 0
                      : e.shadowRoot) || void 0 === t
                  ? void 0
                  : t.getElementById("c2c_local_video");
              }
              g_initGUI() {
                var e, t, n, i, r, s, o, l, a, u, c, d, h;
                if (
                  ((this.g_widgetDiv = this.g_getElement("c2c_widget_div")),
                  !this.g_widgetDiv)
                )
                  return !1;
                if (
                  ((this.g_callButton = this.g_getElement("c2c_call_btn")),
                  !this.g_callButton)
                )
                  return !1;
                if (
                  ((this.g_callButtonOriginalTitle = this.g_callButton.title),
                  (this.g_status_line = this.g_getElement("c2c_status_line")),
                  !this.g_status_line)
                )
                  return !1;
                if (
                  (null ===
                    (t =
                      null === (e = this.internalConf) || void 0 === e
                        ? void 0
                        : e.general) || void 0 === t
                    ? void 0
                    : t.selectDevicesEnabled) &&
                  ((this.g_selectDevicesButton = this.g_getElement(
                    "c2c_select_devices_btn"
                  )),
                  (this.g_selectDevicesDiv = this.g_getElement(
                    "c2c_select_devices_div"
                  )),
                  !this.g_selectDevicesButton || !this.g_selectDevicesDiv)
                )
                  return !1;
                if (
                  ((this.g_keypadButton = this.g_getElement("c2c_keypad_btn")),
                  (this.g_keypadDiv =
                    null === (n = this.g_getElement("keypad").shadowRoot) ||
                    void 0 === n
                      ? void 0
                      : n.getElementById("c2c_keypad_div")),
                  this.g_keypadButton)
                )
                  if (
                    null ===
                      (r =
                        null === (i = this.internalConf) || void 0 === i
                          ? void 0
                          : i.general) || void 0 === r
                      ? void 0
                      : r.dtmfKeypadEnabled
                  ) {
                    if (!this.g_keypadButton) return !1;
                    if (!this.g_keypadDiv) return !1;
                  } else
                    (this.g_keypadButton.style.display = "none"),
                      this.g_keypadDiv &&
                        (this.g_keypadDiv.style.display = "none");
                if (
                  ((this.g_screenSharingButton = this.g_getElement(
                    "c2c_screen_sharing_btn"
                  )),
                  null ===
                    (o =
                      null === (s = this.internalConf) || void 0 === s
                        ? void 0
                        : s.general) || void 0 === o
                    ? void 0
                    : o.screenSharingEnabled)
                )
                  if (this.c_phone.isScreenSharingSupported()) {
                    if (!this.g_screenSharingButton) return !1;
                    this.g_screenSharingButton.style.display = "flex";
                  } else
                    this.c_log(
                      "Warning: screen sharing is not supported in the browser"
                    );
                else
                  this.g_screenSharingButton &&
                    (this.g_screenSharingButton.style.display = "none");
                if (
                  "video" ===
                    (null ===
                      (a =
                        null === (l = this.internalConf) || void 0 === l
                          ? void 0
                          : l.general) || void 0 === a
                      ? void 0
                      : a.type) &&
                  ((this.g_videoSpan = this.g_getElement("c2c_video_chk_span")),
                  (this.g_videoCheckbox = this.g_getElement("c2c_video_chk")),
                  (this.g_cameraButton = this.g_getElement("c2c_camera_btn")),
                  (this.g_cameraLineSvg = this.g_getElement(
                    "c2c_camera_line_svg"
                  )),
                  !(
                    this.g_videoSpan &&
                    this.g_videoCheckbox &&
                    this.g_cameraButton &&
                    this.g_cameraLineSvg
                  ))
                )
                  return !1;
                if (
                  null ===
                    (c =
                      null === (u = this.internalConf) || void 0 === u
                        ? void 0
                        : u.general) || void 0 === c
                    ? void 0
                    : c.selfVideoEnabled
                ) {
                  if (
                    ((this.g_selfVideoSpan = this.g_getElement(
                      "c2c_self_video_chk_span"
                    )),
                    (this.g_selfVideoChk =
                      this.g_getElement("c2c_self_video_chk")),
                    !this.g_selfVideoSpan || !this.g_selfVideoChk)
                  )
                    return !1;
                  (this.g_isSelfVideo =
                    null ===
                      (h =
                        null === (d = this.internalConf) || void 0 === d
                          ? void 0
                          : d.general) || void 0 === h
                      ? void 0
                      : h.selfVideoCheckboxDefault),
                    (this.g_selfVideoChk.checked = this.g_isSelfVideo);
                }
                return (
                  (this.g_callButton.onclick = this.g_makeCall.bind(this)),
                  this.g_selectDevicesButton &&
                    (this.g_selectDevicesButton.onclick = () => {
                      this.c_clickEvent(
                        "select devices",
                        this.g_selectDevices.bind(this)
                      );
                    }),
                  this.g_keypadButton &&
                    (this.g_keypadButton.onclick = () => {
                      this.c_clickEvent(
                        "show/hide keypad",
                        this.g_keypadToggle.bind(this)
                      );
                    }),
                  this.g_screenSharingButton &&
                    (this.g_screenSharingButton.onclick = () => {
                      this.c_clickEvent(
                        "screen sharing",
                        this.c_screenSharingToggle.bind(this)
                      );
                    }),
                  this.g_cameraButton &&
                    (this.g_cameraButton.onclick = () => {
                      this.c_clickEvent(
                        "on/off webcam",
                        this.c_cameraToggle.bind(this)
                      );
                    }),
                  this.g_selfVideoChk &&
                    (this.g_selfVideoChk.onclick = () => {
                      this.c_clickEvent(
                        "show/hide local video",
                        this.g_selfVideoToggle.bind(this)
                      );
                    }),
                  !0
                );
              }
              g_selfVideoToggle() {
                var e, t;
                this.c_log("selfVideoToggle()"),
                  (this.g_isSelfVideo =
                    null !==
                      (t =
                        null === (e = this.g_selfVideoChk) || void 0 === e
                          ? void 0
                          : e.checked) &&
                    void 0 !== t &&
                    t),
                  this.c_showSelfVideo(this.g_isSelfVideo);
              }
              c_cameraToggle() {
                this.c_log("cameraToggle()"),
                  this.g_info(""),
                  this.c_activeCall.hasEnabledSendVideo()
                    ? this.c_activeCall
                        .stopSendingVideo()
                        .then(() => {
                          this.g_guiState_duringCall(),
                            this.g_isSelfVideo && this.c_showSelfVideo(!1),
                            this.g_setVideoVisible(
                              this.c_remoteVideo,
                              this.c_activeCall.hasReceiveVideo()
                            );
                        })
                        .catch((e) => {
                          this.c_log("stop sending video failure", e);
                        })
                        .finally(() => {
                          this.g_cameraButtonDisable(!1);
                        })
                    : (this.g_cameraButtonDisable(!0),
                      this.c_activeCall
                        .startSendingVideo()
                        .then(() => {
                          this.g_guiState_duringCall(),
                            this.g_isSelfVideo && this.c_showSelfVideo(!0),
                            this.g_setVideoVisible(
                              this.c_remoteVideo,
                              this.c_activeCall.hasReceiveVideo()
                            );
                        })
                        .catch((e) => {
                          this.c_log("c2c error during start video", e);
                        })
                        .finally(() => {
                          this.g_cameraButtonDisable(!1);
                        }));
              }
              g_keypadToggle() {
                this.g_keypadDiv &&
                  ("none" ===
                  getComputedStyle(this.g_keypadDiv).getPropertyValue("display")
                    ? (this.c_log("show keypad"),
                      (this.g_keypadDiv.style.display = "flex"))
                    : (this.c_log("hide keypad"),
                      (this.g_keypadDiv.style.display = "none")));
              }
              g_selectDevicesDone() {
                for (const e of this.c_devices.names) {
                  const t = this.g_getElementByQuerySelector(
                      `#c2c_devices [name=${e}]`
                    ),
                    n = t.selectedIndex;
                  if (-1 !== n) {
                    const i = t.options[n].value;
                    this.c_devices.setSelectedIndex(e, parseInt(i));
                  }
                }
                const e = this.c_devices.store();
                sessionStorage.setItem(
                  "c2c_selectedDevices",
                  JSON.stringify(e)
                );
                let t = "Devices done: selected";
                for (const e of this.c_devices.names)
                  this.c_devices.getNumber(e) > 1 &&
                    (t += `\n${e}: "${this.c_devices.getSelected(e).label}"`);
                this.c_log(t);
                const n = this.c_devices.getSelected("microphone").deviceId;
                this.c_phone.setConstraint("audio", "deviceId", n);
                const i = this.c_devices.getSelected("camera").deviceId;
                this.c_phone.setConstraint("video", "deviceId", i);
                const r = this.c_devices.getSelected("speaker").deviceId;
                this.c_audioPlayer.setSpeakerId(r),
                  this.g_widgetDiv && (this.g_widgetDiv.style.display = "flex"),
                  this.g_guiState_beforeCall();
              }
              g_selectDevices() {
                this.c_log("selectDevices()"),
                  this.g_info(""),
                  (this.g_getElement("select_devices_done_btn").onclick =
                    this.g_selectDevicesDone.bind(this)),
                  this.c_devices
                    .enumerate(!0)
                    .catch((e) => {
                      this.c_log("getUserMedia() exception", e);
                    })
                    .finally(() => {
                      var e;
                      for (const t of null === (e = this.c_devices) ||
                      void 0 === e
                        ? void 0
                        : e.names)
                        this.g_fillDeviceList(t);
                      this.g_guiState_deviceSelection();
                    });
              }
              g_guiState_deviceSelection() {
                this.c_log("guiState: device selection"),
                  this.g_widgetDiv && (this.g_widgetDiv.style.display = "none"),
                  this.g_selectDevicesDiv &&
                    (this.g_selectDevicesDiv.style.display = "flex"),
                  this.displayElement("main_div", "none"),
                  this.displayElement("form-fields", "none"),
                  this.g_selectDevicesButton &&
                    (this.g_selectDevicesButton.style.display = "none"),
                  this.g_callButton &&
                    (this.g_callButton.style.display = "none"),
                  this.g_videoSpan && (this.g_videoSpan.style.display = "none"),
                  this.g_cameraButton &&
                    ((this.g_cameraButton.style.display = "none"),
                    this.g_cameraLineSvg &&
                      (this.g_cameraButton.style.display = "none"));
              }
              g_fillDeviceList(e) {
                var t, n, i, r, s;
                const o = this.c_devices.getDevice(e),
                  l = this.g_getElementByQuerySelector(
                    `#c2c_devices [name=${e}]`
                  ),
                  a =
                    null !==
                      (n = JSON.parse(
                        null !==
                          (t = sessionStorage.getItem("c2c_selectedDevices")) &&
                          void 0 !== t
                          ? t
                          : "{}"
                      )[e]) && void 0 !== n
                      ? n
                      : null;
                (l.innerHTML = null),
                  o.incomplete
                    ? ((l.disabled = !0),
                      this.c_log(
                        `Warning: To device selection let enable ${e} usage`
                      ))
                    : (l.disabled = !1);
                for (let e = 0; e < o.list.length; e++) {
                  const t = new Option(
                    o.list[e].label,
                    e.toString(),
                    o.index === e,
                    (null === (i = o.list[e]) || void 0 === i
                      ? void 0
                      : i.deviceId) === (null == a ? void 0 : a.deviceId)
                  );
                  l.add(t);
                }
                "camera" !== e ||
                "audio" !==
                  (null ===
                    (s =
                      null === (r = this.internalConf) || void 0 === r
                        ? void 0
                        : r.general) || void 0 === s
                    ? void 0
                    : s.type)
                  ? (this.g_getElement(`${e}_dev`).style.display =
                      o.list.length > 1 ? "flex" : "none")
                  : (this.g_getElement("camera_dev").style.display = "none");
              }
              c_sendDtmf(e) {
                var t, n, i;
                this.c_activeCall &&
                  (this.c_audioPlayer.play(
                    Object.assign(
                      { name: e },
                      null ===
                        (i =
                          null ===
                            (n =
                              null === (t = this.internalConf) || void 0 === t
                                ? void 0
                                : t.sound) || void 0 === n
                            ? void 0
                            : n.play) || void 0 === i
                        ? void 0
                        : i.dtmf
                    )
                  ),
                  this.c_activeCall.sendDTMF(e));
              }
              c_setConsoleLoggersStyle(e) {
                const t = ["chrome", "firefox", "safari"].includes(
                    e.getBrowser()
                  ),
                  n = (...e) => {
                    let n = [this.c_timestamp() + "" + (t ? "%c" : "") + e[0]];
                    t && (n = n.concat(["color: BlueViolet;"])),
                      console.log.apply(console, n.concat(e.slice(1)));
                  };
                (this.c_log = n),
                  e.setAcLogger(n),
                  e.setJsSipLogger((...e) => {
                    const t = [this.c_timestamp() + e[0]];
                    console.log.apply(console, t.concat(e.slice(1)));
                  });
              }
              c_timestamp() {
                const e = new Date(),
                  t = e.getHours(),
                  n = e.getMinutes(),
                  i = e.getSeconds();
                return (
                  (t < 10 ? "0" + t : t) +
                  ":" +
                  (n < 10 ? "0" + n : n) +
                  ":" +
                  (i < 10 ? "0" + i : i) +
                  "." +
                  ("00" + e.getMilliseconds()).slice(-3) +
                  " "
                );
              }
              render() {
                var e, t, n;
                this.shadowRoot &&
                  ((this.shadowRoot.innerHTML = `\n            <div class="click-to-call-body-frame" part="click-body">\n            <div class="d-flex">\n                <div>\n                    <div id="main_div">\n                        <slot name="form-fields" id="form-fields"></slot>\n                        <slot name="on-going-call" id="on-going-call"></slot>\n                        <div name="on-going-call" id="on-going-call">\n                            <div id="on-going-call-icon">\n                                <svg width="70" height="70" viewBox="0 0 70 70" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                    <circle cx="35" cy="35" r="35" fill="url(#paint0_linear_18514_14349)" fill-opacity="0.2" />\n                                    <path fill-rule="evenodd" clip-rule="evenodd"\n                                        d="M31.7468 14.2968C27.5006 14.7763 23.904 16.6053 20.3952 20.0696C19.3239 21.1273 16.0432 26.517 16.0432 27.2194C16.0432 27.4346 15.6125 27.8064 15.0857 28.0452C13.6391 28.7017 12.3659 29.7825 11.6455 30.965C11.1233 31.823 10.999 32.6983 11 35.5177C11.0011 38.5361 11.1052 39.1786 11.7712 40.2685C12.8021 41.9557 14.74 43.2942 16.7656 43.7179C18.2505 44.0284 18.488 44.1978 18.9974 45.3071C20.6222 48.8472 25.187 53.2145 29.0687 54.9423C31.3346 55.9509 31.6333 56.0043 34.9774 55.9998C38.293 55.9949 38.6429 55.9327 40.937 54.9399C44.5147 53.3914 48.5158 49.8163 50.3437 46.5348C51.6256 44.233 51.8349 44.0196 53.1227 43.6994C56.5884 42.8383 58.3188 41.0327 58.8494 37.7236C59.2306 35.3486 58.8605 32.1168 58.051 30.7525C57.4487 29.737 55.6685 28.312 54.5314 27.935C54.084 27.7869 53.5639 27.0964 53.1576 26.1109C51.416 21.8891 47.0257 17.2824 43.3515 15.8219C42.4066 15.4462 41.3715 15.0176 41.0515 14.8695C40.5046 14.6164 35.1063 13.9235 34.3309 14.0069C34.1345 14.0282 32.9717 14.1584 31.7468 14.2968ZM35.007 29.8818C38.6774 32.4877 43.2551 34.3036 46.1546 34.3036C46.9964 34.3036 47.7843 34.4438 47.9058 34.615C48.2892 35.1556 48.5228 38.1433 48.2728 39.3052C48.0493 40.3444 47.8491 40.4943 45.3552 41.4901C41.7116 42.9452 41.5323 43.0068 39.5161 43.4927C37.8171 43.9024 37.707 43.8915 36.7308 43.2104C35.4485 42.316 34.248 42.3099 32.9838 43.1919C30.8889 44.6533 32.104 47.6581 34.7905 47.6581C35.46 47.6581 36.2552 47.472 36.5574 47.2447C36.86 47.0174 38.3606 46.5406 39.8925 46.1851C41.4244 45.8297 43.5197 45.2588 44.5488 44.9162C45.5777 44.5735 46.4923 44.3568 46.5814 44.4345C46.9776 44.7796 44.6728 47.5139 42.5246 49.2479C38.0583 52.8521 35.0617 53.4706 31.0749 51.611C26.9418 49.6837 23.1809 45.1653 21.8112 40.4819C21.242 38.5358 21.0919 35.6063 21.532 35.0326C21.6727 34.8493 22.4832 34.6044 23.3334 34.4887C25.6369 34.1749 28.7425 32.5903 30.6846 30.738C31.6319 29.8344 32.4069 28.9694 32.4069 28.8158C32.4069 28.2589 33.1506 28.5636 35.007 29.8818Z"\n                                        fill="url(#paint1_linear_18514_14349)" />\n                                    <defs>\n                                        <linearGradient id="paint0_linear_18514_14349" x1="4.50836e-08" y1="4.2" x2="71.8953" y2="7.65134"\n                                            gradientUnits="userSpaceOnUse">\n                                            <stop stop-color="#56AAFF" />\n                                            <stop offset="1" stop-color="#8636FF" />\n                                        </linearGradient>\n                                        <linearGradient id="paint1_linear_18514_14349" x1="11" y1="16.52" x2="60.265" y2="19.2228"\n                                            gradientUnits="userSpaceOnUse">\n                                            <stop stop-color="#56AAFF" />\n                                            <stop offset="1" stop-color="#8636FF" />\n                                        </linearGradient>\n                                    </defs>\n                                </svg>\n                            </div>\n                            <div id="on-going-call-duration"></div>\n                            <div id="on-going-call-message"></div>\n                        </div>\n                        <div id="c2c_widget_div">\n                            <button id="c2c_keypad_btn" title="Click to open/close keypad">\n                                <svg id="c2c_keypad_svg" fill="#ffffff" viewBox="0 0 512 512" xml:space="preserve"\n                                    xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                                    <path\n                                        d="M120,100h70v70h-70zm90,0h70v70h-70zm90,0h70v70h-70zM120,190h70v70h-70zm90,0h70v70h-70zm90,0h70v70h-70zM120,280h70v70h-70zm90,0h70v70h-70zm90,0h70v70h-70zM120,370h70v70h-70zm90,0h70v70h-70zm90,0h70v70h-70z"\n                                        fill="#ffffff" />\n                                </svg>\n                                <div>Keypad</div>\n                            </button>\n                            <button id="c2c_screen_sharing_btn" title="Start screen sharing">\n                                <svg id="c2c_screen_sharing_svg" viewBox="0 0 121 121">\n                                    <g transform="translate(0,121) scale(0.1,-0.1)" fill="#ffffff" stroke="none">\n                                        <path\n                                            d="M114 1041 c-17 -11 -36 -34 -43 -52 -7 -21 -11 -130 -11 -314 0 -277 0 -283 23 -316 37 -56 51 -59 280 -59 l207 0 0 -40 0 -39 -102 -3 -103 -3 0 -30 0 -30 240 0 240 0 0 30 0 30 -102 3 -103 3 0 39 0 40 208 0 c228 0 242 3 279 59 23 33 23 39 23 318 0 243 -2 290 -16 319 -31 65 -24 64 -531 64 -433 0 -460 -1 -489 -19z m956 -70 c6 -12 10 -122 10 -288 0 -227 -2 -272 -16 -291 l-15 -22 -444 0 -444 0 -15 22 c-14 19 -16 64 -16 291 0 166 4 276 10 288 10 18 26 19 465 19 439 0 455 -1 465 -19z" />\n                                        <path\n                                            d="M682 895 c-12 -14 -30 -25 -40 -25 -39 0 -140 -61 -191 -115 -61 -65 -98 -140 -113 -230 -10 -56 -9 -68 4 -82 32 -31 53 -9 66 70 22 127 105 234 216 276 l51 19 17 -21 16 -21 56 37 c34 22 53 42 50 50 -2 7 -26 24 -52 37 -26 14 -49 26 -53 27 -3 2 -15 -8 -27 -22z" />\n                                    </g>\n                                </svg>\n                                <div>Screen sharing</div>\n                            </button>\n                            <button id="c2c_call_btn" title="Click to call us on the phone">\n                                <svg id="c2c_call_svg" fill="#ffffff"\n                                    class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-i4bv87-MuiSvgIcon-root"\n                                    focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="CallIcon">\n                                    <path\n                                        d="M20.01 15.38c-1.23 0-2.42-.2-3.53-.56-.35-.12-.74-.03-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z">\n                                    </path>\n                                </svg>\n                                <div>${
                    null ===
                      (n =
                        null ===
                          (t =
                            null === (e = this.internalConf) || void 0 === e
                              ? void 0
                              : e.uiConfig) || void 0 === t
                          ? void 0
                          : t.call) || void 0 === n
                      ? void 0
                      : n.callText
                  }</div>\n                            </button>\n                            <button id="c2c_select_devices_btn" title="Click to select devices (microphone, camera, speaker)">\n                            <svg id="c2c_select_devices_svg" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                <g clip-path="url(#clip0_19105_12906)">\n                                <path d="M17.1401 10.9404C17.1801 10.6404 17.2001 10.3304 17.2001 10.0004C17.2001 9.68039 17.1801 9.36039 17.1301 9.06039L19.1601 7.48039C19.3401 7.34039 19.3901 7.07039 19.2801 6.87039L17.3601 3.55039C17.2401 3.33039 16.9901 3.26039 16.7701 3.33039L14.3801 4.29039C13.8801 3.91039 13.3501 3.59039 12.7601 3.35039L12.4001 0.81039C12.3601 0.57039 12.1601 0.400391 11.9201 0.400391H8.08011C7.84011 0.400391 7.65011 0.57039 7.61011 0.81039L7.25011 3.35039C6.66011 3.59039 6.12011 3.92039 5.63011 4.29039L3.24011 3.33039C3.02011 3.25039 2.77011 3.33039 2.65011 3.55039L0.74011 6.87039C0.62011 7.08039 0.66011 7.34039 0.86011 7.48039L2.89011 9.06039C2.84011 9.36039 2.80011 9.69039 2.80011 10.0004C2.80011 10.3104 2.82011 10.6404 2.87011 10.9404L0.84011 12.5204C0.66011 12.6604 0.61011 12.9304 0.72011 13.1304L2.64011 16.4504C2.76011 16.6704 3.01011 16.7404 3.23011 16.6704L5.62011 15.7104C6.12011 16.0904 6.65011 16.4104 7.24011 16.6504L7.60011 19.1904C7.65011 19.4304 7.84011 19.6004 8.08011 19.6004H11.9201C12.1601 19.6004 12.3601 19.4304 12.3901 19.1904L12.7501 16.6504C13.3401 16.4104 13.8801 16.0904 14.3701 15.7104L16.7601 16.6704C16.9801 16.7504 17.2301 16.6704 17.3501 16.4504L19.2701 13.1304C19.3901 12.9104 19.3401 12.6604 19.1501 12.5204L17.1401 10.9404ZM10.0001 13.6004C8.02011 13.6004 6.40011 11.9804 6.40011 10.0004C6.40011 8.02039 8.02011 6.40039 10.0001 6.40039C11.9801 6.40039 13.6001 8.02039 13.6001 10.0004C13.6001 11.9804 11.9801 13.6004 10.0001 13.6004Z" fill="#2196F3"/>\n                                </g>\n                                <defs>\n                                <clipPath id="clip0_19105_12906">\n                                <rect width="20" height="20" fill="white"/>\n                                </clipPath>\n                                </defs>\n                            </svg>\n                            </button>\n                            <span id="c2c_video_chk_span">\n                                <input id="c2c_video_chk" type="checkbox" title="video call">\n                                video\n                        </div>\n                        <button id="c2c_camera_btn">\n                            <svg id="c2c_camera_svg" viewBox="0 0 30 30">\n                                <g stroke-width="2" stroke-linejoin="round"">\n                                <rect x=" 4" y="12" width="15" height="14" />\n                                <polyline points="20,15 26,12 26,26 20,23" />\n                                <line id="c2c_camera_line_svg" class="c2c_camera_on c2c_camera_off" stroke-width="3"\n                                    x1="23.823129" y1="6.0983146" x2="0.69568307" y2="29.082097" stroke="none" />\n                                </g>\n                            </svg>\n                        </button>\n                        <span id="c2c_self_video_chk_span">\n                            <input id="c2c_self_video_chk" type="checkbox" title="show local video">\n                            self video\n                    </div>\n                    <div id="c2c_select_devices_div">\n                        <form id="c2c_devices" onsubmit="event.preventDefault()">\n                                <div id="microphone_dev">\n                                    <div class="field-label">Microphone</div>\n                                    <div>\n                                        <select name="microphone" id="microphone"></select>\n                                    </div>\n                                </div>\n                                <div id="speaker_dev">\n                                    <div class="field-label">Speaker</div>\n                                    <div>\n                                        <select name="speaker" id="speaker"></select>\n                                    </div>\n                                </div>\n                                <div id="camera_dev">\n                                    <div class="field-label">Camera</div>\n                                    <div>\n                                        <select name="camera"></select>\n                                    </div>\n                                </div>\n                            <input id="select_devices_done_btn" type="button" value="Done">\n                        </form>\n                    </div>\n                    <div id="c2c_status_line"></div>\n                </div>\n                <div>\n                    <slot name="click-to-call-content-icon" id="click-to-call-content-icon"></slot>\n                </div>\n            </div>\n        </div>\n        <click-to-call-keypad id="keypad"></click-to-call-keypad>\n        <click-to-call-video id="video"></click-to-call-video>\n            `),
                  this.init());
              }
            }
            customElements.define("click-to-call", d);
          },
          753: (e, t) => {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 }),
              (t.Click2CallConfig =
                t.C2c_callBacks =
                t.C2c_uiconfig =
                t.C2c_soundConfig =
                t.C2c_serverConfig =
                  void 0);
            class n {
              overrideValues(e, t) {
                Object.entries(this).forEach((n) => {
                  var i, r;
                  const s = n[0];
                  this[s] =
                    null !==
                      (r =
                        null !== (i = null == t ? void 0 : t.get(s)) &&
                        void 0 !== i
                          ? i
                          : null == e
                          ? void 0
                          : e[s]) && void 0 !== r
                      ? r
                      : this[s];
                });
              }
              constructor(e, t) {
                (this.userAgent = "AudioCodes Click-to-Call"),
                  (this.call = "_take_value_from_url_"),
                  (this.caller = "anonymous"),
                  (this.callerDN = "anonymous"),
                  (this.callerPhone = "anonymous"),
                  (this.type = "audio"),
                  (this.videoCheckboxDefault = !1),
                  (this.callAutoStart = "no"),
                  (this.messageDisplayTime = 5),
                  (this.restoreCallMaxDelay = 20),
                  (this.allowCallWithoutMicrophone = !0),
                  (this.networkPriority = void 0),
                  (this.urlToken = ""),
                  (this.selectDevicesEnabled = !0),
                  (this.dtmfKeypadEnabled = !0),
                  (this.selfVideoEnabled = !0),
                  (this.selfVideoCheckboxDefault = !1),
                  (this.screenSharingEnabled = !1),
                  (this.pingInterval = 10),
                  (this.pongTimeout = !0),
                  (this.timerThrottlingBestEffort = !0),
                  (this.pongReport = 60),
                  (this.pongDist = !1),
                  (this.keepConnectionAfterCall = 40),
                  (this.password = ""),
                  this.overrideValues(e, t);
              }
            }
            class i {
              overrideValues(e, t) {
                Object.entries(this).forEach((n) => {
                  var i, r;
                  const s = n[0];
                  this[s] =
                    null !==
                      (r =
                        null !== (i = null == t ? void 0 : t.get(s)) &&
                        void 0 !== i
                          ? i
                          : null == e
                          ? void 0
                          : e[s]) && void 0 !== r
                      ? r
                      : this[s];
                });
              }
              constructor(e, t) {
                (this.domain = ""),
                  (this.addresses = []),
                  (this.authURL = ""),
                  (this.accountId = ""),
                  this.overrideValues(e, t);
              }
              getC2c_serverConfig() {
                return {
                  domain: this.domain,
                  addresses: this.addresses,
                  iceServers: this.iceServers,
                  authURL: this.authURL,
                  accountId: this.accountId,
                };
              }
            }
            t.C2c_serverConfig = i;
            class r {
              overrideValues(e, t) {
                Object.entries(this).forEach((n) => {
                  var i, r;
                  const s = n[0];
                  this[s] =
                    null !==
                      (r =
                        null !== (i = null == t ? void 0 : t.get(s)) &&
                        void 0 !== i
                          ? i
                          : null == e
                          ? void 0
                          : e[s]) && void 0 !== r
                      ? r
                      : this[s];
                });
              }
              constructor(e, t) {
                this.overrideValues(e, t);
              }
            }
            t.C2c_soundConfig = r;
            class s {
              overrideValues(e, t) {
                Object.entries(this).forEach((n) => {
                  var i, r;
                  const s = n[0];
                  this[s] =
                    null !==
                      (r =
                        null !== (i = null == t ? void 0 : t.get(s)) &&
                        void 0 !== i
                          ? i
                          : Object.assign(
                              Object.assign({}, this[s]),
                              null == e ? void 0 : e[s]
                            )) && void 0 !== r
                      ? r
                      : this[s];
                });
              }
              constructor(e, t) {
                (this.callSatus = {
                  pending: "Please wait while your call is being connected...",
                }),
                  (this.screensharing = {
                    start: "Start screen sharing",
                    stop: "Stop screen sharing",
                  }),
                  (this.camera = {
                    start: "turn camera on",
                    stop: "turn camera off",
                  }),
                  (this.call = {
                    callText: "Call",
                    endCallText: "End Call",
                    isHideCallIcon: !1,
                  }),
                  this.overrideValues(e, t);
              }
            }
            t.C2c_uiconfig = s;
            class o {}
            (t.C2c_callBacks = o),
              (t.Click2CallConfig = class {
                constructor(e, t) {
                  const l = e;
                  (this.general = new n(null == l ? void 0 : l.c2c_config, t)),
                    (this.server = new i(
                      null == l ? void 0 : l.c2c_serverConfig,
                      t
                    )),
                    (this.sound = new r(
                      null == l ? void 0 : l.c2c_soundConfig,
                      t
                    )),
                    (this.uiConfig = new s(
                      null == l ? void 0 : l.c2c_uiConfig,
                      t
                    )),
                    (this.callBacks = new o());
                }
              }),
              (t.default = n);
          },
          813: (e) => {
            e.exports = (function e(t, n, i) {
              function r(o, l) {
                if (!n[o]) {
                  if (!t[o]) {
                    if (s) return s(o, !0);
                    var a = new Error("Cannot find module '" + o + "'");
                    throw ((a.code = "MODULE_NOT_FOUND"), a);
                  }
                  var u = (n[o] = { exports: {} });
                  t[o][0].call(
                    u.exports,
                    function (e) {
                      return r(t[o][1][e] || e);
                    },
                    u,
                    u.exports,
                    e,
                    t,
                    n,
                    i
                  );
                }
                return n[o].exports;
              }
              for (var s = void 0, o = 0; o < i.length; o++) r(i[o]);
              return r;
            })(
              {
                1: [
                  function (e, t, n) {
                    "use strict";
                    function i(e, t) {
                      var n =
                        ("undefined" != typeof Symbol && e[Symbol.iterator]) ||
                        e["@@iterator"];
                      if (!n) {
                        if (
                          Array.isArray(e) ||
                          (n = (function (e, t) {
                            if (e) {
                              if ("string" == typeof e) return r(e, t);
                              var n = Object.prototype.toString
                                .call(e)
                                .slice(8, -1);
                              return (
                                "Object" === n &&
                                  e.constructor &&
                                  (n = e.constructor.name),
                                "Map" === n || "Set" === n
                                  ? Array.from(e)
                                  : "Arguments" === n ||
                                    /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(
                                      n
                                    )
                                  ? r(e, t)
                                  : void 0
                              );
                            }
                          })(e)) ||
                          (t && e && "number" == typeof e.length)
                        ) {
                          n && (e = n);
                          var i = 0,
                            s = function () {};
                          return {
                            s,
                            n: function () {
                              return i >= e.length
                                ? { done: !0 }
                                : { done: !1, value: e[i++] };
                            },
                            e: function (e) {
                              throw e;
                            },
                            f: s,
                          };
                        }
                        throw new TypeError(
                          "Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
                        );
                      }
                      var o,
                        l = !0,
                        a = !1;
                      return {
                        s: function () {
                          n = n.call(e);
                        },
                        n: function () {
                          var e = n.next();
                          return (l = e.done), e;
                        },
                        e: function (e) {
                          (a = !0), (o = e);
                        },
                        f: function () {
                          try {
                            l || null == n.return || n.return();
                          } finally {
                            if (a) throw o;
                          }
                        },
                      };
                    }
                    function r(e, t) {
                      (null == t || t > e.length) && (t = e.length);
                      for (var n = 0, i = new Array(t); n < t; n++) i[n] = e[n];
                      return i;
                    }
                    var s = e("./Utils"),
                      o = e("./Constants"),
                      l = e("./Grammar"),
                      a = e("./URI"),
                      u = e("./Socket"),
                      c = e("./Exceptions");
                    n.settings = {
                      authorization_user: null,
                      password: null,
                      realm: null,
                      ha1: null,
                      authorization_jwt: null,
                      display_name: null,
                      uri: null,
                      contact_uri: null,
                      instance_id: null,
                      use_preloaded_route: !1,
                      session_timers: !0,
                      session_timers_refresh_method: o.UPDATE,
                      session_timers_force_refresher: !1,
                      no_answer_timeout: 60,
                      register: !0,
                      register_expires: 600,
                      registrar_server: null,
                      sockets: null,
                      connection_recovery_max_interval:
                        o.CONNECTION_RECOVERY_MAX_INTERVAL,
                      connection_recovery_min_interval:
                        o.CONNECTION_RECOVERY_MIN_INTERVAL,
                      extra_headers: null,
                      via_host: "".concat(s.createRandomToken(12), ".invalid"),
                    };
                    var d = {
                      mandatory: {
                        sockets: function (e) {
                          var t = [];
                          if (u.isSocket(e)) t.push({ socket: e });
                          else {
                            if (!Array.isArray(e) || !e.length) return;
                            var n,
                              r = i(e);
                            try {
                              for (r.s(); !(n = r.n()).done; ) {
                                var s = n.value;
                                Object.prototype.hasOwnProperty.call(
                                  s,
                                  "socket"
                                ) && u.isSocket(s.socket)
                                  ? t.push(s)
                                  : u.isSocket(s) && t.push({ socket: s });
                              }
                            } catch (e) {
                              r.e(e);
                            } finally {
                              r.f();
                            }
                          }
                          return t;
                        },
                        uri: function (e) {
                          /^sip:/i.test(e) ||
                            (e = "".concat(o.SIP, ":").concat(e));
                          var t = a.parse(e);
                          return t && t.user ? t : void 0;
                        },
                      },
                      optional: {
                        authorization_user: function (e) {
                          return -1 ===
                            l.parse('"'.concat(e, '"'), "quoted_string")
                            ? void 0
                            : e;
                        },
                        authorization_jwt: function (e) {
                          if ("string" == typeof e) return e;
                        },
                        user_agent: function (e) {
                          if ("string" == typeof e) return e;
                        },
                        connection_recovery_max_interval: function (e) {
                          if (s.isDecimal(e)) {
                            var t = Number(e);
                            if (t > 0) return t;
                          }
                        },
                        connection_recovery_min_interval: function (e) {
                          if (s.isDecimal(e)) {
                            var t = Number(e);
                            if (t > 0) return t;
                          }
                        },
                        contact_uri: function (e) {
                          if ("string" == typeof e) {
                            var t = l.parse(e, "SIP_URI");
                            if (-1 !== t) return t;
                          }
                        },
                        display_name: function (e) {
                          return e;
                        },
                        instance_id: function (e) {
                          return (
                            /^uuid:/i.test(e) && (e = e.substr(5)),
                            -1 === l.parse(e, "uuid") ? void 0 : e
                          );
                        },
                        no_answer_timeout: function (e) {
                          if (s.isDecimal(e)) {
                            var t = Number(e);
                            if (t > 0) return t;
                          }
                        },
                        session_timers: function (e) {
                          if ("boolean" == typeof e) return e;
                        },
                        session_timers_refresh_method: function (e) {
                          if (
                            "string" == typeof e &&
                            ((e = e.toUpperCase()) === o.INVITE ||
                              e === o.UPDATE)
                          )
                            return e;
                        },
                        session_timers_force_refresher: function (e) {
                          if ("boolean" == typeof e) return e;
                        },
                        password: function (e) {
                          return String(e);
                        },
                        realm: function (e) {
                          return String(e);
                        },
                        ha1: function (e) {
                          return String(e);
                        },
                        register: function (e) {
                          if ("boolean" == typeof e) return e;
                        },
                        register_expires: function (e) {
                          if (s.isDecimal(e)) {
                            var t = Number(e);
                            if (t > 0) return t;
                          }
                        },
                        registrar_server: function (e) {
                          /^sip:/i.test(e) ||
                            (e = "".concat(o.SIP, ":").concat(e));
                          var t = a.parse(e);
                          return t ? (t.user ? void 0 : t) : void 0;
                        },
                        use_preloaded_route: function (e) {
                          if ("boolean" == typeof e) return e;
                        },
                        extra_headers: function (e) {
                          var t = [];
                          if (Array.isArray(e) && e.length) {
                            var n,
                              r = i(e);
                            try {
                              for (r.s(); !(n = r.n()).done; ) {
                                var s = n.value;
                                "string" == typeof s && t.push(s);
                              }
                            } catch (e) {
                              r.e(e);
                            } finally {
                              r.f();
                            }
                            return t;
                          }
                        },
                      },
                    };
                    n.load = function (e, t) {
                      for (var n in d.mandatory) {
                        if (!t.hasOwnProperty(n))
                          throw new c.ConfigurationError(n);
                        var i = t[n],
                          r = d.mandatory[n](i);
                        if (void 0 === r) throw new c.ConfigurationError(n, i);
                        e[n] = r;
                      }
                      for (var o in d.optional)
                        if (t.hasOwnProperty(o)) {
                          var l = t[o];
                          if (s.isEmpty(l)) continue;
                          var a = d.optional[o](l);
                          if (void 0 === a)
                            throw new c.ConfigurationError(o, l);
                          e[o] = a;
                        }
                    };
                  },
                  {
                    "./Constants": 2,
                    "./Exceptions": 6,
                    "./Grammar": 7,
                    "./Socket": 23,
                    "./URI": 29,
                    "./Utils": 30,
                  },
                ],
                2: [
                  function (e, t, n) {
                    "use strict";
                    var i = e("../package.json");
                    t.exports = {
                      USER_AGENT: "".concat(i.title, " ").concat(i.version),
                      SIP: "sip",
                      SIPS: "sips",
                      causes: {
                        CONNECTION_ERROR: "Connection Error",
                        REQUEST_TIMEOUT: "Request Timeout",
                        SIP_FAILURE_CODE: "SIP Failure Code",
                        INTERNAL_ERROR: "Internal Error",
                        BUSY: "Busy",
                        REJECTED: "Rejected",
                        REDIRECTED: "Redirected",
                        UNAVAILABLE: "Unavailable",
                        NOT_FOUND: "Not Found",
                        ADDRESS_INCOMPLETE: "Address Incomplete",
                        INCOMPATIBLE_SDP: "Incompatible SDP",
                        MISSING_SDP: "Missing SDP",
                        AUTHENTICATION_ERROR: "Authentication Error",
                        BYE: "Terminated",
                        WEBRTC_ERROR: "WebRTC Error",
                        CANCELED: "Canceled",
                        NO_ANSWER: "No Answer",
                        EXPIRES: "Expires",
                        NO_ACK: "No ACK",
                        DIALOG_ERROR: "Dialog Error",
                        USER_DENIED_MEDIA_ACCESS: "User Denied Media Access",
                        BAD_MEDIA_DESCRIPTION: "Bad Media Description",
                        RTP_TIMEOUT: "RTP Timeout",
                      },
                      SIP_ERROR_CAUSES: {
                        REDIRECTED: [300, 301, 302, 305, 380],
                        BUSY: [486, 600],
                        REJECTED: [403, 603],
                        NOT_FOUND: [404, 604],
                        UNAVAILABLE: [480, 410, 408, 430],
                        ADDRESS_INCOMPLETE: [484, 424],
                        INCOMPATIBLE_SDP: [488, 606],
                        AUTHENTICATION_ERROR: [401, 407],
                      },
                      ACK: "ACK",
                      BYE: "BYE",
                      CANCEL: "CANCEL",
                      INFO: "INFO",
                      INVITE: "INVITE",
                      MESSAGE: "MESSAGE",
                      NOTIFY: "NOTIFY",
                      OPTIONS: "OPTIONS",
                      REGISTER: "REGISTER",
                      REFER: "REFER",
                      UPDATE: "UPDATE",
                      SUBSCRIBE: "SUBSCRIBE",
                      DTMF_TRANSPORT: { INFO: "INFO", RFC2833: "RFC2833" },
                      REASON_PHRASE: {
                        100: "Trying",
                        180: "Ringing",
                        181: "Call Is Being Forwarded",
                        182: "Queued",
                        183: "Session Progress",
                        199: "Early Dialog Terminated",
                        200: "OK",
                        202: "Accepted",
                        204: "No Notification",
                        300: "Multiple Choices",
                        301: "Moved Permanently",
                        302: "Moved Temporarily",
                        305: "Use Proxy",
                        380: "Alternative Service",
                        400: "Bad Request",
                        401: "Unauthorized",
                        402: "Payment Required",
                        403: "Forbidden",
                        404: "Not Found",
                        405: "Method Not Allowed",
                        406: "Not Acceptable",
                        407: "Proxy Authentication Required",
                        408: "Request Timeout",
                        410: "Gone",
                        412: "Conditional Request Failed",
                        413: "Request Entity Too Large",
                        414: "Request-URI Too Long",
                        415: "Unsupported Media Type",
                        416: "Unsupported URI Scheme",
                        417: "Unknown Resource-Priority",
                        420: "Bad Extension",
                        421: "Extension Required",
                        422: "Session Interval Too Small",
                        423: "Interval Too Brief",
                        424: "Bad Location Information",
                        428: "Use Identity Header",
                        429: "Provide Referrer Identity",
                        430: "Flow Failed",
                        433: "Anonymity Disallowed",
                        436: "Bad Identity-Info",
                        437: "Unsupported Certificate",
                        438: "Invalid Identity Header",
                        439: "First Hop Lacks Outbound Support",
                        440: "Max-Breadth Exceeded",
                        469: "Bad Info Package",
                        470: "Consent Needed",
                        478: "Unresolvable Destination",
                        480: "Temporarily Unavailable",
                        481: "Call/Transaction Does Not Exist",
                        482: "Loop Detected",
                        483: "Too Many Hops",
                        484: "Address Incomplete",
                        485: "Ambiguous",
                        486: "Busy Here",
                        487: "Request Terminated",
                        488: "Not Acceptable Here",
                        489: "Bad Event",
                        491: "Request Pending",
                        493: "Undecipherable",
                        494: "Security Agreement Required",
                        500: "JsSIP Internal Error",
                        501: "Not Implemented",
                        502: "Bad Gateway",
                        503: "Service Unavailable",
                        504: "Server Time-out",
                        505: "Version Not Supported",
                        513: "Message Too Large",
                        580: "Precondition Failure",
                        600: "Busy Everywhere",
                        603: "Decline",
                        604: "Does Not Exist Anywhere",
                        606: "Not Acceptable",
                      },
                      ALLOWED_METHODS:
                        "INVITE,ACK,CANCEL,BYE,UPDATE,MESSAGE,OPTIONS,REFER,INFO,NOTIFY,SUBSCRIBE",
                      ACCEPTED_BODY_TYPES:
                        "application/sdp, application/dtmf-relay",
                      MAX_FORWARDS: 69,
                      SESSION_EXPIRES: 90,
                      MIN_SESSION_EXPIRES: 60,
                      CONNECTION_RECOVERY_MAX_INTERVAL: 30,
                      CONNECTION_RECOVERY_MIN_INTERVAL: 2,
                    };
                  },
                  { "../package.json": 42 },
                ],
                3: [
                  function (e, t, n) {
                    "use strict";
                    function i(e, t) {
                      for (var n = 0; n < t.length; n++) {
                        var i = t[n];
                        (i.enumerable = i.enumerable || !1),
                          (i.configurable = !0),
                          "value" in i && (i.writable = !0),
                          Object.defineProperty(e, i.key, i);
                      }
                    }
                    var r = e("./Logger"),
                      s = e("./SIPMessage"),
                      o = e("./Constants"),
                      l = e("./Transactions"),
                      a = e("./Dialog/RequestSender"),
                      u = e("./Utils"),
                      c = new r("Dialog"),
                      d = {
                        STATUS_EARLY: 1,
                        STATUS_CONFIRMED: 2,
                        STATUS_TERMINATED: 3,
                      };
                    t.exports = (function () {
                      function e(t, n, i) {
                        var r =
                          arguments.length > 3 && void 0 !== arguments[3]
                            ? arguments[3]
                            : d.STATUS_CONFIRMED;
                        if (
                          ((function (e, t) {
                            if (!(e instanceof t))
                              throw new TypeError(
                                "Cannot call a class as a function"
                              );
                          })(this, e),
                          (this._owner = t),
                          (this._ua = t._ua),
                          (this._uac_pending_reply = !1),
                          (this._uas_pending_reply = !1),
                          !n.hasHeader("contact"))
                        )
                          return {
                            error:
                              "unable to create a Dialog without Contact header field",
                          };
                        n instanceof s.IncomingResponse &&
                          (r =
                            n.status_code < 200
                              ? d.STATUS_EARLY
                              : d.STATUS_CONFIRMED);
                        var o = n.parseHeader("contact");
                        "UAS" === i
                          ? ((this._id = {
                              call_id: n.call_id,
                              local_tag: n.to_tag,
                              remote_tag: n.from_tag,
                              toString: function () {
                                return (
                                  this.call_id +
                                  this.local_tag +
                                  this.remote_tag
                                );
                              },
                            }),
                            (this._state = r),
                            (this._remote_seqnum = n.cseq),
                            (this._local_uri = n.parseHeader("to").uri),
                            (this._remote_uri = n.parseHeader("from").uri),
                            (this._remote_target = o.uri),
                            (this._route_set = n.getHeaders("record-route")),
                            (this._ack_seqnum = this._remote_seqnum))
                          : "UAC" === i &&
                            ((this._id = {
                              call_id: n.call_id,
                              local_tag: n.from_tag,
                              remote_tag: n.to_tag,
                              toString: function () {
                                return (
                                  this.call_id +
                                  this.local_tag +
                                  this.remote_tag
                                );
                              },
                            }),
                            (this._state = r),
                            (this._local_seqnum = n.cseq),
                            (this._local_uri = n.parseHeader("from").uri),
                            (this._remote_uri = n.parseHeader("to").uri),
                            (this._remote_target = o.uri),
                            (this._route_set = n
                              .getHeaders("record-route")
                              .reverse()),
                            (this._ack_seqnum = null)),
                          this._ua.newDialog(this),
                          c.debug(
                            "new "
                              .concat(i, " dialog created with status ")
                              .concat(
                                this._state === d.STATUS_EARLY
                                  ? "EARLY"
                                  : "CONFIRMED"
                              )
                          );
                      }
                      return (
                        (t = e),
                        (n = [
                          {
                            key: "id",
                            get: function () {
                              return this._id;
                            },
                          },
                          {
                            key: "local_seqnum",
                            get: function () {
                              return this._local_seqnum;
                            },
                            set: function (e) {
                              this._local_seqnum = e;
                            },
                          },
                          {
                            key: "owner",
                            get: function () {
                              return this._owner;
                            },
                          },
                          {
                            key: "uac_pending_reply",
                            get: function () {
                              return this._uac_pending_reply;
                            },
                            set: function (e) {
                              this._uac_pending_reply = e;
                            },
                          },
                          {
                            key: "uas_pending_reply",
                            get: function () {
                              return this._uas_pending_reply;
                            },
                          },
                          {
                            key: "isTerminated",
                            value: function () {
                              return this._status === d.STATUS_TERMINATED;
                            },
                          },
                          {
                            key: "update",
                            value: function (e, t) {
                              (this._state = d.STATUS_CONFIRMED),
                                c.debug(
                                  "dialog ".concat(
                                    this._id.toString(),
                                    "  changed to CONFIRMED state"
                                  )
                                ),
                                "UAC" === t &&
                                  (this._route_set = e
                                    .getHeaders("record-route")
                                    .reverse());
                            },
                          },
                          {
                            key: "terminate",
                            value: function () {
                              c.debug(
                                "dialog ".concat(
                                  this._id.toString(),
                                  " deleted"
                                )
                              ),
                                this._ua.destroyDialog(this),
                                (this._state = d.STATUS_TERMINATED);
                            },
                          },
                          {
                            key: "sendRequest",
                            value: function (e) {
                              var t = this,
                                n =
                                  arguments.length > 1 &&
                                  void 0 !== arguments[1]
                                    ? arguments[1]
                                    : {},
                                i = u.cloneArray(n.extraHeaders),
                                r = u.cloneObject(n.eventHandlers),
                                s = n.body || null,
                                o = this._createRequest(e, i, s);
                              return (
                                (r.onAuthenticated = function () {
                                  t._local_seqnum += 1;
                                }),
                                new a(this, o, r).send(),
                                o
                              );
                            },
                          },
                          {
                            key: "receiveRequest",
                            value: function (e) {
                              this._checkInDialogRequest(e) &&
                                (e.method === o.ACK && null !== this._ack_seqnum
                                  ? (this._ack_seqnum = null)
                                  : e.method === o.INVITE &&
                                    (this._ack_seqnum = e.cseq),
                                this._owner.receiveRequest(e));
                            },
                          },
                          {
                            key: "_createRequest",
                            value: function (e, t, n) {
                              (t = u.cloneArray(t)),
                                this._local_seqnum ||
                                  (this._local_seqnum = Math.floor(
                                    1e4 * Math.random()
                                  ));
                              var i =
                                e === o.CANCEL || e === o.ACK
                                  ? this._local_seqnum
                                  : (this._local_seqnum += 1);
                              return new s.OutgoingRequest(
                                e,
                                this._remote_target,
                                this._ua,
                                {
                                  cseq: i,
                                  call_id: this._id.call_id,
                                  from_uri: this._local_uri,
                                  from_tag: this._id.local_tag,
                                  to_uri: this._remote_uri,
                                  to_tag: this._id.remote_tag,
                                  route_set: this._route_set,
                                },
                                t,
                                n
                              );
                            },
                          },
                          {
                            key: "_checkInDialogRequest",
                            value: function (e) {
                              var t = this;
                              if (this._remote_seqnum)
                                if (e.cseq < this._remote_seqnum) {
                                  if (e.method !== o.ACK)
                                    return e.reply(500), !1;
                                  if (
                                    null === this._ack_seqnum ||
                                    e.cseq !== this._ack_seqnum
                                  )
                                    return !1;
                                } else
                                  e.cseq > this._remote_seqnum &&
                                    (this._remote_seqnum = e.cseq);
                              else this._remote_seqnum = e.cseq;
                              if (
                                e.method === o.INVITE ||
                                (e.method === o.UPDATE && e.body)
                              ) {
                                if (!0 === this._uac_pending_reply)
                                  e.reply(491);
                                else {
                                  if (!0 === this._uas_pending_reply) {
                                    var n = 1 + ((10 * Math.random()) | 0);
                                    return (
                                      e.reply(500, null, [
                                        "Retry-After:".concat(n),
                                      ]),
                                      !1
                                    );
                                  }
                                  (this._uas_pending_reply = !0),
                                    e.server_transaction.on(
                                      "stateChanged",
                                      function n() {
                                        (e.server_transaction.state !==
                                          l.C.STATUS_ACCEPTED &&
                                          e.server_transaction.state !==
                                            l.C.STATUS_COMPLETED &&
                                          e.server_transaction.state !==
                                            l.C.STATUS_TERMINATED) ||
                                          (e.server_transaction.removeListener(
                                            "stateChanged",
                                            n
                                          ),
                                          (t._uas_pending_reply = !1));
                                      }
                                    );
                                }
                                e.hasHeader("contact") &&
                                  e.server_transaction.on(
                                    "stateChanged",
                                    function () {
                                      e.server_transaction.state ===
                                        l.C.STATUS_ACCEPTED &&
                                        (t._remote_target =
                                          e.parseHeader("contact").uri);
                                    }
                                  );
                              } else
                                e.method === o.NOTIFY &&
                                  e.hasHeader("contact") &&
                                  e.server_transaction.on(
                                    "stateChanged",
                                    function () {
                                      e.server_transaction.state ===
                                        l.C.STATUS_COMPLETED &&
                                        (t._remote_target =
                                          e.parseHeader("contact").uri);
                                    }
                                  );
                              return !0;
                            },
                          },
                        ]),
                        (r = [
                          {
                            key: "C",
                            get: function () {
                              return d;
                            },
                          },
                        ]),
                        n && i(t.prototype, n),
                        r && i(t, r),
                        Object.defineProperty(t, "prototype", { writable: !1 }),
                        e
                      );
                      var t, n, r;
                    })();
                  },
                  {
                    "./Constants": 2,
                    "./Dialog/RequestSender": 4,
                    "./Logger": 9,
                    "./SIPMessage": 22,
                    "./Transactions": 26,
                    "./Utils": 30,
                  },
                ],
                4: [
                  function (e, t, n) {
                    "use strict";
                    var i = e("../Constants"),
                      r = e("../Transactions"),
                      s = e("../RequestSender"),
                      o = {
                        onRequestTimeout: function () {},
                        onTransportError: function () {},
                        onSuccessResponse: function () {},
                        onErrorResponse: function () {},
                        onAuthenticated: function () {},
                        onDialogError: function () {},
                      };
                    t.exports = (function () {
                      function e(t, n, i) {
                        for (var r in ((function (e, t) {
                          if (!(e instanceof t))
                            throw new TypeError(
                              "Cannot call a class as a function"
                            );
                        })(this, e),
                        (this._dialog = t),
                        (this._ua = t._ua),
                        (this._request = n),
                        (this._eventHandlers = i),
                        (this._reattempt = !1),
                        (this._reattemptTimer = null),
                        o))
                          Object.prototype.hasOwnProperty.call(o, r) &&
                            (this._eventHandlers[r] ||
                              (this._eventHandlers[r] = o[r]));
                      }
                      return (
                        (t = e),
                        (n = [
                          {
                            key: "request",
                            get: function () {
                              return this._request;
                            },
                          },
                          {
                            key: "send",
                            value: function () {
                              var e = this,
                                t = new s(this._ua, this._request, {
                                  onRequestTimeout: function () {
                                    e._eventHandlers.onRequestTimeout();
                                  },
                                  onTransportError: function () {
                                    e._eventHandlers.onTransportError();
                                  },
                                  onAuthenticated: function (t) {
                                    e._eventHandlers.onAuthenticated(t);
                                  },
                                  onReceiveResponse: function (t) {
                                    e._receiveResponse(t);
                                  },
                                });
                              t.send(),
                                (this._request.method === i.INVITE ||
                                  (this._request.method === i.UPDATE &&
                                    this._request.body)) &&
                                  t.clientTransaction.state !==
                                    r.C.STATUS_TERMINATED &&
                                  ((this._dialog.uac_pending_reply = !0),
                                  t.clientTransaction.on(
                                    "stateChanged",
                                    function n() {
                                      (t.clientTransaction.state !==
                                        r.C.STATUS_ACCEPTED &&
                                        t.clientTransaction.state !==
                                          r.C.STATUS_COMPLETED &&
                                        t.clientTransaction.state !==
                                          r.C.STATUS_TERMINATED) ||
                                        (t.clientTransaction.removeListener(
                                          "stateChanged",
                                          n
                                        ),
                                        (e._dialog.uac_pending_reply = !1));
                                    }
                                  ));
                            },
                          },
                          {
                            key: "_receiveResponse",
                            value: function (e) {
                              var t = this;
                              408 === e.status_code || 481 === e.status_code
                                ? this._eventHandlers.onDialogError(e)
                                : e.method === i.INVITE && 491 === e.status_code
                                ? this._reattempt
                                  ? e.status_code >= 200 && e.status_code < 300
                                    ? this._eventHandlers.onSuccessResponse(e)
                                    : e.status_code >= 300 &&
                                      this._eventHandlers.onErrorResponse(e)
                                  : ((this._request.cseq =
                                      this._dialog.local_seqnum +=
                                        1),
                                    (this._reattemptTimer = setTimeout(
                                      function () {
                                        t._dialog.isTerminated() ||
                                          ((t._reattempt = !0), t.send());
                                      },
                                      1e3
                                    )))
                                : e.status_code >= 200 && e.status_code < 300
                                ? this._eventHandlers.onSuccessResponse(e)
                                : e.status_code >= 300 &&
                                  this._eventHandlers.onErrorResponse(e);
                            },
                          },
                        ]) &&
                          (function (e, t) {
                            for (var n = 0; n < t.length; n++) {
                              var i = t[n];
                              (i.enumerable = i.enumerable || !1),
                                (i.configurable = !0),
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(e, i.key, i);
                            }
                          })(t.prototype, n),
                        Object.defineProperty(t, "prototype", { writable: !1 }),
                        e
                      );
                      var t, n;
                    })();
                  },
                  {
                    "../Constants": 2,
                    "../RequestSender": 21,
                    "../Transactions": 26,
                  },
                ],
                5: [
                  function (e, t, n) {
                    "use strict";
                    var i = e("./Logger"),
                      r = e("./Utils"),
                      s = new i("DigestAuthentication");
                    t.exports = (function () {
                      function e(t) {
                        (function (e, t) {
                          if (!(e instanceof t))
                            throw new TypeError(
                              "Cannot call a class as a function"
                            );
                        })(this, e),
                          (this._credentials = t),
                          (this._cnonce = null),
                          (this._nc = 0),
                          (this._ncHex = "00000000"),
                          (this._algorithm = null),
                          (this._realm = null),
                          (this._nonce = null),
                          (this._opaque = null),
                          (this._stale = null),
                          (this._qop = null),
                          (this._method = null),
                          (this._uri = null),
                          (this._ha1 = null),
                          (this._response = null);
                      }
                      return (
                        (t = e),
                        (n = [
                          {
                            key: "get",
                            value: function (e) {
                              switch (e) {
                                case "realm":
                                  return this._realm;
                                case "ha1":
                                  return this._ha1;
                                default:
                                  return void s.warn(
                                    'get() | cannot get "%s" parameter',
                                    e
                                  );
                              }
                            },
                          },
                          {
                            key: "authenticate",
                            value: function (e, t) {
                              var n = e.method,
                                i = e.ruri,
                                o = e.body,
                                l =
                                  arguments.length > 2 &&
                                  void 0 !== arguments[2]
                                    ? arguments[2]
                                    : null;
                              if (
                                ((this._algorithm = t.algorithm),
                                (this._realm = t.realm),
                                (this._nonce = t.nonce),
                                (this._opaque = t.opaque),
                                (this._stale = t.stale),
                                this._algorithm)
                              ) {
                                if ("MD5" !== this._algorithm)
                                  return (
                                    s.warn(
                                      'authenticate() | challenge with Digest algorithm different than "MD5", authentication aborted'
                                    ),
                                    !1
                                  );
                              } else this._algorithm = "MD5";
                              if (!this._nonce)
                                return (
                                  s.warn(
                                    "authenticate() | challenge without Digest nonce, authentication aborted"
                                  ),
                                  !1
                                );
                              if (!this._realm)
                                return (
                                  s.warn(
                                    "authenticate() | challenge without Digest realm, authentication aborted"
                                  ),
                                  !1
                                );
                              if (!this._credentials.password) {
                                if (!this._credentials.ha1)
                                  return (
                                    s.warn(
                                      "authenticate() | no plain SIP password nor ha1 provided, authentication aborted"
                                    ),
                                    !1
                                  );
                                if (this._credentials.realm !== this._realm)
                                  return (
                                    s.warn(
                                      'authenticate() | no plain SIP password, and stored `realm` does not match the given `realm`, cannot authenticate [stored:"%s", given:"%s"]',
                                      this._credentials.realm,
                                      this._realm
                                    ),
                                    !1
                                  );
                              }
                              if (t.qop)
                                if (t.qop.indexOf("auth-int") > -1)
                                  this._qop = "auth-int";
                                else {
                                  if (!(t.qop.indexOf("auth") > -1))
                                    return (
                                      s.warn(
                                        'authenticate() | challenge without Digest qop different than "auth" or "auth-int", authentication aborted'
                                      ),
                                      !1
                                    );
                                  this._qop = "auth";
                                }
                              else this._qop = null;
                              (this._method = n),
                                (this._uri = i),
                                (this._cnonce = l || r.createRandomToken(12)),
                                (this._nc += 1);
                              var a,
                                u,
                                c = Number(this._nc).toString(16);
                              return (
                                (this._ncHex =
                                  "00000000".substr(0, 8 - c.length) + c),
                                4294967296 === this._nc &&
                                  ((this._nc = 1), (this._ncHex = "00000001")),
                                this._credentials.password
                                  ? (this._ha1 = r.calculateMD5(
                                      ""
                                        .concat(this._credentials.username, ":")
                                        .concat(this._realm, ":")
                                        .concat(this._credentials.password)
                                    ))
                                  : (this._ha1 = this._credentials.ha1),
                                "auth" === this._qop
                                  ? ((a = ""
                                      .concat(this._method, ":")
                                      .concat(this._uri)),
                                    (u = r.calculateMD5(a)),
                                    s.debug(
                                      'authenticate() | using qop=auth [a2:"%s"]',
                                      a
                                    ),
                                    (this._response = r.calculateMD5(
                                      ""
                                        .concat(this._ha1, ":")
                                        .concat(this._nonce, ":")
                                        .concat(this._ncHex, ":")
                                        .concat(this._cnonce, ":auth:")
                                        .concat(u)
                                    )))
                                  : "auth-int" === this._qop
                                  ? ((a = ""
                                      .concat(this._method, ":")
                                      .concat(this._uri, ":")
                                      .concat(r.calculateMD5(o || ""))),
                                    (u = r.calculateMD5(a)),
                                    s.debug(
                                      'authenticate() | using qop=auth-int [a2:"%s"]',
                                      a
                                    ),
                                    (this._response = r.calculateMD5(
                                      ""
                                        .concat(this._ha1, ":")
                                        .concat(this._nonce, ":")
                                        .concat(this._ncHex, ":")
                                        .concat(this._cnonce, ":auth-int:")
                                        .concat(u)
                                    )))
                                  : null === this._qop &&
                                    ((a = ""
                                      .concat(this._method, ":")
                                      .concat(this._uri)),
                                    (u = r.calculateMD5(a)),
                                    s.debug(
                                      'authenticate() | using qop=null [a2:"%s"]',
                                      a
                                    ),
                                    (this._response = r.calculateMD5(
                                      ""
                                        .concat(this._ha1, ":")
                                        .concat(this._nonce, ":")
                                        .concat(u)
                                    ))),
                                s.debug("authenticate() | response generated"),
                                !0
                              );
                            },
                          },
                          {
                            key: "toString",
                            value: function () {
                              var e = [];
                              if (!this._response)
                                throw new Error(
                                  "response field does not exist, cannot generate Authorization header"
                                );
                              return (
                                e.push("algorithm=".concat(this._algorithm)),
                                e.push(
                                  'username="'.concat(
                                    this._credentials.username,
                                    '"'
                                  )
                                ),
                                e.push('realm="'.concat(this._realm, '"')),
                                e.push('nonce="'.concat(this._nonce, '"')),
                                e.push('uri="'.concat(this._uri, '"')),
                                e.push(
                                  'response="'.concat(this._response, '"')
                                ),
                                this._opaque &&
                                  e.push('opaque="'.concat(this._opaque, '"')),
                                this._qop &&
                                  (e.push("qop=".concat(this._qop)),
                                  e.push('cnonce="'.concat(this._cnonce, '"')),
                                  e.push("nc=".concat(this._ncHex))),
                                "Digest ".concat(e.join(", "))
                              );
                            },
                          },
                        ]),
                        n &&
                          (function (e, t) {
                            for (var n = 0; n < t.length; n++) {
                              var i = t[n];
                              (i.enumerable = i.enumerable || !1),
                                (i.configurable = !0),
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(e, i.key, i);
                            }
                          })(t.prototype, n),
                        Object.defineProperty(t, "prototype", { writable: !1 }),
                        e
                      );
                      var t, n;
                    })();
                  },
                  { "./Logger": 9, "./Utils": 30 },
                ],
                6: [
                  function (e, t, n) {
                    "use strict";
                    function i(e) {
                      return (
                        (i =
                          "function" == typeof Symbol &&
                          "symbol" == typeof Symbol.iterator
                            ? function (e) {
                                return typeof e;
                              }
                            : function (e) {
                                return e &&
                                  "function" == typeof Symbol &&
                                  e.constructor === Symbol &&
                                  e !== Symbol.prototype
                                  ? "symbol"
                                  : typeof e;
                              }),
                        i(e)
                      );
                    }
                    function r(e, t) {
                      for (var n = 0; n < t.length; n++) {
                        var i = t[n];
                        (i.enumerable = i.enumerable || !1),
                          (i.configurable = !0),
                          "value" in i && (i.writable = !0),
                          Object.defineProperty(e, i.key, i);
                      }
                    }
                    function s(e, t, n) {
                      return (
                        t && r(e.prototype, t),
                        n && r(e, n),
                        Object.defineProperty(e, "prototype", { writable: !1 }),
                        e
                      );
                    }
                    function o(e, t) {
                      if (!(e instanceof t))
                        throw new TypeError(
                          "Cannot call a class as a function"
                        );
                    }
                    function l(e, t) {
                      if ("function" != typeof t && null !== t)
                        throw new TypeError(
                          "Super expression must either be null or a function"
                        );
                      (e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                          value: e,
                          writable: !0,
                          configurable: !0,
                        },
                      })),
                        Object.defineProperty(e, "prototype", { writable: !1 }),
                        t && h(e, t);
                    }
                    function a(e) {
                      var t = d();
                      return function () {
                        var n,
                          r = _(e);
                        if (t) {
                          var s = _(this).constructor;
                          n = Reflect.construct(r, arguments, s);
                        } else n = r.apply(this, arguments);
                        return (function (e, t) {
                          if (
                            t &&
                            ("object" === i(t) || "function" == typeof t)
                          )
                            return t;
                          if (void 0 !== t)
                            throw new TypeError(
                              "Derived constructors may only return object or undefined"
                            );
                          return (function (e) {
                            if (void 0 === e)
                              throw new ReferenceError(
                                "this hasn't been initialised - super() hasn't been called"
                              );
                            return e;
                          })(e);
                        })(this, n);
                      };
                    }
                    function u(e) {
                      var t = "function" == typeof Map ? new Map() : void 0;
                      return (
                        (u = function (e) {
                          if (
                            null === e ||
                            ((n = e),
                            -1 ===
                              Function.toString
                                .call(n)
                                .indexOf("[native code]"))
                          )
                            return e;
                          var n;
                          if ("function" != typeof e)
                            throw new TypeError(
                              "Super expression must either be null or a function"
                            );
                          if (void 0 !== t) {
                            if (t.has(e)) return t.get(e);
                            t.set(e, i);
                          }
                          function i() {
                            return c(e, arguments, _(this).constructor);
                          }
                          return (
                            (i.prototype = Object.create(e.prototype, {
                              constructor: {
                                value: i,
                                enumerable: !1,
                                writable: !0,
                                configurable: !0,
                              },
                            })),
                            h(i, e)
                          );
                        }),
                        u(e)
                      );
                    }
                    function c(e, t, n) {
                      return (
                        (c = d()
                          ? Reflect.construct.bind()
                          : function (e, t, n) {
                              var i = [null];
                              i.push.apply(i, t);
                              var r = new (Function.bind.apply(e, i))();
                              return n && h(r, n.prototype), r;
                            }),
                        c.apply(null, arguments)
                      );
                    }
                    function d() {
                      if ("undefined" == typeof Reflect || !Reflect.construct)
                        return !1;
                      if (Reflect.construct.sham) return !1;
                      if ("function" == typeof Proxy) return !0;
                      try {
                        return (
                          Boolean.prototype.valueOf.call(
                            Reflect.construct(Boolean, [], function () {})
                          ),
                          !0
                        );
                      } catch (e) {
                        return !1;
                      }
                    }
                    function h(e, t) {
                      return (
                        (h = Object.setPrototypeOf
                          ? Object.setPrototypeOf.bind()
                          : function (e, t) {
                              return (e.__proto__ = t), e;
                            }),
                        h(e, t)
                      );
                    }
                    function _(e) {
                      return (
                        (_ = Object.setPrototypeOf
                          ? Object.getPrototypeOf.bind()
                          : function (e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                            }),
                        _(e)
                      );
                    }
                    var f = (function (e) {
                        l(n, e);
                        var t = a(n);
                        function n(e, i) {
                          var r;
                          return (
                            o(this, n),
                            ((r = t.call(this)).code = 1),
                            (r.name = "CONFIGURATION_ERROR"),
                            (r.parameter = e),
                            (r.value = i),
                            (r.message = r.value
                              ? "Invalid value "
                                  .concat(
                                    JSON.stringify(r.value),
                                    ' for parameter "'
                                  )
                                  .concat(r.parameter, '"')
                              : "Missing parameter: ".concat(r.parameter)),
                            r
                          );
                        }
                        return s(n);
                      })(u(Error)),
                      g = (function (e) {
                        l(n, e);
                        var t = a(n);
                        function n(e) {
                          var i;
                          return (
                            o(this, n),
                            ((i = t.call(this)).code = 2),
                            (i.name = "INVALID_STATE_ERROR"),
                            (i.status = e),
                            (i.message = "Invalid status: ".concat(e)),
                            i
                          );
                        }
                        return s(n);
                      })(u(Error)),
                      p = (function (e) {
                        l(n, e);
                        var t = a(n);
                        function n(e) {
                          var i;
                          return (
                            o(this, n),
                            ((i = t.call(this)).code = 3),
                            (i.name = "NOT_SUPPORTED_ERROR"),
                            (i.message = e),
                            i
                          );
                        }
                        return s(n);
                      })(u(Error)),
                      v = (function (e) {
                        l(n, e);
                        var t = a(n);
                        function n(e) {
                          var i;
                          return (
                            o(this, n),
                            ((i = t.call(this)).code = 4),
                            (i.name = "NOT_READY_ERROR"),
                            (i.message = e),
                            i
                          );
                        }
                        return s(n);
                      })(u(Error));
                    t.exports = {
                      ConfigurationError: f,
                      InvalidStateError: g,
                      NotSupportedError: p,
                      NotReadyError: v,
                    };
                  },
                  {},
                ],
                7: [
                  function (e, t, n) {
                    "use strict";
                    t.exports = (function () {
                      function t(e) {
                        return (
                          '"' +
                          e
                            .replace(/\\/g, "\\\\")
                            .replace(/"/g, '\\"')
                            .replace(/\x08/g, "\\b")
                            .replace(/\t/g, "\\t")
                            .replace(/\n/g, "\\n")
                            .replace(/\f/g, "\\f")
                            .replace(/\r/g, "\\r")
                            .replace(
                              /[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,
                              escape
                            ) +
                          '"'
                        );
                      }
                      var n = {
                        parse: function (n, i) {
                          var r = {
                            CRLF: c,
                            DIGIT: d,
                            ALPHA: h,
                            HEXDIG: _,
                            WSP: f,
                            OCTET: g,
                            DQUOTE: p,
                            SP: v,
                            HTAB: m,
                            alphanum: y,
                            reserved: C,
                            unreserved: b,
                            mark: S,
                            escaped: T,
                            LWS: w,
                            SWS: E,
                            HCOLON: A,
                            TEXT_UTF8_TRIM: R,
                            TEXT_UTF8char: I,
                            UTF8_NONASCII: k,
                            UTF8_CONT: O,
                            LHEX: function () {
                              var e;
                              return (
                                null === (e = d()) &&
                                  (/^[a-f]/.test(n.charAt(s))
                                    ? ((e = n.charAt(s)), s++)
                                    : ((e = null), 0 === o && u("[a-f]"))),
                                e
                              );
                            },
                            token: x,
                            token_nodot: P,
                            separators: function () {
                              var e;
                              return (
                                40 === n.charCodeAt(s)
                                  ? ((e = "("), s++)
                                  : ((e = null), 0 === o && u('"("')),
                                null === e &&
                                  (41 === n.charCodeAt(s)
                                    ? ((e = ")"), s++)
                                    : ((e = null), 0 === o && u('")"')),
                                  null === e &&
                                    (60 === n.charCodeAt(s)
                                      ? ((e = "<"), s++)
                                      : ((e = null), 0 === o && u('"<"')),
                                    null === e &&
                                      (62 === n.charCodeAt(s)
                                        ? ((e = ">"), s++)
                                        : ((e = null), 0 === o && u('">"')),
                                      null === e &&
                                        (64 === n.charCodeAt(s)
                                          ? ((e = "@"), s++)
                                          : ((e = null), 0 === o && u('"@"')),
                                        null === e &&
                                          (44 === n.charCodeAt(s)
                                            ? ((e = ","), s++)
                                            : ((e = null), 0 === o && u('","')),
                                          null === e &&
                                            (59 === n.charCodeAt(s)
                                              ? ((e = ";"), s++)
                                              : ((e = null),
                                                0 === o && u('";"')),
                                            null === e &&
                                              (58 === n.charCodeAt(s)
                                                ? ((e = ":"), s++)
                                                : ((e = null),
                                                  0 === o && u('":"')),
                                              null === e &&
                                                (92 === n.charCodeAt(s)
                                                  ? ((e = "\\"), s++)
                                                  : ((e = null),
                                                    0 === o && u('"\\\\"')),
                                                null === e &&
                                                  null === (e = p()) &&
                                                  (47 === n.charCodeAt(s)
                                                    ? ((e = "/"), s++)
                                                    : ((e = null),
                                                      0 === o && u('"/"')),
                                                  null === e &&
                                                    (91 === n.charCodeAt(s)
                                                      ? ((e = "["), s++)
                                                      : ((e = null),
                                                        0 === o && u('"["')),
                                                    null === e &&
                                                      (93 === n.charCodeAt(s)
                                                        ? ((e = "]"), s++)
                                                        : ((e = null),
                                                          0 === o && u('"]"')),
                                                      null === e &&
                                                        (63 === n.charCodeAt(s)
                                                          ? ((e = "?"), s++)
                                                          : ((e = null),
                                                            0 === o &&
                                                              u('"?"')),
                                                        null === e &&
                                                          (61 ===
                                                          n.charCodeAt(s)
                                                            ? ((e = "="), s++)
                                                            : ((e = null),
                                                              0 === o &&
                                                                u('"="')),
                                                          null === e &&
                                                            (123 ===
                                                            n.charCodeAt(s)
                                                              ? ((e = "{"), s++)
                                                              : ((e = null),
                                                                0 === o &&
                                                                  u('"{"')),
                                                            null === e &&
                                                              (125 ===
                                                              n.charCodeAt(s)
                                                                ? ((e = "}"),
                                                                  s++)
                                                                : ((e = null),
                                                                  0 === o &&
                                                                    u('"}"')),
                                                              null === e &&
                                                                null ===
                                                                  (e = v()) &&
                                                                (e =
                                                                  m())))))))))))))))),
                                e
                              );
                            },
                            word: D,
                            STAR: N,
                            SLASH: U,
                            EQUAL: M,
                            LPAREN: L,
                            RPAREN: j,
                            RAQUOT: q,
                            LAQUOT: H,
                            COMMA: F,
                            SEMI: V,
                            COLON: B,
                            LDQUOT: $,
                            RDQUOT: W,
                            comment: function e() {
                              var t, n, i, r;
                              if (((r = s), null !== (t = L()))) {
                                for (
                                  n = [],
                                    null === (i = G()) &&
                                      null === (i = J()) &&
                                      (i = e());
                                  null !== i;

                                )
                                  n.push(i),
                                    null === (i = G()) &&
                                      null === (i = J()) &&
                                      (i = e());
                                null !== n && null !== (i = j())
                                  ? (t = [t, n, i])
                                  : ((t = null), (s = r));
                              } else (t = null), (s = r);
                              return t;
                            },
                            ctext: G,
                            quoted_string: z,
                            quoted_string_clean: Y,
                            qdtext: K,
                            quoted_pair: J,
                            SIP_URI_noparams: X,
                            SIP_URI: Q,
                            uri_scheme: Z,
                            uri_scheme_sips: ee,
                            uri_scheme_sip: te,
                            userinfo: ne,
                            user: ie,
                            user_unreserved: re,
                            password: se,
                            hostport: oe,
                            host: le,
                            hostname: ae,
                            domainlabel: ue,
                            toplabel: ce,
                            IPv6reference: de,
                            IPv6address: he,
                            h16: _e,
                            ls32: fe,
                            IPv4address: ge,
                            dec_octet: pe,
                            port: ve,
                            uri_parameters: me,
                            uri_parameter: ye,
                            transport_param: Ce,
                            user_param: be,
                            method_param: Se,
                            ttl_param: Te,
                            maddr_param: we,
                            lr_param: Ee,
                            other_param: Ae,
                            pname: Re,
                            pvalue: Ie,
                            paramchar: ke,
                            param_unreserved: Oe,
                            headers: xe,
                            header: Pe,
                            hname: De,
                            hvalue: Ne,
                            hnv_unreserved: Ue,
                            Request_Response: function () {
                              var e;
                              return null === (e = dt()) && (e = Me()), e;
                            },
                            Request_Line: Me,
                            Request_URI: Le,
                            absoluteURI: je,
                            hier_part: qe,
                            net_path: He,
                            abs_path: Fe,
                            opaque_part: Ve,
                            uric: Be,
                            uric_no_slash: $e,
                            path_segments: We,
                            segment: Ge,
                            param: ze,
                            pchar: Ye,
                            scheme: Ke,
                            authority: Je,
                            srvr: Xe,
                            reg_name: Qe,
                            query: Ze,
                            SIP_Version: et,
                            INVITEm: tt,
                            ACKm: nt,
                            OPTIONSm: it,
                            BYEm: rt,
                            CANCELm: st,
                            REGISTERm: ot,
                            SUBSCRIBEm: lt,
                            NOTIFYm: at,
                            REFERm: ut,
                            Method: ct,
                            Status_Line: dt,
                            Status_Code: ht,
                            extension_code: _t,
                            Reason_Phrase: ft,
                            Allow_Events: function () {
                              var e, t, n, i, r, o;
                              if (((r = s), null !== (e = jt()))) {
                                for (
                                  t = [],
                                    o = s,
                                    null !== (n = F()) && null !== (i = jt())
                                      ? (n = [n, i])
                                      : ((n = null), (s = o));
                                  null !== n;

                                )
                                  t.push(n),
                                    (o = s),
                                    null !== (n = F()) && null !== (i = jt())
                                      ? (n = [n, i])
                                      : ((n = null), (s = o));
                                null !== t
                                  ? (e = [e, t])
                                  : ((e = null), (s = r));
                              } else (e = null), (s = r);
                              return e;
                            },
                            Call_ID: function () {
                              var e, t, i, r, l, a;
                              return (
                                (r = s),
                                (l = s),
                                null !== (e = D())
                                  ? ((a = s),
                                    64 === n.charCodeAt(s)
                                      ? ((t = "@"), s++)
                                      : ((t = null), 0 === o && u('"@"')),
                                    null !== t && null !== (i = D())
                                      ? (t = [t, i])
                                      : ((t = null), (s = a)),
                                    null !== (t = null !== t ? t : "")
                                      ? (e = [e, t])
                                      : ((e = null), (s = l)))
                                  : ((e = null), (s = l)),
                                null !== e &&
                                  (e = (function (e) {
                                    Fn = n.substring(s, e);
                                  })(r)),
                                null === e && (s = r),
                                e
                              );
                            },
                            Contact: function () {
                              var e, t, n, i, r, o, l;
                              if (((r = s), null === (e = N())))
                                if (((o = s), null !== (e = gt()))) {
                                  for (
                                    t = [],
                                      l = s,
                                      null !== (n = F()) && null !== (i = gt())
                                        ? (n = [n, i])
                                        : ((n = null), (s = l));
                                    null !== n;

                                  )
                                    t.push(n),
                                      (l = s),
                                      null !== (n = F()) && null !== (i = gt())
                                        ? (n = [n, i])
                                        : ((n = null), (s = l));
                                  null !== t
                                    ? (e = [e, t])
                                    : ((e = null), (s = o));
                                } else (e = null), (s = o);
                              return (
                                null !== e &&
                                  (e = (function (e) {
                                    var t, n;
                                    for (
                                      n = Fn.multi_header.length, t = 0;
                                      t < n;
                                      t++
                                    )
                                      if (null === Fn.multi_header[t].parsed) {
                                        Fn = null;
                                        break;
                                      }
                                    Fn = null !== Fn ? Fn.multi_header : -1;
                                  })()),
                                null === e && (s = r),
                                e
                              );
                            },
                            contact_param: gt,
                            name_addr: pt,
                            display_name: vt,
                            contact_params: mt,
                            c_p_q: yt,
                            c_p_expires: Ct,
                            delta_seconds: bt,
                            qvalue: St,
                            generic_param: Tt,
                            gen_value: wt,
                            Content_Disposition: function () {
                              var e, t, n, i, r, o;
                              if (((r = s), null !== (e = Et()))) {
                                for (
                                  t = [],
                                    o = s,
                                    null !== (n = V()) && null !== (i = At())
                                      ? (n = [n, i])
                                      : ((n = null), (s = o));
                                  null !== n;

                                )
                                  t.push(n),
                                    (o = s),
                                    null !== (n = V()) && null !== (i = At())
                                      ? (n = [n, i])
                                      : ((n = null), (s = o));
                                null !== t
                                  ? (e = [e, t])
                                  : ((e = null), (s = r));
                              } else (e = null), (s = r);
                              return e;
                            },
                            disp_type: Et,
                            disp_param: At,
                            handling_param: Rt,
                            Content_Encoding: function () {
                              var e, t, n, i, r, o;
                              if (((r = s), null !== (e = x()))) {
                                for (
                                  t = [],
                                    o = s,
                                    null !== (n = F()) && null !== (i = x())
                                      ? (n = [n, i])
                                      : ((n = null), (s = o));
                                  null !== n;

                                )
                                  t.push(n),
                                    (o = s),
                                    null !== (n = F()) && null !== (i = x())
                                      ? (n = [n, i])
                                      : ((n = null), (s = o));
                                null !== t
                                  ? (e = [e, t])
                                  : ((e = null), (s = r));
                              } else (e = null), (s = r);
                              return e;
                            },
                            Content_Length: function () {
                              var e, t, n;
                              if (((n = s), null !== (t = d())))
                                for (e = []; null !== t; ) e.push(t), (t = d());
                              else e = null;
                              return (
                                null !== e &&
                                  (e = void (Fn = parseInt(e.join("")))),
                                null === e && (s = n),
                                e
                              );
                            },
                            Content_Type: function () {
                              var e, t;
                              return (
                                (t = s),
                                null !== (e = It()) &&
                                  (e = (function (e) {
                                    Fn = n.substring(s, e);
                                  })(t)),
                                null === e && (s = t),
                                e
                              );
                            },
                            media_type: It,
                            m_type: kt,
                            discrete_type: Ot,
                            composite_type: xt,
                            extension_token: Pt,
                            x_token: Dt,
                            m_subtype: Nt,
                            m_parameter: Ut,
                            m_value: Mt,
                            CSeq: function () {
                              var e, t, n, i;
                              return (
                                (i = s),
                                null !== (e = Lt()) &&
                                null !== (t = w()) &&
                                null !== (n = ct())
                                  ? (e = [e, t, n])
                                  : ((e = null), (s = i)),
                                e
                              );
                            },
                            CSeq_value: Lt,
                            Expires: function () {
                              var e, t;
                              return (
                                (t = s),
                                null !== (e = bt()) && (e = void (Fn = e)),
                                null === e && (s = t),
                                e
                              );
                            },
                            Event: function () {
                              var e, t, n, i, r, o, l, a;
                              if (((r = s), (o = s), null !== (e = jt()))) {
                                for (
                                  t = [],
                                    l = s,
                                    null !== (n = V()) && null !== (i = Tt())
                                      ? (n = [n, i])
                                      : ((n = null), (s = l));
                                  null !== n;

                                )
                                  t.push(n),
                                    (l = s),
                                    null !== (n = V()) && null !== (i = Tt())
                                      ? (n = [n, i])
                                      : ((n = null), (s = l));
                                null !== t
                                  ? (e = [e, t])
                                  : ((e = null), (s = o));
                              } else (e = null), (s = o);
                              return (
                                null !== e &&
                                  ((a = e[0]),
                                  (e = void (Fn.event = a
                                    .join("")
                                    .toLowerCase()))),
                                null === e && (s = r),
                                e
                              );
                            },
                            event_type: jt,
                            From: function () {
                              var e, t, n, i, r, o, l;
                              if (
                                ((r = s),
                                (o = s),
                                null === (e = X()) && (e = pt()),
                                null !== e)
                              ) {
                                for (
                                  t = [],
                                    l = s,
                                    null !== (n = V()) && null !== (i = qt())
                                      ? (n = [n, i])
                                      : ((n = null), (s = l));
                                  null !== n;

                                )
                                  t.push(n),
                                    (l = s),
                                    null !== (n = V()) && null !== (i = qt())
                                      ? (n = [n, i])
                                      : ((n = null), (s = l));
                                null !== t
                                  ? (e = [e, t])
                                  : ((e = null), (s = o));
                              } else (e = null), (s = o);
                              return (
                                null !== e &&
                                  (e = (function (e) {
                                    var t = Fn.tag;
                                    try {
                                      (Fn = new Hn(
                                        Fn.uri,
                                        Fn.display_name,
                                        Fn.params
                                      )),
                                        t && Fn.setParam("tag", t);
                                    } catch (e) {
                                      Fn = -1;
                                    }
                                  })()),
                                null === e && (s = r),
                                e
                              );
                            },
                            from_param: qt,
                            tag_param: Ht,
                            Max_Forwards: function () {
                              var e, t, n;
                              if (((n = s), null !== (t = d())))
                                for (e = []; null !== t; ) e.push(t), (t = d());
                              else e = null;
                              return (
                                null !== e &&
                                  (e = void (Fn = parseInt(e.join("")))),
                                null === e && (s = n),
                                e
                              );
                            },
                            Min_Expires: function () {
                              var e, t;
                              return (
                                (t = s),
                                null !== (e = bt()) && (e = void (Fn = e)),
                                null === e && (s = t),
                                e
                              );
                            },
                            Name_Addr_Header: function () {
                              var e, t, n, i, r, o, l, a, u, c;
                              for (a = s, u = s, e = [], t = vt(); null !== t; )
                                e.push(t), (t = vt());
                              if (null !== e)
                                if (null !== (t = H()))
                                  if (null !== (n = Q()))
                                    if (null !== (i = q())) {
                                      for (
                                        r = [],
                                          c = s,
                                          null !== (o = V()) &&
                                          null !== (l = Tt())
                                            ? (o = [o, l])
                                            : ((o = null), (s = c));
                                        null !== o;

                                      )
                                        r.push(o),
                                          (c = s),
                                          null !== (o = V()) &&
                                          null !== (l = Tt())
                                            ? (o = [o, l])
                                            : ((o = null), (s = c));
                                      null !== r
                                        ? (e = [e, t, n, i, r])
                                        : ((e = null), (s = u));
                                    } else (e = null), (s = u);
                                  else (e = null), (s = u);
                                else (e = null), (s = u);
                              else (e = null), (s = u);
                              return (
                                null !== e &&
                                  (e = (function (e) {
                                    try {
                                      Fn = new Hn(
                                        Fn.uri,
                                        Fn.display_name,
                                        Fn.params
                                      );
                                    } catch (e) {
                                      Fn = -1;
                                    }
                                  })()),
                                null === e && (s = a),
                                e
                              );
                            },
                            Proxy_Authenticate: function () {
                              return Ft();
                            },
                            challenge: Ft,
                            other_challenge: Vt,
                            auth_param: Bt,
                            digest_cln: $t,
                            realm: Wt,
                            realm_value: Gt,
                            domain: zt,
                            URI: Yt,
                            nonce: Kt,
                            nonce_value: Jt,
                            opaque: Xt,
                            stale: Qt,
                            algorithm: Zt,
                            qop_options: en,
                            qop_value: tn,
                            Proxy_Require: function () {
                              var e, t, n, i, r, o;
                              if (((r = s), null !== (e = x()))) {
                                for (
                                  t = [],
                                    o = s,
                                    null !== (n = F()) && null !== (i = x())
                                      ? (n = [n, i])
                                      : ((n = null), (s = o));
                                  null !== n;

                                )
                                  t.push(n),
                                    (o = s),
                                    null !== (n = F()) && null !== (i = x())
                                      ? (n = [n, i])
                                      : ((n = null), (s = o));
                                null !== t
                                  ? (e = [e, t])
                                  : ((e = null), (s = r));
                              } else (e = null), (s = r);
                              return e;
                            },
                            Record_Route: function () {
                              var e, t, n, i, r, o, l;
                              if (((r = s), (o = s), null !== (e = nn()))) {
                                for (
                                  t = [],
                                    l = s,
                                    null !== (n = F()) && null !== (i = nn())
                                      ? (n = [n, i])
                                      : ((n = null), (s = l));
                                  null !== n;

                                )
                                  t.push(n),
                                    (l = s),
                                    null !== (n = F()) && null !== (i = nn())
                                      ? (n = [n, i])
                                      : ((n = null), (s = l));
                                null !== t
                                  ? (e = [e, t])
                                  : ((e = null), (s = o));
                              } else (e = null), (s = o);
                              return (
                                null !== e &&
                                  (e = (function (e) {
                                    var t, n;
                                    for (
                                      n = Fn.multi_header.length, t = 0;
                                      t < n;
                                      t++
                                    )
                                      if (null === Fn.multi_header[t].parsed) {
                                        Fn = null;
                                        break;
                                      }
                                    Fn = null !== Fn ? Fn.multi_header : -1;
                                  })()),
                                null === e && (s = r),
                                e
                              );
                            },
                            rec_route: nn,
                            Reason: function () {
                              var e, t, i, r, l, a, c;
                              if (
                                ((l = s),
                                (a = s),
                                "sip" === n.substr(s, 3).toLowerCase()
                                  ? ((e = n.substr(s, 3)), (s += 3))
                                  : ((e = null), 0 === o && u('"SIP"')),
                                null === e && (e = x()),
                                null !== e)
                              ) {
                                for (
                                  t = [],
                                    c = s,
                                    null !== (i = V()) && null !== (r = rn())
                                      ? (i = [i, r])
                                      : ((i = null), (s = c));
                                  null !== i;

                                )
                                  t.push(i),
                                    (c = s),
                                    null !== (i = V()) && null !== (r = rn())
                                      ? (i = [i, r])
                                      : ((i = null), (s = c));
                                null !== t
                                  ? (e = [e, t])
                                  : ((e = null), (s = a));
                              } else (e = null), (s = a);
                              return (
                                null !== e &&
                                  (e = (function (e, t) {
                                    if (
                                      ((Fn.protocol = t.toLowerCase()),
                                      Fn.params || (Fn.params = {}),
                                      Fn.params.text &&
                                        '"' === Fn.params.text[0])
                                    ) {
                                      var n = Fn.params.text;
                                      (Fn.text = n.substring(1, n.length - 1)),
                                        delete Fn.params.text;
                                    }
                                  })(0, e[0])),
                                null === e && (s = l),
                                e
                              );
                            },
                            reason_param: rn,
                            reason_cause: sn,
                            Require: function () {
                              var e, t, n, i, r, o;
                              if (((r = s), null !== (e = x()))) {
                                for (
                                  t = [],
                                    o = s,
                                    null !== (n = F()) && null !== (i = x())
                                      ? (n = [n, i])
                                      : ((n = null), (s = o));
                                  null !== n;

                                )
                                  t.push(n),
                                    (o = s),
                                    null !== (n = F()) && null !== (i = x())
                                      ? (n = [n, i])
                                      : ((n = null), (s = o));
                                null !== t
                                  ? (e = [e, t])
                                  : ((e = null), (s = r));
                              } else (e = null), (s = r);
                              return e;
                            },
                            Route: function () {
                              var e, t, n, i, r, o;
                              if (((r = s), null !== (e = on()))) {
                                for (
                                  t = [],
                                    o = s,
                                    null !== (n = F()) && null !== (i = on())
                                      ? (n = [n, i])
                                      : ((n = null), (s = o));
                                  null !== n;

                                )
                                  t.push(n),
                                    (o = s),
                                    null !== (n = F()) && null !== (i = on())
                                      ? (n = [n, i])
                                      : ((n = null), (s = o));
                                null !== t
                                  ? (e = [e, t])
                                  : ((e = null), (s = r));
                              } else (e = null), (s = r);
                              return e;
                            },
                            route_param: on,
                            Subscription_State: function () {
                              var e, t, n, i, r, o;
                              if (((r = s), null !== (e = ln()))) {
                                for (
                                  t = [],
                                    o = s,
                                    null !== (n = V()) && null !== (i = an())
                                      ? (n = [n, i])
                                      : ((n = null), (s = o));
                                  null !== n;

                                )
                                  t.push(n),
                                    (o = s),
                                    null !== (n = V()) && null !== (i = an())
                                      ? (n = [n, i])
                                      : ((n = null), (s = o));
                                null !== t
                                  ? (e = [e, t])
                                  : ((e = null), (s = r));
                              } else (e = null), (s = r);
                              return e;
                            },
                            substate_value: ln,
                            subexp_params: an,
                            event_reason_value: un,
                            Subject: function () {
                              var e;
                              return null !== (e = R()) ? e : "";
                            },
                            Supported: function () {
                              var e, t, n, i, r, o;
                              if (((r = s), null !== (e = x()))) {
                                for (
                                  t = [],
                                    o = s,
                                    null !== (n = F()) && null !== (i = x())
                                      ? (n = [n, i])
                                      : ((n = null), (s = o));
                                  null !== n;

                                )
                                  t.push(n),
                                    (o = s),
                                    null !== (n = F()) && null !== (i = x())
                                      ? (n = [n, i])
                                      : ((n = null), (s = o));
                                null !== t
                                  ? (e = [e, t])
                                  : ((e = null), (s = r));
                              } else (e = null), (s = r);
                              return null !== e ? e : "";
                            },
                            To: function () {
                              var e, t, n, i, r, o, l;
                              if (
                                ((r = s),
                                (o = s),
                                null === (e = X()) && (e = pt()),
                                null !== e)
                              ) {
                                for (
                                  t = [],
                                    l = s,
                                    null !== (n = V()) && null !== (i = cn())
                                      ? (n = [n, i])
                                      : ((n = null), (s = l));
                                  null !== n;

                                )
                                  t.push(n),
                                    (l = s),
                                    null !== (n = V()) && null !== (i = cn())
                                      ? (n = [n, i])
                                      : ((n = null), (s = l));
                                null !== t
                                  ? (e = [e, t])
                                  : ((e = null), (s = o));
                              } else (e = null), (s = o);
                              return (
                                null !== e &&
                                  (e = (function (e) {
                                    var t = Fn.tag;
                                    try {
                                      (Fn = new Hn(
                                        Fn.uri,
                                        Fn.display_name,
                                        Fn.params
                                      )),
                                        t && Fn.setParam("tag", t);
                                    } catch (e) {
                                      Fn = -1;
                                    }
                                  })()),
                                null === e && (s = r),
                                e
                              );
                            },
                            to_param: cn,
                            Via: function () {
                              var e, t, n, i, r, o;
                              if (((r = s), null !== (e = dn()))) {
                                for (
                                  t = [],
                                    o = s,
                                    null !== (n = F()) && null !== (i = dn())
                                      ? (n = [n, i])
                                      : ((n = null), (s = o));
                                  null !== n;

                                )
                                  t.push(n),
                                    (o = s),
                                    null !== (n = F()) && null !== (i = dn())
                                      ? (n = [n, i])
                                      : ((n = null), (s = o));
                                null !== t
                                  ? (e = [e, t])
                                  : ((e = null), (s = r));
                              } else (e = null), (s = r);
                              return e;
                            },
                            via_param: dn,
                            via_params: hn,
                            via_ttl: _n,
                            via_maddr: fn,
                            via_received: gn,
                            via_branch: pn,
                            response_port: vn,
                            rport: mn,
                            sent_protocol: yn,
                            protocol_name: Cn,
                            transport: bn,
                            sent_by: Sn,
                            via_host: Tn,
                            via_port: wn,
                            ttl: En,
                            WWW_Authenticate: function () {
                              return Ft();
                            },
                            Session_Expires: function () {
                              var e, t, n, i, r, o;
                              if (((r = s), null !== (e = An()))) {
                                for (
                                  t = [],
                                    o = s,
                                    null !== (n = V()) && null !== (i = Rn())
                                      ? (n = [n, i])
                                      : ((n = null), (s = o));
                                  null !== n;

                                )
                                  t.push(n),
                                    (o = s),
                                    null !== (n = V()) && null !== (i = Rn())
                                      ? (n = [n, i])
                                      : ((n = null), (s = o));
                                null !== t
                                  ? (e = [e, t])
                                  : ((e = null), (s = r));
                              } else (e = null), (s = r);
                              return e;
                            },
                            s_e_expires: An,
                            s_e_params: Rn,
                            s_e_refresher: In,
                            extension_header: function () {
                              var e, t, n, i;
                              return (
                                (i = s),
                                null !== (e = x()) &&
                                null !== (t = A()) &&
                                null !== (n = kn())
                                  ? (e = [e, t, n])
                                  : ((e = null), (s = i)),
                                e
                              );
                            },
                            header_value: kn,
                            message_body: function () {
                              var e, t;
                              for (e = [], t = g(); null !== t; )
                                e.push(t), (t = g());
                              return e;
                            },
                            uuid_URI: function () {
                              var e, t, i;
                              return (
                                (i = s),
                                "uuid:" === n.substr(s, 5)
                                  ? ((e = "uuid:"), (s += 5))
                                  : ((e = null), 0 === o && u('"uuid:"')),
                                null !== e && null !== (t = On())
                                  ? (e = [e, t])
                                  : ((e = null), (s = i)),
                                e
                              );
                            },
                            uuid: On,
                            hex4: xn,
                            hex8: Pn,
                            hex12: Dn,
                            Refer_To: function () {
                              var e, t, n, i, r, o, l;
                              if (
                                ((r = s),
                                (o = s),
                                null === (e = X()) && (e = pt()),
                                null !== e)
                              ) {
                                for (
                                  t = [],
                                    l = s,
                                    null !== (n = V()) && null !== (i = Tt())
                                      ? (n = [n, i])
                                      : ((n = null), (s = l));
                                  null !== n;

                                )
                                  t.push(n),
                                    (l = s),
                                    null !== (n = V()) && null !== (i = Tt())
                                      ? (n = [n, i])
                                      : ((n = null), (s = l));
                                null !== t
                                  ? (e = [e, t])
                                  : ((e = null), (s = o));
                              } else (e = null), (s = o);
                              return (
                                null !== e &&
                                  (e = (function (e) {
                                    try {
                                      Fn = new Hn(
                                        Fn.uri,
                                        Fn.display_name,
                                        Fn.params
                                      );
                                    } catch (e) {
                                      Fn = -1;
                                    }
                                  })()),
                                null === e && (s = r),
                                e
                              );
                            },
                            Replaces: function () {
                              var e, t, n, i, r, o;
                              if (((r = s), null !== (e = Nn()))) {
                                for (
                                  t = [],
                                    o = s,
                                    null !== (n = V()) && null !== (i = Un())
                                      ? (n = [n, i])
                                      : ((n = null), (s = o));
                                  null !== n;

                                )
                                  t.push(n),
                                    (o = s),
                                    null !== (n = V()) && null !== (i = Un())
                                      ? (n = [n, i])
                                      : ((n = null), (s = o));
                                null !== t
                                  ? (e = [e, t])
                                  : ((e = null), (s = r));
                              } else (e = null), (s = r);
                              return e;
                            },
                            call_id: Nn,
                            replaces_param: Un,
                            to_tag: Mn,
                            from_tag: Ln,
                            early_flag: jn,
                          };
                          if (void 0 !== i) {
                            if (void 0 === r[i])
                              throw new Error(
                                "Invalid rule name: " + t(i) + "."
                              );
                          } else i = "CRLF";
                          var s = 0,
                            o = 0,
                            l = 0,
                            a = [];
                          function u(e) {
                            s < l || (s > l && ((l = s), (a = [])), a.push(e));
                          }
                          function c() {
                            var e;
                            return (
                              "\r\n" === n.substr(s, 2)
                                ? ((e = "\r\n"), (s += 2))
                                : ((e = null), 0 === o && u('"\\r\\n"')),
                              e
                            );
                          }
                          function d() {
                            var e;
                            return (
                              /^[0-9]/.test(n.charAt(s))
                                ? ((e = n.charAt(s)), s++)
                                : ((e = null), 0 === o && u("[0-9]")),
                              e
                            );
                          }
                          function h() {
                            var e;
                            return (
                              /^[a-zA-Z]/.test(n.charAt(s))
                                ? ((e = n.charAt(s)), s++)
                                : ((e = null), 0 === o && u("[a-zA-Z]")),
                              e
                            );
                          }
                          function _() {
                            var e;
                            return (
                              /^[0-9a-fA-F]/.test(n.charAt(s))
                                ? ((e = n.charAt(s)), s++)
                                : ((e = null), 0 === o && u("[0-9a-fA-F]")),
                              e
                            );
                          }
                          function f() {
                            var e;
                            return null === (e = v()) && (e = m()), e;
                          }
                          function g() {
                            var e;
                            return (
                              /^[\0-\xFF]/.test(n.charAt(s))
                                ? ((e = n.charAt(s)), s++)
                                : ((e = null), 0 === o && u("[\\0-\\xFF]")),
                              e
                            );
                          }
                          function p() {
                            var e;
                            return (
                              /^["]/.test(n.charAt(s))
                                ? ((e = n.charAt(s)), s++)
                                : ((e = null), 0 === o && u('["]')),
                              e
                            );
                          }
                          function v() {
                            var e;
                            return (
                              32 === n.charCodeAt(s)
                                ? ((e = " "), s++)
                                : ((e = null), 0 === o && u('" "')),
                              e
                            );
                          }
                          function m() {
                            var e;
                            return (
                              9 === n.charCodeAt(s)
                                ? ((e = "\t"), s++)
                                : ((e = null), 0 === o && u('"\\t"')),
                              e
                            );
                          }
                          function y() {
                            var e;
                            return (
                              /^[a-zA-Z0-9]/.test(n.charAt(s))
                                ? ((e = n.charAt(s)), s++)
                                : ((e = null), 0 === o && u("[a-zA-Z0-9]")),
                              e
                            );
                          }
                          function C() {
                            var e;
                            return (
                              59 === n.charCodeAt(s)
                                ? ((e = ";"), s++)
                                : ((e = null), 0 === o && u('";"')),
                              null === e &&
                                (47 === n.charCodeAt(s)
                                  ? ((e = "/"), s++)
                                  : ((e = null), 0 === o && u('"/"')),
                                null === e &&
                                  (63 === n.charCodeAt(s)
                                    ? ((e = "?"), s++)
                                    : ((e = null), 0 === o && u('"?"')),
                                  null === e &&
                                    (58 === n.charCodeAt(s)
                                      ? ((e = ":"), s++)
                                      : ((e = null), 0 === o && u('":"')),
                                    null === e &&
                                      (64 === n.charCodeAt(s)
                                        ? ((e = "@"), s++)
                                        : ((e = null), 0 === o && u('"@"')),
                                      null === e &&
                                        (38 === n.charCodeAt(s)
                                          ? ((e = "&"), s++)
                                          : ((e = null), 0 === o && u('"&"')),
                                        null === e &&
                                          (61 === n.charCodeAt(s)
                                            ? ((e = "="), s++)
                                            : ((e = null), 0 === o && u('"="')),
                                          null === e &&
                                            (43 === n.charCodeAt(s)
                                              ? ((e = "+"), s++)
                                              : ((e = null),
                                                0 === o && u('"+"')),
                                            null === e &&
                                              (36 === n.charCodeAt(s)
                                                ? ((e = "$"), s++)
                                                : ((e = null),
                                                  0 === o && u('"$"')),
                                              null === e &&
                                                (44 === n.charCodeAt(s)
                                                  ? ((e = ","), s++)
                                                  : ((e = null),
                                                    0 === o &&
                                                      u('","'))))))))))),
                              e
                            );
                          }
                          function b() {
                            var e;
                            return null === (e = y()) && (e = S()), e;
                          }
                          function S() {
                            var e;
                            return (
                              45 === n.charCodeAt(s)
                                ? ((e = "-"), s++)
                                : ((e = null), 0 === o && u('"-"')),
                              null === e &&
                                (95 === n.charCodeAt(s)
                                  ? ((e = "_"), s++)
                                  : ((e = null), 0 === o && u('"_"')),
                                null === e &&
                                  (46 === n.charCodeAt(s)
                                    ? ((e = "."), s++)
                                    : ((e = null), 0 === o && u('"."')),
                                  null === e &&
                                    (33 === n.charCodeAt(s)
                                      ? ((e = "!"), s++)
                                      : ((e = null), 0 === o && u('"!"')),
                                    null === e &&
                                      (126 === n.charCodeAt(s)
                                        ? ((e = "~"), s++)
                                        : ((e = null), 0 === o && u('"~"')),
                                      null === e &&
                                        (42 === n.charCodeAt(s)
                                          ? ((e = "*"), s++)
                                          : ((e = null), 0 === o && u('"*"')),
                                        null === e &&
                                          (39 === n.charCodeAt(s)
                                            ? ((e = "'"), s++)
                                            : ((e = null),
                                              0 === o && u('"\'"')),
                                          null === e &&
                                            (40 === n.charCodeAt(s)
                                              ? ((e = "("), s++)
                                              : ((e = null),
                                                0 === o && u('"("')),
                                            null === e &&
                                              (41 === n.charCodeAt(s)
                                                ? ((e = ")"), s++)
                                                : ((e = null),
                                                  0 === o && u('")"')))))))))),
                              e
                            );
                          }
                          function T() {
                            var e, t, i, r, l;
                            return (
                              (r = s),
                              (l = s),
                              37 === n.charCodeAt(s)
                                ? ((e = "%"), s++)
                                : ((e = null), 0 === o && u('"%"')),
                              null !== e &&
                              null !== (t = _()) &&
                              null !== (i = _())
                                ? (e = [e, t, i])
                                : ((e = null), (s = l)),
                              null !== e && (e = e.join("")),
                              null === e && (s = r),
                              e
                            );
                          }
                          function w() {
                            var e, t, n, i, r, o;
                            for (
                              i = s, r = s, o = s, e = [], t = f();
                              null !== t;

                            )
                              e.push(t), (t = f());
                            if (
                              (null !== e && null !== (t = c())
                                ? (e = [e, t])
                                : ((e = null), (s = o)),
                              null !== (e = null !== e ? e : ""))
                            ) {
                              if (null !== (n = f()))
                                for (t = []; null !== n; ) t.push(n), (n = f());
                              else t = null;
                              null !== t ? (e = [e, t]) : ((e = null), (s = r));
                            } else (e = null), (s = r);
                            return (
                              null !== e && (e = " "), null === e && (s = i), e
                            );
                          }
                          function E() {
                            var e;
                            return null !== (e = w()) ? e : "";
                          }
                          function A() {
                            var e, t, i, r, l;
                            for (
                              r = s,
                                l = s,
                                e = [],
                                null === (t = v()) && (t = m());
                              null !== t;

                            )
                              e.push(t), null === (t = v()) && (t = m());
                            return (
                              null !== e
                                ? (58 === n.charCodeAt(s)
                                    ? ((t = ":"), s++)
                                    : ((t = null), 0 === o && u('":"')),
                                  null !== t && null !== (i = E())
                                    ? (e = [e, t, i])
                                    : ((e = null), (s = l)))
                                : ((e = null), (s = l)),
                              null !== e && (e = ":"),
                              null === e && (s = r),
                              e
                            );
                          }
                          function R() {
                            var e, t, i, r, o, l, a;
                            if (((o = s), (l = s), null !== (t = I())))
                              for (e = []; null !== t; ) e.push(t), (t = I());
                            else e = null;
                            if (null !== e) {
                              for (t = [], a = s, i = [], r = w(); null !== r; )
                                i.push(r), (r = w());
                              for (
                                null !== i && null !== (r = I())
                                  ? (i = [i, r])
                                  : ((i = null), (s = a));
                                null !== i;

                              ) {
                                for (
                                  t.push(i), a = s, i = [], r = w();
                                  null !== r;

                                )
                                  i.push(r), (r = w());
                                null !== i && null !== (r = I())
                                  ? (i = [i, r])
                                  : ((i = null), (s = a));
                              }
                              null !== t ? (e = [e, t]) : ((e = null), (s = l));
                            } else (e = null), (s = l);
                            return (
                              null !== e &&
                                (e = (function (e) {
                                  return n.substring(s, e);
                                })(o)),
                              null === e && (s = o),
                              e
                            );
                          }
                          function I() {
                            var e;
                            return (
                              /^[!-~]/.test(n.charAt(s))
                                ? ((e = n.charAt(s)), s++)
                                : ((e = null), 0 === o && u("[!-~]")),
                              null === e && (e = k()),
                              e
                            );
                          }
                          function k() {
                            var e;
                            return (
                              /^[\x80-\uFFFF]/.test(n.charAt(s))
                                ? ((e = n.charAt(s)), s++)
                                : ((e = null), 0 === o && u("[\\x80-\\uFFFF]")),
                              e
                            );
                          }
                          function O() {
                            var e;
                            return (
                              /^[\x80-\xBF]/.test(n.charAt(s))
                                ? ((e = n.charAt(s)), s++)
                                : ((e = null), 0 === o && u("[\\x80-\\xBF]")),
                              e
                            );
                          }
                          function x() {
                            var e, t, i;
                            if (
                              ((i = s),
                              null === (t = y()) &&
                                (45 === n.charCodeAt(s)
                                  ? ((t = "-"), s++)
                                  : ((t = null), 0 === o && u('"-"')),
                                null === t &&
                                  (46 === n.charCodeAt(s)
                                    ? ((t = "."), s++)
                                    : ((t = null), 0 === o && u('"."')),
                                  null === t &&
                                    (33 === n.charCodeAt(s)
                                      ? ((t = "!"), s++)
                                      : ((t = null), 0 === o && u('"!"')),
                                    null === t &&
                                      (37 === n.charCodeAt(s)
                                        ? ((t = "%"), s++)
                                        : ((t = null), 0 === o && u('"%"')),
                                      null === t &&
                                        (42 === n.charCodeAt(s)
                                          ? ((t = "*"), s++)
                                          : ((t = null), 0 === o && u('"*"')),
                                        null === t &&
                                          (95 === n.charCodeAt(s)
                                            ? ((t = "_"), s++)
                                            : ((t = null), 0 === o && u('"_"')),
                                          null === t &&
                                            (43 === n.charCodeAt(s)
                                              ? ((t = "+"), s++)
                                              : ((t = null),
                                                0 === o && u('"+"')),
                                            null === t &&
                                              (96 === n.charCodeAt(s)
                                                ? ((t = "`"), s++)
                                                : ((t = null),
                                                  0 === o && u('"`"')),
                                              null === t &&
                                                (39 === n.charCodeAt(s)
                                                  ? ((t = "'"), s++)
                                                  : ((t = null),
                                                    0 === o && u('"\'"')),
                                                null === t &&
                                                  (126 === n.charCodeAt(s)
                                                    ? ((t = "~"), s++)
                                                    : ((t = null),
                                                      0 === o &&
                                                        u('"~"')))))))))))),
                              null !== t)
                            )
                              for (e = []; null !== t; )
                                e.push(t),
                                  null === (t = y()) &&
                                    (45 === n.charCodeAt(s)
                                      ? ((t = "-"), s++)
                                      : ((t = null), 0 === o && u('"-"')),
                                    null === t &&
                                      (46 === n.charCodeAt(s)
                                        ? ((t = "."), s++)
                                        : ((t = null), 0 === o && u('"."')),
                                      null === t &&
                                        (33 === n.charCodeAt(s)
                                          ? ((t = "!"), s++)
                                          : ((t = null), 0 === o && u('"!"')),
                                        null === t &&
                                          (37 === n.charCodeAt(s)
                                            ? ((t = "%"), s++)
                                            : ((t = null), 0 === o && u('"%"')),
                                          null === t &&
                                            (42 === n.charCodeAt(s)
                                              ? ((t = "*"), s++)
                                              : ((t = null),
                                                0 === o && u('"*"')),
                                            null === t &&
                                              (95 === n.charCodeAt(s)
                                                ? ((t = "_"), s++)
                                                : ((t = null),
                                                  0 === o && u('"_"')),
                                              null === t &&
                                                (43 === n.charCodeAt(s)
                                                  ? ((t = "+"), s++)
                                                  : ((t = null),
                                                    0 === o && u('"+"')),
                                                null === t &&
                                                  (96 === n.charCodeAt(s)
                                                    ? ((t = "`"), s++)
                                                    : ((t = null),
                                                      0 === o && u('"`"')),
                                                  null === t &&
                                                    (39 === n.charCodeAt(s)
                                                      ? ((t = "'"), s++)
                                                      : ((t = null),
                                                        0 === o && u('"\'"')),
                                                    null === t &&
                                                      (126 === n.charCodeAt(s)
                                                        ? ((t = "~"), s++)
                                                        : ((t = null),
                                                          0 === o &&
                                                            u('"~"'))))))))))));
                            else e = null;
                            return (
                              null !== e &&
                                (e = (function (e) {
                                  return n.substring(s, e);
                                })(i)),
                              null === e && (s = i),
                              e
                            );
                          }
                          function P() {
                            var e, t, i;
                            if (
                              ((i = s),
                              null === (t = y()) &&
                                (45 === n.charCodeAt(s)
                                  ? ((t = "-"), s++)
                                  : ((t = null), 0 === o && u('"-"')),
                                null === t &&
                                  (33 === n.charCodeAt(s)
                                    ? ((t = "!"), s++)
                                    : ((t = null), 0 === o && u('"!"')),
                                  null === t &&
                                    (37 === n.charCodeAt(s)
                                      ? ((t = "%"), s++)
                                      : ((t = null), 0 === o && u('"%"')),
                                    null === t &&
                                      (42 === n.charCodeAt(s)
                                        ? ((t = "*"), s++)
                                        : ((t = null), 0 === o && u('"*"')),
                                      null === t &&
                                        (95 === n.charCodeAt(s)
                                          ? ((t = "_"), s++)
                                          : ((t = null), 0 === o && u('"_"')),
                                        null === t &&
                                          (43 === n.charCodeAt(s)
                                            ? ((t = "+"), s++)
                                            : ((t = null), 0 === o && u('"+"')),
                                          null === t &&
                                            (96 === n.charCodeAt(s)
                                              ? ((t = "`"), s++)
                                              : ((t = null),
                                                0 === o && u('"`"')),
                                            null === t &&
                                              (39 === n.charCodeAt(s)
                                                ? ((t = "'"), s++)
                                                : ((t = null),
                                                  0 === o && u('"\'"')),
                                              null === t &&
                                                (126 === n.charCodeAt(s)
                                                  ? ((t = "~"), s++)
                                                  : ((t = null),
                                                    0 === o &&
                                                      u('"~"'))))))))))),
                              null !== t)
                            )
                              for (e = []; null !== t; )
                                e.push(t),
                                  null === (t = y()) &&
                                    (45 === n.charCodeAt(s)
                                      ? ((t = "-"), s++)
                                      : ((t = null), 0 === o && u('"-"')),
                                    null === t &&
                                      (33 === n.charCodeAt(s)
                                        ? ((t = "!"), s++)
                                        : ((t = null), 0 === o && u('"!"')),
                                      null === t &&
                                        (37 === n.charCodeAt(s)
                                          ? ((t = "%"), s++)
                                          : ((t = null), 0 === o && u('"%"')),
                                        null === t &&
                                          (42 === n.charCodeAt(s)
                                            ? ((t = "*"), s++)
                                            : ((t = null), 0 === o && u('"*"')),
                                          null === t &&
                                            (95 === n.charCodeAt(s)
                                              ? ((t = "_"), s++)
                                              : ((t = null),
                                                0 === o && u('"_"')),
                                            null === t &&
                                              (43 === n.charCodeAt(s)
                                                ? ((t = "+"), s++)
                                                : ((t = null),
                                                  0 === o && u('"+"')),
                                              null === t &&
                                                (96 === n.charCodeAt(s)
                                                  ? ((t = "`"), s++)
                                                  : ((t = null),
                                                    0 === o && u('"`"')),
                                                null === t &&
                                                  (39 === n.charCodeAt(s)
                                                    ? ((t = "'"), s++)
                                                    : ((t = null),
                                                      0 === o && u('"\'"')),
                                                  null === t &&
                                                    (126 === n.charCodeAt(s)
                                                      ? ((t = "~"), s++)
                                                      : ((t = null),
                                                        0 === o &&
                                                          u('"~"')))))))))));
                            else e = null;
                            return (
                              null !== e &&
                                (e = (function (e) {
                                  return n.substring(s, e);
                                })(i)),
                              null === e && (s = i),
                              e
                            );
                          }
                          function D() {
                            var e, t, i;
                            if (
                              ((i = s),
                              null === (t = y()) &&
                                (45 === n.charCodeAt(s)
                                  ? ((t = "-"), s++)
                                  : ((t = null), 0 === o && u('"-"')),
                                null === t &&
                                  (46 === n.charCodeAt(s)
                                    ? ((t = "."), s++)
                                    : ((t = null), 0 === o && u('"."')),
                                  null === t &&
                                    (33 === n.charCodeAt(s)
                                      ? ((t = "!"), s++)
                                      : ((t = null), 0 === o && u('"!"')),
                                    null === t &&
                                      (37 === n.charCodeAt(s)
                                        ? ((t = "%"), s++)
                                        : ((t = null), 0 === o && u('"%"')),
                                      null === t &&
                                        (42 === n.charCodeAt(s)
                                          ? ((t = "*"), s++)
                                          : ((t = null), 0 === o && u('"*"')),
                                        null === t &&
                                          (95 === n.charCodeAt(s)
                                            ? ((t = "_"), s++)
                                            : ((t = null), 0 === o && u('"_"')),
                                          null === t &&
                                            (43 === n.charCodeAt(s)
                                              ? ((t = "+"), s++)
                                              : ((t = null),
                                                0 === o && u('"+"')),
                                            null === t &&
                                              (96 === n.charCodeAt(s)
                                                ? ((t = "`"), s++)
                                                : ((t = null),
                                                  0 === o && u('"`"')),
                                              null === t &&
                                                (39 === n.charCodeAt(s)
                                                  ? ((t = "'"), s++)
                                                  : ((t = null),
                                                    0 === o && u('"\'"')),
                                                null === t &&
                                                  (126 === n.charCodeAt(s)
                                                    ? ((t = "~"), s++)
                                                    : ((t = null),
                                                      0 === o && u('"~"')),
                                                  null === t &&
                                                    (40 === n.charCodeAt(s)
                                                      ? ((t = "("), s++)
                                                      : ((t = null),
                                                        0 === o && u('"("')),
                                                    null === t &&
                                                      (41 === n.charCodeAt(s)
                                                        ? ((t = ")"), s++)
                                                        : ((t = null),
                                                          0 === o && u('")"')),
                                                      null === t &&
                                                        (60 === n.charCodeAt(s)
                                                          ? ((t = "<"), s++)
                                                          : ((t = null),
                                                            0 === o &&
                                                              u('"<"')),
                                                        null === t &&
                                                          (62 ===
                                                          n.charCodeAt(s)
                                                            ? ((t = ">"), s++)
                                                            : ((t = null),
                                                              0 === o &&
                                                                u('">"')),
                                                          null === t &&
                                                            (58 ===
                                                            n.charCodeAt(s)
                                                              ? ((t = ":"), s++)
                                                              : ((t = null),
                                                                0 === o &&
                                                                  u('":"')),
                                                            null === t &&
                                                              (92 ===
                                                              n.charCodeAt(s)
                                                                ? ((t = "\\"),
                                                                  s++)
                                                                : ((t = null),
                                                                  0 === o &&
                                                                    u(
                                                                      '"\\\\"'
                                                                    )),
                                                              null === t &&
                                                                null ===
                                                                  (t = p()) &&
                                                                (47 ===
                                                                n.charCodeAt(s)
                                                                  ? ((t = "/"),
                                                                    s++)
                                                                  : ((t = null),
                                                                    0 === o &&
                                                                      u('"/"')),
                                                                null === t &&
                                                                  (91 ===
                                                                  n.charCodeAt(
                                                                    s
                                                                  )
                                                                    ? ((t =
                                                                        "["),
                                                                      s++)
                                                                    : ((t =
                                                                        null),
                                                                      0 === o &&
                                                                        u(
                                                                          '"["'
                                                                        )),
                                                                  null === t &&
                                                                    (93 ===
                                                                    n.charCodeAt(
                                                                      s
                                                                    )
                                                                      ? ((t =
                                                                          "]"),
                                                                        s++)
                                                                      : ((t =
                                                                          null),
                                                                        0 ===
                                                                          o &&
                                                                          u(
                                                                            '"]"'
                                                                          )),
                                                                    null ===
                                                                      t &&
                                                                      (63 ===
                                                                      n.charCodeAt(
                                                                        s
                                                                      )
                                                                        ? ((t =
                                                                            "?"),
                                                                          s++)
                                                                        : ((t =
                                                                            null),
                                                                          0 ===
                                                                            o &&
                                                                            u(
                                                                              '"?"'
                                                                            )),
                                                                      null ===
                                                                        t &&
                                                                        (123 ===
                                                                        n.charCodeAt(
                                                                          s
                                                                        )
                                                                          ? ((t =
                                                                              "{"),
                                                                            s++)
                                                                          : ((t =
                                                                              null),
                                                                            0 ===
                                                                              o &&
                                                                              u(
                                                                                '"{"'
                                                                              )),
                                                                        null ===
                                                                          t &&
                                                                          (125 ===
                                                                          n.charCodeAt(
                                                                            s
                                                                          )
                                                                            ? ((t =
                                                                                "}"),
                                                                              s++)
                                                                            : ((t =
                                                                                null),
                                                                              0 ===
                                                                                o &&
                                                                                u(
                                                                                  '"}"'
                                                                                )))))))))))))))))))))))),
                              null !== t)
                            )
                              for (e = []; null !== t; )
                                e.push(t),
                                  null === (t = y()) &&
                                    (45 === n.charCodeAt(s)
                                      ? ((t = "-"), s++)
                                      : ((t = null), 0 === o && u('"-"')),
                                    null === t &&
                                      (46 === n.charCodeAt(s)
                                        ? ((t = "."), s++)
                                        : ((t = null), 0 === o && u('"."')),
                                      null === t &&
                                        (33 === n.charCodeAt(s)
                                          ? ((t = "!"), s++)
                                          : ((t = null), 0 === o && u('"!"')),
                                        null === t &&
                                          (37 === n.charCodeAt(s)
                                            ? ((t = "%"), s++)
                                            : ((t = null), 0 === o && u('"%"')),
                                          null === t &&
                                            (42 === n.charCodeAt(s)
                                              ? ((t = "*"), s++)
                                              : ((t = null),
                                                0 === o && u('"*"')),
                                            null === t &&
                                              (95 === n.charCodeAt(s)
                                                ? ((t = "_"), s++)
                                                : ((t = null),
                                                  0 === o && u('"_"')),
                                              null === t &&
                                                (43 === n.charCodeAt(s)
                                                  ? ((t = "+"), s++)
                                                  : ((t = null),
                                                    0 === o && u('"+"')),
                                                null === t &&
                                                  (96 === n.charCodeAt(s)
                                                    ? ((t = "`"), s++)
                                                    : ((t = null),
                                                      0 === o && u('"`"')),
                                                  null === t &&
                                                    (39 === n.charCodeAt(s)
                                                      ? ((t = "'"), s++)
                                                      : ((t = null),
                                                        0 === o && u('"\'"')),
                                                    null === t &&
                                                      (126 === n.charCodeAt(s)
                                                        ? ((t = "~"), s++)
                                                        : ((t = null),
                                                          0 === o && u('"~"')),
                                                      null === t &&
                                                        (40 === n.charCodeAt(s)
                                                          ? ((t = "("), s++)
                                                          : ((t = null),
                                                            0 === o &&
                                                              u('"("')),
                                                        null === t &&
                                                          (41 ===
                                                          n.charCodeAt(s)
                                                            ? ((t = ")"), s++)
                                                            : ((t = null),
                                                              0 === o &&
                                                                u('")"')),
                                                          null === t &&
                                                            (60 ===
                                                            n.charCodeAt(s)
                                                              ? ((t = "<"), s++)
                                                              : ((t = null),
                                                                0 === o &&
                                                                  u('"<"')),
                                                            null === t &&
                                                              (62 ===
                                                              n.charCodeAt(s)
                                                                ? ((t = ">"),
                                                                  s++)
                                                                : ((t = null),
                                                                  0 === o &&
                                                                    u('">"')),
                                                              null === t &&
                                                                (58 ===
                                                                n.charCodeAt(s)
                                                                  ? ((t = ":"),
                                                                    s++)
                                                                  : ((t = null),
                                                                    0 === o &&
                                                                      u('":"')),
                                                                null === t &&
                                                                  (92 ===
                                                                  n.charCodeAt(
                                                                    s
                                                                  )
                                                                    ? ((t =
                                                                        "\\"),
                                                                      s++)
                                                                    : ((t =
                                                                        null),
                                                                      0 === o &&
                                                                        u(
                                                                          '"\\\\"'
                                                                        )),
                                                                  null === t &&
                                                                    null ===
                                                                      (t =
                                                                        p()) &&
                                                                    (47 ===
                                                                    n.charCodeAt(
                                                                      s
                                                                    )
                                                                      ? ((t =
                                                                          "/"),
                                                                        s++)
                                                                      : ((t =
                                                                          null),
                                                                        0 ===
                                                                          o &&
                                                                          u(
                                                                            '"/"'
                                                                          )),
                                                                    null ===
                                                                      t &&
                                                                      (91 ===
                                                                      n.charCodeAt(
                                                                        s
                                                                      )
                                                                        ? ((t =
                                                                            "["),
                                                                          s++)
                                                                        : ((t =
                                                                            null),
                                                                          0 ===
                                                                            o &&
                                                                            u(
                                                                              '"["'
                                                                            )),
                                                                      null ===
                                                                        t &&
                                                                        (93 ===
                                                                        n.charCodeAt(
                                                                          s
                                                                        )
                                                                          ? ((t =
                                                                              "]"),
                                                                            s++)
                                                                          : ((t =
                                                                              null),
                                                                            0 ===
                                                                              o &&
                                                                              u(
                                                                                '"]"'
                                                                              )),
                                                                        null ===
                                                                          t &&
                                                                          (63 ===
                                                                          n.charCodeAt(
                                                                            s
                                                                          )
                                                                            ? ((t =
                                                                                "?"),
                                                                              s++)
                                                                            : ((t =
                                                                                null),
                                                                              0 ===
                                                                                o &&
                                                                                u(
                                                                                  '"?"'
                                                                                )),
                                                                          null ===
                                                                            t &&
                                                                            (123 ===
                                                                            n.charCodeAt(
                                                                              s
                                                                            )
                                                                              ? ((t =
                                                                                  "{"),
                                                                                s++)
                                                                              : ((t =
                                                                                  null),
                                                                                0 ===
                                                                                  o &&
                                                                                  u(
                                                                                    '"{"'
                                                                                  )),
                                                                            null ===
                                                                              t &&
                                                                              (125 ===
                                                                              n.charCodeAt(
                                                                                s
                                                                              )
                                                                                ? ((t =
                                                                                    "}"),
                                                                                  s++)
                                                                                : ((t =
                                                                                    null),
                                                                                  0 ===
                                                                                    o &&
                                                                                    u(
                                                                                      '"}"'
                                                                                    ))))))))))))))))))))))));
                            else e = null;
                            return (
                              null !== e &&
                                (e = (function (e) {
                                  return n.substring(s, e);
                                })(i)),
                              null === e && (s = i),
                              e
                            );
                          }
                          function N() {
                            var e, t, i, r, l;
                            return (
                              (r = s),
                              (l = s),
                              null !== (e = E())
                                ? (42 === n.charCodeAt(s)
                                    ? ((t = "*"), s++)
                                    : ((t = null), 0 === o && u('"*"')),
                                  null !== t && null !== (i = E())
                                    ? (e = [e, t, i])
                                    : ((e = null), (s = l)))
                                : ((e = null), (s = l)),
                              null !== e && (e = "*"),
                              null === e && (s = r),
                              e
                            );
                          }
                          function U() {
                            var e, t, i, r, l;
                            return (
                              (r = s),
                              (l = s),
                              null !== (e = E())
                                ? (47 === n.charCodeAt(s)
                                    ? ((t = "/"), s++)
                                    : ((t = null), 0 === o && u('"/"')),
                                  null !== t && null !== (i = E())
                                    ? (e = [e, t, i])
                                    : ((e = null), (s = l)))
                                : ((e = null), (s = l)),
                              null !== e && (e = "/"),
                              null === e && (s = r),
                              e
                            );
                          }
                          function M() {
                            var e, t, i, r, l;
                            return (
                              (r = s),
                              (l = s),
                              null !== (e = E())
                                ? (61 === n.charCodeAt(s)
                                    ? ((t = "="), s++)
                                    : ((t = null), 0 === o && u('"="')),
                                  null !== t && null !== (i = E())
                                    ? (e = [e, t, i])
                                    : ((e = null), (s = l)))
                                : ((e = null), (s = l)),
                              null !== e && (e = "="),
                              null === e && (s = r),
                              e
                            );
                          }
                          function L() {
                            var e, t, i, r, l;
                            return (
                              (r = s),
                              (l = s),
                              null !== (e = E())
                                ? (40 === n.charCodeAt(s)
                                    ? ((t = "("), s++)
                                    : ((t = null), 0 === o && u('"("')),
                                  null !== t && null !== (i = E())
                                    ? (e = [e, t, i])
                                    : ((e = null), (s = l)))
                                : ((e = null), (s = l)),
                              null !== e && (e = "("),
                              null === e && (s = r),
                              e
                            );
                          }
                          function j() {
                            var e, t, i, r, l;
                            return (
                              (r = s),
                              (l = s),
                              null !== (e = E())
                                ? (41 === n.charCodeAt(s)
                                    ? ((t = ")"), s++)
                                    : ((t = null), 0 === o && u('")"')),
                                  null !== t && null !== (i = E())
                                    ? (e = [e, t, i])
                                    : ((e = null), (s = l)))
                                : ((e = null), (s = l)),
                              null !== e && (e = ")"),
                              null === e && (s = r),
                              e
                            );
                          }
                          function q() {
                            var e, t, i, r;
                            return (
                              (i = s),
                              (r = s),
                              62 === n.charCodeAt(s)
                                ? ((e = ">"), s++)
                                : ((e = null), 0 === o && u('">"')),
                              null !== e && null !== (t = E())
                                ? (e = [e, t])
                                : ((e = null), (s = r)),
                              null !== e && (e = ">"),
                              null === e && (s = i),
                              e
                            );
                          }
                          function H() {
                            var e, t, i, r;
                            return (
                              (i = s),
                              (r = s),
                              null !== (e = E())
                                ? (60 === n.charCodeAt(s)
                                    ? ((t = "<"), s++)
                                    : ((t = null), 0 === o && u('"<"')),
                                  null !== t
                                    ? (e = [e, t])
                                    : ((e = null), (s = r)))
                                : ((e = null), (s = r)),
                              null !== e && (e = "<"),
                              null === e && (s = i),
                              e
                            );
                          }
                          function F() {
                            var e, t, i, r, l;
                            return (
                              (r = s),
                              (l = s),
                              null !== (e = E())
                                ? (44 === n.charCodeAt(s)
                                    ? ((t = ","), s++)
                                    : ((t = null), 0 === o && u('","')),
                                  null !== t && null !== (i = E())
                                    ? (e = [e, t, i])
                                    : ((e = null), (s = l)))
                                : ((e = null), (s = l)),
                              null !== e && (e = ","),
                              null === e && (s = r),
                              e
                            );
                          }
                          function V() {
                            var e, t, i, r, l;
                            return (
                              (r = s),
                              (l = s),
                              null !== (e = E())
                                ? (59 === n.charCodeAt(s)
                                    ? ((t = ";"), s++)
                                    : ((t = null), 0 === o && u('";"')),
                                  null !== t && null !== (i = E())
                                    ? (e = [e, t, i])
                                    : ((e = null), (s = l)))
                                : ((e = null), (s = l)),
                              null !== e && (e = ";"),
                              null === e && (s = r),
                              e
                            );
                          }
                          function B() {
                            var e, t, i, r, l;
                            return (
                              (r = s),
                              (l = s),
                              null !== (e = E())
                                ? (58 === n.charCodeAt(s)
                                    ? ((t = ":"), s++)
                                    : ((t = null), 0 === o && u('":"')),
                                  null !== t && null !== (i = E())
                                    ? (e = [e, t, i])
                                    : ((e = null), (s = l)))
                                : ((e = null), (s = l)),
                              null !== e && (e = ":"),
                              null === e && (s = r),
                              e
                            );
                          }
                          function $() {
                            var e, t, n, i;
                            return (
                              (n = s),
                              (i = s),
                              null !== (e = E()) && null !== (t = p())
                                ? (e = [e, t])
                                : ((e = null), (s = i)),
                              null !== e && (e = '"'),
                              null === e && (s = n),
                              e
                            );
                          }
                          function W() {
                            var e, t, n, i;
                            return (
                              (n = s),
                              (i = s),
                              null !== (e = p()) && null !== (t = E())
                                ? (e = [e, t])
                                : ((e = null), (s = i)),
                              null !== e && (e = '"'),
                              null === e && (s = n),
                              e
                            );
                          }
                          function G() {
                            var e;
                            return (
                              /^[!-']/.test(n.charAt(s))
                                ? ((e = n.charAt(s)), s++)
                                : ((e = null), 0 === o && u("[!-']")),
                              null === e &&
                                (/^[*-[]/.test(n.charAt(s))
                                  ? ((e = n.charAt(s)), s++)
                                  : ((e = null), 0 === o && u("[*-[]")),
                                null === e &&
                                  (/^[\]-~]/.test(n.charAt(s))
                                    ? ((e = n.charAt(s)), s++)
                                    : ((e = null), 0 === o && u("[\\]-~]")),
                                  null === e &&
                                    null === (e = k()) &&
                                    (e = w()))),
                              e
                            );
                          }
                          function z() {
                            var e, t, i, r, o, l;
                            if (((o = s), (l = s), null !== (e = E())))
                              if (null !== (t = p())) {
                                for (
                                  i = [], null === (r = K()) && (r = J());
                                  null !== r;

                                )
                                  i.push(r), null === (r = K()) && (r = J());
                                null !== i && null !== (r = p())
                                  ? (e = [e, t, i, r])
                                  : ((e = null), (s = l));
                              } else (e = null), (s = l);
                            else (e = null), (s = l);
                            return (
                              null !== e &&
                                (e = (function (e) {
                                  return n.substring(s, e);
                                })(o)),
                              null === e && (s = o),
                              e
                            );
                          }
                          function Y() {
                            var e, t, i, r, o, l;
                            if (((o = s), (l = s), null !== (e = E())))
                              if (null !== (t = p())) {
                                for (
                                  i = [], null === (r = K()) && (r = J());
                                  null !== r;

                                )
                                  i.push(r), null === (r = K()) && (r = J());
                                null !== i && null !== (r = p())
                                  ? (e = [e, t, i, r])
                                  : ((e = null), (s = l));
                              } else (e = null), (s = l);
                            else (e = null), (s = l);
                            return (
                              null !== e &&
                                (e = (function (e) {
                                  var t = n.substring(s, e).trim();
                                  return t
                                    .substring(1, t.length - 1)
                                    .replace(
                                      /\\([\x00-\x09\x0b-\x0c\x0e-\x7f])/g,
                                      "$1"
                                    );
                                })(o)),
                              null === e && (s = o),
                              e
                            );
                          }
                          function K() {
                            var e;
                            return (
                              null === (e = w()) &&
                                (33 === n.charCodeAt(s)
                                  ? ((e = "!"), s++)
                                  : ((e = null), 0 === o && u('"!"')),
                                null === e &&
                                  (/^[#-[]/.test(n.charAt(s))
                                    ? ((e = n.charAt(s)), s++)
                                    : ((e = null), 0 === o && u("[#-[]")),
                                  null === e &&
                                    (/^[\]-~]/.test(n.charAt(s))
                                      ? ((e = n.charAt(s)), s++)
                                      : ((e = null), 0 === o && u("[\\]-~]")),
                                    null === e && (e = k())))),
                              e
                            );
                          }
                          function J() {
                            var e, t, i;
                            return (
                              (i = s),
                              92 === n.charCodeAt(s)
                                ? ((e = "\\"), s++)
                                : ((e = null), 0 === o && u('"\\\\"')),
                              null !== e
                                ? (/^[\0-\t]/.test(n.charAt(s))
                                    ? ((t = n.charAt(s)), s++)
                                    : ((t = null), 0 === o && u("[\\0-\\t]")),
                                  null === t &&
                                    (/^[\x0B-\f]/.test(n.charAt(s))
                                      ? ((t = n.charAt(s)), s++)
                                      : ((t = null),
                                        0 === o && u("[\\x0B-\\f]")),
                                    null === t &&
                                      (/^[\x0E-]/.test(n.charAt(s))
                                        ? ((t = n.charAt(s)), s++)
                                        : ((t = null),
                                          0 === o && u("[\\x0E-]")))),
                                  null !== t
                                    ? (e = [e, t])
                                    : ((e = null), (s = i)))
                                : ((e = null), (s = i)),
                              e
                            );
                          }
                          function X() {
                            var e, t, i, r, l, a;
                            return (
                              (l = s),
                              (a = s),
                              null !== (e = Z())
                                ? (58 === n.charCodeAt(s)
                                    ? ((t = ":"), s++)
                                    : ((t = null), 0 === o && u('":"')),
                                  null !== t &&
                                  null !== (i = null !== (i = ne()) ? i : "") &&
                                  null !== (r = oe())
                                    ? (e = [e, t, i, r])
                                    : ((e = null), (s = a)))
                                : ((e = null), (s = a)),
                              null !== e &&
                                (e = (function (e) {
                                  try {
                                    (Fn.uri = new qn(
                                      Fn.scheme,
                                      Fn.user,
                                      Fn.host,
                                      Fn.port
                                    )),
                                      delete Fn.scheme,
                                      delete Fn.user,
                                      delete Fn.host,
                                      delete Fn.host_type,
                                      delete Fn.port;
                                  } catch (e) {
                                    Fn = -1;
                                  }
                                })()),
                              null === e && (s = l),
                              e
                            );
                          }
                          function Q() {
                            var e, t, r, l, a, c, d, h;
                            return (
                              (d = s),
                              (h = s),
                              null !== (e = Z())
                                ? (58 === n.charCodeAt(s)
                                    ? ((t = ":"), s++)
                                    : ((t = null), 0 === o && u('":"')),
                                  null !== t &&
                                  null !== (r = null !== (r = ne()) ? r : "") &&
                                  null !== (l = oe()) &&
                                  null !== (a = me()) &&
                                  null !== (c = null !== (c = xe()) ? c : "")
                                    ? (e = [e, t, r, l, a, c])
                                    : ((e = null), (s = h)))
                                : ((e = null), (s = h)),
                              null !== e &&
                                (e = (function (e) {
                                  try {
                                    (Fn.uri = new qn(
                                      Fn.scheme,
                                      Fn.user,
                                      Fn.host,
                                      Fn.port,
                                      Fn.uri_params,
                                      Fn.uri_headers
                                    )),
                                      delete Fn.scheme,
                                      delete Fn.user,
                                      delete Fn.host,
                                      delete Fn.host_type,
                                      delete Fn.port,
                                      delete Fn.uri_params,
                                      "SIP_URI" === i && (Fn = Fn.uri);
                                  } catch (e) {
                                    Fn = -1;
                                  }
                                })()),
                              null === e && (s = d),
                              e
                            );
                          }
                          function Z() {
                            var e;
                            return null === (e = ee()) && (e = te()), e;
                          }
                          function ee() {
                            var e, t, i;
                            return (
                              (t = s),
                              "sips" === n.substr(s, 4).toLowerCase()
                                ? ((e = n.substr(s, 4)), (s += 4))
                                : ((e = null), 0 === o && u('"sips"')),
                              null !== e &&
                                ((i = e),
                                (e = void (Fn.scheme = i.toLowerCase()))),
                              null === e && (s = t),
                              e
                            );
                          }
                          function te() {
                            var e, t, i;
                            return (
                              (t = s),
                              "sip" === n.substr(s, 3).toLowerCase()
                                ? ((e = n.substr(s, 3)), (s += 3))
                                : ((e = null), 0 === o && u('"sip"')),
                              null !== e &&
                                ((i = e),
                                (e = void (Fn.scheme = i.toLowerCase()))),
                              null === e && (s = t),
                              e
                            );
                          }
                          function ne() {
                            var e, t, i, r, l, a;
                            return (
                              (r = s),
                              (l = s),
                              null !== (e = ie())
                                ? ((a = s),
                                  58 === n.charCodeAt(s)
                                    ? ((t = ":"), s++)
                                    : ((t = null), 0 === o && u('":"')),
                                  null !== t && null !== (i = se())
                                    ? (t = [t, i])
                                    : ((t = null), (s = a)),
                                  null !== (t = null !== t ? t : "")
                                    ? (64 === n.charCodeAt(s)
                                        ? ((i = "@"), s++)
                                        : ((i = null), 0 === o && u('"@"')),
                                      null !== i
                                        ? (e = [e, t, i])
                                        : ((e = null), (s = l)))
                                    : ((e = null), (s = l)))
                                : ((e = null), (s = l)),
                              null !== e &&
                                (e = (function (e) {
                                  Fn.user = decodeURIComponent(
                                    n.substring(s - 1, e)
                                  );
                                })(r)),
                              null === e && (s = r),
                              e
                            );
                          }
                          function ie() {
                            var e, t;
                            if (
                              (null === (t = b()) &&
                                null === (t = T()) &&
                                (t = re()),
                              null !== t)
                            )
                              for (e = []; null !== t; )
                                e.push(t),
                                  null === (t = b()) &&
                                    null === (t = T()) &&
                                    (t = re());
                            else e = null;
                            return e;
                          }
                          function re() {
                            var e;
                            return (
                              38 === n.charCodeAt(s)
                                ? ((e = "&"), s++)
                                : ((e = null), 0 === o && u('"&"')),
                              null === e &&
                                (61 === n.charCodeAt(s)
                                  ? ((e = "="), s++)
                                  : ((e = null), 0 === o && u('"="')),
                                null === e &&
                                  (43 === n.charCodeAt(s)
                                    ? ((e = "+"), s++)
                                    : ((e = null), 0 === o && u('"+"')),
                                  null === e &&
                                    (36 === n.charCodeAt(s)
                                      ? ((e = "$"), s++)
                                      : ((e = null), 0 === o && u('"$"')),
                                    null === e &&
                                      (44 === n.charCodeAt(s)
                                        ? ((e = ","), s++)
                                        : ((e = null), 0 === o && u('","')),
                                      null === e &&
                                        (59 === n.charCodeAt(s)
                                          ? ((e = ";"), s++)
                                          : ((e = null), 0 === o && u('";"')),
                                        null === e &&
                                          (63 === n.charCodeAt(s)
                                            ? ((e = "?"), s++)
                                            : ((e = null), 0 === o && u('"?"')),
                                          null === e &&
                                            (47 === n.charCodeAt(s)
                                              ? ((e = "/"), s++)
                                              : ((e = null),
                                                0 === o && u('"/"'))))))))),
                              e
                            );
                          }
                          function se() {
                            var e, t, i;
                            for (
                              i = s,
                                e = [],
                                null === (t = b()) &&
                                  null === (t = T()) &&
                                  (38 === n.charCodeAt(s)
                                    ? ((t = "&"), s++)
                                    : ((t = null), 0 === o && u('"&"')),
                                  null === t &&
                                    (61 === n.charCodeAt(s)
                                      ? ((t = "="), s++)
                                      : ((t = null), 0 === o && u('"="')),
                                    null === t &&
                                      (43 === n.charCodeAt(s)
                                        ? ((t = "+"), s++)
                                        : ((t = null), 0 === o && u('"+"')),
                                      null === t &&
                                        (36 === n.charCodeAt(s)
                                          ? ((t = "$"), s++)
                                          : ((t = null), 0 === o && u('"$"')),
                                        null === t &&
                                          (44 === n.charCodeAt(s)
                                            ? ((t = ","), s++)
                                            : ((t = null),
                                              0 === o && u('","')))))));
                              null !== t;

                            )
                              e.push(t),
                                null === (t = b()) &&
                                  null === (t = T()) &&
                                  (38 === n.charCodeAt(s)
                                    ? ((t = "&"), s++)
                                    : ((t = null), 0 === o && u('"&"')),
                                  null === t &&
                                    (61 === n.charCodeAt(s)
                                      ? ((t = "="), s++)
                                      : ((t = null), 0 === o && u('"="')),
                                    null === t &&
                                      (43 === n.charCodeAt(s)
                                        ? ((t = "+"), s++)
                                        : ((t = null), 0 === o && u('"+"')),
                                      null === t &&
                                        (36 === n.charCodeAt(s)
                                          ? ((t = "$"), s++)
                                          : ((t = null), 0 === o && u('"$"')),
                                        null === t &&
                                          (44 === n.charCodeAt(s)
                                            ? ((t = ","), s++)
                                            : ((t = null),
                                              0 === o && u('","')))))));
                            return (
                              null !== e &&
                                (e = (function (e) {
                                  Fn.password = n.substring(s, e);
                                })(i)),
                              null === e && (s = i),
                              e
                            );
                          }
                          function oe() {
                            var e, t, i, r, l;
                            return (
                              (r = s),
                              null !== (e = le())
                                ? ((l = s),
                                  58 === n.charCodeAt(s)
                                    ? ((t = ":"), s++)
                                    : ((t = null), 0 === o && u('":"')),
                                  null !== t && null !== (i = ve())
                                    ? (t = [t, i])
                                    : ((t = null), (s = l)),
                                  null !== (t = null !== t ? t : "")
                                    ? (e = [e, t])
                                    : ((e = null), (s = r)))
                                : ((e = null), (s = r)),
                              e
                            );
                          }
                          function le() {
                            var e, t;
                            return (
                              (t = s),
                              null === (e = ae()) &&
                                null === (e = ge()) &&
                                (e = de()),
                              null !== e &&
                                (e = (function (e) {
                                  return (
                                    (Fn.host = n.substring(s, e).toLowerCase()),
                                    Fn.host
                                  );
                                })(t)),
                              null === e && (s = t),
                              e
                            );
                          }
                          function ae() {
                            var e, t, i, r, l, a;
                            for (
                              r = s,
                                l = s,
                                e = [],
                                a = s,
                                null !== (t = ue())
                                  ? (46 === n.charCodeAt(s)
                                      ? ((i = "."), s++)
                                      : ((i = null), 0 === o && u('"."')),
                                    null !== i
                                      ? (t = [t, i])
                                      : ((t = null), (s = a)))
                                  : ((t = null), (s = a));
                              null !== t;

                            )
                              e.push(t),
                                (a = s),
                                null !== (t = ue())
                                  ? (46 === n.charCodeAt(s)
                                      ? ((i = "."), s++)
                                      : ((i = null), 0 === o && u('"."')),
                                    null !== i
                                      ? (t = [t, i])
                                      : ((t = null), (s = a)))
                                  : ((t = null), (s = a));
                            return (
                              null !== e && null !== (t = ce())
                                ? (46 === n.charCodeAt(s)
                                    ? ((i = "."), s++)
                                    : ((i = null), 0 === o && u('"."')),
                                  null !== (i = null !== i ? i : "")
                                    ? (e = [e, t, i])
                                    : ((e = null), (s = l)))
                                : ((e = null), (s = l)),
                              null !== e &&
                                (e = (function (e) {
                                  return (
                                    (Fn.host_type = "domain"), n.substring(s, e)
                                  );
                                })(r)),
                              null === e && (s = r),
                              e
                            );
                          }
                          function ue() {
                            var e, t, i, r;
                            if (((r = s), null !== (e = y()))) {
                              for (
                                t = [],
                                  null === (i = y()) &&
                                    (45 === n.charCodeAt(s)
                                      ? ((i = "-"), s++)
                                      : ((i = null), 0 === o && u('"-"')),
                                    null === i &&
                                      (95 === n.charCodeAt(s)
                                        ? ((i = "_"), s++)
                                        : ((i = null), 0 === o && u('"_"'))));
                                null !== i;

                              )
                                t.push(i),
                                  null === (i = y()) &&
                                    (45 === n.charCodeAt(s)
                                      ? ((i = "-"), s++)
                                      : ((i = null), 0 === o && u('"-"')),
                                    null === i &&
                                      (95 === n.charCodeAt(s)
                                        ? ((i = "_"), s++)
                                        : ((i = null), 0 === o && u('"_"'))));
                              null !== t ? (e = [e, t]) : ((e = null), (s = r));
                            } else (e = null), (s = r);
                            return e;
                          }
                          function ce() {
                            var e, t, i, r;
                            if (((r = s), null !== (e = h()))) {
                              for (
                                t = [],
                                  null === (i = y()) &&
                                    (45 === n.charCodeAt(s)
                                      ? ((i = "-"), s++)
                                      : ((i = null), 0 === o && u('"-"')),
                                    null === i &&
                                      (95 === n.charCodeAt(s)
                                        ? ((i = "_"), s++)
                                        : ((i = null), 0 === o && u('"_"'))));
                                null !== i;

                              )
                                t.push(i),
                                  null === (i = y()) &&
                                    (45 === n.charCodeAt(s)
                                      ? ((i = "-"), s++)
                                      : ((i = null), 0 === o && u('"-"')),
                                    null === i &&
                                      (95 === n.charCodeAt(s)
                                        ? ((i = "_"), s++)
                                        : ((i = null), 0 === o && u('"_"'))));
                              null !== t ? (e = [e, t]) : ((e = null), (s = r));
                            } else (e = null), (s = r);
                            return e;
                          }
                          function de() {
                            var e, t, i, r, l;
                            return (
                              (r = s),
                              (l = s),
                              91 === n.charCodeAt(s)
                                ? ((e = "["), s++)
                                : ((e = null), 0 === o && u('"["')),
                              null !== e && null !== (t = he())
                                ? (93 === n.charCodeAt(s)
                                    ? ((i = "]"), s++)
                                    : ((i = null), 0 === o && u('"]"')),
                                  null !== i
                                    ? (e = [e, t, i])
                                    : ((e = null), (s = l)))
                                : ((e = null), (s = l)),
                              null !== e &&
                                (e = (function (e) {
                                  return (
                                    (Fn.host_type = "IPv6"), n.substring(s, e)
                                  );
                                })(r)),
                              null === e && (s = r),
                              e
                            );
                          }
                          function he() {
                            var e, t, i, r, l, a, c, d, h, _, f, g, p, v, m, y;
                            return (
                              (v = s),
                              (m = s),
                              null !== (e = _e())
                                ? (58 === n.charCodeAt(s)
                                    ? ((t = ":"), s++)
                                    : ((t = null), 0 === o && u('":"')),
                                  null !== t && null !== (i = _e())
                                    ? (58 === n.charCodeAt(s)
                                        ? ((r = ":"), s++)
                                        : ((r = null), 0 === o && u('":"')),
                                      null !== r && null !== (l = _e())
                                        ? (58 === n.charCodeAt(s)
                                            ? ((a = ":"), s++)
                                            : ((a = null), 0 === o && u('":"')),
                                          null !== a && null !== (c = _e())
                                            ? (58 === n.charCodeAt(s)
                                                ? ((d = ":"), s++)
                                                : ((d = null),
                                                  0 === o && u('":"')),
                                              null !== d && null !== (h = _e())
                                                ? (58 === n.charCodeAt(s)
                                                    ? ((_ = ":"), s++)
                                                    : ((_ = null),
                                                      0 === o && u('":"')),
                                                  null !== _ &&
                                                  null !== (f = _e())
                                                    ? (58 === n.charCodeAt(s)
                                                        ? ((g = ":"), s++)
                                                        : ((g = null),
                                                          0 === o && u('":"')),
                                                      null !== g &&
                                                      null !== (p = fe())
                                                        ? (e = [
                                                            e,
                                                            t,
                                                            i,
                                                            r,
                                                            l,
                                                            a,
                                                            c,
                                                            d,
                                                            h,
                                                            _,
                                                            f,
                                                            g,
                                                            p,
                                                          ])
                                                        : ((e = null), (s = m)))
                                                    : ((e = null), (s = m)))
                                                : ((e = null), (s = m)))
                                            : ((e = null), (s = m)))
                                        : ((e = null), (s = m)))
                                    : ((e = null), (s = m)))
                                : ((e = null), (s = m)),
                              null === e &&
                                ((m = s),
                                "::" === n.substr(s, 2)
                                  ? ((e = "::"), (s += 2))
                                  : ((e = null), 0 === o && u('"::"')),
                                null !== e && null !== (t = _e())
                                  ? (58 === n.charCodeAt(s)
                                      ? ((i = ":"), s++)
                                      : ((i = null), 0 === o && u('":"')),
                                    null !== i && null !== (r = _e())
                                      ? (58 === n.charCodeAt(s)
                                          ? ((l = ":"), s++)
                                          : ((l = null), 0 === o && u('":"')),
                                        null !== l && null !== (a = _e())
                                          ? (58 === n.charCodeAt(s)
                                              ? ((c = ":"), s++)
                                              : ((c = null),
                                                0 === o && u('":"')),
                                            null !== c && null !== (d = _e())
                                              ? (58 === n.charCodeAt(s)
                                                  ? ((h = ":"), s++)
                                                  : ((h = null),
                                                    0 === o && u('":"')),
                                                null !== h &&
                                                null !== (_ = _e())
                                                  ? (58 === n.charCodeAt(s)
                                                      ? ((f = ":"), s++)
                                                      : ((f = null),
                                                        0 === o && u('":"')),
                                                    null !== f &&
                                                    null !== (g = fe())
                                                      ? (e = [
                                                          e,
                                                          t,
                                                          i,
                                                          r,
                                                          l,
                                                          a,
                                                          c,
                                                          d,
                                                          h,
                                                          _,
                                                          f,
                                                          g,
                                                        ])
                                                      : ((e = null), (s = m)))
                                                  : ((e = null), (s = m)))
                                              : ((e = null), (s = m)))
                                          : ((e = null), (s = m)))
                                      : ((e = null), (s = m)))
                                  : ((e = null), (s = m)),
                                null === e &&
                                  ((m = s),
                                  "::" === n.substr(s, 2)
                                    ? ((e = "::"), (s += 2))
                                    : ((e = null), 0 === o && u('"::"')),
                                  null !== e && null !== (t = _e())
                                    ? (58 === n.charCodeAt(s)
                                        ? ((i = ":"), s++)
                                        : ((i = null), 0 === o && u('":"')),
                                      null !== i && null !== (r = _e())
                                        ? (58 === n.charCodeAt(s)
                                            ? ((l = ":"), s++)
                                            : ((l = null), 0 === o && u('":"')),
                                          null !== l && null !== (a = _e())
                                            ? (58 === n.charCodeAt(s)
                                                ? ((c = ":"), s++)
                                                : ((c = null),
                                                  0 === o && u('":"')),
                                              null !== c && null !== (d = _e())
                                                ? (58 === n.charCodeAt(s)
                                                    ? ((h = ":"), s++)
                                                    : ((h = null),
                                                      0 === o && u('":"')),
                                                  null !== h &&
                                                  null !== (_ = fe())
                                                    ? (e = [
                                                        e,
                                                        t,
                                                        i,
                                                        r,
                                                        l,
                                                        a,
                                                        c,
                                                        d,
                                                        h,
                                                        _,
                                                      ])
                                                    : ((e = null), (s = m)))
                                                : ((e = null), (s = m)))
                                            : ((e = null), (s = m)))
                                        : ((e = null), (s = m)))
                                    : ((e = null), (s = m)),
                                  null === e &&
                                    ((m = s),
                                    "::" === n.substr(s, 2)
                                      ? ((e = "::"), (s += 2))
                                      : ((e = null), 0 === o && u('"::"')),
                                    null !== e && null !== (t = _e())
                                      ? (58 === n.charCodeAt(s)
                                          ? ((i = ":"), s++)
                                          : ((i = null), 0 === o && u('":"')),
                                        null !== i && null !== (r = _e())
                                          ? (58 === n.charCodeAt(s)
                                              ? ((l = ":"), s++)
                                              : ((l = null),
                                                0 === o && u('":"')),
                                            null !== l && null !== (a = _e())
                                              ? (58 === n.charCodeAt(s)
                                                  ? ((c = ":"), s++)
                                                  : ((c = null),
                                                    0 === o && u('":"')),
                                                null !== c &&
                                                null !== (d = fe())
                                                  ? (e = [
                                                      e,
                                                      t,
                                                      i,
                                                      r,
                                                      l,
                                                      a,
                                                      c,
                                                      d,
                                                    ])
                                                  : ((e = null), (s = m)))
                                              : ((e = null), (s = m)))
                                          : ((e = null), (s = m)))
                                      : ((e = null), (s = m)),
                                    null === e &&
                                      ((m = s),
                                      "::" === n.substr(s, 2)
                                        ? ((e = "::"), (s += 2))
                                        : ((e = null), 0 === o && u('"::"')),
                                      null !== e && null !== (t = _e())
                                        ? (58 === n.charCodeAt(s)
                                            ? ((i = ":"), s++)
                                            : ((i = null), 0 === o && u('":"')),
                                          null !== i && null !== (r = _e())
                                            ? (58 === n.charCodeAt(s)
                                                ? ((l = ":"), s++)
                                                : ((l = null),
                                                  0 === o && u('":"')),
                                              null !== l && null !== (a = fe())
                                                ? (e = [e, t, i, r, l, a])
                                                : ((e = null), (s = m)))
                                            : ((e = null), (s = m)))
                                        : ((e = null), (s = m)),
                                      null === e &&
                                        ((m = s),
                                        "::" === n.substr(s, 2)
                                          ? ((e = "::"), (s += 2))
                                          : ((e = null), 0 === o && u('"::"')),
                                        null !== e && null !== (t = _e())
                                          ? (58 === n.charCodeAt(s)
                                              ? ((i = ":"), s++)
                                              : ((i = null),
                                                0 === o && u('":"')),
                                            null !== i && null !== (r = fe())
                                              ? (e = [e, t, i, r])
                                              : ((e = null), (s = m)))
                                          : ((e = null), (s = m)),
                                        null === e &&
                                          ((m = s),
                                          "::" === n.substr(s, 2)
                                            ? ((e = "::"), (s += 2))
                                            : ((e = null),
                                              0 === o && u('"::"')),
                                          null !== e && null !== (t = fe())
                                            ? (e = [e, t])
                                            : ((e = null), (s = m)),
                                          null === e &&
                                            ((m = s),
                                            "::" === n.substr(s, 2)
                                              ? ((e = "::"), (s += 2))
                                              : ((e = null),
                                                0 === o && u('"::"')),
                                            null !== e && null !== (t = _e())
                                              ? (e = [e, t])
                                              : ((e = null), (s = m)),
                                            null === e &&
                                              ((m = s),
                                              null !== (e = _e())
                                                ? ("::" === n.substr(s, 2)
                                                    ? ((t = "::"), (s += 2))
                                                    : ((t = null),
                                                      0 === o && u('"::"')),
                                                  null !== t &&
                                                  null !== (i = _e())
                                                    ? (58 === n.charCodeAt(s)
                                                        ? ((r = ":"), s++)
                                                        : ((r = null),
                                                          0 === o && u('":"')),
                                                      null !== r &&
                                                      null !== (l = _e())
                                                        ? (58 ===
                                                          n.charCodeAt(s)
                                                            ? ((a = ":"), s++)
                                                            : ((a = null),
                                                              0 === o &&
                                                                u('":"')),
                                                          null !== a &&
                                                          null !== (c = _e())
                                                            ? (58 ===
                                                              n.charCodeAt(s)
                                                                ? ((d = ":"),
                                                                  s++)
                                                                : ((d = null),
                                                                  0 === o &&
                                                                    u('":"')),
                                                              null !== d &&
                                                              null !==
                                                                (h = _e())
                                                                ? (58 ===
                                                                  n.charCodeAt(
                                                                    s
                                                                  )
                                                                    ? ((_ =
                                                                        ":"),
                                                                      s++)
                                                                    : ((_ =
                                                                        null),
                                                                      0 === o &&
                                                                        u(
                                                                          '":"'
                                                                        )),
                                                                  null !== _ &&
                                                                  null !==
                                                                    (f = fe())
                                                                    ? (e = [
                                                                        e,
                                                                        t,
                                                                        i,
                                                                        r,
                                                                        l,
                                                                        a,
                                                                        c,
                                                                        d,
                                                                        h,
                                                                        _,
                                                                        f,
                                                                      ])
                                                                    : ((e =
                                                                        null),
                                                                      (s = m)))
                                                                : ((e = null),
                                                                  (s = m)))
                                                            : ((e = null),
                                                              (s = m)))
                                                        : ((e = null), (s = m)))
                                                    : ((e = null), (s = m)))
                                                : ((e = null), (s = m)),
                                              null === e &&
                                                ((m = s),
                                                null !== (e = _e())
                                                  ? ((y = s),
                                                    58 === n.charCodeAt(s)
                                                      ? ((t = ":"), s++)
                                                      : ((t = null),
                                                        0 === o && u('":"')),
                                                    null !== t &&
                                                    null !== (i = _e())
                                                      ? (t = [t, i])
                                                      : ((t = null), (s = y)),
                                                    null !==
                                                    (t = null !== t ? t : "")
                                                      ? ("::" === n.substr(s, 2)
                                                          ? ((i = "::"),
                                                            (s += 2))
                                                          : ((i = null),
                                                            0 === o &&
                                                              u('"::"')),
                                                        null !== i &&
                                                        null !== (r = _e())
                                                          ? (58 ===
                                                            n.charCodeAt(s)
                                                              ? ((l = ":"), s++)
                                                              : ((l = null),
                                                                0 === o &&
                                                                  u('":"')),
                                                            null !== l &&
                                                            null !== (a = _e())
                                                              ? (58 ===
                                                                n.charCodeAt(s)
                                                                  ? ((c = ":"),
                                                                    s++)
                                                                  : ((c = null),
                                                                    0 === o &&
                                                                      u('":"')),
                                                                null !== c &&
                                                                null !==
                                                                  (d = _e())
                                                                  ? (58 ===
                                                                    n.charCodeAt(
                                                                      s
                                                                    )
                                                                      ? ((h =
                                                                          ":"),
                                                                        s++)
                                                                      : ((h =
                                                                          null),
                                                                        0 ===
                                                                          o &&
                                                                          u(
                                                                            '":"'
                                                                          )),
                                                                    null !==
                                                                      h &&
                                                                    null !==
                                                                      (_ = fe())
                                                                      ? (e = [
                                                                          e,
                                                                          t,
                                                                          i,
                                                                          r,
                                                                          l,
                                                                          a,
                                                                          c,
                                                                          d,
                                                                          h,
                                                                          _,
                                                                        ])
                                                                      : ((e =
                                                                          null),
                                                                        (s =
                                                                          m)))
                                                                  : ((e = null),
                                                                    (s = m)))
                                                              : ((e = null),
                                                                (s = m)))
                                                          : ((e = null),
                                                            (s = m)))
                                                      : ((e = null), (s = m)))
                                                  : ((e = null), (s = m)),
                                                null === e &&
                                                  ((m = s),
                                                  null !== (e = _e())
                                                    ? ((y = s),
                                                      58 === n.charCodeAt(s)
                                                        ? ((t = ":"), s++)
                                                        : ((t = null),
                                                          0 === o && u('":"')),
                                                      null !== t &&
                                                      null !== (i = _e())
                                                        ? (t = [t, i])
                                                        : ((t = null), (s = y)),
                                                      null !==
                                                      (t = null !== t ? t : "")
                                                        ? ((y = s),
                                                          58 === n.charCodeAt(s)
                                                            ? ((i = ":"), s++)
                                                            : ((i = null),
                                                              0 === o &&
                                                                u('":"')),
                                                          null !== i &&
                                                          null !== (r = _e())
                                                            ? (i = [i, r])
                                                            : ((i = null),
                                                              (s = y)),
                                                          null !==
                                                          (i =
                                                            null !== i ? i : "")
                                                            ? ("::" ===
                                                              n.substr(s, 2)
                                                                ? ((r = "::"),
                                                                  (s += 2))
                                                                : ((r = null),
                                                                  0 === o &&
                                                                    u('"::"')),
                                                              null !== r &&
                                                              null !==
                                                                (l = _e())
                                                                ? (58 ===
                                                                  n.charCodeAt(
                                                                    s
                                                                  )
                                                                    ? ((a =
                                                                        ":"),
                                                                      s++)
                                                                    : ((a =
                                                                        null),
                                                                      0 === o &&
                                                                        u(
                                                                          '":"'
                                                                        )),
                                                                  null !== a &&
                                                                  null !==
                                                                    (c = _e())
                                                                    ? (58 ===
                                                                      n.charCodeAt(
                                                                        s
                                                                      )
                                                                        ? ((d =
                                                                            ":"),
                                                                          s++)
                                                                        : ((d =
                                                                            null),
                                                                          0 ===
                                                                            o &&
                                                                            u(
                                                                              '":"'
                                                                            )),
                                                                      null !==
                                                                        d &&
                                                                      null !==
                                                                        (h =
                                                                          fe())
                                                                        ? (e = [
                                                                            e,
                                                                            t,
                                                                            i,
                                                                            r,
                                                                            l,
                                                                            a,
                                                                            c,
                                                                            d,
                                                                            h,
                                                                          ])
                                                                        : ((e =
                                                                            null),
                                                                          (s =
                                                                            m)))
                                                                    : ((e =
                                                                        null),
                                                                      (s = m)))
                                                                : ((e = null),
                                                                  (s = m)))
                                                            : ((e = null),
                                                              (s = m)))
                                                        : ((e = null), (s = m)))
                                                    : ((e = null), (s = m)),
                                                  null === e &&
                                                    ((m = s),
                                                    null !== (e = _e())
                                                      ? ((y = s),
                                                        58 === n.charCodeAt(s)
                                                          ? ((t = ":"), s++)
                                                          : ((t = null),
                                                            0 === o &&
                                                              u('":"')),
                                                        null !== t &&
                                                        null !== (i = _e())
                                                          ? (t = [t, i])
                                                          : ((t = null),
                                                            (s = y)),
                                                        null !==
                                                        (t =
                                                          null !== t ? t : "")
                                                          ? ((y = s),
                                                            58 ===
                                                            n.charCodeAt(s)
                                                              ? ((i = ":"), s++)
                                                              : ((i = null),
                                                                0 === o &&
                                                                  u('":"')),
                                                            null !== i &&
                                                            null !== (r = _e())
                                                              ? (i = [i, r])
                                                              : ((i = null),
                                                                (s = y)),
                                                            null !==
                                                            (i =
                                                              null !== i
                                                                ? i
                                                                : "")
                                                              ? ((y = s),
                                                                58 ===
                                                                n.charCodeAt(s)
                                                                  ? ((r = ":"),
                                                                    s++)
                                                                  : ((r = null),
                                                                    0 === o &&
                                                                      u('":"')),
                                                                null !== r &&
                                                                null !==
                                                                  (l = _e())
                                                                  ? (r = [r, l])
                                                                  : ((r = null),
                                                                    (s = y)),
                                                                null !==
                                                                (r =
                                                                  null !== r
                                                                    ? r
                                                                    : "")
                                                                  ? ("::" ===
                                                                    n.substr(
                                                                      s,
                                                                      2
                                                                    )
                                                                      ? ((l =
                                                                          "::"),
                                                                        (s += 2))
                                                                      : ((l =
                                                                          null),
                                                                        0 ===
                                                                          o &&
                                                                          u(
                                                                            '"::"'
                                                                          )),
                                                                    null !==
                                                                      l &&
                                                                    null !==
                                                                      (a = _e())
                                                                      ? (58 ===
                                                                        n.charCodeAt(
                                                                          s
                                                                        )
                                                                          ? ((c =
                                                                              ":"),
                                                                            s++)
                                                                          : ((c =
                                                                              null),
                                                                            0 ===
                                                                              o &&
                                                                              u(
                                                                                '":"'
                                                                              )),
                                                                        null !==
                                                                          c &&
                                                                        null !==
                                                                          (d =
                                                                            fe())
                                                                          ? (e =
                                                                              [
                                                                                e,
                                                                                t,
                                                                                i,
                                                                                r,
                                                                                l,
                                                                                a,
                                                                                c,
                                                                                d,
                                                                              ])
                                                                          : ((e =
                                                                              null),
                                                                            (s =
                                                                              m)))
                                                                      : ((e =
                                                                          null),
                                                                        (s =
                                                                          m)))
                                                                  : ((e = null),
                                                                    (s = m)))
                                                              : ((e = null),
                                                                (s = m)))
                                                          : ((e = null),
                                                            (s = m)))
                                                      : ((e = null), (s = m)),
                                                    null === e &&
                                                      ((m = s),
                                                      null !== (e = _e())
                                                        ? ((y = s),
                                                          58 === n.charCodeAt(s)
                                                            ? ((t = ":"), s++)
                                                            : ((t = null),
                                                              0 === o &&
                                                                u('":"')),
                                                          null !== t &&
                                                          null !== (i = _e())
                                                            ? (t = [t, i])
                                                            : ((t = null),
                                                              (s = y)),
                                                          null !==
                                                          (t =
                                                            null !== t ? t : "")
                                                            ? ((y = s),
                                                              58 ===
                                                              n.charCodeAt(s)
                                                                ? ((i = ":"),
                                                                  s++)
                                                                : ((i = null),
                                                                  0 === o &&
                                                                    u('":"')),
                                                              null !== i &&
                                                              null !==
                                                                (r = _e())
                                                                ? (i = [i, r])
                                                                : ((i = null),
                                                                  (s = y)),
                                                              null !==
                                                              (i =
                                                                null !== i
                                                                  ? i
                                                                  : "")
                                                                ? ((y = s),
                                                                  58 ===
                                                                  n.charCodeAt(
                                                                    s
                                                                  )
                                                                    ? ((r =
                                                                        ":"),
                                                                      s++)
                                                                    : ((r =
                                                                        null),
                                                                      0 === o &&
                                                                        u(
                                                                          '":"'
                                                                        )),
                                                                  null !== r &&
                                                                  null !==
                                                                    (l = _e())
                                                                    ? (r = [
                                                                        r,
                                                                        l,
                                                                      ])
                                                                    : ((r =
                                                                        null),
                                                                      (s = y)),
                                                                  null !==
                                                                  (r =
                                                                    null !== r
                                                                      ? r
                                                                      : "")
                                                                    ? ((y = s),
                                                                      58 ===
                                                                      n.charCodeAt(
                                                                        s
                                                                      )
                                                                        ? ((l =
                                                                            ":"),
                                                                          s++)
                                                                        : ((l =
                                                                            null),
                                                                          0 ===
                                                                            o &&
                                                                            u(
                                                                              '":"'
                                                                            )),
                                                                      null !==
                                                                        l &&
                                                                      null !==
                                                                        (a =
                                                                          _e())
                                                                        ? (l = [
                                                                            l,
                                                                            a,
                                                                          ])
                                                                        : ((l =
                                                                            null),
                                                                          (s =
                                                                            y)),
                                                                      null !==
                                                                      (l =
                                                                        null !==
                                                                        l
                                                                          ? l
                                                                          : "")
                                                                        ? ("::" ===
                                                                          n.substr(
                                                                            s,
                                                                            2
                                                                          )
                                                                            ? ((a =
                                                                                "::"),
                                                                              (s += 2))
                                                                            : ((a =
                                                                                null),
                                                                              0 ===
                                                                                o &&
                                                                                u(
                                                                                  '"::"'
                                                                                )),
                                                                          null !==
                                                                            a &&
                                                                          null !==
                                                                            (c =
                                                                              fe())
                                                                            ? (e =
                                                                                [
                                                                                  e,
                                                                                  t,
                                                                                  i,
                                                                                  r,
                                                                                  l,
                                                                                  a,
                                                                                  c,
                                                                                ])
                                                                            : ((e =
                                                                                null),
                                                                              (s =
                                                                                m)))
                                                                        : ((e =
                                                                            null),
                                                                          (s =
                                                                            m)))
                                                                    : ((e =
                                                                        null),
                                                                      (s = m)))
                                                                : ((e = null),
                                                                  (s = m)))
                                                            : ((e = null),
                                                              (s = m)))
                                                        : ((e = null), (s = m)),
                                                      null === e &&
                                                        ((m = s),
                                                        null !== (e = _e())
                                                          ? ((y = s),
                                                            58 ===
                                                            n.charCodeAt(s)
                                                              ? ((t = ":"), s++)
                                                              : ((t = null),
                                                                0 === o &&
                                                                  u('":"')),
                                                            null !== t &&
                                                            null !== (i = _e())
                                                              ? (t = [t, i])
                                                              : ((t = null),
                                                                (s = y)),
                                                            null !==
                                                            (t =
                                                              null !== t
                                                                ? t
                                                                : "")
                                                              ? ((y = s),
                                                                58 ===
                                                                n.charCodeAt(s)
                                                                  ? ((i = ":"),
                                                                    s++)
                                                                  : ((i = null),
                                                                    0 === o &&
                                                                      u('":"')),
                                                                null !== i &&
                                                                null !==
                                                                  (r = _e())
                                                                  ? (i = [i, r])
                                                                  : ((i = null),
                                                                    (s = y)),
                                                                null !==
                                                                (i =
                                                                  null !== i
                                                                    ? i
                                                                    : "")
                                                                  ? ((y = s),
                                                                    58 ===
                                                                    n.charCodeAt(
                                                                      s
                                                                    )
                                                                      ? ((r =
                                                                          ":"),
                                                                        s++)
                                                                      : ((r =
                                                                          null),
                                                                        0 ===
                                                                          o &&
                                                                          u(
                                                                            '":"'
                                                                          )),
                                                                    null !==
                                                                      r &&
                                                                    null !==
                                                                      (l = _e())
                                                                      ? (r = [
                                                                          r,
                                                                          l,
                                                                        ])
                                                                      : ((r =
                                                                          null),
                                                                        (s =
                                                                          y)),
                                                                    null !==
                                                                    (r =
                                                                      null !== r
                                                                        ? r
                                                                        : "")
                                                                      ? ((y =
                                                                          s),
                                                                        58 ===
                                                                        n.charCodeAt(
                                                                          s
                                                                        )
                                                                          ? ((l =
                                                                              ":"),
                                                                            s++)
                                                                          : ((l =
                                                                              null),
                                                                            0 ===
                                                                              o &&
                                                                              u(
                                                                                '":"'
                                                                              )),
                                                                        null !==
                                                                          l &&
                                                                        null !==
                                                                          (a =
                                                                            _e())
                                                                          ? (l =
                                                                              [
                                                                                l,
                                                                                a,
                                                                              ])
                                                                          : ((l =
                                                                              null),
                                                                            (s =
                                                                              y)),
                                                                        null !==
                                                                        (l =
                                                                          null !==
                                                                          l
                                                                            ? l
                                                                            : "")
                                                                          ? ((y =
                                                                              s),
                                                                            58 ===
                                                                            n.charCodeAt(
                                                                              s
                                                                            )
                                                                              ? ((a =
                                                                                  ":"),
                                                                                s++)
                                                                              : ((a =
                                                                                  null),
                                                                                0 ===
                                                                                  o &&
                                                                                  u(
                                                                                    '":"'
                                                                                  )),
                                                                            null !==
                                                                              a &&
                                                                            null !==
                                                                              (c =
                                                                                _e())
                                                                              ? (a =
                                                                                  [
                                                                                    a,
                                                                                    c,
                                                                                  ])
                                                                              : ((a =
                                                                                  null),
                                                                                (s =
                                                                                  y)),
                                                                            null !==
                                                                            (a =
                                                                              null !==
                                                                              a
                                                                                ? a
                                                                                : "")
                                                                              ? ("::" ===
                                                                                n.substr(
                                                                                  s,
                                                                                  2
                                                                                )
                                                                                  ? ((c =
                                                                                      "::"),
                                                                                    (s += 2))
                                                                                  : ((c =
                                                                                      null),
                                                                                    0 ===
                                                                                      o &&
                                                                                      u(
                                                                                        '"::"'
                                                                                      )),
                                                                                null !==
                                                                                  c &&
                                                                                null !==
                                                                                  (d =
                                                                                    _e())
                                                                                  ? (e =
                                                                                      [
                                                                                        e,
                                                                                        t,
                                                                                        i,
                                                                                        r,
                                                                                        l,
                                                                                        a,
                                                                                        c,
                                                                                        d,
                                                                                      ])
                                                                                  : ((e =
                                                                                      null),
                                                                                    (s =
                                                                                      m)))
                                                                              : ((e =
                                                                                  null),
                                                                                (s =
                                                                                  m)))
                                                                          : ((e =
                                                                              null),
                                                                            (s =
                                                                              m)))
                                                                      : ((e =
                                                                          null),
                                                                        (s =
                                                                          m)))
                                                                  : ((e = null),
                                                                    (s = m)))
                                                              : ((e = null),
                                                                (s = m)))
                                                          : ((e = null),
                                                            (s = m)),
                                                        null === e &&
                                                          ((m = s),
                                                          null !== (e = _e())
                                                            ? ((y = s),
                                                              58 ===
                                                              n.charCodeAt(s)
                                                                ? ((t = ":"),
                                                                  s++)
                                                                : ((t = null),
                                                                  0 === o &&
                                                                    u('":"')),
                                                              null !== t &&
                                                              null !==
                                                                (i = _e())
                                                                ? (t = [t, i])
                                                                : ((t = null),
                                                                  (s = y)),
                                                              null !==
                                                              (t =
                                                                null !== t
                                                                  ? t
                                                                  : "")
                                                                ? ((y = s),
                                                                  58 ===
                                                                  n.charCodeAt(
                                                                    s
                                                                  )
                                                                    ? ((i =
                                                                        ":"),
                                                                      s++)
                                                                    : ((i =
                                                                        null),
                                                                      0 === o &&
                                                                        u(
                                                                          '":"'
                                                                        )),
                                                                  null !== i &&
                                                                  null !==
                                                                    (r = _e())
                                                                    ? (i = [
                                                                        i,
                                                                        r,
                                                                      ])
                                                                    : ((i =
                                                                        null),
                                                                      (s = y)),
                                                                  null !==
                                                                  (i =
                                                                    null !== i
                                                                      ? i
                                                                      : "")
                                                                    ? ((y = s),
                                                                      58 ===
                                                                      n.charCodeAt(
                                                                        s
                                                                      )
                                                                        ? ((r =
                                                                            ":"),
                                                                          s++)
                                                                        : ((r =
                                                                            null),
                                                                          0 ===
                                                                            o &&
                                                                            u(
                                                                              '":"'
                                                                            )),
                                                                      null !==
                                                                        r &&
                                                                      null !==
                                                                        (l =
                                                                          _e())
                                                                        ? (r = [
                                                                            r,
                                                                            l,
                                                                          ])
                                                                        : ((r =
                                                                            null),
                                                                          (s =
                                                                            y)),
                                                                      null !==
                                                                      (r =
                                                                        null !==
                                                                        r
                                                                          ? r
                                                                          : "")
                                                                        ? ((y =
                                                                            s),
                                                                          58 ===
                                                                          n.charCodeAt(
                                                                            s
                                                                          )
                                                                            ? ((l =
                                                                                ":"),
                                                                              s++)
                                                                            : ((l =
                                                                                null),
                                                                              0 ===
                                                                                o &&
                                                                                u(
                                                                                  '":"'
                                                                                )),
                                                                          null !==
                                                                            l &&
                                                                          null !==
                                                                            (a =
                                                                              _e())
                                                                            ? (l =
                                                                                [
                                                                                  l,
                                                                                  a,
                                                                                ])
                                                                            : ((l =
                                                                                null),
                                                                              (s =
                                                                                y)),
                                                                          null !==
                                                                          (l =
                                                                            null !==
                                                                            l
                                                                              ? l
                                                                              : "")
                                                                            ? ((y =
                                                                                s),
                                                                              58 ===
                                                                              n.charCodeAt(
                                                                                s
                                                                              )
                                                                                ? ((a =
                                                                                    ":"),
                                                                                  s++)
                                                                                : ((a =
                                                                                    null),
                                                                                  0 ===
                                                                                    o &&
                                                                                    u(
                                                                                      '":"'
                                                                                    )),
                                                                              null !==
                                                                                a &&
                                                                              null !==
                                                                                (c =
                                                                                  _e())
                                                                                ? (a =
                                                                                    [
                                                                                      a,
                                                                                      c,
                                                                                    ])
                                                                                : ((a =
                                                                                    null),
                                                                                  (s =
                                                                                    y)),
                                                                              null !==
                                                                              (a =
                                                                                null !==
                                                                                a
                                                                                  ? a
                                                                                  : "")
                                                                                ? ((y =
                                                                                    s),
                                                                                  58 ===
                                                                                  n.charCodeAt(
                                                                                    s
                                                                                  )
                                                                                    ? ((c =
                                                                                        ":"),
                                                                                      s++)
                                                                                    : ((c =
                                                                                        null),
                                                                                      0 ===
                                                                                        o &&
                                                                                        u(
                                                                                          '":"'
                                                                                        )),
                                                                                  null !==
                                                                                    c &&
                                                                                  null !==
                                                                                    (d =
                                                                                      _e())
                                                                                    ? (c =
                                                                                        [
                                                                                          c,
                                                                                          d,
                                                                                        ])
                                                                                    : ((c =
                                                                                        null),
                                                                                      (s =
                                                                                        y)),
                                                                                  null !==
                                                                                  (c =
                                                                                    null !==
                                                                                    c
                                                                                      ? c
                                                                                      : "")
                                                                                    ? ("::" ===
                                                                                      n.substr(
                                                                                        s,
                                                                                        2
                                                                                      )
                                                                                        ? ((d =
                                                                                            "::"),
                                                                                          (s += 2))
                                                                                        : ((d =
                                                                                            null),
                                                                                          0 ===
                                                                                            o &&
                                                                                            u(
                                                                                              '"::"'
                                                                                            )),
                                                                                      null !==
                                                                                      d
                                                                                        ? (e =
                                                                                            [
                                                                                              e,
                                                                                              t,
                                                                                              i,
                                                                                              r,
                                                                                              l,
                                                                                              a,
                                                                                              c,
                                                                                              d,
                                                                                            ])
                                                                                        : ((e =
                                                                                            null),
                                                                                          (s =
                                                                                            m)))
                                                                                    : ((e =
                                                                                        null),
                                                                                      (s =
                                                                                        m)))
                                                                                : ((e =
                                                                                    null),
                                                                                  (s =
                                                                                    m)))
                                                                            : ((e =
                                                                                null),
                                                                              (s =
                                                                                m)))
                                                                        : ((e =
                                                                            null),
                                                                          (s =
                                                                            m)))
                                                                    : ((e =
                                                                        null),
                                                                      (s = m)))
                                                                : ((e = null),
                                                                  (s = m)))
                                                            : ((e = null),
                                                              (s =
                                                                m)))))))))))))))),
                              null !== e &&
                                (e = (function (e) {
                                  return (
                                    (Fn.host_type = "IPv6"), n.substring(s, e)
                                  );
                                })(v)),
                              null === e && (s = v),
                              e
                            );
                          }
                          function _e() {
                            var e, t, n, i, r;
                            return (
                              (r = s),
                              null !== (e = _()) &&
                              null !== (t = null !== (t = _()) ? t : "") &&
                              null !== (n = null !== (n = _()) ? n : "") &&
                              null !== (i = null !== (i = _()) ? i : "")
                                ? (e = [e, t, n, i])
                                : ((e = null), (s = r)),
                              e
                            );
                          }
                          function fe() {
                            var e, t, i, r;
                            return (
                              (r = s),
                              null !== (e = _e())
                                ? (58 === n.charCodeAt(s)
                                    ? ((t = ":"), s++)
                                    : ((t = null), 0 === o && u('":"')),
                                  null !== t && null !== (i = _e())
                                    ? (e = [e, t, i])
                                    : ((e = null), (s = r)))
                                : ((e = null), (s = r)),
                              null === e && (e = ge()),
                              e
                            );
                          }
                          function ge() {
                            var e, t, i, r, l, a, c, d, h;
                            return (
                              (d = s),
                              (h = s),
                              null !== (e = pe())
                                ? (46 === n.charCodeAt(s)
                                    ? ((t = "."), s++)
                                    : ((t = null), 0 === o && u('"."')),
                                  null !== t && null !== (i = pe())
                                    ? (46 === n.charCodeAt(s)
                                        ? ((r = "."), s++)
                                        : ((r = null), 0 === o && u('"."')),
                                      null !== r && null !== (l = pe())
                                        ? (46 === n.charCodeAt(s)
                                            ? ((a = "."), s++)
                                            : ((a = null), 0 === o && u('"."')),
                                          null !== a && null !== (c = pe())
                                            ? (e = [e, t, i, r, l, a, c])
                                            : ((e = null), (s = h)))
                                        : ((e = null), (s = h)))
                                    : ((e = null), (s = h)))
                                : ((e = null), (s = h)),
                              null !== e &&
                                (e = (function (e) {
                                  return (
                                    (Fn.host_type = "IPv4"), n.substring(s, e)
                                  );
                                })(d)),
                              null === e && (s = d),
                              e
                            );
                          }
                          function pe() {
                            var e, t, i, r;
                            return (
                              (r = s),
                              "25" === n.substr(s, 2)
                                ? ((e = "25"), (s += 2))
                                : ((e = null), 0 === o && u('"25"')),
                              null !== e
                                ? (/^[0-5]/.test(n.charAt(s))
                                    ? ((t = n.charAt(s)), s++)
                                    : ((t = null), 0 === o && u("[0-5]")),
                                  null !== t
                                    ? (e = [e, t])
                                    : ((e = null), (s = r)))
                                : ((e = null), (s = r)),
                              null === e &&
                                ((r = s),
                                50 === n.charCodeAt(s)
                                  ? ((e = "2"), s++)
                                  : ((e = null), 0 === o && u('"2"')),
                                null !== e
                                  ? (/^[0-4]/.test(n.charAt(s))
                                      ? ((t = n.charAt(s)), s++)
                                      : ((t = null), 0 === o && u("[0-4]")),
                                    null !== t && null !== (i = d())
                                      ? (e = [e, t, i])
                                      : ((e = null), (s = r)))
                                  : ((e = null), (s = r)),
                                null === e &&
                                  ((r = s),
                                  49 === n.charCodeAt(s)
                                    ? ((e = "1"), s++)
                                    : ((e = null), 0 === o && u('"1"')),
                                  null !== e &&
                                  null !== (t = d()) &&
                                  null !== (i = d())
                                    ? (e = [e, t, i])
                                    : ((e = null), (s = r)),
                                  null === e &&
                                    ((r = s),
                                    /^[1-9]/.test(n.charAt(s))
                                      ? ((e = n.charAt(s)), s++)
                                      : ((e = null), 0 === o && u("[1-9]")),
                                    null !== e && null !== (t = d())
                                      ? (e = [e, t])
                                      : ((e = null), (s = r)),
                                    null === e && (e = d())))),
                              e
                            );
                          }
                          function ve() {
                            var e, t, n, i, r, o, l, a;
                            return (
                              (o = s),
                              (l = s),
                              null !== (e = null !== (e = d()) ? e : "") &&
                              null !== (t = null !== (t = d()) ? t : "") &&
                              null !== (n = null !== (n = d()) ? n : "") &&
                              null !== (i = null !== (i = d()) ? i : "") &&
                              null !== (r = null !== (r = d()) ? r : "")
                                ? (e = [e, t, n, i, r])
                                : ((e = null), (s = l)),
                              null !== e &&
                                ((a = e),
                                (a = parseInt(a.join(""))),
                                (Fn.port = a),
                                (e = a)),
                              null === e && (s = o),
                              e
                            );
                          }
                          function me() {
                            var e, t, i, r;
                            for (
                              e = [],
                                r = s,
                                59 === n.charCodeAt(s)
                                  ? ((t = ";"), s++)
                                  : ((t = null), 0 === o && u('";"')),
                                null !== t && null !== (i = ye())
                                  ? (t = [t, i])
                                  : ((t = null), (s = r));
                              null !== t;

                            )
                              e.push(t),
                                (r = s),
                                59 === n.charCodeAt(s)
                                  ? ((t = ";"), s++)
                                  : ((t = null), 0 === o && u('";"')),
                                null !== t && null !== (i = ye())
                                  ? (t = [t, i])
                                  : ((t = null), (s = r));
                            return e;
                          }
                          function ye() {
                            var e;
                            return (
                              null === (e = Ce()) &&
                                null === (e = be()) &&
                                null === (e = Se()) &&
                                null === (e = Te()) &&
                                null === (e = we()) &&
                                null === (e = Ee()) &&
                                (e = Ae()),
                              e
                            );
                          }
                          function Ce() {
                            var e, t, i, r, l;
                            return (
                              (i = s),
                              (r = s),
                              "transport=" === n.substr(s, 10).toLowerCase()
                                ? ((e = n.substr(s, 10)), (s += 10))
                                : ((e = null), 0 === o && u('"transport="')),
                              null !== e
                                ? ("udp" === n.substr(s, 3).toLowerCase()
                                    ? ((t = n.substr(s, 3)), (s += 3))
                                    : ((t = null), 0 === o && u('"udp"')),
                                  null === t &&
                                    ("tcp" === n.substr(s, 3).toLowerCase()
                                      ? ((t = n.substr(s, 3)), (s += 3))
                                      : ((t = null), 0 === o && u('"tcp"')),
                                    null === t &&
                                      ("sctp" === n.substr(s, 4).toLowerCase()
                                        ? ((t = n.substr(s, 4)), (s += 4))
                                        : ((t = null), 0 === o && u('"sctp"')),
                                      null === t &&
                                        ("tls" === n.substr(s, 3).toLowerCase()
                                          ? ((t = n.substr(s, 3)), (s += 3))
                                          : ((t = null), 0 === o && u('"tls"')),
                                        null === t && (t = x())))),
                                  null !== t
                                    ? (e = [e, t])
                                    : ((e = null), (s = r)))
                                : ((e = null), (s = r)),
                              null !== e &&
                                ((l = e[1]),
                                Fn.uri_params || (Fn.uri_params = {}),
                                (e = void (Fn.uri_params.transport =
                                  l.toLowerCase()))),
                              null === e && (s = i),
                              e
                            );
                          }
                          function be() {
                            var e, t, i, r, l;
                            return (
                              (i = s),
                              (r = s),
                              "user=" === n.substr(s, 5).toLowerCase()
                                ? ((e = n.substr(s, 5)), (s += 5))
                                : ((e = null), 0 === o && u('"user="')),
                              null !== e
                                ? ("phone" === n.substr(s, 5).toLowerCase()
                                    ? ((t = n.substr(s, 5)), (s += 5))
                                    : ((t = null), 0 === o && u('"phone"')),
                                  null === t &&
                                    ("ip" === n.substr(s, 2).toLowerCase()
                                      ? ((t = n.substr(s, 2)), (s += 2))
                                      : ((t = null), 0 === o && u('"ip"')),
                                    null === t && (t = x())),
                                  null !== t
                                    ? (e = [e, t])
                                    : ((e = null), (s = r)))
                                : ((e = null), (s = r)),
                              null !== e &&
                                ((l = e[1]),
                                Fn.uri_params || (Fn.uri_params = {}),
                                (e = void (Fn.uri_params.user =
                                  l.toLowerCase()))),
                              null === e && (s = i),
                              e
                            );
                          }
                          function Se() {
                            var e, t, i, r, l;
                            return (
                              (i = s),
                              (r = s),
                              "method=" === n.substr(s, 7).toLowerCase()
                                ? ((e = n.substr(s, 7)), (s += 7))
                                : ((e = null), 0 === o && u('"method="')),
                              null !== e && null !== (t = ct())
                                ? (e = [e, t])
                                : ((e = null), (s = r)),
                              null !== e &&
                                ((l = e[1]),
                                Fn.uri_params || (Fn.uri_params = {}),
                                (e = void (Fn.uri_params.method = l))),
                              null === e && (s = i),
                              e
                            );
                          }
                          function Te() {
                            var e, t, i, r, l;
                            return (
                              (i = s),
                              (r = s),
                              "ttl=" === n.substr(s, 4).toLowerCase()
                                ? ((e = n.substr(s, 4)), (s += 4))
                                : ((e = null), 0 === o && u('"ttl="')),
                              null !== e && null !== (t = En())
                                ? (e = [e, t])
                                : ((e = null), (s = r)),
                              null !== e &&
                                ((l = e[1]),
                                Fn.params || (Fn.params = {}),
                                (e = void (Fn.params.ttl = l))),
                              null === e && (s = i),
                              e
                            );
                          }
                          function we() {
                            var e, t, i, r, l;
                            return (
                              (i = s),
                              (r = s),
                              "maddr=" === n.substr(s, 6).toLowerCase()
                                ? ((e = n.substr(s, 6)), (s += 6))
                                : ((e = null), 0 === o && u('"maddr="')),
                              null !== e && null !== (t = le())
                                ? (e = [e, t])
                                : ((e = null), (s = r)),
                              null !== e &&
                                ((l = e[1]),
                                Fn.uri_params || (Fn.uri_params = {}),
                                (e = void (Fn.uri_params.maddr = l))),
                              null === e && (s = i),
                              e
                            );
                          }
                          function Ee() {
                            var e, t, i, r, l, a;
                            return (
                              (r = s),
                              (l = s),
                              "lr" === n.substr(s, 2).toLowerCase()
                                ? ((e = n.substr(s, 2)), (s += 2))
                                : ((e = null), 0 === o && u('"lr"')),
                              null !== e
                                ? ((a = s),
                                  61 === n.charCodeAt(s)
                                    ? ((t = "="), s++)
                                    : ((t = null), 0 === o && u('"="')),
                                  null !== t && null !== (i = x())
                                    ? (t = [t, i])
                                    : ((t = null), (s = a)),
                                  null !== (t = null !== t ? t : "")
                                    ? (e = [e, t])
                                    : ((e = null), (s = l)))
                                : ((e = null), (s = l)),
                              null !== e &&
                                (Fn.uri_params || (Fn.uri_params = {}),
                                (e = void (Fn.uri_params.lr = void 0))),
                              null === e && (s = r),
                              e
                            );
                          }
                          function Ae() {
                            var e, t, i, r, l, a, c, d;
                            return (
                              (r = s),
                              (l = s),
                              null !== (e = Re())
                                ? ((a = s),
                                  61 === n.charCodeAt(s)
                                    ? ((t = "="), s++)
                                    : ((t = null), 0 === o && u('"="')),
                                  null !== t && null !== (i = Ie())
                                    ? (t = [t, i])
                                    : ((t = null), (s = a)),
                                  null !== (t = null !== t ? t : "")
                                    ? (e = [e, t])
                                    : ((e = null), (s = l)))
                                : ((e = null), (s = l)),
                              null !== e &&
                                ((c = e[0]),
                                (d = e[1]),
                                Fn.uri_params || (Fn.uri_params = {}),
                                (d = void 0 === d ? void 0 : d[1]),
                                (e = void (Fn.uri_params[c.toLowerCase()] =
                                  d))),
                              null === e && (s = r),
                              e
                            );
                          }
                          function Re() {
                            var e, t, n;
                            if (((n = s), null !== (t = ke())))
                              for (e = []; null !== t; ) e.push(t), (t = ke());
                            else e = null;
                            return (
                              null !== e && (e = e.join("")),
                              null === e && (s = n),
                              e
                            );
                          }
                          function Ie() {
                            var e, t, n;
                            if (((n = s), null !== (t = ke())))
                              for (e = []; null !== t; ) e.push(t), (t = ke());
                            else e = null;
                            return (
                              null !== e && (e = e.join("")),
                              null === e && (s = n),
                              e
                            );
                          }
                          function ke() {
                            var e;
                            return (
                              null === (e = Oe()) &&
                                null === (e = b()) &&
                                (e = T()),
                              e
                            );
                          }
                          function Oe() {
                            var e;
                            return (
                              91 === n.charCodeAt(s)
                                ? ((e = "["), s++)
                                : ((e = null), 0 === o && u('"["')),
                              null === e &&
                                (93 === n.charCodeAt(s)
                                  ? ((e = "]"), s++)
                                  : ((e = null), 0 === o && u('"]"')),
                                null === e &&
                                  (47 === n.charCodeAt(s)
                                    ? ((e = "/"), s++)
                                    : ((e = null), 0 === o && u('"/"')),
                                  null === e &&
                                    (58 === n.charCodeAt(s)
                                      ? ((e = ":"), s++)
                                      : ((e = null), 0 === o && u('":"')),
                                    null === e &&
                                      (38 === n.charCodeAt(s)
                                        ? ((e = "&"), s++)
                                        : ((e = null), 0 === o && u('"&"')),
                                      null === e &&
                                        (43 === n.charCodeAt(s)
                                          ? ((e = "+"), s++)
                                          : ((e = null), 0 === o && u('"+"')),
                                        null === e &&
                                          (36 === n.charCodeAt(s)
                                            ? ((e = "$"), s++)
                                            : ((e = null),
                                              0 === o && u('"$"')))))))),
                              e
                            );
                          }
                          function xe() {
                            var e, t, i, r, l, a, c;
                            if (
                              ((a = s),
                              63 === n.charCodeAt(s)
                                ? ((e = "?"), s++)
                                : ((e = null), 0 === o && u('"?"')),
                              null !== e)
                            )
                              if (null !== (t = Pe())) {
                                for (
                                  i = [],
                                    c = s,
                                    38 === n.charCodeAt(s)
                                      ? ((r = "&"), s++)
                                      : ((r = null), 0 === o && u('"&"')),
                                    null !== r && null !== (l = Pe())
                                      ? (r = [r, l])
                                      : ((r = null), (s = c));
                                  null !== r;

                                )
                                  i.push(r),
                                    (c = s),
                                    38 === n.charCodeAt(s)
                                      ? ((r = "&"), s++)
                                      : ((r = null), 0 === o && u('"&"')),
                                    null !== r && null !== (l = Pe())
                                      ? (r = [r, l])
                                      : ((r = null), (s = c));
                                null !== i
                                  ? (e = [e, t, i])
                                  : ((e = null), (s = a));
                              } else (e = null), (s = a);
                            else (e = null), (s = a);
                            return e;
                          }
                          function Pe() {
                            var e, t, i, r, l, a, c;
                            return (
                              (r = s),
                              (l = s),
                              null !== (e = De())
                                ? (61 === n.charCodeAt(s)
                                    ? ((t = "="), s++)
                                    : ((t = null), 0 === o && u('"="')),
                                  null !== t && null !== (i = Ne())
                                    ? (e = [e, t, i])
                                    : ((e = null), (s = l)))
                                : ((e = null), (s = l)),
                              null !== e &&
                                ((a = e[0]),
                                (c = e[2]),
                                (a = a.join("").toLowerCase()),
                                (c = c.join("")),
                                Fn.uri_headers || (Fn.uri_headers = {}),
                                (e = void (Fn.uri_headers[a]
                                  ? Fn.uri_headers[a].push(c)
                                  : (Fn.uri_headers[a] = [c])))),
                              null === e && (s = r),
                              e
                            );
                          }
                          function De() {
                            var e, t;
                            if (
                              (null === (t = Ue()) &&
                                null === (t = b()) &&
                                (t = T()),
                              null !== t)
                            )
                              for (e = []; null !== t; )
                                e.push(t),
                                  null === (t = Ue()) &&
                                    null === (t = b()) &&
                                    (t = T());
                            else e = null;
                            return e;
                          }
                          function Ne() {
                            var e, t;
                            for (
                              e = [],
                                null === (t = Ue()) &&
                                  null === (t = b()) &&
                                  (t = T());
                              null !== t;

                            )
                              e.push(t),
                                null === (t = Ue()) &&
                                  null === (t = b()) &&
                                  (t = T());
                            return e;
                          }
                          function Ue() {
                            var e;
                            return (
                              91 === n.charCodeAt(s)
                                ? ((e = "["), s++)
                                : ((e = null), 0 === o && u('"["')),
                              null === e &&
                                (93 === n.charCodeAt(s)
                                  ? ((e = "]"), s++)
                                  : ((e = null), 0 === o && u('"]"')),
                                null === e &&
                                  (47 === n.charCodeAt(s)
                                    ? ((e = "/"), s++)
                                    : ((e = null), 0 === o && u('"/"')),
                                  null === e &&
                                    (63 === n.charCodeAt(s)
                                      ? ((e = "?"), s++)
                                      : ((e = null), 0 === o && u('"?"')),
                                    null === e &&
                                      (58 === n.charCodeAt(s)
                                        ? ((e = ":"), s++)
                                        : ((e = null), 0 === o && u('":"')),
                                      null === e &&
                                        (43 === n.charCodeAt(s)
                                          ? ((e = "+"), s++)
                                          : ((e = null), 0 === o && u('"+"')),
                                        null === e &&
                                          (36 === n.charCodeAt(s)
                                            ? ((e = "$"), s++)
                                            : ((e = null),
                                              0 === o && u('"$"')))))))),
                              e
                            );
                          }
                          function Me() {
                            var e, t, n, i, r, o;
                            return (
                              (o = s),
                              null !== (e = ct()) &&
                              null !== (t = v()) &&
                              null !== (n = Le()) &&
                              null !== (i = v()) &&
                              null !== (r = et())
                                ? (e = [e, t, n, i, r])
                                : ((e = null), (s = o)),
                              e
                            );
                          }
                          function Le() {
                            var e;
                            return null === (e = Q()) && (e = je()), e;
                          }
                          function je() {
                            var e, t, i, r;
                            return (
                              (r = s),
                              null !== (e = Ke())
                                ? (58 === n.charCodeAt(s)
                                    ? ((t = ":"), s++)
                                    : ((t = null), 0 === o && u('":"')),
                                  null !== t
                                    ? (null === (i = qe()) && (i = Ve()),
                                      null !== i
                                        ? (e = [e, t, i])
                                        : ((e = null), (s = r)))
                                    : ((e = null), (s = r)))
                                : ((e = null), (s = r)),
                              e
                            );
                          }
                          function qe() {
                            var e, t, i, r, l;
                            return (
                              (r = s),
                              null === (e = He()) && (e = Fe()),
                              null !== e
                                ? ((l = s),
                                  63 === n.charCodeAt(s)
                                    ? ((t = "?"), s++)
                                    : ((t = null), 0 === o && u('"?"')),
                                  null !== t && null !== (i = Ze())
                                    ? (t = [t, i])
                                    : ((t = null), (s = l)),
                                  null !== (t = null !== t ? t : "")
                                    ? (e = [e, t])
                                    : ((e = null), (s = r)))
                                : ((e = null), (s = r)),
                              e
                            );
                          }
                          function He() {
                            var e, t, i, r;
                            return (
                              (r = s),
                              "//" === n.substr(s, 2)
                                ? ((e = "//"), (s += 2))
                                : ((e = null), 0 === o && u('"//"')),
                              null !== e &&
                              null !== (t = Je()) &&
                              null !== (i = null !== (i = Fe()) ? i : "")
                                ? (e = [e, t, i])
                                : ((e = null), (s = r)),
                              e
                            );
                          }
                          function Fe() {
                            var e, t, i;
                            return (
                              (i = s),
                              47 === n.charCodeAt(s)
                                ? ((e = "/"), s++)
                                : ((e = null), 0 === o && u('"/"')),
                              null !== e && null !== (t = We())
                                ? (e = [e, t])
                                : ((e = null), (s = i)),
                              e
                            );
                          }
                          function Ve() {
                            var e, t, n, i;
                            if (((i = s), null !== (e = $e()))) {
                              for (t = [], n = Be(); null !== n; )
                                t.push(n), (n = Be());
                              null !== t ? (e = [e, t]) : ((e = null), (s = i));
                            } else (e = null), (s = i);
                            return e;
                          }
                          function Be() {
                            var e;
                            return (
                              null === (e = C()) &&
                                null === (e = b()) &&
                                (e = T()),
                              e
                            );
                          }
                          function $e() {
                            var e;
                            return (
                              null === (e = b()) &&
                                null === (e = T()) &&
                                (59 === n.charCodeAt(s)
                                  ? ((e = ";"), s++)
                                  : ((e = null), 0 === o && u('";"')),
                                null === e &&
                                  (63 === n.charCodeAt(s)
                                    ? ((e = "?"), s++)
                                    : ((e = null), 0 === o && u('"?"')),
                                  null === e &&
                                    (58 === n.charCodeAt(s)
                                      ? ((e = ":"), s++)
                                      : ((e = null), 0 === o && u('":"')),
                                    null === e &&
                                      (64 === n.charCodeAt(s)
                                        ? ((e = "@"), s++)
                                        : ((e = null), 0 === o && u('"@"')),
                                      null === e &&
                                        (38 === n.charCodeAt(s)
                                          ? ((e = "&"), s++)
                                          : ((e = null), 0 === o && u('"&"')),
                                        null === e &&
                                          (61 === n.charCodeAt(s)
                                            ? ((e = "="), s++)
                                            : ((e = null), 0 === o && u('"="')),
                                          null === e &&
                                            (43 === n.charCodeAt(s)
                                              ? ((e = "+"), s++)
                                              : ((e = null),
                                                0 === o && u('"+"')),
                                            null === e &&
                                              (36 === n.charCodeAt(s)
                                                ? ((e = "$"), s++)
                                                : ((e = null),
                                                  0 === o && u('"$"')),
                                              null === e &&
                                                (44 === n.charCodeAt(s)
                                                  ? ((e = ","), s++)
                                                  : ((e = null),
                                                    0 === o &&
                                                      u('","'))))))))))),
                              e
                            );
                          }
                          function We() {
                            var e, t, i, r, l, a;
                            if (((l = s), null !== (e = Ge()))) {
                              for (
                                t = [],
                                  a = s,
                                  47 === n.charCodeAt(s)
                                    ? ((i = "/"), s++)
                                    : ((i = null), 0 === o && u('"/"')),
                                  null !== i && null !== (r = Ge())
                                    ? (i = [i, r])
                                    : ((i = null), (s = a));
                                null !== i;

                              )
                                t.push(i),
                                  (a = s),
                                  47 === n.charCodeAt(s)
                                    ? ((i = "/"), s++)
                                    : ((i = null), 0 === o && u('"/"')),
                                  null !== i && null !== (r = Ge())
                                    ? (i = [i, r])
                                    : ((i = null), (s = a));
                              null !== t ? (e = [e, t]) : ((e = null), (s = l));
                            } else (e = null), (s = l);
                            return e;
                          }
                          function Ge() {
                            var e, t, i, r, l, a;
                            for (l = s, e = [], t = Ye(); null !== t; )
                              e.push(t), (t = Ye());
                            if (null !== e) {
                              for (
                                t = [],
                                  a = s,
                                  59 === n.charCodeAt(s)
                                    ? ((i = ";"), s++)
                                    : ((i = null), 0 === o && u('";"')),
                                  null !== i && null !== (r = ze())
                                    ? (i = [i, r])
                                    : ((i = null), (s = a));
                                null !== i;

                              )
                                t.push(i),
                                  (a = s),
                                  59 === n.charCodeAt(s)
                                    ? ((i = ";"), s++)
                                    : ((i = null), 0 === o && u('";"')),
                                  null !== i && null !== (r = ze())
                                    ? (i = [i, r])
                                    : ((i = null), (s = a));
                              null !== t ? (e = [e, t]) : ((e = null), (s = l));
                            } else (e = null), (s = l);
                            return e;
                          }
                          function ze() {
                            var e, t;
                            for (e = [], t = Ye(); null !== t; )
                              e.push(t), (t = Ye());
                            return e;
                          }
                          function Ye() {
                            var e;
                            return (
                              null === (e = b()) &&
                                null === (e = T()) &&
                                (58 === n.charCodeAt(s)
                                  ? ((e = ":"), s++)
                                  : ((e = null), 0 === o && u('":"')),
                                null === e &&
                                  (64 === n.charCodeAt(s)
                                    ? ((e = "@"), s++)
                                    : ((e = null), 0 === o && u('"@"')),
                                  null === e &&
                                    (38 === n.charCodeAt(s)
                                      ? ((e = "&"), s++)
                                      : ((e = null), 0 === o && u('"&"')),
                                    null === e &&
                                      (61 === n.charCodeAt(s)
                                        ? ((e = "="), s++)
                                        : ((e = null), 0 === o && u('"="')),
                                      null === e &&
                                        (43 === n.charCodeAt(s)
                                          ? ((e = "+"), s++)
                                          : ((e = null), 0 === o && u('"+"')),
                                        null === e &&
                                          (36 === n.charCodeAt(s)
                                            ? ((e = "$"), s++)
                                            : ((e = null), 0 === o && u('"$"')),
                                          null === e &&
                                            (44 === n.charCodeAt(s)
                                              ? ((e = ","), s++)
                                              : ((e = null),
                                                0 === o && u('","'))))))))),
                              e
                            );
                          }
                          function Ke() {
                            var e, t, i, r, l;
                            if (((r = s), (l = s), null !== (e = h()))) {
                              for (
                                t = [],
                                  null === (i = h()) &&
                                    null === (i = d()) &&
                                    (43 === n.charCodeAt(s)
                                      ? ((i = "+"), s++)
                                      : ((i = null), 0 === o && u('"+"')),
                                    null === i &&
                                      (45 === n.charCodeAt(s)
                                        ? ((i = "-"), s++)
                                        : ((i = null), 0 === o && u('"-"')),
                                      null === i &&
                                        (46 === n.charCodeAt(s)
                                          ? ((i = "."), s++)
                                          : ((i = null),
                                            0 === o && u('"."')))));
                                null !== i;

                              )
                                t.push(i),
                                  null === (i = h()) &&
                                    null === (i = d()) &&
                                    (43 === n.charCodeAt(s)
                                      ? ((i = "+"), s++)
                                      : ((i = null), 0 === o && u('"+"')),
                                    null === i &&
                                      (45 === n.charCodeAt(s)
                                        ? ((i = "-"), s++)
                                        : ((i = null), 0 === o && u('"-"')),
                                      null === i &&
                                        (46 === n.charCodeAt(s)
                                          ? ((i = "."), s++)
                                          : ((i = null),
                                            0 === o && u('"."')))));
                              null !== t ? (e = [e, t]) : ((e = null), (s = l));
                            } else (e = null), (s = l);
                            return (
                              null !== e &&
                                (e = (function (e) {
                                  Fn.scheme = n.substring(s, e);
                                })(r)),
                              null === e && (s = r),
                              e
                            );
                          }
                          function Je() {
                            var e;
                            return null === (e = Xe()) && (e = Qe()), e;
                          }
                          function Xe() {
                            var e, t, i, r;
                            return (
                              (i = s),
                              (r = s),
                              null !== (e = ne())
                                ? (64 === n.charCodeAt(s)
                                    ? ((t = "@"), s++)
                                    : ((t = null), 0 === o && u('"@"')),
                                  null !== t
                                    ? (e = [e, t])
                                    : ((e = null), (s = r)))
                                : ((e = null), (s = r)),
                              null !== (e = null !== e ? e : "") &&
                              null !== (t = oe())
                                ? (e = [e, t])
                                : ((e = null), (s = i)),
                              null !== e ? e : ""
                            );
                          }
                          function Qe() {
                            var e, t;
                            if (
                              (null === (t = b()) &&
                                null === (t = T()) &&
                                (36 === n.charCodeAt(s)
                                  ? ((t = "$"), s++)
                                  : ((t = null), 0 === o && u('"$"')),
                                null === t &&
                                  (44 === n.charCodeAt(s)
                                    ? ((t = ","), s++)
                                    : ((t = null), 0 === o && u('","')),
                                  null === t &&
                                    (59 === n.charCodeAt(s)
                                      ? ((t = ";"), s++)
                                      : ((t = null), 0 === o && u('";"')),
                                    null === t &&
                                      (58 === n.charCodeAt(s)
                                        ? ((t = ":"), s++)
                                        : ((t = null), 0 === o && u('":"')),
                                      null === t &&
                                        (64 === n.charCodeAt(s)
                                          ? ((t = "@"), s++)
                                          : ((t = null), 0 === o && u('"@"')),
                                        null === t &&
                                          (38 === n.charCodeAt(s)
                                            ? ((t = "&"), s++)
                                            : ((t = null), 0 === o && u('"&"')),
                                          null === t &&
                                            (61 === n.charCodeAt(s)
                                              ? ((t = "="), s++)
                                              : ((t = null),
                                                0 === o && u('"="')),
                                            null === t &&
                                              (43 === n.charCodeAt(s)
                                                ? ((t = "+"), s++)
                                                : ((t = null),
                                                  0 === o && u('"+"')))))))))),
                              null !== t)
                            )
                              for (e = []; null !== t; )
                                e.push(t),
                                  null === (t = b()) &&
                                    null === (t = T()) &&
                                    (36 === n.charCodeAt(s)
                                      ? ((t = "$"), s++)
                                      : ((t = null), 0 === o && u('"$"')),
                                    null === t &&
                                      (44 === n.charCodeAt(s)
                                        ? ((t = ","), s++)
                                        : ((t = null), 0 === o && u('","')),
                                      null === t &&
                                        (59 === n.charCodeAt(s)
                                          ? ((t = ";"), s++)
                                          : ((t = null), 0 === o && u('";"')),
                                        null === t &&
                                          (58 === n.charCodeAt(s)
                                            ? ((t = ":"), s++)
                                            : ((t = null), 0 === o && u('":"')),
                                          null === t &&
                                            (64 === n.charCodeAt(s)
                                              ? ((t = "@"), s++)
                                              : ((t = null),
                                                0 === o && u('"@"')),
                                            null === t &&
                                              (38 === n.charCodeAt(s)
                                                ? ((t = "&"), s++)
                                                : ((t = null),
                                                  0 === o && u('"&"')),
                                              null === t &&
                                                (61 === n.charCodeAt(s)
                                                  ? ((t = "="), s++)
                                                  : ((t = null),
                                                    0 === o && u('"="')),
                                                null === t &&
                                                  (43 === n.charCodeAt(s)
                                                    ? ((t = "+"), s++)
                                                    : ((t = null),
                                                      0 === o &&
                                                        u('"+"'))))))))));
                            else e = null;
                            return e;
                          }
                          function Ze() {
                            var e, t;
                            for (e = [], t = Be(); null !== t; )
                              e.push(t), (t = Be());
                            return e;
                          }
                          function et() {
                            var e, t, i, r, l, a, c, h;
                            if (
                              ((c = s),
                              (h = s),
                              "sip" === n.substr(s, 3).toLowerCase()
                                ? ((e = n.substr(s, 3)), (s += 3))
                                : ((e = null), 0 === o && u('"SIP"')),
                              null !== e)
                            )
                              if (
                                (47 === n.charCodeAt(s)
                                  ? ((t = "/"), s++)
                                  : ((t = null), 0 === o && u('"/"')),
                                null !== t)
                              ) {
                                if (null !== (r = d()))
                                  for (i = []; null !== r; )
                                    i.push(r), (r = d());
                                else i = null;
                                if (null !== i)
                                  if (
                                    (46 === n.charCodeAt(s)
                                      ? ((r = "."), s++)
                                      : ((r = null), 0 === o && u('"."')),
                                    null !== r)
                                  ) {
                                    if (null !== (a = d()))
                                      for (l = []; null !== a; )
                                        l.push(a), (a = d());
                                    else l = null;
                                    null !== l
                                      ? (e = [e, t, i, r, l])
                                      : ((e = null), (s = h));
                                  } else (e = null), (s = h);
                                else (e = null), (s = h);
                              } else (e = null), (s = h);
                            else (e = null), (s = h);
                            return (
                              null !== e &&
                                (e = (function (e) {
                                  Fn.sip_version = n.substring(s, e);
                                })(c)),
                              null === e && (s = c),
                              e
                            );
                          }
                          function tt() {
                            var e;
                            return (
                              "INVITE" === n.substr(s, 6)
                                ? ((e = "INVITE"), (s += 6))
                                : ((e = null), 0 === o && u('"INVITE"')),
                              e
                            );
                          }
                          function nt() {
                            var e;
                            return (
                              "ACK" === n.substr(s, 3)
                                ? ((e = "ACK"), (s += 3))
                                : ((e = null), 0 === o && u('"ACK"')),
                              e
                            );
                          }
                          function it() {
                            var e;
                            return (
                              "OPTIONS" === n.substr(s, 7)
                                ? ((e = "OPTIONS"), (s += 7))
                                : ((e = null), 0 === o && u('"OPTIONS"')),
                              e
                            );
                          }
                          function rt() {
                            var e;
                            return (
                              "BYE" === n.substr(s, 3)
                                ? ((e = "BYE"), (s += 3))
                                : ((e = null), 0 === o && u('"BYE"')),
                              e
                            );
                          }
                          function st() {
                            var e;
                            return (
                              "CANCEL" === n.substr(s, 6)
                                ? ((e = "CANCEL"), (s += 6))
                                : ((e = null), 0 === o && u('"CANCEL"')),
                              e
                            );
                          }
                          function ot() {
                            var e;
                            return (
                              "REGISTER" === n.substr(s, 8)
                                ? ((e = "REGISTER"), (s += 8))
                                : ((e = null), 0 === o && u('"REGISTER"')),
                              e
                            );
                          }
                          function lt() {
                            var e;
                            return (
                              "SUBSCRIBE" === n.substr(s, 9)
                                ? ((e = "SUBSCRIBE"), (s += 9))
                                : ((e = null), 0 === o && u('"SUBSCRIBE"')),
                              e
                            );
                          }
                          function at() {
                            var e;
                            return (
                              "NOTIFY" === n.substr(s, 6)
                                ? ((e = "NOTIFY"), (s += 6))
                                : ((e = null), 0 === o && u('"NOTIFY"')),
                              e
                            );
                          }
                          function ut() {
                            var e;
                            return (
                              "REFER" === n.substr(s, 5)
                                ? ((e = "REFER"), (s += 5))
                                : ((e = null), 0 === o && u('"REFER"')),
                              e
                            );
                          }
                          function ct() {
                            var e, t;
                            return (
                              (t = s),
                              null === (e = tt()) &&
                                null === (e = nt()) &&
                                null === (e = it()) &&
                                null === (e = rt()) &&
                                null === (e = st()) &&
                                null === (e = ot()) &&
                                null === (e = lt()) &&
                                null === (e = at()) &&
                                null === (e = ut()) &&
                                (e = x()),
                              null !== e &&
                                (e = (function (e) {
                                  return (
                                    (Fn.method = n.substring(s, e)), Fn.method
                                  );
                                })(t)),
                              null === e && (s = t),
                              e
                            );
                          }
                          function dt() {
                            var e, t, n, i, r, o;
                            return (
                              (o = s),
                              null !== (e = et()) &&
                              null !== (t = v()) &&
                              null !== (n = ht()) &&
                              null !== (i = v()) &&
                              null !== (r = ft())
                                ? (e = [e, t, n, i, r])
                                : ((e = null), (s = o)),
                              e
                            );
                          }
                          function ht() {
                            var e, t, n;
                            return (
                              (t = s),
                              null !== (e = _t()) &&
                                ((n = e),
                                (e = void (Fn.status_code = parseInt(
                                  n.join("")
                                )))),
                              null === e && (s = t),
                              e
                            );
                          }
                          function _t() {
                            var e, t, n, i;
                            return (
                              (i = s),
                              null !== (e = d()) &&
                              null !== (t = d()) &&
                              null !== (n = d())
                                ? (e = [e, t, n])
                                : ((e = null), (s = i)),
                              e
                            );
                          }
                          function ft() {
                            var e, t, i;
                            for (
                              i = s,
                                e = [],
                                null === (t = C()) &&
                                  null === (t = b()) &&
                                  null === (t = T()) &&
                                  null === (t = k()) &&
                                  null === (t = O()) &&
                                  null === (t = v()) &&
                                  (t = m());
                              null !== t;

                            )
                              e.push(t),
                                null === (t = C()) &&
                                  null === (t = b()) &&
                                  null === (t = T()) &&
                                  null === (t = k()) &&
                                  null === (t = O()) &&
                                  null === (t = v()) &&
                                  (t = m());
                            return (
                              null !== e &&
                                (e = (function (e) {
                                  Fn.reason_phrase = n.substring(s, e);
                                })(i)),
                              null === e && (s = i),
                              e
                            );
                          }
                          function gt() {
                            var e, t, n, i, r, o, l;
                            if (
                              ((r = s),
                              (o = s),
                              null === (e = X()) && (e = pt()),
                              null !== e)
                            ) {
                              for (
                                t = [],
                                  l = s,
                                  null !== (n = V()) && null !== (i = mt())
                                    ? (n = [n, i])
                                    : ((n = null), (s = l));
                                null !== n;

                              )
                                t.push(n),
                                  (l = s),
                                  null !== (n = V()) && null !== (i = mt())
                                    ? (n = [n, i])
                                    : ((n = null), (s = l));
                              null !== t ? (e = [e, t]) : ((e = null), (s = o));
                            } else (e = null), (s = o);
                            return (
                              null !== e &&
                                (e = (function (e) {
                                  var t;
                                  Fn.multi_header || (Fn.multi_header = []);
                                  try {
                                    (t = new Hn(
                                      Fn.uri,
                                      Fn.display_name,
                                      Fn.params
                                    )),
                                      delete Fn.uri,
                                      delete Fn.display_name,
                                      delete Fn.params;
                                  } catch (e) {
                                    t = null;
                                  }
                                  Fn.multi_header.push({
                                    possition: s,
                                    offset: e,
                                    parsed: t,
                                  });
                                })(r)),
                              null === e && (s = r),
                              e
                            );
                          }
                          function pt() {
                            var e, t, n, i, r;
                            return (
                              (r = s),
                              null !== (e = null !== (e = vt()) ? e : "") &&
                              null !== (t = H()) &&
                              null !== (n = Q()) &&
                              null !== (i = q())
                                ? (e = [e, t, n, i])
                                : ((e = null), (s = r)),
                              e
                            );
                          }
                          function vt() {
                            var e, t, n, i, r, o, l, a;
                            if (((r = s), (o = s), null !== (e = x()))) {
                              for (
                                t = [],
                                  l = s,
                                  null !== (n = w()) && null !== (i = x())
                                    ? (n = [n, i])
                                    : ((n = null), (s = l));
                                null !== n;

                              )
                                t.push(n),
                                  (l = s),
                                  null !== (n = w()) && null !== (i = x())
                                    ? (n = [n, i])
                                    : ((n = null), (s = l));
                              null !== t ? (e = [e, t]) : ((e = null), (s = o));
                            } else (e = null), (s = o);
                            return (
                              null === e && (e = Y()),
                              null !== e &&
                                ((a = e),
                                (e = void (Fn.display_name =
                                  "string" == typeof a
                                    ? a
                                    : a[1].reduce(function (e, t) {
                                        return e + t[0] + t[1];
                                      }, a[0])))),
                              null === e && (s = r),
                              e
                            );
                          }
                          function mt() {
                            var e;
                            return (
                              null === (e = yt()) &&
                                null === (e = Ct()) &&
                                (e = Tt()),
                              e
                            );
                          }
                          function yt() {
                            var e, t, i, r, l, a;
                            return (
                              (r = s),
                              (l = s),
                              "q" === n.substr(s, 1).toLowerCase()
                                ? ((e = n.substr(s, 1)), s++)
                                : ((e = null), 0 === o && u('"q"')),
                              null !== e &&
                              null !== (t = M()) &&
                              null !== (i = St())
                                ? (e = [e, t, i])
                                : ((e = null), (s = l)),
                              null !== e &&
                                ((a = e[2]),
                                Fn.params || (Fn.params = {}),
                                (e = void (Fn.params.q = a))),
                              null === e && (s = r),
                              e
                            );
                          }
                          function Ct() {
                            var e, t, i, r, l, a;
                            return (
                              (r = s),
                              (l = s),
                              "expires" === n.substr(s, 7).toLowerCase()
                                ? ((e = n.substr(s, 7)), (s += 7))
                                : ((e = null), 0 === o && u('"expires"')),
                              null !== e &&
                              null !== (t = M()) &&
                              null !== (i = bt())
                                ? (e = [e, t, i])
                                : ((e = null), (s = l)),
                              null !== e &&
                                ((a = e[2]),
                                Fn.params || (Fn.params = {}),
                                (e = void (Fn.params.expires = a))),
                              null === e && (s = r),
                              e
                            );
                          }
                          function bt() {
                            var e, t, n;
                            if (((n = s), null !== (t = d())))
                              for (e = []; null !== t; ) e.push(t), (t = d());
                            else e = null;
                            return (
                              null !== e && (e = parseInt(e.join(""))),
                              null === e && (s = n),
                              e
                            );
                          }
                          function St() {
                            var e, t, i, r, l, a, c, h;
                            return (
                              (a = s),
                              (c = s),
                              48 === n.charCodeAt(s)
                                ? ((e = "0"), s++)
                                : ((e = null), 0 === o && u('"0"')),
                              null !== e
                                ? ((h = s),
                                  46 === n.charCodeAt(s)
                                    ? ((t = "."), s++)
                                    : ((t = null), 0 === o && u('"."')),
                                  null !== t &&
                                  null !== (i = null !== (i = d()) ? i : "") &&
                                  null !== (r = null !== (r = d()) ? r : "") &&
                                  null !== (l = null !== (l = d()) ? l : "")
                                    ? (t = [t, i, r, l])
                                    : ((t = null), (s = h)),
                                  null !== (t = null !== t ? t : "")
                                    ? (e = [e, t])
                                    : ((e = null), (s = c)))
                                : ((e = null), (s = c)),
                              null !== e &&
                                (e = (function (e) {
                                  return parseFloat(n.substring(s, e));
                                })(a)),
                              null === e && (s = a),
                              e
                            );
                          }
                          function Tt() {
                            var e, t, n, i, r, o, l, a;
                            return (
                              (i = s),
                              (r = s),
                              null !== (e = x())
                                ? ((o = s),
                                  null !== (t = M()) && null !== (n = wt())
                                    ? (t = [t, n])
                                    : ((t = null), (s = o)),
                                  null !== (t = null !== t ? t : "")
                                    ? (e = [e, t])
                                    : ((e = null), (s = r)))
                                : ((e = null), (s = r)),
                              null !== e &&
                                ((l = e[0]),
                                (a = e[1]),
                                Fn.params || (Fn.params = {}),
                                (a = void 0 === a ? void 0 : a[1]),
                                (e = void (Fn.params[l.toLowerCase()] = a))),
                              null === e && (s = i),
                              e
                            );
                          }
                          function wt() {
                            var e;
                            return (
                              null === (e = x()) &&
                                null === (e = le()) &&
                                (e = z()),
                              e
                            );
                          }
                          function Et() {
                            var e;
                            return (
                              "render" === n.substr(s, 6).toLowerCase()
                                ? ((e = n.substr(s, 6)), (s += 6))
                                : ((e = null), 0 === o && u('"render"')),
                              null === e &&
                                ("session" === n.substr(s, 7).toLowerCase()
                                  ? ((e = n.substr(s, 7)), (s += 7))
                                  : ((e = null), 0 === o && u('"session"')),
                                null === e &&
                                  ("icon" === n.substr(s, 4).toLowerCase()
                                    ? ((e = n.substr(s, 4)), (s += 4))
                                    : ((e = null), 0 === o && u('"icon"')),
                                  null === e &&
                                    ("alert" === n.substr(s, 5).toLowerCase()
                                      ? ((e = n.substr(s, 5)), (s += 5))
                                      : ((e = null), 0 === o && u('"alert"')),
                                    null === e && (e = x())))),
                              e
                            );
                          }
                          function At() {
                            var e;
                            return null === (e = Rt()) && (e = Tt()), e;
                          }
                          function Rt() {
                            var e, t, i, r;
                            return (
                              (r = s),
                              "handling" === n.substr(s, 8).toLowerCase()
                                ? ((e = n.substr(s, 8)), (s += 8))
                                : ((e = null), 0 === o && u('"handling"')),
                              null !== e && null !== (t = M())
                                ? ("optional" === n.substr(s, 8).toLowerCase()
                                    ? ((i = n.substr(s, 8)), (s += 8))
                                    : ((i = null), 0 === o && u('"optional"')),
                                  null === i &&
                                    ("required" === n.substr(s, 8).toLowerCase()
                                      ? ((i = n.substr(s, 8)), (s += 8))
                                      : ((i = null),
                                        0 === o && u('"required"')),
                                    null === i && (i = x())),
                                  null !== i
                                    ? (e = [e, t, i])
                                    : ((e = null), (s = r)))
                                : ((e = null), (s = r)),
                              e
                            );
                          }
                          function It() {
                            var e, t, n, i, r, o, l, a;
                            if (((l = s), null !== (e = kt())))
                              if (null !== (t = U()))
                                if (null !== (n = Nt())) {
                                  for (
                                    i = [],
                                      a = s,
                                      null !== (r = V()) && null !== (o = Ut())
                                        ? (r = [r, o])
                                        : ((r = null), (s = a));
                                    null !== r;

                                  )
                                    i.push(r),
                                      (a = s),
                                      null !== (r = V()) && null !== (o = Ut())
                                        ? (r = [r, o])
                                        : ((r = null), (s = a));
                                  null !== i
                                    ? (e = [e, t, n, i])
                                    : ((e = null), (s = l));
                                } else (e = null), (s = l);
                              else (e = null), (s = l);
                            else (e = null), (s = l);
                            return e;
                          }
                          function kt() {
                            var e;
                            return null === (e = Ot()) && (e = xt()), e;
                          }
                          function Ot() {
                            var e;
                            return (
                              "text" === n.substr(s, 4).toLowerCase()
                                ? ((e = n.substr(s, 4)), (s += 4))
                                : ((e = null), 0 === o && u('"text"')),
                              null === e &&
                                ("image" === n.substr(s, 5).toLowerCase()
                                  ? ((e = n.substr(s, 5)), (s += 5))
                                  : ((e = null), 0 === o && u('"image"')),
                                null === e &&
                                  ("audio" === n.substr(s, 5).toLowerCase()
                                    ? ((e = n.substr(s, 5)), (s += 5))
                                    : ((e = null), 0 === o && u('"audio"')),
                                  null === e &&
                                    ("video" === n.substr(s, 5).toLowerCase()
                                      ? ((e = n.substr(s, 5)), (s += 5))
                                      : ((e = null), 0 === o && u('"video"')),
                                    null === e &&
                                      ("application" ===
                                      n.substr(s, 11).toLowerCase()
                                        ? ((e = n.substr(s, 11)), (s += 11))
                                        : ((e = null),
                                          0 === o && u('"application"')),
                                      null === e && (e = Pt()))))),
                              e
                            );
                          }
                          function xt() {
                            var e;
                            return (
                              "message" === n.substr(s, 7).toLowerCase()
                                ? ((e = n.substr(s, 7)), (s += 7))
                                : ((e = null), 0 === o && u('"message"')),
                              null === e &&
                                ("multipart" === n.substr(s, 9).toLowerCase()
                                  ? ((e = n.substr(s, 9)), (s += 9))
                                  : ((e = null), 0 === o && u('"multipart"')),
                                null === e && (e = Pt())),
                              e
                            );
                          }
                          function Pt() {
                            var e;
                            return null === (e = x()) && (e = Dt()), e;
                          }
                          function Dt() {
                            var e, t, i;
                            return (
                              (i = s),
                              "x-" === n.substr(s, 2).toLowerCase()
                                ? ((e = n.substr(s, 2)), (s += 2))
                                : ((e = null), 0 === o && u('"x-"')),
                              null !== e && null !== (t = x())
                                ? (e = [e, t])
                                : ((e = null), (s = i)),
                              e
                            );
                          }
                          function Nt() {
                            var e;
                            return null === (e = Pt()) && (e = x()), e;
                          }
                          function Ut() {
                            var e, t, n, i;
                            return (
                              (i = s),
                              null !== (e = x()) &&
                              null !== (t = M()) &&
                              null !== (n = Mt())
                                ? (e = [e, t, n])
                                : ((e = null), (s = i)),
                              e
                            );
                          }
                          function Mt() {
                            var e;
                            return null === (e = x()) && (e = z()), e;
                          }
                          function Lt() {
                            var e, t, n, i;
                            if (((n = s), null !== (t = d())))
                              for (e = []; null !== t; ) e.push(t), (t = d());
                            else e = null;
                            return (
                              null !== e &&
                                ((i = e),
                                (e = void (Fn.value = parseInt(i.join(""))))),
                              null === e && (s = n),
                              e
                            );
                          }
                          function jt() {
                            var e, t, i, r, l, a;
                            if (((l = s), null !== (e = P()))) {
                              for (
                                t = [],
                                  a = s,
                                  46 === n.charCodeAt(s)
                                    ? ((i = "."), s++)
                                    : ((i = null), 0 === o && u('"."')),
                                  null !== i && null !== (r = P())
                                    ? (i = [i, r])
                                    : ((i = null), (s = a));
                                null !== i;

                              )
                                t.push(i),
                                  (a = s),
                                  46 === n.charCodeAt(s)
                                    ? ((i = "."), s++)
                                    : ((i = null), 0 === o && u('"."')),
                                  null !== i && null !== (r = P())
                                    ? (i = [i, r])
                                    : ((i = null), (s = a));
                              null !== t ? (e = [e, t]) : ((e = null), (s = l));
                            } else (e = null), (s = l);
                            return e;
                          }
                          function qt() {
                            var e;
                            return null === (e = Ht()) && (e = Tt()), e;
                          }
                          function Ht() {
                            var e, t, i, r, l, a;
                            return (
                              (r = s),
                              (l = s),
                              "tag" === n.substr(s, 3).toLowerCase()
                                ? ((e = n.substr(s, 3)), (s += 3))
                                : ((e = null), 0 === o && u('"tag"')),
                              null !== e &&
                              null !== (t = M()) &&
                              null !== (i = x())
                                ? (e = [e, t, i])
                                : ((e = null), (s = l)),
                              null !== e &&
                                ((a = e[2]), (e = void (Fn.tag = a))),
                              null === e && (s = r),
                              e
                            );
                          }
                          function Ft() {
                            var e, t, i, r, l, a, c, d;
                            if (
                              ((c = s),
                              "digest" === n.substr(s, 6).toLowerCase()
                                ? ((e = n.substr(s, 6)), (s += 6))
                                : ((e = null), 0 === o && u('"Digest"')),
                              null !== e)
                            )
                              if (null !== (t = w()))
                                if (null !== (i = $t())) {
                                  for (
                                    r = [],
                                      d = s,
                                      null !== (l = F()) && null !== (a = $t())
                                        ? (l = [l, a])
                                        : ((l = null), (s = d));
                                    null !== l;

                                  )
                                    r.push(l),
                                      (d = s),
                                      null !== (l = F()) && null !== (a = $t())
                                        ? (l = [l, a])
                                        : ((l = null), (s = d));
                                  null !== r
                                    ? (e = [e, t, i, r])
                                    : ((e = null), (s = c));
                                } else (e = null), (s = c);
                              else (e = null), (s = c);
                            else (e = null), (s = c);
                            return null === e && (e = Vt()), e;
                          }
                          function Vt() {
                            var e, t, n, i, r, o, l, a;
                            if (((l = s), null !== (e = x())))
                              if (null !== (t = w()))
                                if (null !== (n = Bt())) {
                                  for (
                                    i = [],
                                      a = s,
                                      null !== (r = F()) && null !== (o = Bt())
                                        ? (r = [r, o])
                                        : ((r = null), (s = a));
                                    null !== r;

                                  )
                                    i.push(r),
                                      (a = s),
                                      null !== (r = F()) && null !== (o = Bt())
                                        ? (r = [r, o])
                                        : ((r = null), (s = a));
                                  null !== i
                                    ? (e = [e, t, n, i])
                                    : ((e = null), (s = l));
                                } else (e = null), (s = l);
                              else (e = null), (s = l);
                            else (e = null), (s = l);
                            return e;
                          }
                          function Bt() {
                            var e, t, n, i;
                            return (
                              (i = s),
                              null !== (e = x()) && null !== (t = M())
                                ? (null === (n = x()) && (n = z()),
                                  null !== n
                                    ? (e = [e, t, n])
                                    : ((e = null), (s = i)))
                                : ((e = null), (s = i)),
                              e
                            );
                          }
                          function $t() {
                            var e;
                            return (
                              null === (e = Wt()) &&
                                null === (e = zt()) &&
                                null === (e = Kt()) &&
                                null === (e = Xt()) &&
                                null === (e = Qt()) &&
                                null === (e = Zt()) &&
                                null === (e = en()) &&
                                (e = Bt()),
                              e
                            );
                          }
                          function Wt() {
                            var e, t, i, r;
                            return (
                              (r = s),
                              "realm" === n.substr(s, 5).toLowerCase()
                                ? ((e = n.substr(s, 5)), (s += 5))
                                : ((e = null), 0 === o && u('"realm"')),
                              null !== e &&
                              null !== (t = M()) &&
                              null !== (i = Gt())
                                ? (e = [e, t, i])
                                : ((e = null), (s = r)),
                              e
                            );
                          }
                          function Gt() {
                            var e, t, n;
                            return (
                              (t = s),
                              null !== (e = Y()) &&
                                ((n = e), (e = void (Fn.realm = n))),
                              null === e && (s = t),
                              e
                            );
                          }
                          function zt() {
                            var e, t, i, r, l, a, c, d, h;
                            if (
                              ((d = s),
                              "domain" === n.substr(s, 6).toLowerCase()
                                ? ((e = n.substr(s, 6)), (s += 6))
                                : ((e = null), 0 === o && u('"domain"')),
                              null !== e)
                            )
                              if (null !== (t = M()))
                                if (null !== (i = $()))
                                  if (null !== (r = Yt())) {
                                    if (((l = []), (h = s), null !== (c = v())))
                                      for (a = []; null !== c; )
                                        a.push(c), (c = v());
                                    else a = null;
                                    for (
                                      null !== a && null !== (c = Yt())
                                        ? (a = [a, c])
                                        : ((a = null), (s = h));
                                      null !== a;

                                    ) {
                                      if (
                                        (l.push(a), (h = s), null !== (c = v()))
                                      )
                                        for (a = []; null !== c; )
                                          a.push(c), (c = v());
                                      else a = null;
                                      null !== a && null !== (c = Yt())
                                        ? (a = [a, c])
                                        : ((a = null), (s = h));
                                    }
                                    null !== l && null !== (a = W())
                                      ? (e = [e, t, i, r, l, a])
                                      : ((e = null), (s = d));
                                  } else (e = null), (s = d);
                                else (e = null), (s = d);
                              else (e = null), (s = d);
                            else (e = null), (s = d);
                            return e;
                          }
                          function Yt() {
                            var e;
                            return null === (e = je()) && (e = Fe()), e;
                          }
                          function Kt() {
                            var e, t, i, r;
                            return (
                              (r = s),
                              "nonce" === n.substr(s, 5).toLowerCase()
                                ? ((e = n.substr(s, 5)), (s += 5))
                                : ((e = null), 0 === o && u('"nonce"')),
                              null !== e &&
                              null !== (t = M()) &&
                              null !== (i = Jt())
                                ? (e = [e, t, i])
                                : ((e = null), (s = r)),
                              e
                            );
                          }
                          function Jt() {
                            var e, t, n;
                            return (
                              (t = s),
                              null !== (e = Y()) &&
                                ((n = e), (e = void (Fn.nonce = n))),
                              null === e && (s = t),
                              e
                            );
                          }
                          function Xt() {
                            var e, t, i, r, l, a;
                            return (
                              (r = s),
                              (l = s),
                              "opaque" === n.substr(s, 6).toLowerCase()
                                ? ((e = n.substr(s, 6)), (s += 6))
                                : ((e = null), 0 === o && u('"opaque"')),
                              null !== e &&
                              null !== (t = M()) &&
                              null !== (i = Y())
                                ? (e = [e, t, i])
                                : ((e = null), (s = l)),
                              null !== e &&
                                ((a = e[2]), (e = void (Fn.opaque = a))),
                              null === e && (s = r),
                              e
                            );
                          }
                          function Qt() {
                            var e, t, i, r, l;
                            return (
                              (r = s),
                              "stale" === n.substr(s, 5).toLowerCase()
                                ? ((e = n.substr(s, 5)), (s += 5))
                                : ((e = null), 0 === o && u('"stale"')),
                              null !== e && null !== (t = M())
                                ? ((l = s),
                                  "true" === n.substr(s, 4).toLowerCase()
                                    ? ((i = n.substr(s, 4)), (s += 4))
                                    : ((i = null), 0 === o && u('"true"')),
                                  null !== i && (i = void (Fn.stale = !0)),
                                  null === i && (s = l),
                                  null === i &&
                                    ((l = s),
                                    "false" === n.substr(s, 5).toLowerCase()
                                      ? ((i = n.substr(s, 5)), (s += 5))
                                      : ((i = null), 0 === o && u('"false"')),
                                    null !== i && (i = void (Fn.stale = !1)),
                                    null === i && (s = l)),
                                  null !== i
                                    ? (e = [e, t, i])
                                    : ((e = null), (s = r)))
                                : ((e = null), (s = r)),
                              e
                            );
                          }
                          function Zt() {
                            var e, t, i, r, l, a;
                            return (
                              (r = s),
                              (l = s),
                              "algorithm" === n.substr(s, 9).toLowerCase()
                                ? ((e = n.substr(s, 9)), (s += 9))
                                : ((e = null), 0 === o && u('"algorithm"')),
                              null !== e && null !== (t = M())
                                ? ("md5" === n.substr(s, 3).toLowerCase()
                                    ? ((i = n.substr(s, 3)), (s += 3))
                                    : ((i = null), 0 === o && u('"MD5"')),
                                  null === i &&
                                    ("md5-sess" === n.substr(s, 8).toLowerCase()
                                      ? ((i = n.substr(s, 8)), (s += 8))
                                      : ((i = null),
                                        0 === o && u('"MD5-sess"')),
                                    null === i && (i = x())),
                                  null !== i
                                    ? (e = [e, t, i])
                                    : ((e = null), (s = l)))
                                : ((e = null), (s = l)),
                              null !== e &&
                                ((a = e[2]),
                                (e = void (Fn.algorithm = a.toUpperCase()))),
                              null === e && (s = r),
                              e
                            );
                          }
                          function en() {
                            var e, t, i, r, l, a, c, d, h, _;
                            if (
                              ((d = s),
                              "qop" === n.substr(s, 3).toLowerCase()
                                ? ((e = n.substr(s, 3)), (s += 3))
                                : ((e = null), 0 === o && u('"qop"')),
                              null !== e)
                            )
                              if (null !== (t = M()))
                                if (null !== (i = $())) {
                                  if (((h = s), null !== (r = tn()))) {
                                    for (
                                      l = [],
                                        _ = s,
                                        44 === n.charCodeAt(s)
                                          ? ((a = ","), s++)
                                          : ((a = null), 0 === o && u('","')),
                                        null !== a && null !== (c = tn())
                                          ? (a = [a, c])
                                          : ((a = null), (s = _));
                                      null !== a;

                                    )
                                      l.push(a),
                                        (_ = s),
                                        44 === n.charCodeAt(s)
                                          ? ((a = ","), s++)
                                          : ((a = null), 0 === o && u('","')),
                                        null !== a && null !== (c = tn())
                                          ? (a = [a, c])
                                          : ((a = null), (s = _));
                                    null !== l
                                      ? (r = [r, l])
                                      : ((r = null), (s = h));
                                  } else (r = null), (s = h);
                                  null !== r && null !== (l = W())
                                    ? (e = [e, t, i, r, l])
                                    : ((e = null), (s = d));
                                } else (e = null), (s = d);
                              else (e = null), (s = d);
                            else (e = null), (s = d);
                            return e;
                          }
                          function tn() {
                            var e, t, i;
                            return (
                              (t = s),
                              "auth-int" === n.substr(s, 8).toLowerCase()
                                ? ((e = n.substr(s, 8)), (s += 8))
                                : ((e = null), 0 === o && u('"auth-int"')),
                              null === e &&
                                ("auth" === n.substr(s, 4).toLowerCase()
                                  ? ((e = n.substr(s, 4)), (s += 4))
                                  : ((e = null), 0 === o && u('"auth"')),
                                null === e && (e = x())),
                              null !== e &&
                                ((i = e),
                                Fn.qop || (Fn.qop = []),
                                (e = void Fn.qop.push(i.toLowerCase()))),
                              null === e && (s = t),
                              e
                            );
                          }
                          function nn() {
                            var e, t, n, i, r, o, l;
                            if (((r = s), (o = s), null !== (e = pt()))) {
                              for (
                                t = [],
                                  l = s,
                                  null !== (n = V()) && null !== (i = Tt())
                                    ? (n = [n, i])
                                    : ((n = null), (s = l));
                                null !== n;

                              )
                                t.push(n),
                                  (l = s),
                                  null !== (n = V()) && null !== (i = Tt())
                                    ? (n = [n, i])
                                    : ((n = null), (s = l));
                              null !== t ? (e = [e, t]) : ((e = null), (s = o));
                            } else (e = null), (s = o);
                            return (
                              null !== e &&
                                (e = (function (e) {
                                  var t;
                                  Fn.multi_header || (Fn.multi_header = []);
                                  try {
                                    (t = new Hn(
                                      Fn.uri,
                                      Fn.display_name,
                                      Fn.params
                                    )),
                                      delete Fn.uri,
                                      delete Fn.display_name,
                                      delete Fn.params;
                                  } catch (e) {
                                    t = null;
                                  }
                                  Fn.multi_header.push({
                                    possition: s,
                                    offset: e,
                                    parsed: t,
                                  });
                                })(r)),
                              null === e && (s = r),
                              e
                            );
                          }
                          function rn() {
                            var e;
                            return null === (e = sn()) && (e = Tt()), e;
                          }
                          function sn() {
                            var e, t, i, r, l, a, c;
                            if (
                              ((l = s),
                              (a = s),
                              "cause" === n.substr(s, 5).toLowerCase()
                                ? ((e = n.substr(s, 5)), (s += 5))
                                : ((e = null), 0 === o && u('"cause"')),
                              null !== e)
                            )
                              if (null !== (t = M())) {
                                if (null !== (r = d()))
                                  for (i = []; null !== r; )
                                    i.push(r), (r = d());
                                else i = null;
                                null !== i
                                  ? (e = [e, t, i])
                                  : ((e = null), (s = a));
                              } else (e = null), (s = a);
                            else (e = null), (s = a);
                            return (
                              null !== e &&
                                ((c = e[2]),
                                (e = void (Fn.cause = parseInt(c.join(""))))),
                              null === e && (s = l),
                              e
                            );
                          }
                          function on() {
                            var e, t, n, i, r, o;
                            if (((r = s), null !== (e = pt()))) {
                              for (
                                t = [],
                                  o = s,
                                  null !== (n = V()) && null !== (i = Tt())
                                    ? (n = [n, i])
                                    : ((n = null), (s = o));
                                null !== n;

                              )
                                t.push(n),
                                  (o = s),
                                  null !== (n = V()) && null !== (i = Tt())
                                    ? (n = [n, i])
                                    : ((n = null), (s = o));
                              null !== t ? (e = [e, t]) : ((e = null), (s = r));
                            } else (e = null), (s = r);
                            return e;
                          }
                          function ln() {
                            var e, t;
                            return (
                              (t = s),
                              "active" === n.substr(s, 6).toLowerCase()
                                ? ((e = n.substr(s, 6)), (s += 6))
                                : ((e = null), 0 === o && u('"active"')),
                              null === e &&
                                ("pending" === n.substr(s, 7).toLowerCase()
                                  ? ((e = n.substr(s, 7)), (s += 7))
                                  : ((e = null), 0 === o && u('"pending"')),
                                null === e &&
                                  ("terminated" ===
                                  n.substr(s, 10).toLowerCase()
                                    ? ((e = n.substr(s, 10)), (s += 10))
                                    : ((e = null),
                                      0 === o && u('"terminated"')),
                                  null === e && (e = x()))),
                              null !== e &&
                                (e = (function (e) {
                                  Fn.state = n.substring(s, e);
                                })(t)),
                              null === e && (s = t),
                              e
                            );
                          }
                          function an() {
                            var e, t, i, r, l, a, c, d;
                            return (
                              (r = s),
                              (l = s),
                              "reason" === n.substr(s, 6).toLowerCase()
                                ? ((e = n.substr(s, 6)), (s += 6))
                                : ((e = null), 0 === o && u('"reason"')),
                              null !== e &&
                              null !== (t = M()) &&
                              null !== (i = un())
                                ? (e = [e, t, i])
                                : ((e = null), (s = l)),
                              null !== e &&
                                (e = void (
                                  void 0 !== (a = e[2]) && (Fn.reason = a)
                                )),
                              null === e && (s = r),
                              null === e &&
                                ((r = s),
                                (l = s),
                                "expires" === n.substr(s, 7).toLowerCase()
                                  ? ((e = n.substr(s, 7)), (s += 7))
                                  : ((e = null), 0 === o && u('"expires"')),
                                null !== e &&
                                null !== (t = M()) &&
                                null !== (i = bt())
                                  ? (e = [e, t, i])
                                  : ((e = null), (s = l)),
                                null !== e &&
                                  (e = void (
                                    void 0 !== (d = e[2]) && (Fn.expires = d)
                                  )),
                                null === e && (s = r),
                                null === e &&
                                  ((r = s),
                                  (l = s),
                                  "retry_after" ===
                                  n.substr(s, 11).toLowerCase()
                                    ? ((e = n.substr(s, 11)), (s += 11))
                                    : ((e = null),
                                      0 === o && u('"retry_after"')),
                                  null !== e &&
                                  null !== (t = M()) &&
                                  null !== (i = bt())
                                    ? (e = [e, t, i])
                                    : ((e = null), (s = l)),
                                  null !== e &&
                                    (e = void (
                                      void 0 !== (c = e[2]) &&
                                      (Fn.retry_after = c)
                                    )),
                                  null === e && (s = r),
                                  null === e && (e = Tt()))),
                              e
                            );
                          }
                          function un() {
                            var e;
                            return (
                              "deactivated" === n.substr(s, 11).toLowerCase()
                                ? ((e = n.substr(s, 11)), (s += 11))
                                : ((e = null), 0 === o && u('"deactivated"')),
                              null === e &&
                                ("probation" === n.substr(s, 9).toLowerCase()
                                  ? ((e = n.substr(s, 9)), (s += 9))
                                  : ((e = null), 0 === o && u('"probation"')),
                                null === e &&
                                  ("rejected" === n.substr(s, 8).toLowerCase()
                                    ? ((e = n.substr(s, 8)), (s += 8))
                                    : ((e = null), 0 === o && u('"rejected"')),
                                  null === e &&
                                    ("timeout" === n.substr(s, 7).toLowerCase()
                                      ? ((e = n.substr(s, 7)), (s += 7))
                                      : ((e = null), 0 === o && u('"timeout"')),
                                    null === e &&
                                      ("giveup" === n.substr(s, 6).toLowerCase()
                                        ? ((e = n.substr(s, 6)), (s += 6))
                                        : ((e = null),
                                          0 === o && u('"giveup"')),
                                      null === e &&
                                        ("noresource" ===
                                        n.substr(s, 10).toLowerCase()
                                          ? ((e = n.substr(s, 10)), (s += 10))
                                          : ((e = null),
                                            0 === o && u('"noresource"')),
                                        null === e &&
                                          ("invariant" ===
                                          n.substr(s, 9).toLowerCase()
                                            ? ((e = n.substr(s, 9)), (s += 9))
                                            : ((e = null),
                                              0 === o && u('"invariant"')),
                                          null === e && (e = x()))))))),
                              e
                            );
                          }
                          function cn() {
                            var e;
                            return null === (e = Ht()) && (e = Tt()), e;
                          }
                          function dn() {
                            var e, t, n, i, r, o, l, a;
                            if (((l = s), null !== (e = yn())))
                              if (null !== (t = w()))
                                if (null !== (n = Sn())) {
                                  for (
                                    i = [],
                                      a = s,
                                      null !== (r = V()) && null !== (o = hn())
                                        ? (r = [r, o])
                                        : ((r = null), (s = a));
                                    null !== r;

                                  )
                                    i.push(r),
                                      (a = s),
                                      null !== (r = V()) && null !== (o = hn())
                                        ? (r = [r, o])
                                        : ((r = null), (s = a));
                                  null !== i
                                    ? (e = [e, t, n, i])
                                    : ((e = null), (s = l));
                                } else (e = null), (s = l);
                              else (e = null), (s = l);
                            else (e = null), (s = l);
                            return e;
                          }
                          function hn() {
                            var e;
                            return (
                              null === (e = _n()) &&
                                null === (e = fn()) &&
                                null === (e = gn()) &&
                                null === (e = pn()) &&
                                null === (e = vn()) &&
                                (e = Tt()),
                              e
                            );
                          }
                          function _n() {
                            var e, t, i, r, l, a;
                            return (
                              (r = s),
                              (l = s),
                              "ttl" === n.substr(s, 3).toLowerCase()
                                ? ((e = n.substr(s, 3)), (s += 3))
                                : ((e = null), 0 === o && u('"ttl"')),
                              null !== e &&
                              null !== (t = M()) &&
                              null !== (i = En())
                                ? (e = [e, t, i])
                                : ((e = null), (s = l)),
                              null !== e &&
                                ((a = e[2]), (e = void (Fn.ttl = a))),
                              null === e && (s = r),
                              e
                            );
                          }
                          function fn() {
                            var e, t, i, r, l, a;
                            return (
                              (r = s),
                              (l = s),
                              "maddr" === n.substr(s, 5).toLowerCase()
                                ? ((e = n.substr(s, 5)), (s += 5))
                                : ((e = null), 0 === o && u('"maddr"')),
                              null !== e &&
                              null !== (t = M()) &&
                              null !== (i = le())
                                ? (e = [e, t, i])
                                : ((e = null), (s = l)),
                              null !== e &&
                                ((a = e[2]), (e = void (Fn.maddr = a))),
                              null === e && (s = r),
                              e
                            );
                          }
                          function gn() {
                            var e, t, i, r, l, a;
                            return (
                              (r = s),
                              (l = s),
                              "received" === n.substr(s, 8).toLowerCase()
                                ? ((e = n.substr(s, 8)), (s += 8))
                                : ((e = null), 0 === o && u('"received"')),
                              null !== e && null !== (t = M())
                                ? (null === (i = ge()) && (i = he()),
                                  null !== i
                                    ? (e = [e, t, i])
                                    : ((e = null), (s = l)))
                                : ((e = null), (s = l)),
                              null !== e &&
                                ((a = e[2]), (e = void (Fn.received = a))),
                              null === e && (s = r),
                              e
                            );
                          }
                          function pn() {
                            var e, t, i, r, l, a;
                            return (
                              (r = s),
                              (l = s),
                              "branch" === n.substr(s, 6).toLowerCase()
                                ? ((e = n.substr(s, 6)), (s += 6))
                                : ((e = null), 0 === o && u('"branch"')),
                              null !== e &&
                              null !== (t = M()) &&
                              null !== (i = x())
                                ? (e = [e, t, i])
                                : ((e = null), (s = l)),
                              null !== e &&
                                ((a = e[2]), (e = void (Fn.branch = a))),
                              null === e && (s = r),
                              e
                            );
                          }
                          function vn() {
                            var e, t, i, r, l;
                            return (
                              (r = s),
                              "rport" === n.substr(s, 5).toLowerCase()
                                ? ((e = n.substr(s, 5)), (s += 5))
                                : ((e = null), 0 === o && u('"rport"')),
                              null !== e
                                ? ((l = s),
                                  null !== (t = M()) && null !== (i = mn())
                                    ? (t = [t, i])
                                    : ((t = null), (s = l)),
                                  null !== (t = null !== t ? t : "")
                                    ? (e = [e, t])
                                    : ((e = null), (s = r)))
                                : ((e = null), (s = r)),
                              e
                            );
                          }
                          function mn() {
                            var e, t, n, i, r, o, l, a;
                            return (
                              (o = s),
                              (l = s),
                              null !== (e = null !== (e = d()) ? e : "") &&
                              null !== (t = null !== (t = d()) ? t : "") &&
                              null !== (n = null !== (n = d()) ? n : "") &&
                              null !== (i = null !== (i = d()) ? i : "") &&
                              null !== (r = null !== (r = d()) ? r : "")
                                ? (e = [e, t, n, i, r])
                                : ((e = null), (s = l)),
                              null !== e &&
                                ((a = e),
                                (e = void (Fn.rport = parseInt(a.join(""))))),
                              null === e && (s = o),
                              e
                            );
                          }
                          function yn() {
                            var e, t, n, i, r, o;
                            return (
                              (o = s),
                              null !== (e = Cn()) &&
                              null !== (t = U()) &&
                              null !== (n = x()) &&
                              null !== (i = U()) &&
                              null !== (r = bn())
                                ? (e = [e, t, n, i, r])
                                : ((e = null), (s = o)),
                              e
                            );
                          }
                          function Cn() {
                            var e, t, i;
                            return (
                              (t = s),
                              "sip" === n.substr(s, 3).toLowerCase()
                                ? ((e = n.substr(s, 3)), (s += 3))
                                : ((e = null), 0 === o && u('"SIP"')),
                              null === e && (e = x()),
                              null !== e &&
                                ((i = e), (e = void (Fn.protocol = i))),
                              null === e && (s = t),
                              e
                            );
                          }
                          function bn() {
                            var e, t, i;
                            return (
                              (t = s),
                              "udp" === n.substr(s, 3).toLowerCase()
                                ? ((e = n.substr(s, 3)), (s += 3))
                                : ((e = null), 0 === o && u('"UDP"')),
                              null === e &&
                                ("tcp" === n.substr(s, 3).toLowerCase()
                                  ? ((e = n.substr(s, 3)), (s += 3))
                                  : ((e = null), 0 === o && u('"TCP"')),
                                null === e &&
                                  ("tls" === n.substr(s, 3).toLowerCase()
                                    ? ((e = n.substr(s, 3)), (s += 3))
                                    : ((e = null), 0 === o && u('"TLS"')),
                                  null === e &&
                                    ("sctp" === n.substr(s, 4).toLowerCase()
                                      ? ((e = n.substr(s, 4)), (s += 4))
                                      : ((e = null), 0 === o && u('"SCTP"')),
                                    null === e && (e = x())))),
                              null !== e &&
                                ((i = e), (e = void (Fn.transport = i))),
                              null === e && (s = t),
                              e
                            );
                          }
                          function Sn() {
                            var e, t, n, i, r;
                            return (
                              (i = s),
                              null !== (e = Tn())
                                ? ((r = s),
                                  null !== (t = B()) && null !== (n = wn())
                                    ? (t = [t, n])
                                    : ((t = null), (s = r)),
                                  null !== (t = null !== t ? t : "")
                                    ? (e = [e, t])
                                    : ((e = null), (s = i)))
                                : ((e = null), (s = i)),
                              e
                            );
                          }
                          function Tn() {
                            var e, t;
                            return (
                              (t = s),
                              null === (e = ge()) &&
                                null === (e = de()) &&
                                (e = ae()),
                              null !== e &&
                                (e = (function (e) {
                                  Fn.host = n.substring(s, e);
                                })(t)),
                              null === e && (s = t),
                              e
                            );
                          }
                          function wn() {
                            var e, t, n, i, r, o, l, a;
                            return (
                              (o = s),
                              (l = s),
                              null !== (e = null !== (e = d()) ? e : "") &&
                              null !== (t = null !== (t = d()) ? t : "") &&
                              null !== (n = null !== (n = d()) ? n : "") &&
                              null !== (i = null !== (i = d()) ? i : "") &&
                              null !== (r = null !== (r = d()) ? r : "")
                                ? (e = [e, t, n, i, r])
                                : ((e = null), (s = l)),
                              null !== e &&
                                ((a = e),
                                (e = void (Fn.port = parseInt(a.join(""))))),
                              null === e && (s = o),
                              e
                            );
                          }
                          function En() {
                            var e, t, n, i, r;
                            return (
                              (i = s),
                              (r = s),
                              null !== (e = d()) &&
                              null !== (t = null !== (t = d()) ? t : "") &&
                              null !== (n = null !== (n = d()) ? n : "")
                                ? (e = [e, t, n])
                                : ((e = null), (s = r)),
                              null !== e && (e = parseInt(e.join(""))),
                              null === e && (s = i),
                              e
                            );
                          }
                          function An() {
                            var e, t, n;
                            return (
                              (t = s),
                              null !== (e = bt()) &&
                                ((n = e), (e = void (Fn.expires = n))),
                              null === e && (s = t),
                              e
                            );
                          }
                          function Rn() {
                            var e;
                            return null === (e = In()) && (e = Tt()), e;
                          }
                          function In() {
                            var e, t, i, r, l, a;
                            return (
                              (r = s),
                              (l = s),
                              "refresher" === n.substr(s, 9).toLowerCase()
                                ? ((e = n.substr(s, 9)), (s += 9))
                                : ((e = null), 0 === o && u('"refresher"')),
                              null !== e && null !== (t = M())
                                ? ("uac" === n.substr(s, 3).toLowerCase()
                                    ? ((i = n.substr(s, 3)), (s += 3))
                                    : ((i = null), 0 === o && u('"uac"')),
                                  null === i &&
                                    ("uas" === n.substr(s, 3).toLowerCase()
                                      ? ((i = n.substr(s, 3)), (s += 3))
                                      : ((i = null), 0 === o && u('"uas"'))),
                                  null !== i
                                    ? (e = [e, t, i])
                                    : ((e = null), (s = l)))
                                : ((e = null), (s = l)),
                              null !== e &&
                                ((a = e[2]),
                                (e = void (Fn.refresher = a.toLowerCase()))),
                              null === e && (s = r),
                              e
                            );
                          }
                          function kn() {
                            var e, t;
                            for (
                              e = [],
                                null === (t = I()) &&
                                  null === (t = O()) &&
                                  (t = w());
                              null !== t;

                            )
                              e.push(t),
                                null === (t = I()) &&
                                  null === (t = O()) &&
                                  (t = w());
                            return e;
                          }
                          function On() {
                            var e, t, i, r, l, a, c, d, h, _, f;
                            return (
                              (_ = s),
                              (f = s),
                              null !== (e = Pn())
                                ? (45 === n.charCodeAt(s)
                                    ? ((t = "-"), s++)
                                    : ((t = null), 0 === o && u('"-"')),
                                  null !== t && null !== (i = xn())
                                    ? (45 === n.charCodeAt(s)
                                        ? ((r = "-"), s++)
                                        : ((r = null), 0 === o && u('"-"')),
                                      null !== r && null !== (l = xn())
                                        ? (45 === n.charCodeAt(s)
                                            ? ((a = "-"), s++)
                                            : ((a = null), 0 === o && u('"-"')),
                                          null !== a && null !== (c = xn())
                                            ? (45 === n.charCodeAt(s)
                                                ? ((d = "-"), s++)
                                                : ((d = null),
                                                  0 === o && u('"-"')),
                                              null !== d && null !== (h = Dn())
                                                ? (e = [
                                                    e,
                                                    t,
                                                    i,
                                                    r,
                                                    l,
                                                    a,
                                                    c,
                                                    d,
                                                    h,
                                                  ])
                                                : ((e = null), (s = f)))
                                            : ((e = null), (s = f)))
                                        : ((e = null), (s = f)))
                                    : ((e = null), (s = f)))
                                : ((e = null), (s = f)),
                              null !== e &&
                                (e = (function (e, t) {
                                  Fn = n.substring(s + 5, e);
                                })(_, e[0])),
                              null === e && (s = _),
                              e
                            );
                          }
                          function xn() {
                            var e, t, n, i, r;
                            return (
                              (r = s),
                              null !== (e = _()) &&
                              null !== (t = _()) &&
                              null !== (n = _()) &&
                              null !== (i = _())
                                ? (e = [e, t, n, i])
                                : ((e = null), (s = r)),
                              e
                            );
                          }
                          function Pn() {
                            var e, t, n;
                            return (
                              (n = s),
                              null !== (e = xn()) && null !== (t = xn())
                                ? (e = [e, t])
                                : ((e = null), (s = n)),
                              e
                            );
                          }
                          function Dn() {
                            var e, t, n, i;
                            return (
                              (i = s),
                              null !== (e = xn()) &&
                              null !== (t = xn()) &&
                              null !== (n = xn())
                                ? (e = [e, t, n])
                                : ((e = null), (s = i)),
                              e
                            );
                          }
                          function Nn() {
                            var e, t, i, r, l, a;
                            return (
                              (r = s),
                              (l = s),
                              null !== (e = D())
                                ? ((a = s),
                                  64 === n.charCodeAt(s)
                                    ? ((t = "@"), s++)
                                    : ((t = null), 0 === o && u('"@"')),
                                  null !== t && null !== (i = D())
                                    ? (t = [t, i])
                                    : ((t = null), (s = a)),
                                  null !== (t = null !== t ? t : "")
                                    ? (e = [e, t])
                                    : ((e = null), (s = l)))
                                : ((e = null), (s = l)),
                              null !== e &&
                                (e = (function (e) {
                                  Fn.call_id = n.substring(s, e);
                                })(r)),
                              null === e && (s = r),
                              e
                            );
                          }
                          function Un() {
                            var e;
                            return (
                              null === (e = Mn()) &&
                                null === (e = Ln()) &&
                                null === (e = jn()) &&
                                (e = Tt()),
                              e
                            );
                          }
                          function Mn() {
                            var e, t, i, r, l, a;
                            return (
                              (r = s),
                              (l = s),
                              "to-tag" === n.substr(s, 6)
                                ? ((e = "to-tag"), (s += 6))
                                : ((e = null), 0 === o && u('"to-tag"')),
                              null !== e &&
                              null !== (t = M()) &&
                              null !== (i = x())
                                ? (e = [e, t, i])
                                : ((e = null), (s = l)),
                              null !== e &&
                                ((a = e[2]), (e = void (Fn.to_tag = a))),
                              null === e && (s = r),
                              e
                            );
                          }
                          function Ln() {
                            var e, t, i, r, l, a;
                            return (
                              (r = s),
                              (l = s),
                              "from-tag" === n.substr(s, 8)
                                ? ((e = "from-tag"), (s += 8))
                                : ((e = null), 0 === o && u('"from-tag"')),
                              null !== e &&
                              null !== (t = M()) &&
                              null !== (i = x())
                                ? (e = [e, t, i])
                                : ((e = null), (s = l)),
                              null !== e &&
                                ((a = e[2]), (e = void (Fn.from_tag = a))),
                              null === e && (s = r),
                              e
                            );
                          }
                          function jn() {
                            var e, t;
                            return (
                              (t = s),
                              "early-only" === n.substr(s, 10)
                                ? ((e = "early-only"), (s += 10))
                                : ((e = null), 0 === o && u('"early-only"')),
                              null !== e && (e = void (Fn.early_only = !0)),
                              null === e && (s = t),
                              e
                            );
                          }
                          var qn = e("./URI"),
                            Hn = e("./NameAddrHeader"),
                            Fn = {};
                          if (null === r[i]() || s !== n.length) {
                            var Vn = Math.max(s, l),
                              Bn = Vn < n.length ? n.charAt(Vn) : null,
                              $n = (function () {
                                for (
                                  var e = 1, t = 1, i = !1, r = 0;
                                  r < Math.max(s, l);
                                  r++
                                ) {
                                  var o = n.charAt(r);
                                  "\n" === o
                                    ? (i || e++, (t = 1), (i = !1))
                                    : "\r" === o ||
                                      "\u2028" === o ||
                                      "\u2029" === o
                                    ? (e++, (t = 1), (i = !0))
                                    : (t++, (i = !1));
                                }
                                return { line: e, column: t };
                              })();
                            return (
                              new this.SyntaxError(
                                (function (e) {
                                  e.sort();
                                  for (
                                    var t = null, n = [], i = 0;
                                    i < e.length;
                                    i++
                                  )
                                    e[i] !== t && (n.push(e[i]), (t = e[i]));
                                  return n;
                                })(a),
                                Bn,
                                Vn,
                                $n.line,
                                $n.column
                              ),
                              -1
                            );
                          }
                          return Fn;
                        },
                        toSource: function () {
                          return this._source;
                        },
                        SyntaxError: function (e, n, i, r, s) {
                          (this.name = "SyntaxError"),
                            (this.expected = e),
                            (this.found = n),
                            (this.message = (function (e, n) {
                              var i;
                              switch (e.length) {
                                case 0:
                                  i = "end of input";
                                  break;
                                case 1:
                                  i = e[0];
                                  break;
                                default:
                                  i =
                                    e.slice(0, e.length - 1).join(", ") +
                                    " or " +
                                    e[e.length - 1];
                              }
                              return (
                                "Expected " +
                                i +
                                " but " +
                                (n ? t(n) : "end of input") +
                                " found."
                              );
                            })(e, n)),
                            (this.offset = i),
                            (this.line = r),
                            (this.column = s);
                        },
                      };
                      return (n.SyntaxError.prototype = Error.prototype), n;
                    })();
                  },
                  { "./NameAddrHeader": 11, "./URI": 29 },
                ],
                8: [
                  function (e, t, n) {
                    "use strict";
                    var i = e("../package.json"),
                      r = e("./Constants"),
                      s = e("./Exceptions"),
                      o = e("./Utils"),
                      l = e("./UA"),
                      a = e("./URI"),
                      u = e("./NameAddrHeader"),
                      c = e("./Grammar"),
                      d = e("./WebSocketInterface"),
                      h = e("./SIPMessage"),
                      _ = e("./Parser"),
                      f = e("./DigestAuthentication");
                    e("debug")("JsSIP")("version %s", i.version),
                      (t.exports = {
                        C: r,
                        Exceptions: s,
                        Utils: o,
                        UA: l,
                        URI: a,
                        NameAddrHeader: u,
                        WebSocketInterface: d,
                        Grammar: c,
                        SIPMessage: h,
                        Parser: _,
                        DigestAuthentication: f,
                        debug: e("debug"),
                        get name() {
                          return i.title;
                        },
                        get version() {
                          return i.version;
                        },
                      });
                  },
                  {
                    "../package.json": 42,
                    "./Constants": 2,
                    "./DigestAuthentication": 5,
                    "./Exceptions": 6,
                    "./Grammar": 7,
                    "./NameAddrHeader": 11,
                    "./Parser": 14,
                    "./SIPMessage": 22,
                    "./UA": 28,
                    "./URI": 29,
                    "./Utils": 30,
                    "./WebSocketInterface": 31,
                    debug: 34,
                  },
                ],
                9: [
                  function (e, t, n) {
                    "use strict";
                    var i = e("debug"),
                      r = "JsSIP";
                    t.exports = (function () {
                      function e(t) {
                        (function (e, t) {
                          if (!(e instanceof t))
                            throw new TypeError(
                              "Cannot call a class as a function"
                            );
                        })(this, e),
                          t
                            ? ((this._debug = i.default(
                                "".concat(r, ":").concat(t)
                              )),
                              (this._warn = i.default(
                                "".concat(r, ":WARN:").concat(t)
                              )),
                              (this._error = i.default(
                                "".concat(r, ":ERROR:").concat(t)
                              )))
                            : ((this._debug = i.default(r)),
                              (this._warn = i.default("".concat(r, ":WARN"))),
                              (this._error = i.default(
                                "".concat(r, ":ERROR")
                              ))),
                          (this._debug.log = console.info.bind(console)),
                          (this._warn.log = console.warn.bind(console)),
                          (this._error.log = console.error.bind(console));
                      }
                      return (
                        (t = e),
                        (n = [
                          {
                            key: "debug",
                            get: function () {
                              return this._debug;
                            },
                          },
                          {
                            key: "warn",
                            get: function () {
                              return this._warn;
                            },
                          },
                          {
                            key: "error",
                            get: function () {
                              return this._error;
                            },
                          },
                        ]) &&
                          (function (e, t) {
                            for (var n = 0; n < t.length; n++) {
                              var i = t[n];
                              (i.enumerable = i.enumerable || !1),
                                (i.configurable = !0),
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(e, i.key, i);
                            }
                          })(t.prototype, n),
                        Object.defineProperty(t, "prototype", { writable: !1 }),
                        e
                      );
                      var t, n;
                    })();
                  },
                  { debug: 34 },
                ],
                10: [
                  function (e, t, n) {
                    "use strict";
                    function i(e) {
                      return (
                        (i =
                          "function" == typeof Symbol &&
                          "symbol" == typeof Symbol.iterator
                            ? function (e) {
                                return typeof e;
                              }
                            : function (e) {
                                return e &&
                                  "function" == typeof Symbol &&
                                  e.constructor === Symbol &&
                                  e !== Symbol.prototype
                                  ? "symbol"
                                  : typeof e;
                              }),
                        i(e)
                      );
                    }
                    function r(e, t) {
                      return (
                        (r = Object.setPrototypeOf
                          ? Object.setPrototypeOf.bind()
                          : function (e, t) {
                              return (e.__proto__ = t), e;
                            }),
                        r(e, t)
                      );
                    }
                    function s(e) {
                      var t = (function () {
                        if ("undefined" == typeof Reflect || !Reflect.construct)
                          return !1;
                        if (Reflect.construct.sham) return !1;
                        if ("function" == typeof Proxy) return !0;
                        try {
                          return (
                            Boolean.prototype.valueOf.call(
                              Reflect.construct(Boolean, [], function () {})
                            ),
                            !0
                          );
                        } catch (e) {
                          return !1;
                        }
                      })();
                      return function () {
                        var n,
                          r = o(e);
                        if (t) {
                          var s = o(this).constructor;
                          n = Reflect.construct(r, arguments, s);
                        } else n = r.apply(this, arguments);
                        return (function (e, t) {
                          if (
                            t &&
                            ("object" === i(t) || "function" == typeof t)
                          )
                            return t;
                          if (void 0 !== t)
                            throw new TypeError(
                              "Derived constructors may only return object or undefined"
                            );
                          return (function (e) {
                            if (void 0 === e)
                              throw new ReferenceError(
                                "this hasn't been initialised - super() hasn't been called"
                              );
                            return e;
                          })(e);
                        })(this, n);
                      };
                    }
                    function o(e) {
                      return (
                        (o = Object.setPrototypeOf
                          ? Object.getPrototypeOf.bind()
                          : function (e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                            }),
                        o(e)
                      );
                    }
                    var l = e("events").EventEmitter,
                      a = e("./Logger"),
                      u = e("./Constants"),
                      c = e("./SIPMessage"),
                      d = e("./Utils"),
                      h = e("./RequestSender"),
                      _ = e("./Exceptions"),
                      f = e("./URI"),
                      g = new a("Message");
                    t.exports = (function (e) {
                      !(function (e, t) {
                        if ("function" != typeof t && null !== t)
                          throw new TypeError(
                            "Super expression must either be null or a function"
                          );
                        (e.prototype = Object.create(t && t.prototype, {
                          constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0,
                          },
                        })),
                          Object.defineProperty(e, "prototype", {
                            writable: !1,
                          }),
                          t && r(e, t);
                      })(o, e);
                      var t,
                        n,
                        i = s(o);
                      function o(e) {
                        var t;
                        return (
                          (function (e, t) {
                            if (!(e instanceof t))
                              throw new TypeError(
                                "Cannot call a class as a function"
                              );
                          })(this, o),
                          ((t = i.call(this))._ua = e),
                          (t._request = null),
                          (t._closed = !1),
                          (t._direction = null),
                          (t._local_identity = null),
                          (t._remote_identity = null),
                          (t._is_replied = !1),
                          (t._data = {}),
                          t
                        );
                      }
                      return (
                        (t = o),
                        (n = [
                          {
                            key: "direction",
                            get: function () {
                              return this._direction;
                            },
                          },
                          {
                            key: "local_identity",
                            get: function () {
                              return this._local_identity;
                            },
                          },
                          {
                            key: "remote_identity",
                            get: function () {
                              return this._remote_identity;
                            },
                          },
                          {
                            key: "send",
                            value: function (e, t) {
                              var n = this,
                                i =
                                  arguments.length > 2 &&
                                  void 0 !== arguments[2]
                                    ? arguments[2]
                                    : {},
                                r = e;
                              if (void 0 === e || void 0 === t)
                                throw new TypeError("Not enough arguments");
                              if (!(e = this._ua.normalizeTarget(e)))
                                throw new TypeError(
                                  "Invalid target: ".concat(r)
                                );
                              var s = d.cloneArray(i.extraHeaders),
                                o = d.cloneObject(i.eventHandlers),
                                l = i.contentType || "text/plain",
                                a = {};
                              for (var _ in (i.fromUserName &&
                                ((a.from_uri = new f(
                                  "sip",
                                  i.fromUserName,
                                  this._ua.configuration.uri.host
                                )),
                                s.push(
                                  "P-Preferred-Identity: ".concat(
                                    this._ua.configuration.uri.toString()
                                  )
                                )),
                              i.fromDisplayName &&
                                (a.from_display_name = i.fromDisplayName),
                              o))
                                Object.prototype.hasOwnProperty.call(o, _) &&
                                  this.on(_, o[_]);
                              s.push("Content-Type: ".concat(l)),
                                (this._request = new c.OutgoingRequest(
                                  u.MESSAGE,
                                  e,
                                  this._ua,
                                  a,
                                  s
                                )),
                                t && (this._request.body = t);
                              var g = new h(this._ua, this._request, {
                                onRequestTimeout: function () {
                                  n._onRequestTimeout();
                                },
                                onTransportError: function () {
                                  n._onTransportError();
                                },
                                onReceiveResponse: function (e) {
                                  n._receiveResponse(e);
                                },
                              });
                              this._newMessage("local", this._request),
                                g.send();
                            },
                          },
                          {
                            key: "init_incoming",
                            value: function (e) {
                              (this._request = e),
                                this._newMessage("remote", e),
                                this._is_replied ||
                                  ((this._is_replied = !0), e.reply(200)),
                                this._close();
                            },
                          },
                          {
                            key: "accept",
                            value: function () {
                              var e =
                                  arguments.length > 0 &&
                                  void 0 !== arguments[0]
                                    ? arguments[0]
                                    : {},
                                t = d.cloneArray(e.extraHeaders),
                                n = e.body;
                              if ("incoming" !== this._direction)
                                throw new _.NotSupportedError(
                                  '"accept" not supported for outgoing Message'
                                );
                              if (this._is_replied)
                                throw new Error(
                                  "incoming Message already replied"
                                );
                              (this._is_replied = !0),
                                this._request.reply(200, null, t, n);
                            },
                          },
                          {
                            key: "reject",
                            value: function () {
                              var e =
                                  arguments.length > 0 &&
                                  void 0 !== arguments[0]
                                    ? arguments[0]
                                    : {},
                                t = e.status_code || 480,
                                n = e.reason_phrase,
                                i = d.cloneArray(e.extraHeaders),
                                r = e.body;
                              if ("incoming" !== this._direction)
                                throw new _.NotSupportedError(
                                  '"reject" not supported for outgoing Message'
                                );
                              if (this._is_replied)
                                throw new Error(
                                  "incoming Message already replied"
                                );
                              if (t < 300 || t >= 700)
                                throw new TypeError(
                                  "Invalid status_code: ".concat(t)
                                );
                              (this._is_replied = !0),
                                this._request.reply(t, n, i, r);
                            },
                          },
                          {
                            key: "_receiveResponse",
                            value: function (e) {
                              if (!this._closed)
                                switch (!0) {
                                  case /^1[0-9]{2}$/.test(e.status_code):
                                    break;
                                  case /^2[0-9]{2}$/.test(e.status_code):
                                    this._succeeded("remote", e);
                                    break;
                                  default:
                                    var t = d.sipErrorCause(e.status_code);
                                    this._failed("remote", e, t);
                                }
                            },
                          },
                          {
                            key: "_onRequestTimeout",
                            value: function () {
                              this._closed ||
                                this._failed(
                                  "system",
                                  null,
                                  u.causes.REQUEST_TIMEOUT
                                );
                            },
                          },
                          {
                            key: "_onTransportError",
                            value: function () {
                              this._closed ||
                                this._failed(
                                  "system",
                                  null,
                                  u.causes.CONNECTION_ERROR
                                );
                            },
                          },
                          {
                            key: "_close",
                            value: function () {
                              (this._closed = !0),
                                this._ua.destroyMessage(this);
                            },
                          },
                          {
                            key: "_newMessage",
                            value: function (e, t) {
                              "remote" === e
                                ? ((this._direction = "incoming"),
                                  (this._local_identity = t.to),
                                  (this._remote_identity = t.from))
                                : "local" === e &&
                                  ((this._direction = "outgoing"),
                                  (this._local_identity = t.from),
                                  (this._remote_identity = t.to)),
                                this._ua.newMessage(this, {
                                  originator: e,
                                  message: this,
                                  request: t,
                                });
                            },
                          },
                          {
                            key: "_failed",
                            value: function (e, t, n) {
                              g.debug("MESSAGE failed"),
                                this._close(),
                                g.debug('emit "failed"'),
                                this.emit("failed", {
                                  originator: e,
                                  response: t || null,
                                  cause: n,
                                });
                            },
                          },
                          {
                            key: "_succeeded",
                            value: function (e, t) {
                              g.debug("MESSAGE succeeded"),
                                this._close(),
                                g.debug('emit "succeeded"'),
                                this.emit("succeeded", {
                                  originator: e,
                                  response: t,
                                });
                            },
                          },
                        ]),
                        n &&
                          (function (e, t) {
                            for (var n = 0; n < t.length; n++) {
                              var i = t[n];
                              (i.enumerable = i.enumerable || !1),
                                (i.configurable = !0),
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(e, i.key, i);
                            }
                          })(t.prototype, n),
                        Object.defineProperty(t, "prototype", { writable: !1 }),
                        o
                      );
                    })(l);
                  },
                  {
                    "./Constants": 2,
                    "./Exceptions": 6,
                    "./Logger": 9,
                    "./RequestSender": 21,
                    "./SIPMessage": 22,
                    "./URI": 29,
                    "./Utils": 30,
                    events: 33,
                  },
                ],
                11: [
                  function (e, t, n) {
                    "use strict";
                    function i(e, t) {
                      for (var n = 0; n < t.length; n++) {
                        var i = t[n];
                        (i.enumerable = i.enumerable || !1),
                          (i.configurable = !0),
                          "value" in i && (i.writable = !0),
                          Object.defineProperty(e, i.key, i);
                      }
                    }
                    var r = e("./URI"),
                      s = e("./Grammar");
                    t.exports = (function () {
                      function e(t, n, i) {
                        if (
                          ((function (e, t) {
                            if (!(e instanceof t))
                              throw new TypeError(
                                "Cannot call a class as a function"
                              );
                          })(this, e),
                          !(t && t instanceof r))
                        )
                          throw new TypeError(
                            'missing or invalid "uri" parameter'
                          );
                        for (var s in ((this._uri = t),
                        (this._parameters = {}),
                        (this.display_name = n),
                        i))
                          Object.prototype.hasOwnProperty.call(i, s) &&
                            this.setParam(s, i[s]);
                      }
                      return (
                        (t = e),
                        (o = [
                          {
                            key: "parse",
                            value: function (e) {
                              return -1 !== (e = s.parse(e, "Name_Addr_Header"))
                                ? e
                                : void 0;
                            },
                          },
                        ]),
                        (n = [
                          {
                            key: "uri",
                            get: function () {
                              return this._uri;
                            },
                          },
                          {
                            key: "display_name",
                            get: function () {
                              return this._display_name;
                            },
                            set: function (e) {
                              this._display_name = 0 === e ? "0" : e;
                            },
                          },
                          {
                            key: "setParam",
                            value: function (e, t) {
                              e &&
                                (this._parameters[e.toLowerCase()] =
                                  null == t ? null : t.toString());
                            },
                          },
                          {
                            key: "getParam",
                            value: function (e) {
                              if (e) return this._parameters[e.toLowerCase()];
                            },
                          },
                          {
                            key: "hasParam",
                            value: function (e) {
                              if (e)
                                return !!this._parameters.hasOwnProperty(
                                  e.toLowerCase()
                                );
                            },
                          },
                          {
                            key: "deleteParam",
                            value: function (e) {
                              if (
                                ((e = e.toLowerCase()),
                                this._parameters.hasOwnProperty(e))
                              ) {
                                var t = this._parameters[e];
                                return delete this._parameters[e], t;
                              }
                            },
                          },
                          {
                            key: "clearParams",
                            value: function () {
                              this._parameters = {};
                            },
                          },
                          {
                            key: "clone",
                            value: function () {
                              return new e(
                                this._uri.clone(),
                                this._display_name,
                                JSON.parse(JSON.stringify(this._parameters))
                              );
                            },
                          },
                          {
                            key: "_quote",
                            value: function (e) {
                              return e
                                .replace(/\\/g, "\\\\")
                                .replace(/"/g, '\\"');
                            },
                          },
                          {
                            key: "toString",
                            value: function () {
                              var e = this._display_name
                                ? '"'.concat(
                                    this._quote(this._display_name),
                                    '" '
                                  )
                                : "";
                              for (var t in ((e += "<".concat(
                                this._uri.toString(),
                                ">"
                              )),
                              this._parameters))
                                Object.prototype.hasOwnProperty.call(
                                  this._parameters,
                                  t
                                ) &&
                                  ((e += ";".concat(t)),
                                  null !== this._parameters[t] &&
                                    (e += "=".concat(this._parameters[t])));
                              return e;
                            },
                          },
                        ]) && i(t.prototype, n),
                        o && i(t, o),
                        Object.defineProperty(t, "prototype", { writable: !1 }),
                        e
                      );
                      var t, n, o;
                    })();
                  },
                  { "./Grammar": 7, "./URI": 29 },
                ],
                12: [
                  function (e, t, n) {
                    "use strict";
                    function i(e) {
                      return (
                        (i =
                          "function" == typeof Symbol &&
                          "symbol" == typeof Symbol.iterator
                            ? function (e) {
                                return typeof e;
                              }
                            : function (e) {
                                return e &&
                                  "function" == typeof Symbol &&
                                  e.constructor === Symbol &&
                                  e !== Symbol.prototype
                                  ? "symbol"
                                  : typeof e;
                              }),
                        i(e)
                      );
                    }
                    function r(e, t) {
                      for (var n = 0; n < t.length; n++) {
                        var i = t[n];
                        (i.enumerable = i.enumerable || !1),
                          (i.configurable = !0),
                          "value" in i && (i.writable = !0),
                          Object.defineProperty(e, i.key, i);
                      }
                    }
                    function s(e, t) {
                      return (
                        (s = Object.setPrototypeOf
                          ? Object.setPrototypeOf.bind()
                          : function (e, t) {
                              return (e.__proto__ = t), e;
                            }),
                        s(e, t)
                      );
                    }
                    function o(e) {
                      var t = (function () {
                        if ("undefined" == typeof Reflect || !Reflect.construct)
                          return !1;
                        if (Reflect.construct.sham) return !1;
                        if ("function" == typeof Proxy) return !0;
                        try {
                          return (
                            Boolean.prototype.valueOf.call(
                              Reflect.construct(Boolean, [], function () {})
                            ),
                            !0
                          );
                        } catch (e) {
                          return !1;
                        }
                      })();
                      return function () {
                        var n,
                          r = a(e);
                        if (t) {
                          var s = a(this).constructor;
                          n = Reflect.construct(r, arguments, s);
                        } else n = r.apply(this, arguments);
                        return (function (e, t) {
                          if (
                            t &&
                            ("object" === i(t) || "function" == typeof t)
                          )
                            return t;
                          if (void 0 !== t)
                            throw new TypeError(
                              "Derived constructors may only return object or undefined"
                            );
                          return l(e);
                        })(this, n);
                      };
                    }
                    function l(e) {
                      if (void 0 === e)
                        throw new ReferenceError(
                          "this hasn't been initialised - super() hasn't been called"
                        );
                      return e;
                    }
                    function a(e) {
                      return (
                        (a = Object.setPrototypeOf
                          ? Object.getPrototypeOf.bind()
                          : function (e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                            }),
                        a(e)
                      );
                    }
                    var u = e("events").EventEmitter,
                      c = e("./Logger"),
                      d = e("./Constants"),
                      h = e("./Utils"),
                      _ = e("./Dialog"),
                      f = new c("Notifier"),
                      g = {
                        NOTIFY_RESPONSE_TIMEOUT: 0,
                        NOTIFY_TRANSPORT_ERROR: 1,
                        NOTIFY_NON_OK_RESPONSE: 2,
                        NOTIFY_FAILED_AUTHENTICATION: 3,
                        SEND_FINAL_NOTIFY: 4,
                        RECEIVE_UNSUBSCRIBE: 5,
                        SUBSCRIPTION_EXPIRED: 6,
                        STATE_PENDING: 0,
                        STATE_ACTIVE: 1,
                        STATE_TERMINATED: 2,
                      };
                    t.exports = (function (e) {
                      !(function (e, t) {
                        if ("function" != typeof t && null !== t)
                          throw new TypeError(
                            "Super expression must either be null or a function"
                          );
                        (e.prototype = Object.create(t && t.prototype, {
                          constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0,
                          },
                        })),
                          Object.defineProperty(e, "prototype", {
                            writable: !1,
                          }),
                          t && s(e, t);
                      })(u, e);
                      var t,
                        n,
                        i,
                        a = o(u);
                      function u(e, t, n, i) {
                        var r,
                          s = i.extraHeaders,
                          o = i.allowEvents,
                          c = i.pending;
                        if (
                          ((function (e, t) {
                            if (!(e instanceof t))
                              throw new TypeError(
                                "Cannot call a class as a function"
                              );
                          })(this, u),
                          f.debug("new"),
                          (r = a.call(this)),
                          !t)
                        )
                          throw new TypeError("subscribe is undefined");
                        if (!n) throw new TypeError("contentType is undefined");
                        (r._ua = e),
                          (r._initial_subscribe = t),
                          (r._expires_timestamp = null),
                          (r._expires_timer = null),
                          (r._state = c ? g.STATE_PENDING : g.STATE_ACTIVE),
                          (r._terminated_reason = null),
                          (r._terminated_retry_after = null),
                          (r.data = {}),
                          (r._dialog = null);
                        var d = t.getHeader("event");
                        (r._content_type = n),
                          (r._expires = parseInt(t.getHeader("expires"))),
                          (r._headers = h.cloneArray(s)),
                          r._headers.push("Event: ".concat(d)),
                          (r._contact = r._headers.find(function (e) {
                            return e.startsWith("Contact");
                          })),
                          r._contact ||
                            ((r._contact = "Contact: <sip:"
                              .concat(t.to.uri.user, "@")
                              .concat(
                                h.createRandomToken(12),
                                ".invalid;transport=ws>"
                              )),
                            r._headers.push(r._contact)),
                          o && r._headers.push("Allow-Events: ".concat(o)),
                          (r._target = t.from.uri.user),
                          (t.to_tag = h.newTag());
                        var p = new _(l(r), t, "UAS");
                        if (p.error)
                          throw (
                            (f.warn(p.error),
                            new Error("SUBSCRIBE missed Contact"))
                          );
                        return (
                          (r._dialog = p),
                          r._expires > 0 && r._setExpiresTimer(),
                          r
                        );
                      }
                      return (
                        (t = u),
                        (n = [
                          {
                            key: "C",
                            get: function () {
                              return g;
                            },
                          },
                          {
                            key: "receiveRequest",
                            value: function (e) {
                              if (e.method === d.SUBSCRIBE) {
                                var t = e.getHeader("expires");
                                null == t &&
                                  ((t = "900"),
                                  f.debug(
                                    "Missed expires header. Set by default ".concat(
                                      t
                                    )
                                  )),
                                  (this._expires = parseInt(t)),
                                  e.reply(200, null, [
                                    "Expires: ".concat(this._expires),
                                    "".concat(this._contact),
                                  ]);
                                var n = e.body,
                                  i = e.getHeader("content-type"),
                                  r = 0 === this._expires;
                                r || this._setExpiresTimer(),
                                  f.debug('emit "subscribe"'),
                                  this.emit("subscribe", r, e, n, i),
                                  r &&
                                    this._dialogTerminated(
                                      g.RECEIVE_UNSUBSCRIBE
                                    );
                              } else e.reply(405);
                            },
                          },
                          {
                            key: "start",
                            value: function () {
                              f.debug("start()"),
                                this.receiveRequest(this._initial_subscribe);
                            },
                          },
                          {
                            key: "setActiveState",
                            value: function () {
                              f.debug("setActiveState()"),
                                this._state === g.STATE_PENDING &&
                                  (this._state = g.STATE_ACTIVE);
                            },
                          },
                          {
                            key: "notify",
                            value: function () {
                              var e = this,
                                t =
                                  arguments.length > 0 &&
                                  void 0 !== arguments[0]
                                    ? arguments[0]
                                    : null;
                              if ((f.debug("notify()"), this._dialog)) {
                                var n = this._stateNumberToString(this._state);
                                if (this._state !== g.STATE_TERMINATED) {
                                  var i = Math.floor(
                                    (this._expires_timestamp -
                                      new Date().getTime()) /
                                      1e3
                                  );
                                  i < 0 && (i = 0),
                                    (n += ";expires=".concat(i));
                                } else
                                  this._terminated_reason &&
                                    (n += ";reason=".concat(
                                      this._terminated_reason
                                    )),
                                    null !== this._terminated_retry_after &&
                                      (n += ";retry-after=".concat(
                                        this._terminated_retry_after
                                      ));
                                var r = this._headers.slice();
                                r.push("Subscription-State: ".concat(n)),
                                  t &&
                                    r.push(
                                      "Content-Type: ".concat(
                                        this._content_type
                                      )
                                    ),
                                  this._dialog.sendRequest(d.NOTIFY, {
                                    body: t,
                                    extraHeaders: r,
                                    eventHandlers: {
                                      onRequestTimeout: function () {
                                        e._dialogTerminated(
                                          g.NOTIFY_RESPONSE_TIMEOUT
                                        );
                                      },
                                      onTransportError: function () {
                                        e._dialogTerminated(
                                          g.NOTIFY_TRANSPORT_ERROR
                                        );
                                      },
                                      onErrorResponse: function (t) {
                                        401 === t.status_code ||
                                        407 === t.status_code
                                          ? e._dialogTerminated(
                                              g.NOTIFY_FAILED_AUTHENTICATION
                                            )
                                          : e._dialogTerminated(
                                              g.NOTIFY_NON_OK_RESPONSE
                                            );
                                      },
                                      onDialogError: function () {
                                        e._dialogTerminated(
                                          g.NOTIFY_NON_OK_RESPONSE
                                        );
                                      },
                                    },
                                  });
                              } else f.warn("final notify has sent");
                            },
                          },
                          {
                            key: "terminate",
                            value: function () {
                              var e =
                                  arguments.length > 0 &&
                                  void 0 !== arguments[0]
                                    ? arguments[0]
                                    : null,
                                t =
                                  arguments.length > 1 &&
                                  void 0 !== arguments[1]
                                    ? arguments[1]
                                    : null,
                                n =
                                  arguments.length > 2 &&
                                  void 0 !== arguments[2]
                                    ? arguments[2]
                                    : null;
                              f.debug("terminate()"),
                                (this._state = g.STATE_TERMINATED),
                                (this._terminated_reason = t),
                                (this._terminated_retry_after = n),
                                this.notify(e),
                                this._dialogTerminated(g.SEND_FINAL_NOTIFY);
                            },
                          },
                          {
                            key: "state",
                            get: function () {
                              return this._state;
                            },
                          },
                          {
                            key: "id",
                            get: function () {
                              return this._dialog ? this._dialog.id : null;
                            },
                          },
                          {
                            key: "_dialogTerminated",
                            value: function (e) {
                              if (this._dialog) {
                                (this._state = g.STATE_TERMINATED),
                                  clearTimeout(this._expires_timer),
                                  this._dialog &&
                                    (this._dialog.terminate(),
                                    (this._dialog = null));
                                var t = e === g.SUBSCRIPTION_EXPIRED;
                                f.debug(
                                  'emit "terminated" code='
                                    .concat(e, ", send final notify=")
                                    .concat(t)
                                ),
                                  this.emit("terminated", e, t);
                              }
                            },
                          },
                          {
                            key: "_setExpiresTimer",
                            value: function () {
                              var e = this;
                              (this._expires_timestamp =
                                new Date().getTime() + 1e3 * this._expires),
                                clearTimeout(this._expires_timer),
                                (this._expires_timer = setTimeout(function () {
                                  e._dialog &&
                                    ((e._terminated_reason = "timeout"),
                                    e.notify(),
                                    e._dialogTerminated(
                                      g.SUBSCRIPTION_EXPIRED
                                    ));
                                }, 1e3 * this._expires));
                            },
                          },
                          {
                            key: "_stateNumberToString",
                            value: function (e) {
                              switch (e) {
                                case g.STATE_PENDING:
                                  return "pending";
                                case g.STATE_ACTIVE:
                                  return "active";
                                case g.STATE_TERMINATED:
                                  return "terminated";
                                default:
                                  throw new TypeError("wrong state value");
                              }
                            },
                          },
                        ]),
                        (i = [
                          {
                            key: "C",
                            get: function () {
                              return g;
                            },
                          },
                        ]),
                        n && r(t.prototype, n),
                        i && r(t, i),
                        Object.defineProperty(t, "prototype", { writable: !1 }),
                        u
                      );
                    })(u);
                  },
                  {
                    "./Constants": 2,
                    "./Dialog": 3,
                    "./Logger": 9,
                    "./Utils": 30,
                    events: 33,
                  },
                ],
                13: [
                  function (e, t, n) {
                    "use strict";
                    function i(e) {
                      return (
                        (i =
                          "function" == typeof Symbol &&
                          "symbol" == typeof Symbol.iterator
                            ? function (e) {
                                return typeof e;
                              }
                            : function (e) {
                                return e &&
                                  "function" == typeof Symbol &&
                                  e.constructor === Symbol &&
                                  e !== Symbol.prototype
                                  ? "symbol"
                                  : typeof e;
                              }),
                        i(e)
                      );
                    }
                    function r(e, t) {
                      return (
                        (r = Object.setPrototypeOf
                          ? Object.setPrototypeOf.bind()
                          : function (e, t) {
                              return (e.__proto__ = t), e;
                            }),
                        r(e, t)
                      );
                    }
                    function s(e) {
                      var t = (function () {
                        if ("undefined" == typeof Reflect || !Reflect.construct)
                          return !1;
                        if (Reflect.construct.sham) return !1;
                        if ("function" == typeof Proxy) return !0;
                        try {
                          return (
                            Boolean.prototype.valueOf.call(
                              Reflect.construct(Boolean, [], function () {})
                            ),
                            !0
                          );
                        } catch (e) {
                          return !1;
                        }
                      })();
                      return function () {
                        var n,
                          r = o(e);
                        if (t) {
                          var s = o(this).constructor;
                          n = Reflect.construct(r, arguments, s);
                        } else n = r.apply(this, arguments);
                        return (function (e, t) {
                          if (
                            t &&
                            ("object" === i(t) || "function" == typeof t)
                          )
                            return t;
                          if (void 0 !== t)
                            throw new TypeError(
                              "Derived constructors may only return object or undefined"
                            );
                          return (function (e) {
                            if (void 0 === e)
                              throw new ReferenceError(
                                "this hasn't been initialised - super() hasn't been called"
                              );
                            return e;
                          })(e);
                        })(this, n);
                      };
                    }
                    function o(e) {
                      return (
                        (o = Object.setPrototypeOf
                          ? Object.getPrototypeOf.bind()
                          : function (e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                            }),
                        o(e)
                      );
                    }
                    var l = e("events").EventEmitter,
                      a = e("./Logger"),
                      u = e("./Constants"),
                      c = e("./SIPMessage"),
                      d = e("./Utils"),
                      h = e("./RequestSender"),
                      _ = e("./Exceptions"),
                      f = new a("Options");
                    t.exports = (function (e) {
                      !(function (e, t) {
                        if ("function" != typeof t && null !== t)
                          throw new TypeError(
                            "Super expression must either be null or a function"
                          );
                        (e.prototype = Object.create(t && t.prototype, {
                          constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0,
                          },
                        })),
                          Object.defineProperty(e, "prototype", {
                            writable: !1,
                          }),
                          t && r(e, t);
                      })(o, e);
                      var t,
                        n,
                        i = s(o);
                      function o(e) {
                        var t;
                        return (
                          (function (e, t) {
                            if (!(e instanceof t))
                              throw new TypeError(
                                "Cannot call a class as a function"
                              );
                          })(this, o),
                          ((t = i.call(this))._ua = e),
                          (t._request = null),
                          (t._closed = !1),
                          (t._direction = null),
                          (t._local_identity = null),
                          (t._remote_identity = null),
                          (t._is_replied = !1),
                          (t._data = {}),
                          t
                        );
                      }
                      return (
                        (t = o),
                        (n = [
                          {
                            key: "direction",
                            get: function () {
                              return this._direction;
                            },
                          },
                          {
                            key: "local_identity",
                            get: function () {
                              return this._local_identity;
                            },
                          },
                          {
                            key: "remote_identity",
                            get: function () {
                              return this._remote_identity;
                            },
                          },
                          {
                            key: "send",
                            value: function (e, t) {
                              var n = this,
                                i =
                                  arguments.length > 2 &&
                                  void 0 !== arguments[2]
                                    ? arguments[2]
                                    : {},
                                r = e;
                              if (void 0 === e)
                                throw new TypeError(
                                  "A target is required for OPTIONS"
                                );
                              if (!(e = this._ua.normalizeTarget(e)))
                                throw new TypeError(
                                  "Invalid target: ".concat(r)
                                );
                              var s = d.cloneArray(i.extraHeaders),
                                o = d.cloneObject(i.eventHandlers),
                                l = i.contentType || "application/sdp";
                              for (var a in o)
                                Object.prototype.hasOwnProperty.call(o, a) &&
                                  this.on(a, o[a]);
                              s.push("Content-Type: ".concat(l)),
                                (this._request = new c.OutgoingRequest(
                                  u.OPTIONS,
                                  e,
                                  this._ua,
                                  null,
                                  s
                                )),
                                t && (this._request.body = t);
                              var _ = new h(this._ua, this._request, {
                                onRequestTimeout: function () {
                                  n._onRequestTimeout();
                                },
                                onTransportError: function () {
                                  n._onTransportError();
                                },
                                onReceiveResponse: function (e) {
                                  n._receiveResponse(e);
                                },
                              });
                              this._newOptions("local", this._request),
                                _.send();
                            },
                          },
                          {
                            key: "init_incoming",
                            value: function (e) {
                              (this._request = e),
                                this._newOptions("remote", e),
                                this._is_replied ||
                                  ((this._is_replied = !0), e.reply(200)),
                                this._close();
                            },
                          },
                          {
                            key: "accept",
                            value: function () {
                              var e =
                                  arguments.length > 0 &&
                                  void 0 !== arguments[0]
                                    ? arguments[0]
                                    : {},
                                t = d.cloneArray(e.extraHeaders),
                                n = e.body;
                              if ("incoming" !== this._direction)
                                throw new _.NotSupportedError(
                                  '"accept" not supported for outgoing Options'
                                );
                              if (this._is_replied)
                                throw new Error(
                                  "incoming Options already replied"
                                );
                              (this._is_replied = !0),
                                this._request.reply(200, null, t, n);
                            },
                          },
                          {
                            key: "reject",
                            value: function () {
                              var e =
                                  arguments.length > 0 &&
                                  void 0 !== arguments[0]
                                    ? arguments[0]
                                    : {},
                                t = e.status_code || 480,
                                n = e.reason_phrase,
                                i = d.cloneArray(e.extraHeaders),
                                r = e.body;
                              if ("incoming" !== this._direction)
                                throw new _.NotSupportedError(
                                  '"reject" not supported for outgoing Options'
                                );
                              if (this._is_replied)
                                throw new Error(
                                  "incoming Options already replied"
                                );
                              if (t < 300 || t >= 700)
                                throw new TypeError(
                                  "Invalid status_code: ".concat(t)
                                );
                              (this._is_replied = !0),
                                this._request.reply(t, n, i, r);
                            },
                          },
                          {
                            key: "_receiveResponse",
                            value: function (e) {
                              if (!this._closed)
                                switch (!0) {
                                  case /^1[0-9]{2}$/.test(e.status_code):
                                    break;
                                  case /^2[0-9]{2}$/.test(e.status_code):
                                    this._succeeded("remote", e);
                                    break;
                                  default:
                                    var t = d.sipErrorCause(e.status_code);
                                    this._failed("remote", e, t);
                                }
                            },
                          },
                          {
                            key: "_onRequestTimeout",
                            value: function () {
                              this._closed ||
                                this._failed(
                                  "system",
                                  null,
                                  u.causes.REQUEST_TIMEOUT
                                );
                            },
                          },
                          {
                            key: "_onTransportError",
                            value: function () {
                              this._closed ||
                                this._failed(
                                  "system",
                                  null,
                                  u.causes.CONNECTION_ERROR
                                );
                            },
                          },
                          {
                            key: "_close",
                            value: function () {
                              (this._closed = !0),
                                this._ua.destroyMessage(this);
                            },
                          },
                          {
                            key: "_newOptions",
                            value: function (e, t) {
                              "remote" === e
                                ? ((this._direction = "incoming"),
                                  (this._local_identity = t.to),
                                  (this._remote_identity = t.from))
                                : "local" === e &&
                                  ((this._direction = "outgoing"),
                                  (this._local_identity = t.from),
                                  (this._remote_identity = t.to)),
                                this._ua.newOptions(this, {
                                  originator: e,
                                  message: this,
                                  request: t,
                                });
                            },
                          },
                          {
                            key: "_failed",
                            value: function (e, t, n) {
                              f.debug("OPTIONS failed"),
                                this._close(),
                                f.debug('emit "failed"'),
                                this.emit("failed", {
                                  originator: e,
                                  response: t || null,
                                  cause: n,
                                });
                            },
                          },
                          {
                            key: "_succeeded",
                            value: function (e, t) {
                              f.debug("OPTIONS succeeded"),
                                this._close(),
                                f.debug('emit "succeeded"'),
                                this.emit("succeeded", {
                                  originator: e,
                                  response: t,
                                });
                            },
                          },
                        ]),
                        n &&
                          (function (e, t) {
                            for (var n = 0; n < t.length; n++) {
                              var i = t[n];
                              (i.enumerable = i.enumerable || !1),
                                (i.configurable = !0),
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(e, i.key, i);
                            }
                          })(t.prototype, n),
                        Object.defineProperty(t, "prototype", { writable: !1 }),
                        o
                      );
                    })(l);
                  },
                  {
                    "./Constants": 2,
                    "./Exceptions": 6,
                    "./Logger": 9,
                    "./RequestSender": 21,
                    "./SIPMessage": 22,
                    "./Utils": 30,
                    events: 33,
                  },
                ],
                14: [
                  function (e, t, n) {
                    "use strict";
                    function i(e, t) {
                      var n =
                        ("undefined" != typeof Symbol && e[Symbol.iterator]) ||
                        e["@@iterator"];
                      if (!n) {
                        if (
                          Array.isArray(e) ||
                          (n = (function (e, t) {
                            if (e) {
                              if ("string" == typeof e) return r(e, t);
                              var n = Object.prototype.toString
                                .call(e)
                                .slice(8, -1);
                              return (
                                "Object" === n &&
                                  e.constructor &&
                                  (n = e.constructor.name),
                                "Map" === n || "Set" === n
                                  ? Array.from(e)
                                  : "Arguments" === n ||
                                    /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(
                                      n
                                    )
                                  ? r(e, t)
                                  : void 0
                              );
                            }
                          })(e)) ||
                          (t && e && "number" == typeof e.length)
                        ) {
                          n && (e = n);
                          var i = 0,
                            s = function () {};
                          return {
                            s,
                            n: function () {
                              return i >= e.length
                                ? { done: !0 }
                                : { done: !1, value: e[i++] };
                            },
                            e: function (e) {
                              throw e;
                            },
                            f: s,
                          };
                        }
                        throw new TypeError(
                          "Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
                        );
                      }
                      var o,
                        l = !0,
                        a = !1;
                      return {
                        s: function () {
                          n = n.call(e);
                        },
                        n: function () {
                          var e = n.next();
                          return (l = e.done), e;
                        },
                        e: function (e) {
                          (a = !0), (o = e);
                        },
                        f: function () {
                          try {
                            l || null == n.return || n.return();
                          } finally {
                            if (a) throw o;
                          }
                        },
                      };
                    }
                    function r(e, t) {
                      (null == t || t > e.length) && (t = e.length);
                      for (var n = 0, i = new Array(t); n < t; n++) i[n] = e[n];
                      return i;
                    }
                    var s = e("./Logger"),
                      o = e("./Grammar"),
                      l = e("./SIPMessage"),
                      a = new s("Parser");
                    function u(e, t) {
                      var n = t,
                        i = 0,
                        r = 0;
                      if (e.substring(n, n + 2).match(/(^\r\n)/)) return -2;
                      for (; 0 === i; ) {
                        if (-1 === (r = e.indexOf("\r\n", n))) return r;
                        !e.substring(r + 2, r + 4).match(/(^\r\n)/) &&
                        e.charAt(r + 2).match(/(^\s+)/)
                          ? (n = r + 2)
                          : (i = r);
                      }
                      return i;
                    }
                    function c(e, t, n, r) {
                      var s,
                        a = t.indexOf(":", n),
                        u = t.substring(n, a).trim(),
                        c = t.substring(a + 1, r).trim();
                      switch (u.toLowerCase()) {
                        case "via":
                        case "v":
                          e.addHeader("via", c),
                            1 === e.getHeaders("via").length
                              ? (s = e.parseHeader("Via")) &&
                                ((e.via = s), (e.via_branch = s.branch))
                              : (s = 0);
                          break;
                        case "from":
                        case "f":
                          e.setHeader("from", c),
                            (s = e.parseHeader("from")) &&
                              ((e.from = s), (e.from_tag = s.getParam("tag")));
                          break;
                        case "to":
                        case "t":
                          e.setHeader("to", c),
                            (s = e.parseHeader("to")) &&
                              ((e.to = s), (e.to_tag = s.getParam("tag")));
                          break;
                        case "record-route":
                          if (-1 === (s = o.parse(c, "Record_Route")))
                            s = void 0;
                          else {
                            var d,
                              h = i(s);
                            try {
                              for (h.s(); !(d = h.n()).done; ) {
                                var _ = d.value;
                                e.addHeader(
                                  "record-route",
                                  c.substring(_.possition, _.offset)
                                ),
                                  (e.headers["Record-Route"][
                                    e.getHeaders("record-route").length - 1
                                  ].parsed = _.parsed);
                              }
                            } catch (e) {
                              h.e(e);
                            } finally {
                              h.f();
                            }
                          }
                          break;
                        case "call-id":
                        case "i":
                          e.setHeader("call-id", c),
                            (s = e.parseHeader("call-id")) && (e.call_id = c);
                          break;
                        case "contact":
                        case "m":
                          if (-1 === (s = o.parse(c, "Contact"))) s = void 0;
                          else {
                            var f,
                              g = i(s);
                            try {
                              for (g.s(); !(f = g.n()).done; ) {
                                var p = f.value;
                                e.addHeader(
                                  "contact",
                                  c.substring(p.possition, p.offset)
                                ),
                                  (e.headers.Contact[
                                    e.getHeaders("contact").length - 1
                                  ].parsed = p.parsed);
                              }
                            } catch (e) {
                              g.e(e);
                            } finally {
                              g.f();
                            }
                          }
                          break;
                        case "content-length":
                        case "l":
                          e.setHeader("content-length", c),
                            (s = e.parseHeader("content-length"));
                          break;
                        case "content-type":
                        case "c":
                          e.setHeader("content-type", c),
                            (s = e.parseHeader("content-type"));
                          break;
                        case "cseq":
                          e.setHeader("cseq", c),
                            (s = e.parseHeader("cseq")) && (e.cseq = s.value),
                            e instanceof l.IncomingResponse &&
                              (e.method = s.method);
                          break;
                        case "max-forwards":
                          e.setHeader("max-forwards", c),
                            (s = e.parseHeader("max-forwards"));
                          break;
                        case "www-authenticate":
                          e.setHeader("www-authenticate", c),
                            (s = e.parseHeader("www-authenticate"));
                          break;
                        case "proxy-authenticate":
                          e.setHeader("proxy-authenticate", c),
                            (s = e.parseHeader("proxy-authenticate"));
                          break;
                        case "session-expires":
                        case "x":
                          e.setHeader("session-expires", c),
                            (s = e.parseHeader("session-expires")) &&
                              ((e.session_expires = s.expires),
                              (e.session_expires_refresher = s.refresher));
                          break;
                        case "refer-to":
                        case "r":
                          e.setHeader("refer-to", c),
                            (s = e.parseHeader("refer-to")) && (e.refer_to = s);
                          break;
                        case "replaces":
                          e.setHeader("replaces", c),
                            (s = e.parseHeader("replaces")) && (e.replaces = s);
                          break;
                        case "event":
                        case "o":
                          e.setHeader("event", c),
                            (s = e.parseHeader("event")) && (e.event = s);
                          break;
                        default:
                          e.addHeader(u, c), (s = 0);
                      }
                      return (
                        void 0 !== s || {
                          error: 'error parsing header "'.concat(u, '"'),
                        }
                      );
                    }
                    n.parseMessage = function (e, t) {
                      var n,
                        i,
                        r = e.indexOf("\r\n");
                      if (-1 !== r) {
                        var s = e.substring(0, r),
                          d = o.parse(s, "Request_Response");
                        if (-1 !== d) {
                          d.status_code
                            ? (((n = new l.IncomingResponse()).status_code =
                                d.status_code),
                              (n.reason_phrase = d.reason_phrase))
                            : (((n = new l.IncomingRequest(t)).method =
                                d.method),
                              (n.ruri = d.uri)),
                            (n.data = e);
                          for (var h = r + 2; ; ) {
                            if (-2 === (r = u(e, h))) {
                              i = h + 2;
                              break;
                            }
                            if (-1 === r)
                              return void a.warn(
                                "parseMessage() | malformed message"
                              );
                            if (!0 !== (d = c(n, e, h, r)))
                              return void a.warn("parseMessage() |", d.error);
                            h = r + 2;
                          }
                          if (n.hasHeader("content-length")) {
                            var _ = n.getHeader("content-length");
                            n.body = e.substr(i, _);
                          } else n.body = e.substring(i);
                          return n;
                        }
                        a.warn(
                          'parseMessage() | error parsing first line of SIP message: "'.concat(
                            s,
                            '"'
                          )
                        );
                      } else
                        a.warn(
                          "parseMessage() | no CRLF found, not a SIP message"
                        );
                    };
                  },
                  { "./Grammar": 7, "./Logger": 9, "./SIPMessage": 22 },
                ],
                15: [
                  function (e, t, n) {
                    "use strict";
                    function i(e) {
                      return (
                        (i =
                          "function" == typeof Symbol &&
                          "symbol" == typeof Symbol.iterator
                            ? function (e) {
                                return typeof e;
                              }
                            : function (e) {
                                return e &&
                                  "function" == typeof Symbol &&
                                  e.constructor === Symbol &&
                                  e !== Symbol.prototype
                                  ? "symbol"
                                  : typeof e;
                              }),
                        i(e)
                      );
                    }
                    function r(e, t) {
                      var n =
                        ("undefined" != typeof Symbol && e[Symbol.iterator]) ||
                        e["@@iterator"];
                      if (!n) {
                        if (
                          Array.isArray(e) ||
                          (n = (function (e, t) {
                            if (e) {
                              if ("string" == typeof e) return s(e, t);
                              var n = Object.prototype.toString
                                .call(e)
                                .slice(8, -1);
                              return (
                                "Object" === n &&
                                  e.constructor &&
                                  (n = e.constructor.name),
                                "Map" === n || "Set" === n
                                  ? Array.from(e)
                                  : "Arguments" === n ||
                                    /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(
                                      n
                                    )
                                  ? s(e, t)
                                  : void 0
                              );
                            }
                          })(e)) ||
                          (t && e && "number" == typeof e.length)
                        ) {
                          n && (e = n);
                          var i = 0,
                            r = function () {};
                          return {
                            s: r,
                            n: function () {
                              return i >= e.length
                                ? { done: !0 }
                                : { done: !1, value: e[i++] };
                            },
                            e: function (e) {
                              throw e;
                            },
                            f: r,
                          };
                        }
                        throw new TypeError(
                          "Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
                        );
                      }
                      var o,
                        l = !0,
                        a = !1;
                      return {
                        s: function () {
                          n = n.call(e);
                        },
                        n: function () {
                          var e = n.next();
                          return (l = e.done), e;
                        },
                        e: function (e) {
                          (a = !0), (o = e);
                        },
                        f: function () {
                          try {
                            l || null == n.return || n.return();
                          } finally {
                            if (a) throw o;
                          }
                        },
                      };
                    }
                    function s(e, t) {
                      (null == t || t > e.length) && (t = e.length);
                      for (var n = 0, i = new Array(t); n < t; n++) i[n] = e[n];
                      return i;
                    }
                    function o(e, t) {
                      for (var n = 0; n < t.length; n++) {
                        var i = t[n];
                        (i.enumerable = i.enumerable || !1),
                          (i.configurable = !0),
                          "value" in i && (i.writable = !0),
                          Object.defineProperty(e, i.key, i);
                      }
                    }
                    function l(e, t) {
                      return (
                        (l = Object.setPrototypeOf
                          ? Object.setPrototypeOf.bind()
                          : function (e, t) {
                              return (e.__proto__ = t), e;
                            }),
                        l(e, t)
                      );
                    }
                    function a(e) {
                      var t = (function () {
                        if ("undefined" == typeof Reflect || !Reflect.construct)
                          return !1;
                        if (Reflect.construct.sham) return !1;
                        if ("function" == typeof Proxy) return !0;
                        try {
                          return (
                            Boolean.prototype.valueOf.call(
                              Reflect.construct(Boolean, [], function () {})
                            ),
                            !0
                          );
                        } catch (e) {
                          return !1;
                        }
                      })();
                      return function () {
                        var n,
                          r = u(e);
                        if (t) {
                          var s = u(this).constructor;
                          n = Reflect.construct(r, arguments, s);
                        } else n = r.apply(this, arguments);
                        return (function (e, t) {
                          if (
                            t &&
                            ("object" === i(t) || "function" == typeof t)
                          )
                            return t;
                          if (void 0 !== t)
                            throw new TypeError(
                              "Derived constructors may only return object or undefined"
                            );
                          return (function (e) {
                            if (void 0 === e)
                              throw new ReferenceError(
                                "this hasn't been initialised - super() hasn't been called"
                              );
                            return e;
                          })(e);
                        })(this, n);
                      };
                    }
                    function u(e) {
                      return (
                        (u = Object.setPrototypeOf
                          ? Object.getPrototypeOf.bind()
                          : function (e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                            }),
                        u(e)
                      );
                    }
                    var c = e("events").EventEmitter,
                      d = e("sdp-transform"),
                      h = e("./Logger"),
                      _ = e("./Constants"),
                      f = e("./Exceptions"),
                      g = e("./Transactions"),
                      p = e("./Utils"),
                      v = e("./Timers"),
                      m = e("./SIPMessage"),
                      y = e("./Dialog"),
                      C = e("./RequestSender"),
                      b = e("./RTCSession/DTMF"),
                      S = e("./RTCSession/Info"),
                      T = e("./RTCSession/ReferNotifier"),
                      w = e("./RTCSession/ReferSubscriber"),
                      E = e("./URI"),
                      A = new h("RTCSession"),
                      R = {
                        STATUS_NULL: 0,
                        STATUS_INVITE_SENT: 1,
                        STATUS_1XX_RECEIVED: 2,
                        STATUS_INVITE_RECEIVED: 3,
                        STATUS_WAITING_FOR_ANSWER: 4,
                        STATUS_ANSWERED: 5,
                        STATUS_WAITING_FOR_ACK: 6,
                        STATUS_CANCELED: 7,
                        STATUS_TERMINATED: 8,
                        STATUS_CONFIRMED: 9,
                      },
                      I = ["audio", "video"];
                    t.exports = (function (e) {
                      !(function (e, t) {
                        if ("function" != typeof t && null !== t)
                          throw new TypeError(
                            "Super expression must either be null or a function"
                          );
                        (e.prototype = Object.create(t && t.prototype, {
                          constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0,
                          },
                        })),
                          Object.defineProperty(e, "prototype", {
                            writable: !1,
                          }),
                          t && l(e, t);
                      })(u, e);
                      var t,
                        n,
                        i,
                        s = a(u);
                      function u(e) {
                        var t;
                        return (
                          (function (e, t) {
                            if (!(e instanceof t))
                              throw new TypeError(
                                "Cannot call a class as a function"
                              );
                          })(this, u),
                          A.debug("new"),
                          ((t = s.call(this))._id = null),
                          (t._ua = e),
                          (t._status = R.STATUS_NULL),
                          (t._dialog = null),
                          (t._earlyDialogs = {}),
                          (t._contact = null),
                          (t._from_tag = null),
                          (t._to_tag = null),
                          (t._connection = null),
                          (t._connectionPromiseQueue = Promise.resolve()),
                          (t._request = null),
                          (t._is_canceled = !1),
                          (t._cancel_reason = ""),
                          (t._is_confirmed = !1),
                          (t._late_sdp = !1),
                          (t._rtcOfferConstraints = null),
                          (t._rtcAnswerConstraints = null),
                          (t._localMediaStream = null),
                          (t._localMediaStreamLocallyGenerated = !1),
                          (t._rtcReady = !0),
                          (t._iceReady = !1),
                          (t._timers = {
                            ackTimer: null,
                            expiresTimer: null,
                            invite2xxTimer: null,
                            userNoAnswerTimer: null,
                          }),
                          (t._direction = null),
                          (t._local_identity = null),
                          (t._remote_identity = null),
                          (t._start_time = null),
                          (t._end_time = null),
                          (t._tones = null),
                          (t._audioMuted = !1),
                          (t._videoMuted = !1),
                          (t._localHold = !1),
                          (t._remoteHold = !1),
                          (t._sessionTimers = {
                            enabled: t._ua.configuration.session_timers,
                            refreshMethod:
                              t._ua.configuration.session_timers_refresh_method,
                            defaultExpires: _.SESSION_EXPIRES,
                            currentExpires: null,
                            running: !1,
                            refresher: !1,
                            timer: null,
                          }),
                          (t._referSubscribers = {}),
                          (t._data = {}),
                          t
                        );
                      }
                      return (
                        (t = u),
                        (n = [
                          {
                            key: "C",
                            get: function () {
                              return R;
                            },
                          },
                          {
                            key: "causes",
                            get: function () {
                              return _.causes;
                            },
                          },
                          {
                            key: "id",
                            get: function () {
                              return this._id;
                            },
                          },
                          {
                            key: "connection",
                            get: function () {
                              return this._connection;
                            },
                          },
                          {
                            key: "contact",
                            get: function () {
                              return this._contact;
                            },
                          },
                          {
                            key: "direction",
                            get: function () {
                              return this._direction;
                            },
                          },
                          {
                            key: "local_identity",
                            get: function () {
                              return this._local_identity;
                            },
                          },
                          {
                            key: "remote_identity",
                            get: function () {
                              return this._remote_identity;
                            },
                          },
                          {
                            key: "start_time",
                            get: function () {
                              return this._start_time;
                            },
                          },
                          {
                            key: "end_time",
                            get: function () {
                              return this._end_time;
                            },
                          },
                          {
                            key: "data",
                            get: function () {
                              return this._data;
                            },
                            set: function (e) {
                              this._data = e;
                            },
                          },
                          {
                            key: "status",
                            get: function () {
                              return this._status;
                            },
                          },
                          {
                            key: "isInProgress",
                            value: function () {
                              switch (this._status) {
                                case R.STATUS_NULL:
                                case R.STATUS_INVITE_SENT:
                                case R.STATUS_1XX_RECEIVED:
                                case R.STATUS_INVITE_RECEIVED:
                                case R.STATUS_WAITING_FOR_ANSWER:
                                  return !0;
                                default:
                                  return !1;
                              }
                            },
                          },
                          {
                            key: "isEstablished",
                            value: function () {
                              switch (this._status) {
                                case R.STATUS_ANSWERED:
                                case R.STATUS_WAITING_FOR_ACK:
                                case R.STATUS_CONFIRMED:
                                  return !0;
                                default:
                                  return !1;
                              }
                            },
                          },
                          {
                            key: "isEnded",
                            value: function () {
                              switch (this._status) {
                                case R.STATUS_CANCELED:
                                case R.STATUS_TERMINATED:
                                  return !0;
                                default:
                                  return !1;
                              }
                            },
                          },
                          {
                            key: "isMuted",
                            value: function () {
                              return {
                                audio: this._audioMuted,
                                video: this._videoMuted,
                              };
                            },
                          },
                          {
                            key: "isOnHold",
                            value: function () {
                              return {
                                local: this._localHold,
                                remote: this._remoteHold,
                              };
                            },
                          },
                          {
                            key: "connect",
                            value: function (e) {
                              var t =
                                  arguments.length > 1 &&
                                  void 0 !== arguments[1]
                                    ? arguments[1]
                                    : {},
                                n =
                                  arguments.length > 2 ? arguments[2] : void 0;
                              A.debug("connect()");
                              var i = e,
                                r = p.cloneObject(t.eventHandlers),
                                s = p.cloneArray(t.extraHeaders),
                                o = p.cloneObject(t.mediaConstraints, {
                                  audio: !0,
                                  video: !0,
                                }),
                                l = t.mediaStream || null,
                                a = p.cloneObject(t.pcConfig, {
                                  iceServers: [],
                                }),
                                u = t.rtcConstraints || null,
                                c = t.rtcOfferConstraints || null;
                              if (
                                ((this._rtcOfferConstraints = c),
                                (this._rtcAnswerConstraints =
                                  t.rtcAnswerConstraints || null),
                                (this._data = t.data || this._data),
                                void 0 === e)
                              )
                                throw new TypeError("Not enough arguments");
                              if (this._status !== R.STATUS_NULL)
                                throw new f.InvalidStateError(this._status);
                              if (!window.RTCPeerConnection)
                                throw new f.NotSupportedError(
                                  "WebRTC not supported"
                                );
                              if (!(e = this._ua.normalizeTarget(e)))
                                throw new TypeError(
                                  "Invalid target: ".concat(i)
                                );
                              for (var d in (this._sessionTimers.enabled &&
                                p.isDecimal(t.sessionTimersExpires) &&
                                (t.sessionTimersExpires >= _.MIN_SESSION_EXPIRES
                                  ? (this._sessionTimers.defaultExpires =
                                      t.sessionTimersExpires)
                                  : (this._sessionTimers.defaultExpires =
                                      _.SESSION_EXPIRES)),
                              r))
                                Object.prototype.hasOwnProperty.call(r, d) &&
                                  this.on(d, r[d]);
                              this._from_tag = p.newTag();
                              var h = t.anonymous || !1,
                                g = { from_tag: this._from_tag };
                              (this._contact = this._ua.contact.toString({
                                anonymous: h,
                                outbound: !0,
                              })),
                                h
                                  ? ((g.from_display_name = "Anonymous"),
                                    (g.from_uri = new E(
                                      "sip",
                                      "anonymous",
                                      "anonymous.invalid"
                                    )),
                                    s.push(
                                      "P-Preferred-Identity: ".concat(
                                        this._ua.configuration.uri.toString()
                                      )
                                    ),
                                    s.push("Privacy: id"))
                                  : t.fromUserName &&
                                    ((g.from_uri = new E(
                                      "sip",
                                      t.fromUserName,
                                      this._ua.configuration.uri.host
                                    )),
                                    s.push(
                                      "P-Preferred-Identity: ".concat(
                                        this._ua.configuration.uri.toString()
                                      )
                                    )),
                                t.fromDisplayName &&
                                  (g.from_display_name = t.fromDisplayName),
                                s.push("Contact: ".concat(this._contact)),
                                s.push("Content-Type: application/sdp"),
                                this._sessionTimers.enabled &&
                                  s.push(
                                    "Session-Expires: "
                                      .concat(
                                        this._sessionTimers.defaultExpires
                                      )
                                      .concat(
                                        this._ua.configuration
                                          .session_timers_force_refresher
                                          ? ";refresher=uac"
                                          : ""
                                      )
                                  ),
                                (this._request =
                                  new m.InitialOutgoingInviteRequest(
                                    e,
                                    this._ua,
                                    g,
                                    s
                                  )),
                                (this._id =
                                  this._request.call_id + this._from_tag),
                                this._createRTCConnection(a, u),
                                (this._direction = "outgoing"),
                                (this._local_identity = this._request.from),
                                (this._remote_identity = this._request.to),
                                n && n(this),
                                this._newRTCSession("local", this._request),
                                this._sendInitialRequest(o, c, l);
                            },
                          },
                          {
                            key: "init_incoming",
                            value: function (e, t) {
                              var n,
                                i = this;
                              A.debug("init_incoming()");
                              var r = e.hasHeader("Content-Type")
                                ? e.getHeader("Content-Type").toLowerCase()
                                : void 0;
                              if (e.body && "application/sdp" !== r)
                                e.reply(415);
                              else if (
                                ((this._status = R.STATUS_INVITE_RECEIVED),
                                (this._from_tag = e.from_tag),
                                (this._id = e.call_id + this._from_tag),
                                (this._request = e),
                                (this._contact = this._ua.contact.toString()),
                                e.hasHeader("expires") &&
                                  (n = 1e3 * e.getHeader("expires")),
                                (e.to_tag = p.newTag()),
                                this._createDialog(e, "UAS", !0))
                              ) {
                                if (
                                  (e.body
                                    ? (this._late_sdp = !1)
                                    : (this._late_sdp = !0),
                                  (this._status = R.STATUS_WAITING_FOR_ANSWER),
                                  (this._timers.userNoAnswerTimer = setTimeout(
                                    function () {
                                      e.reply(408),
                                        i._failed(
                                          "local",
                                          null,
                                          _.causes.NO_ANSWER
                                        );
                                    },
                                    this._ua.configuration.no_answer_timeout
                                  )),
                                  n &&
                                    (this._timers.expiresTimer = setTimeout(
                                      function () {
                                        i._status ===
                                          R.STATUS_WAITING_FOR_ANSWER &&
                                          (e.reply(487),
                                          i._failed(
                                            "system",
                                            null,
                                            _.causes.EXPIRES
                                          ));
                                      },
                                      n
                                    )),
                                  (this._direction = "incoming"),
                                  (this._local_identity = e.to),
                                  (this._remote_identity = e.from),
                                  t && t(this),
                                  this._newRTCSession("remote", e),
                                  this._status !== R.STATUS_TERMINATED)
                                ) {
                                  var s = ["Contact: ".concat(this._contact)],
                                    o = this._ua.modes.ringing_header_mode;
                                  void 0 !== o &&
                                    (Array.isArray(o)
                                      ? (s = s.concat(o))
                                      : s.push(o)),
                                    e.reply(180, null, s),
                                    this._progress("local", null);
                                }
                              } else
                                e.reply(500, "Missing Contact header field");
                            },
                          },
                          {
                            key: "answer",
                            value: function () {
                              var e = this,
                                t =
                                  arguments.length > 0 &&
                                  void 0 !== arguments[0]
                                    ? arguments[0]
                                    : {};
                              A.debug("answer()");
                              var n = this._request,
                                i = p.cloneArray(t.extraHeaders),
                                s = p.cloneObject(t.mediaConstraints),
                                o = t.mediaStream || null,
                                l = p.cloneObject(t.pcConfig, {
                                  iceServers: [],
                                }),
                                a = t.rtcConstraints || null,
                                u = t.rtcAnswerConstraints || null,
                                c = p.cloneObject(t.rtcOfferConstraints),
                                d = !1,
                                h = !1,
                                g = !1,
                                v = !1;
                              if (
                                ((this._rtcAnswerConstraints = u),
                                (this._rtcOfferConstraints =
                                  t.rtcOfferConstraints || null),
                                (this._data = t.data || this._data),
                                "incoming" !== this._direction)
                              )
                                throw new f.NotSupportedError(
                                  '"answer" not supported for outgoing RTCSession'
                                );
                              if (this._status !== R.STATUS_WAITING_FOR_ANSWER)
                                throw new f.InvalidStateError(this._status);
                              if (
                                (this._sessionTimers.enabled &&
                                  p.isDecimal(t.sessionTimersExpires) &&
                                  (t.sessionTimersExpires >=
                                  _.MIN_SESSION_EXPIRES
                                    ? (this._sessionTimers.defaultExpires =
                                        t.sessionTimersExpires)
                                    : (this._sessionTimers.defaultExpires =
                                        _.SESSION_EXPIRES)),
                                (this._status = R.STATUS_ANSWERED),
                                this._createDialog(n, "UAS"))
                              ) {
                                clearTimeout(this._timers.userNoAnswerTimer),
                                  i.unshift("Contact: ".concat(this._contact));
                                var m = n.parseSDP();
                                Array.isArray(m.media) || (m.media = [m.media]);
                                var y,
                                  C = r(m.media);
                                try {
                                  for (C.s(); !(y = C.n()).done; ) {
                                    var b = y.value;
                                    "audio" === b.type &&
                                      ((d = !0),
                                      (b.direction &&
                                        "sendrecv" !== b.direction) ||
                                        (g = !0)),
                                      "video" === b.type &&
                                        ((h = !0),
                                        (b.direction &&
                                          "sendrecv" !== b.direction) ||
                                          (v = !0));
                                  }
                                } catch (e) {
                                  C.e(e);
                                } finally {
                                  C.f();
                                }
                                if (o && !1 === s.audio) {
                                  var S,
                                    T = r(o.getAudioTracks());
                                  try {
                                    for (T.s(); !(S = T.n()).done; ) {
                                      var w = S.value;
                                      o.removeTrack(w);
                                    }
                                  } catch (e) {
                                    T.e(e);
                                  } finally {
                                    T.f();
                                  }
                                }
                                if (o && !1 === s.video) {
                                  var E,
                                    I = r(o.getVideoTracks());
                                  try {
                                    for (I.s(); !(E = I.n()).done; ) {
                                      var k = E.value;
                                      o.removeTrack(k);
                                    }
                                  } catch (e) {
                                    I.e(e);
                                  } finally {
                                    I.f();
                                  }
                                }
                                o || void 0 !== s.audio || (s.audio = g),
                                  o || void 0 !== s.video || (s.video = v),
                                  o ||
                                    d ||
                                    c.offerToReceiveAudio ||
                                    (s.audio = !1),
                                  o ||
                                    h ||
                                    c.offerToReceiveVideo ||
                                    (s.video = !1),
                                  this._createRTCConnection(l, a),
                                  Promise.resolve()
                                    .then(function () {
                                      return (
                                        o ||
                                        (s.audio || s.video
                                          ? ((e._localMediaStreamLocallyGenerated =
                                              !0),
                                            navigator.mediaDevices
                                              .getUserMedia(s)
                                              .catch(function (t) {
                                                if (
                                                  e._status ===
                                                  R.STATUS_TERMINATED
                                                )
                                                  throw new Error("terminated");
                                                throw (
                                                  (n.reply(480),
                                                  e._failed(
                                                    "local",
                                                    null,
                                                    _.causes
                                                      .USER_DENIED_MEDIA_ACCESS
                                                  ),
                                                  A.warn(
                                                    'emit "getusermediafailed" [error:%o]',
                                                    t
                                                  ),
                                                  e.emit(
                                                    "getusermediafailed",
                                                    t
                                                  ),
                                                  new Error(
                                                    "getUserMedia() failed"
                                                  ))
                                                );
                                              }))
                                          : void 0)
                                      );
                                    })
                                    .then(function (t) {
                                      if (e._status === R.STATUS_TERMINATED)
                                        throw new Error("terminated");
                                      (e._localMediaStream = t),
                                        t &&
                                          t.getTracks().forEach(function (n) {
                                            e._connection.addTrack(n, t);
                                          });
                                    })
                                    .then(function () {
                                      if (!e._late_sdp) {
                                        var t = {
                                          originator: "remote",
                                          type: "offer",
                                          sdp: n.body,
                                        };
                                        A.debug('emit "sdp"'), e.emit("sdp", t);
                                        var i = new RTCSessionDescription({
                                          type: "offer",
                                          sdp: t.sdp,
                                        });
                                        return (
                                          (e._connectionPromiseQueue =
                                            e._connectionPromiseQueue
                                              .then(function () {
                                                return e._connection.setRemoteDescription(
                                                  i
                                                );
                                              })
                                              .catch(function (t) {
                                                throw (
                                                  (n.reply(488),
                                                  e._failed(
                                                    "system",
                                                    null,
                                                    _.causes.WEBRTC_ERROR
                                                  ),
                                                  A.warn(
                                                    'emit "peerconnection:setremotedescriptionfailed" [error:%o]',
                                                    t
                                                  ),
                                                  e.emit(
                                                    "peerconnection:setremotedescriptionfailed",
                                                    t
                                                  ),
                                                  new Error(
                                                    "peerconnection.setRemoteDescription() failed"
                                                  ))
                                                );
                                              })),
                                          e._connectionPromiseQueue
                                        );
                                      }
                                    })
                                    .then(function () {
                                      if (e._status === R.STATUS_TERMINATED)
                                        throw new Error("terminated");
                                      return (
                                        e._connecting(n),
                                        e._late_sdp
                                          ? e
                                              ._createLocalDescription(
                                                "offer",
                                                e._rtcOfferConstraints
                                              )
                                              .catch(function () {
                                                throw (
                                                  (n.reply(500),
                                                  new Error(
                                                    "_createLocalDescription() failed"
                                                  ))
                                                );
                                              })
                                          : e
                                              ._createLocalDescription(
                                                "answer",
                                                u
                                              )
                                              .catch(function () {
                                                throw (
                                                  (n.reply(500),
                                                  new Error(
                                                    "_createLocalDescription() failed"
                                                  ))
                                                );
                                              })
                                      );
                                    })
                                    .then(function (t) {
                                      if (e._status === R.STATUS_TERMINATED)
                                        throw new Error("terminated");
                                      e._handleSessionTimersInIncomingRequest(
                                        n,
                                        i
                                      ),
                                        n.reply(
                                          200,
                                          null,
                                          i,
                                          t,
                                          function () {
                                            (e._status =
                                              R.STATUS_WAITING_FOR_ACK),
                                              e._setInvite2xxTimer(n, t),
                                              e._setACKTimer(),
                                              e._accepted("local");
                                          },
                                          function () {
                                            e._failed(
                                              "system",
                                              null,
                                              _.causes.CONNECTION_ERROR
                                            );
                                          }
                                        );
                                    })
                                    .catch(function (t) {
                                      e._status !== R.STATUS_TERMINATED &&
                                        A.warn(t);
                                    });
                              } else n.reply(500, "Error creating dialog");
                            },
                          },
                          {
                            key: "terminate",
                            value: function () {
                              var e = this,
                                t =
                                  arguments.length > 0 &&
                                  void 0 !== arguments[0]
                                    ? arguments[0]
                                    : {};
                              A.debug("terminate()");
                              var n,
                                i = t.cause || _.causes.BYE,
                                r = p.cloneArray(t.extraHeaders),
                                s = t.body,
                                o = t.status_code,
                                l = t.reason_phrase;
                              if (this._status === R.STATUS_TERMINATED)
                                throw new f.InvalidStateError(this._status);
                              switch (this._status) {
                                case R.STATUS_NULL:
                                case R.STATUS_INVITE_SENT:
                                case R.STATUS_1XX_RECEIVED:
                                  if (
                                    (A.debug("canceling session"),
                                    o && (o < 200 || o >= 700))
                                  )
                                    throw new TypeError(
                                      "Invalid status_code: ".concat(o)
                                    );
                                  o &&
                                    ((l = l || _.REASON_PHRASE[o] || ""),
                                    (n = "SIP ;cause="
                                      .concat(o, ' ;text="')
                                      .concat(l, '"'))),
                                    this._status === R.STATUS_NULL ||
                                    this._status === R.STATUS_INVITE_SENT
                                      ? ((this._is_canceled = !0),
                                        (this._cancel_reason = n))
                                      : this._status ===
                                          R.STATUS_1XX_RECEIVED &&
                                        this._request.cancel(n),
                                    (this._status = R.STATUS_CANCELED),
                                    this._failed(
                                      "local",
                                      null,
                                      _.causes.CANCELED
                                    );
                                  break;
                                case R.STATUS_WAITING_FOR_ANSWER:
                                case R.STATUS_ANSWERED:
                                  if (
                                    (A.debug("rejecting session"),
                                    (o = o || 480) < 300 || o >= 700)
                                  )
                                    throw new TypeError(
                                      "Invalid status_code: ".concat(o)
                                    );
                                  this._request.reply(o, l, r, s),
                                    this._failed(
                                      "local",
                                      null,
                                      _.causes.REJECTED
                                    );
                                  break;
                                case R.STATUS_WAITING_FOR_ACK:
                                case R.STATUS_CONFIRMED:
                                  if (
                                    (A.debug("terminating session"),
                                    (l =
                                      t.reason_phrase ||
                                      _.REASON_PHRASE[o] ||
                                      ""),
                                    o && (o < 200 || o >= 700))
                                  )
                                    throw new TypeError(
                                      "Invalid status_code: ".concat(o)
                                    );
                                  if (
                                    (o &&
                                      r.push(
                                        "Reason: SIP ;cause="
                                          .concat(o, '; text="')
                                          .concat(l, '"')
                                      ),
                                    this._status === R.STATUS_WAITING_FOR_ACK &&
                                      "incoming" === this._direction &&
                                      this._request.server_transaction.state !==
                                        g.C.STATUS_TERMINATED)
                                  ) {
                                    var a = this._dialog;
                                    (this.receiveRequest = function (t) {
                                      t.method === _.ACK &&
                                        (e.sendRequest(_.BYE, {
                                          extraHeaders: r,
                                          body: s,
                                        }),
                                        a.terminate());
                                    }),
                                      this._request.server_transaction.on(
                                        "stateChanged",
                                        function () {
                                          e._request.server_transaction
                                            .state === g.C.STATUS_TERMINATED &&
                                            (e.sendRequest(_.BYE, {
                                              extraHeaders: r,
                                              body: s,
                                            }),
                                            a.terminate());
                                        }
                                      ),
                                      this._ended("local", null, i),
                                      (this._dialog = a),
                                      this._ua.newDialog(a);
                                  } else
                                    this.sendRequest(_.BYE, {
                                      extraHeaders: r,
                                      body: s,
                                    }),
                                      this._ended("local", null, i);
                              }
                            },
                          },
                          {
                            key: "sendDTMF",
                            value: function (e) {
                              var t =
                                arguments.length > 1 && void 0 !== arguments[1]
                                  ? arguments[1]
                                  : {};
                              A.debug("sendDTMF() | tones: %s", e);
                              var n = 0,
                                i = t.duration || null,
                                r = t.interToneGap || null,
                                s = t.transportType || _.DTMF_TRANSPORT.INFO;
                              if (void 0 === e)
                                throw new TypeError("Not enough arguments");
                              if (
                                this._status !== R.STATUS_CONFIRMED &&
                                this._status !== R.STATUS_WAITING_FOR_ACK &&
                                this._status !== R.STATUS_1XX_RECEIVED
                              )
                                throw new f.InvalidStateError(this._status);
                              if (
                                s !== _.DTMF_TRANSPORT.INFO &&
                                s !== _.DTMF_TRANSPORT.RFC2833
                              )
                                throw new TypeError(
                                  "invalid transportType: ".concat(s)
                                );
                              if (
                                ("number" == typeof e && (e = e.toString()),
                                !e ||
                                  "string" != typeof e ||
                                  !e.match(/^[0-9A-DR#*,]+$/i))
                              )
                                throw new TypeError(
                                  "Invalid tones: ".concat(e)
                                );
                              if (i && !p.isDecimal(i))
                                throw new TypeError(
                                  "Invalid tone duration: ".concat(i)
                                );
                              if (
                                (i
                                  ? i < b.C.MIN_DURATION
                                    ? (A.debug(
                                        '"duration" value is lower than the minimum allowed, setting it to '.concat(
                                          b.C.MIN_DURATION,
                                          " milliseconds"
                                        )
                                      ),
                                      (i = b.C.MIN_DURATION))
                                    : i > b.C.MAX_DURATION
                                    ? (A.debug(
                                        '"duration" value is greater than the maximum allowed, setting it to '.concat(
                                          b.C.MAX_DURATION,
                                          " milliseconds"
                                        )
                                      ),
                                      (i = b.C.MAX_DURATION))
                                    : (i = Math.abs(i))
                                  : (i = b.C.DEFAULT_DURATION),
                                (t.duration = i),
                                r && !p.isDecimal(r))
                              )
                                throw new TypeError(
                                  "Invalid interToneGap: ".concat(r)
                                );
                              if (
                                (r
                                  ? r < b.C.MIN_INTER_TONE_GAP
                                    ? (A.debug(
                                        '"interToneGap" value is lower than the minimum allowed, setting it to '.concat(
                                          b.C.MIN_INTER_TONE_GAP,
                                          " milliseconds"
                                        )
                                      ),
                                      (r = b.C.MIN_INTER_TONE_GAP))
                                    : (r = Math.abs(r))
                                  : (r = b.C.DEFAULT_INTER_TONE_GAP),
                                s !== _.DTMF_TRANSPORT.RFC2833)
                              )
                                this._tones
                                  ? (this._tones += e)
                                  : ((this._tones = e),
                                    function e() {
                                      var s,
                                        o = this;
                                      if (
                                        this._status === R.STATUS_TERMINATED ||
                                        !this._tones ||
                                        n >= this._tones.length
                                      )
                                        this._tones = null;
                                      else {
                                        var l = this._tones[n];
                                        if (((n += 1), "," === l)) s = 2e3;
                                        else {
                                          var a = new b(this);
                                          (t.eventHandlers = {
                                            onFailed: function () {
                                              o._tones = null;
                                            },
                                          }),
                                            a.send(l, t),
                                            (s = i + r);
                                        }
                                        setTimeout(e.bind(this), s);
                                      }
                                    }.call(this));
                              else {
                                var o = this._getDTMFRTPSender();
                                o &&
                                  ((e = o.toneBuffer + e),
                                  o.insertDTMF(e, i, r));
                              }
                            },
                          },
                          {
                            key: "sendInfo",
                            value: function (e, t) {
                              var n =
                                arguments.length > 2 && void 0 !== arguments[2]
                                  ? arguments[2]
                                  : {};
                              if (
                                (A.debug("sendInfo()"),
                                this._status !== R.STATUS_CONFIRMED &&
                                  this._status !== R.STATUS_WAITING_FOR_ACK &&
                                  this._status !== R.STATUS_1XX_RECEIVED)
                              )
                                throw new f.InvalidStateError(this._status);
                              new S(this).send(e, t, n);
                            },
                          },
                          {
                            key: "mute",
                            value: function () {
                              var e =
                                arguments.length > 0 && void 0 !== arguments[0]
                                  ? arguments[0]
                                  : { audio: !0, video: !1 };
                              A.debug("mute()");
                              var t = !1,
                                n = !1;
                              !1 === this._audioMuted &&
                                e.audio &&
                                ((t = !0),
                                (this._audioMuted = !0),
                                this._toggleMuteAudio(!0)),
                                !1 === this._videoMuted &&
                                  e.video &&
                                  ((n = !0),
                                  (this._videoMuted = !0),
                                  this._toggleMuteVideo(!0)),
                                (!0 !== t && !0 !== n) ||
                                  this._onmute({ audio: t, video: n });
                            },
                          },
                          {
                            key: "unmute",
                            value: function () {
                              var e =
                                arguments.length > 0 && void 0 !== arguments[0]
                                  ? arguments[0]
                                  : { audio: !0, video: !0 };
                              A.debug("unmute()");
                              var t = !1,
                                n = !1;
                              !0 === this._audioMuted &&
                                e.audio &&
                                ((t = !0),
                                (this._audioMuted = !1),
                                !1 === this._localHold &&
                                  this._toggleMuteAudio(!1)),
                                !0 === this._videoMuted &&
                                  e.video &&
                                  ((n = !0),
                                  (this._videoMuted = !1),
                                  !1 === this._localHold &&
                                    this._toggleMuteVideo(!1)),
                                (!0 !== t && !0 !== n) ||
                                  this._onunmute({ audio: t, video: n });
                            },
                          },
                          {
                            key: "hold",
                            value: function () {
                              var e = this,
                                t =
                                  arguments.length > 0 &&
                                  void 0 !== arguments[0]
                                    ? arguments[0]
                                    : {},
                                n =
                                  arguments.length > 1 ? arguments[1] : void 0;
                              if (
                                (A.debug("hold()"),
                                this._status !== R.STATUS_WAITING_FOR_ACK &&
                                  this._status !== R.STATUS_CONFIRMED)
                              )
                                return !1;
                              if (!0 === this._localHold) return !1;
                              if (!this._isReadyToReOffer()) return !1;
                              (this._localHold = !0), this._onhold("local");
                              var i = {
                                succeeded: function () {
                                  n && n();
                                },
                                failed: function () {
                                  e.terminate({
                                    cause: _.causes.WEBRTC_ERROR,
                                    status_code: 500,
                                    reason_phrase: "Hold Failed",
                                  });
                                },
                              };
                              return (
                                t.useUpdate
                                  ? this._sendUpdate({
                                      sdpOffer: !0,
                                      eventHandlers: i,
                                      extraHeaders: t.extraHeaders,
                                    })
                                  : this._sendReinvite({
                                      eventHandlers: i,
                                      extraHeaders: t.extraHeaders,
                                    }),
                                !0
                              );
                            },
                          },
                          {
                            key: "unhold",
                            value: function () {
                              var e = this,
                                t =
                                  arguments.length > 0 &&
                                  void 0 !== arguments[0]
                                    ? arguments[0]
                                    : {},
                                n =
                                  arguments.length > 1 ? arguments[1] : void 0;
                              if (
                                (A.debug("unhold()"),
                                this._status !== R.STATUS_WAITING_FOR_ACK &&
                                  this._status !== R.STATUS_CONFIRMED)
                              )
                                return !1;
                              if (!1 === this._localHold) return !1;
                              if (!this._isReadyToReOffer()) return !1;
                              (this._localHold = !1), this._onunhold("local");
                              var i = {
                                succeeded: function () {
                                  n && n();
                                },
                                failed: function () {
                                  e.terminate({
                                    cause: _.causes.WEBRTC_ERROR,
                                    status_code: 500,
                                    reason_phrase: "Unhold Failed",
                                  });
                                },
                              };
                              return (
                                t.useUpdate
                                  ? this._sendUpdate({
                                      sdpOffer: !0,
                                      eventHandlers: i,
                                      extraHeaders: t.extraHeaders,
                                    })
                                  : this._sendReinvite({
                                      eventHandlers: i,
                                      extraHeaders: t.extraHeaders,
                                    }),
                                !0
                              );
                            },
                          },
                          {
                            key: "renegotiate",
                            value: function () {
                              var e = this,
                                t =
                                  arguments.length > 0 &&
                                  void 0 !== arguments[0]
                                    ? arguments[0]
                                    : {},
                                n =
                                  arguments.length > 1 ? arguments[1] : void 0;
                              A.debug("renegotiate()");
                              var i = t.rtcOfferConstraints || null;
                              if (
                                this._status !== R.STATUS_WAITING_FOR_ACK &&
                                this._status !== R.STATUS_CONFIRMED
                              )
                                return !1;
                              if (!this._isReadyToReOffer()) return !1;
                              var r = {
                                succeeded: function () {
                                  n && n();
                                },
                                failed: function () {
                                  e.terminate({
                                    cause: _.causes.WEBRTC_ERROR,
                                    status_code: 500,
                                    reason_phrase: "Media Renegotiation Failed",
                                  });
                                },
                              };
                              return (
                                this._setLocalMediaStatus(),
                                t.useUpdate
                                  ? this._sendUpdate({
                                      sdpOffer: !0,
                                      eventHandlers: r,
                                      rtcOfferConstraints: i,
                                      extraHeaders: t.extraHeaders,
                                    })
                                  : this._sendReinvite({
                                      eventHandlers: r,
                                      rtcOfferConstraints: i,
                                      extraHeaders: t.extraHeaders,
                                    }),
                                !0
                              );
                            },
                          },
                          {
                            key: "refer",
                            value: function (e, t) {
                              var n = this;
                              A.debug("refer()");
                              var i = e;
                              if (
                                this._status !== R.STATUS_WAITING_FOR_ACK &&
                                this._status !== R.STATUS_CONFIRMED
                              )
                                return !1;
                              if (!(e = this._ua.normalizeTarget(e)))
                                throw new TypeError(
                                  "Invalid target: ".concat(i)
                                );
                              var r = new w(this);
                              r.sendRefer(e, t);
                              var s = r.id;
                              return (
                                (this._referSubscribers[s] = r),
                                r.on("requestFailed", function () {
                                  delete n._referSubscribers[s];
                                }),
                                r.on("accepted", function () {
                                  delete n._referSubscribers[s];
                                }),
                                r.on("failed", function () {
                                  delete n._referSubscribers[s];
                                }),
                                r
                              );
                            },
                          },
                          {
                            key: "sendRequest",
                            value: function (e, t) {
                              return (
                                A.debug("sendRequest()"),
                                this._dialog.sendRequest(e, t)
                              );
                            },
                          },
                          {
                            key: "receiveRequest",
                            value: function (e) {
                              var t = this;
                              if (
                                (A.debug("receiveRequest()"),
                                e.method === _.CANCEL)
                              )
                                (this._status !== R.STATUS_WAITING_FOR_ANSWER &&
                                  this._status !== R.STATUS_ANSWERED) ||
                                  ((this._status = R.STATUS_CANCELED),
                                  this._request.reply(487),
                                  this._failed("remote", e, _.causes.CANCELED));
                              else
                                switch (e.method) {
                                  case _.ACK:
                                    if (
                                      this._status !== R.STATUS_WAITING_FOR_ACK
                                    )
                                      return;
                                    if (
                                      ((this._status = R.STATUS_CONFIRMED),
                                      clearTimeout(this._timers.ackTimer),
                                      clearTimeout(this._timers.invite2xxTimer),
                                      this._late_sdp)
                                    ) {
                                      if (!e.body) {
                                        this.terminate({
                                          cause: _.causes.MISSING_SDP,
                                          status_code: 400,
                                        });
                                        break;
                                      }
                                      var n = {
                                        originator: "remote",
                                        type: "answer",
                                        sdp: e.body,
                                      };
                                      A.debug('emit "sdp"'),
                                        this.emit("sdp", n);
                                      var i = new RTCSessionDescription({
                                        type: "answer",
                                        sdp: n.sdp,
                                      });
                                      this._connectionPromiseQueue =
                                        this._connectionPromiseQueue
                                          .then(function () {
                                            return t._connection.setRemoteDescription(
                                              i
                                            );
                                          })
                                          .then(function () {
                                            t._is_confirmed ||
                                              t._confirmed("remote", e);
                                          })
                                          .catch(function (e) {
                                            t.terminate({
                                              cause:
                                                _.causes.BAD_MEDIA_DESCRIPTION,
                                              status_code: 488,
                                            }),
                                              A.warn(
                                                'emit "peerconnection:setremotedescriptionfailed" [error:%o]',
                                                e
                                              ),
                                              t.emit(
                                                "peerconnection:setremotedescriptionfailed",
                                                e
                                              );
                                          });
                                    } else
                                      this._is_confirmed ||
                                        this._confirmed("remote", e);
                                    break;
                                  case _.BYE:
                                    this._status === R.STATUS_CONFIRMED ||
                                    this._status === R.STATUS_WAITING_FOR_ACK
                                      ? (e.reply(200),
                                        this._ended("remote", e, _.causes.BYE))
                                      : this._status ===
                                          R.STATUS_INVITE_RECEIVED ||
                                        this._status ===
                                          R.STATUS_WAITING_FOR_ANSWER
                                      ? (e.reply(200),
                                        this._request.reply(
                                          487,
                                          "BYE Received"
                                        ),
                                        this._ended("remote", e, _.causes.BYE))
                                      : e.reply(403, "Wrong Status");
                                    break;
                                  case _.INVITE:
                                    this._status === R.STATUS_CONFIRMED
                                      ? e.hasHeader("replaces")
                                        ? this._receiveReplaces(e)
                                        : this._receiveReinvite(e)
                                      : e.reply(403, "Wrong Status");
                                    break;
                                  case _.INFO:
                                    if (
                                      this._status === R.STATUS_1XX_RECEIVED ||
                                      this._status ===
                                        R.STATUS_WAITING_FOR_ANSWER ||
                                      this._status === R.STATUS_ANSWERED ||
                                      this._status ===
                                        R.STATUS_WAITING_FOR_ACK ||
                                      this._status === R.STATUS_CONFIRMED
                                    ) {
                                      var r = e.hasHeader("Content-Type")
                                        ? e
                                            .getHeader("Content-Type")
                                            .toLowerCase()
                                        : void 0;
                                      r && r.match(/^application\/dtmf-relay/i)
                                        ? new b(this).init_incoming(e)
                                        : void 0 !== r
                                        ? new S(this).init_incoming(e)
                                        : e.reply(415);
                                    } else e.reply(403, "Wrong Status");
                                    break;
                                  case _.UPDATE:
                                    this._status === R.STATUS_CONFIRMED
                                      ? this._receiveUpdate(e)
                                      : e.reply(403, "Wrong Status");
                                    break;
                                  case _.REFER:
                                    this._status === R.STATUS_CONFIRMED
                                      ? this._receiveRefer(e)
                                      : e.reply(403, "Wrong Status");
                                    break;
                                  case _.NOTIFY:
                                    var s = {
                                      event: e.event,
                                      request: e,
                                      taken: !1,
                                    };
                                    if ((this.emit("sipEvent", s), s.taken)) {
                                      e.reply(200);
                                      break;
                                    }
                                    this._status === R.STATUS_CONFIRMED
                                      ? this._receiveNotify(e)
                                      : e.reply(403, "Wrong Status");
                                    break;
                                  default:
                                    e.reply(501);
                                }
                            },
                          },
                          {
                            key: "onTransportError",
                            value: function () {
                              A.warn("onTransportError()"),
                                this._status !== R.STATUS_TERMINATED &&
                                  this.terminate({
                                    status_code: 500,
                                    reason_phrase: _.causes.CONNECTION_ERROR,
                                    cause: _.causes.CONNECTION_ERROR,
                                  });
                            },
                          },
                          {
                            key: "onRequestTimeout",
                            value: function () {
                              A.warn("onRequestTimeout()"),
                                this._status !== R.STATUS_TERMINATED &&
                                  this.terminate({
                                    status_code: 408,
                                    reason_phrase: _.causes.REQUEST_TIMEOUT,
                                    cause: _.causes.REQUEST_TIMEOUT,
                                  });
                            },
                          },
                          {
                            key: "onDialogError",
                            value: function () {
                              A.warn("onDialogError()"),
                                this._status !== R.STATUS_TERMINATED &&
                                  this.terminate({
                                    status_code: 500,
                                    reason_phrase: _.causes.DIALOG_ERROR,
                                    cause: _.causes.DIALOG_ERROR,
                                  });
                            },
                          },
                          {
                            key: "newDTMF",
                            value: function (e) {
                              A.debug("newDTMF()"), this.emit("newDTMF", e);
                            },
                          },
                          {
                            key: "newInfo",
                            value: function (e) {
                              A.debug("newInfo()"), this.emit("newInfo", e);
                            },
                          },
                          {
                            key: "_isReadyToReOffer",
                            value: function () {
                              return this._rtcReady
                                ? this._dialog
                                  ? (!0 !== this._dialog.uac_pending_reply &&
                                      !0 !== this._dialog.uas_pending_reply) ||
                                    (A.debug(
                                      "_isReadyToReOffer() | there is another INVITE/UPDATE transaction in progress"
                                    ),
                                    !1)
                                  : (A.debug(
                                      "_isReadyToReOffer() | session not established yet"
                                    ),
                                    !1)
                                : (A.debug(
                                    "_isReadyToReOffer() | internal WebRTC status not ready"
                                  ),
                                  !1);
                            },
                          },
                          {
                            key: "_close",
                            value: function () {
                              if (
                                (A.debug("close()"),
                                this._localMediaStream &&
                                  this._localMediaStreamLocallyGenerated &&
                                  (A.debug(
                                    "close() | closing local MediaStream"
                                  ),
                                  p.closeMediaStream(this._localMediaStream)),
                                this._status !== R.STATUS_TERMINATED)
                              ) {
                                if (
                                  ((this._status = R.STATUS_TERMINATED),
                                  this._connection)
                                )
                                  try {
                                    this._connection.close();
                                  } catch (e) {
                                    A.warn(
                                      "close() | error closing the RTCPeerConnection: %o",
                                      e
                                    );
                                  }
                                for (var e in this._timers)
                                  Object.prototype.hasOwnProperty.call(
                                    this._timers,
                                    e
                                  ) && clearTimeout(this._timers[e]);
                                for (var t in (clearTimeout(
                                  this._sessionTimers.timer
                                ),
                                this._dialog &&
                                  (this._dialog.terminate(),
                                  delete this._dialog),
                                this._earlyDialogs))
                                  Object.prototype.hasOwnProperty.call(
                                    this._earlyDialogs,
                                    t
                                  ) &&
                                    (this._earlyDialogs[t].terminate(),
                                    delete this._earlyDialogs[t]);
                                for (var n in this._referSubscribers)
                                  Object.prototype.hasOwnProperty.call(
                                    this._referSubscribers,
                                    n
                                  ) && delete this._referSubscribers[n];
                                this._ua.destroyRTCSession(this);
                              }
                            },
                          },
                          {
                            key: "_setInvite2xxTimer",
                            value: function (e, t) {
                              var n = v.T1;
                              this._timers.invite2xxTimer = setTimeout(
                                function i() {
                                  this._status === R.STATUS_WAITING_FOR_ACK &&
                                    (e.reply(
                                      200,
                                      null,
                                      ["Contact: ".concat(this._contact)],
                                      t
                                    ),
                                    n < v.T2 && (n *= 2) > v.T2 && (n = v.T2),
                                    (this._timers.invite2xxTimer = setTimeout(
                                      i.bind(this),
                                      n
                                    )));
                                }.bind(this),
                                n
                              );
                            },
                          },
                          {
                            key: "_setACKTimer",
                            value: function () {
                              var e = this;
                              this._timers.ackTimer = setTimeout(function () {
                                e._status === R.STATUS_WAITING_FOR_ACK &&
                                  (A.debug(
                                    "no ACK received, terminating the session"
                                  ),
                                  clearTimeout(e._timers.invite2xxTimer),
                                  e.sendRequest(_.BYE),
                                  e._ended("remote", null, _.causes.NO_ACK));
                              }, v.TIMER_H);
                            },
                          },
                          {
                            key: "_createRTCConnection",
                            value: function (e, t) {
                              var n = this;
                              (this._connection = new RTCPeerConnection(e, t)),
                                this._connection.addEventListener(
                                  "iceconnectionstatechange",
                                  function () {
                                    var e = n._connection.iceConnectionState;
                                    if (
                                      ("failed" === e &&
                                        n.terminate({
                                          cause: _.causes.RTP_TIMEOUT,
                                          status_code: 408,
                                          reason_phrase: _.causes.RTP_TIMEOUT,
                                        }),
                                      void 0 !==
                                        n._ua.modes.chrome_rtp_timeout_fix &&
                                        navigator.webkitGetUserMedia &&
                                        "disconnected" === e)
                                    ) {
                                      var t =
                                        n._ua.modes.chrome_rtp_timeout_fix;
                                      A.debug(
                                        "AC: Chrome RTP timeout fix: iceConnectionState==disconnected: check that this will continue for ".concat(
                                          t,
                                          " seconds..."
                                        )
                                      ),
                                        (function e() {
                                          "disconnected" ===
                                          n._connection.iceConnectionState
                                            ? t-- > 0
                                              ? setTimeout(function () {
                                                  return e();
                                                }, 1e3)
                                              : (A.debug(
                                                  "AC: Chrome RTP timeout fix: Hangup call"
                                                ),
                                                n.terminate({
                                                  cause: _.causes.RTP_TIMEOUT,
                                                  status_code: 408,
                                                  reason_phrase:
                                                    _.causes.RTP_TIMEOUT,
                                                }))
                                            : A.debug(
                                                "AC: Chrome RTP timeout fix: iceConnectionState=".concat(
                                                  n._connection
                                                    .iceConnectionState
                                                )
                                              );
                                        })();
                                    }
                                  }
                                ),
                                A.debug('emit "peerconnection"'),
                                this.emit("peerconnection", {
                                  peerconnection: this._connection,
                                });
                            },
                          },
                          {
                            key: "_createLocalDescription",
                            value: function (e, t) {
                              var n = this;
                              if (
                                (A.debug("createLocalDescription()"),
                                "offer" !== e && "answer" !== e)
                              )
                                throw new Error(
                                  'createLocalDescription() | invalid type "'.concat(
                                    e,
                                    '"'
                                  )
                                );
                              var i = this._connection;
                              return (
                                (this._rtcReady = !1),
                                Promise.resolve()
                                  .then(function () {
                                    return "offer" === e
                                      ? i.createOffer(t).catch(function (e) {
                                          return (
                                            A.warn(
                                              'emit "peerconnection:createofferfailed" [error:%o]',
                                              e
                                            ),
                                            n.emit(
                                              "peerconnection:createofferfailed",
                                              e
                                            ),
                                            Promise.reject(e)
                                          );
                                        })
                                      : i.createAnswer(t).catch(function (e) {
                                          return (
                                            A.warn(
                                              'emit "peerconnection:createanswerfailed" [error:%o]',
                                              e
                                            ),
                                            n.emit(
                                              "peerconnection:createanswerfailed",
                                              e
                                            ),
                                            Promise.reject(e)
                                          );
                                        });
                                  })
                                  .then(function (e) {
                                    return i
                                      .setLocalDescription(e)
                                      .catch(function (e) {
                                        return (
                                          (n._rtcReady = !0),
                                          A.warn(
                                            'emit "peerconnection:setlocaldescriptionfailed" [error:%o]',
                                            e
                                          ),
                                          n.emit(
                                            "peerconnection:setlocaldescriptionfailed",
                                            e
                                          ),
                                          Promise.reject(e)
                                        );
                                      });
                                  })
                                  .then(function () {
                                    var r = t && t.iceRestart;
                                    if (
                                      ("complete" === i.iceGatheringState &&
                                        !r) ||
                                      ("gathering" === i.iceGatheringState &&
                                        n._iceReady)
                                    ) {
                                      n._rtcReady = !0;
                                      var s = {
                                        originator: "local",
                                        type: e,
                                        sdp: i.localDescription.sdp,
                                      };
                                      return (
                                        A.debug('emit "sdp"'),
                                        n.emit("sdp", s),
                                        Promise.resolve(s.sdp)
                                      );
                                    }
                                    return new Promise(function (t) {
                                      var r,
                                        s,
                                        o = !1;
                                      n._iceReady = !1;
                                      var l = function () {
                                        i.removeEventListener(
                                          "icecandidate",
                                          r
                                        ),
                                          i.removeEventListener(
                                            "icegatheringstatechange",
                                            s
                                          ),
                                          (o = !0),
                                          (n._rtcReady = !0),
                                          (n._iceReady = !0);
                                        var l = {
                                          originator: "local",
                                          type: e,
                                          sdp: i.localDescription.sdp,
                                        };
                                        A.debug('emit "sdp"'),
                                          n.emit("sdp", l),
                                          t(l.sdp);
                                      };
                                      i.addEventListener(
                                        "icecandidate",
                                        (r = function (e) {
                                          var t = e.candidate;
                                          t
                                            ? n.emit("icecandidate", {
                                                candidate: t,
                                                ready: l,
                                              })
                                            : o || l();
                                        })
                                      ),
                                        i.addEventListener(
                                          "icegatheringstatechange",
                                          (s = function () {
                                            "complete" !==
                                              i.iceGatheringState ||
                                              o ||
                                              l();
                                          })
                                        ),
                                        void 0 !==
                                          n._ua.modes.ice_timeout_fix &&
                                          setTimeout(function () {
                                            o ||
                                              (A.debug(
                                                "AC: ICE gathering timeout fix"
                                              ),
                                              l());
                                          }, n._ua.modes.ice_timeout_fix);
                                    });
                                  })
                              );
                            },
                          },
                          {
                            key: "_createDialog",
                            value: function (e, t, n) {
                              var i = "UAS" === t ? e.to_tag : e.from_tag,
                                r = "UAS" === t ? e.from_tag : e.to_tag,
                                s = e.call_id + i + r,
                                o = this._earlyDialogs[s];
                              if (n)
                                return (
                                  !!o ||
                                  ((o = new y(this, e, t, y.C.STATUS_EARLY))
                                    .error
                                    ? (A.debug(o.error),
                                      this._failed(
                                        "remote",
                                        e,
                                        _.causes.INTERNAL_ERROR
                                      ),
                                      !1)
                                    : ((this._earlyDialogs[s] = o), !0))
                                );
                              if (
                                ((this._from_tag = e.from_tag),
                                (this._to_tag = e.to_tag),
                                o)
                              )
                                return (
                                  o.update(e, t),
                                  (this._dialog = o),
                                  delete this._earlyDialogs[s],
                                  !0
                                );
                              var l = new y(this, e, t);
                              return l.error
                                ? (A.debug(l.error),
                                  this._failed(
                                    "remote",
                                    e,
                                    _.causes.INTERNAL_ERROR
                                  ),
                                  !1)
                                : ((this._dialog = l), !0);
                            },
                          },
                          {
                            key: "_receiveReinvite",
                            value: function (e) {
                              var t = this;
                              A.debug("receiveReinvite()");
                              var n = e.hasHeader("Content-Type")
                                  ? e.getHeader("Content-Type").toLowerCase()
                                  : void 0,
                                i = {
                                  request: e,
                                  callback: void 0,
                                  reject: function () {
                                    var t =
                                      arguments.length > 0 &&
                                      void 0 !== arguments[0]
                                        ? arguments[0]
                                        : {};
                                    r = !0;
                                    var n = t.status_code || 403,
                                      i = t.reason_phrase || "",
                                      s = p.cloneArray(t.extraHeaders);
                                    if (this._status !== R.STATUS_CONFIRMED)
                                      return !1;
                                    if (n < 300 || n >= 700)
                                      throw new TypeError(
                                        "Invalid status_code: ".concat(n)
                                      );
                                    e.reply(n, i, s);
                                  }.bind(this),
                                },
                                r = !1;
                              if ((this.emit("reinvite", i), !r)) {
                                if (((this._late_sdp = !1), !e.body))
                                  return (
                                    (this._late_sdp = !0),
                                    this._remoteHold &&
                                      ((this._remoteHold = !1),
                                      this._onunhold("remote")),
                                    void (this._connectionPromiseQueue =
                                      this._connectionPromiseQueue
                                        .then(function () {
                                          return t._createLocalDescription(
                                            "offer",
                                            t._rtcOfferConstraints
                                          );
                                        })
                                        .then(function (e) {
                                          s.call(t, e);
                                        })
                                        .catch(function () {
                                          e.reply(500);
                                        }))
                                  );
                                if ("application/sdp" !== n)
                                  return (
                                    A.debug("invalid Content-Type"),
                                    void e.reply(415)
                                  );
                                this._processInDialogSdpOffer(e)
                                  .then(function (e) {
                                    t._status !== R.STATUS_TERMINATED &&
                                      s.call(t, e);
                                  })
                                  .catch(function (e) {
                                    A.warn(e);
                                  });
                              }
                              function s(t) {
                                var n = this,
                                  r = ["Contact: ".concat(this._contact)];
                                this._handleSessionTimersInIncomingRequest(
                                  e,
                                  r
                                ),
                                  this._late_sdp && (t = this._mangleOffer(t)),
                                  e.reply(200, null, r, t, function () {
                                    (n._status = R.STATUS_WAITING_FOR_ACK),
                                      n._setInvite2xxTimer(e, t),
                                      n._setACKTimer();
                                  }),
                                  "function" == typeof i.callback &&
                                    i.callback();
                              }
                            },
                          },
                          {
                            key: "_receiveUpdate",
                            value: function (e) {
                              var t = this;
                              A.debug("receiveUpdate()");
                              var n = e.hasHeader("Content-Type")
                                  ? e.getHeader("Content-Type").toLowerCase()
                                  : void 0,
                                i = {
                                  request: e,
                                  callback: void 0,
                                  reject: function () {
                                    var t =
                                      arguments.length > 0 &&
                                      void 0 !== arguments[0]
                                        ? arguments[0]
                                        : {};
                                    r = !0;
                                    var n = t.status_code || 403,
                                      i = t.reason_phrase || "",
                                      s = p.cloneArray(t.extraHeaders);
                                    if (this._status !== R.STATUS_CONFIRMED)
                                      return !1;
                                    if (n < 300 || n >= 700)
                                      throw new TypeError(
                                        "Invalid status_code: ".concat(n)
                                      );
                                    e.reply(n, i, s);
                                  }.bind(this),
                                },
                                r = !1;
                              if ((this.emit("update", i), !r))
                                if (e.body) {
                                  if ("application/sdp" !== n)
                                    return (
                                      A.debug("invalid Content-Type"),
                                      void e.reply(415)
                                    );
                                  this._processInDialogSdpOffer(e)
                                    .then(function (e) {
                                      t._status !== R.STATUS_TERMINATED &&
                                        s.call(t, e);
                                    })
                                    .catch(function (e) {
                                      A.warn(e);
                                    });
                                } else s.call(this, null);
                              function s(t) {
                                var n = ["Contact: ".concat(this._contact)];
                                this._handleSessionTimersInIncomingRequest(
                                  e,
                                  n
                                ),
                                  e.reply(200, null, n, t),
                                  "function" == typeof i.callback &&
                                    i.callback();
                              }
                            },
                          },
                          {
                            key: "_processInDialogSdpOffer",
                            value: function (e) {
                              var t = this;
                              A.debug("_processInDialogSdpOffer()");
                              var n,
                                i = e.parseSDP(),
                                s = !1,
                                o = r(i.media);
                              try {
                                for (o.s(); !(n = o.n()).done; ) {
                                  var l = n.value;
                                  if (-1 !== I.indexOf(l.type)) {
                                    var a =
                                      l.direction || i.direction || "sendrecv";
                                    if ("sendonly" !== a && "inactive" !== a) {
                                      s = !1;
                                      break;
                                    }
                                    s = !0;
                                  }
                                }
                              } catch (e) {
                                o.e(e);
                              } finally {
                                o.f();
                              }
                              var u = {
                                originator: "remote",
                                type: "offer",
                                sdp: e.body,
                              };
                              A.debug('emit "sdp"'), this.emit("sdp", u);
                              var c = new RTCSessionDescription({
                                type: "offer",
                                sdp: u.sdp,
                              });
                              return (
                                (this._connectionPromiseQueue =
                                  this._connectionPromiseQueue
                                    .then(function () {
                                      if (t._status === R.STATUS_TERMINATED)
                                        throw new Error("terminated");
                                      return t._connection
                                        .setRemoteDescription(c)
                                        .catch(function (n) {
                                          throw (
                                            (e.reply(488),
                                            A.warn(
                                              'emit "peerconnection:setremotedescriptionfailed" [error:%o]',
                                              n
                                            ),
                                            t.emit(
                                              "peerconnection:setremotedescriptionfailed",
                                              n
                                            ),
                                            n)
                                          );
                                        });
                                    })
                                    .then(function () {
                                      if (t._status === R.STATUS_TERMINATED)
                                        throw new Error("terminated");
                                      !0 === t._remoteHold && !1 === s
                                        ? ((t._remoteHold = !1),
                                          t._onunhold("remote"))
                                        : !1 === t._remoteHold &&
                                          !0 === s &&
                                          ((t._remoteHold = !0),
                                          t._onhold("remote"));
                                    })
                                    .then(function () {
                                      if (t._status === R.STATUS_TERMINATED)
                                        throw new Error("terminated");
                                      return t
                                        ._createLocalDescription(
                                          "answer",
                                          t._rtcAnswerConstraints
                                        )
                                        .catch(function (t) {
                                          throw (
                                            (e.reply(500),
                                            A.warn(
                                              'emit "peerconnection:createtelocaldescriptionfailed" [error:%o]',
                                              t
                                            ),
                                            t)
                                          );
                                        });
                                    })
                                    .catch(function (e) {
                                      A.warn(
                                        "_processInDialogSdpOffer() failed [error: %o]",
                                        e
                                      );
                                    })),
                                this._connectionPromiseQueue
                              );
                            },
                          },
                          {
                            key: "_receiveRefer",
                            value: function (e) {
                              var t = this;
                              if ((A.debug("receiveRefer()"), !e.refer_to))
                                return (
                                  A.debug(
                                    "no Refer-To header field present in REFER"
                                  ),
                                  void e.reply(400)
                                );
                              if (e.refer_to.uri.scheme !== _.SIP)
                                return (
                                  A.debug(
                                    "Refer-To header field points to a non-SIP URI scheme"
                                  ),
                                  void e.reply(416)
                                );
                              e.reply(202);
                              var n = new T(this, e.cseq);
                              function i(t) {
                                var i =
                                  arguments.length > 1 &&
                                  void 0 !== arguments[1]
                                    ? arguments[1]
                                    : {};
                                if (
                                  ((t = "function" == typeof t ? t : null),
                                  this._status !== R.STATUS_WAITING_FOR_ACK &&
                                    this._status !== R.STATUS_CONFIRMED)
                                )
                                  return !1;
                                var r = new u(this._ua);
                                if (
                                  (r.on("progress", function (e) {
                                    var t = e.response;
                                    n.notify(t.status_code, t.reason_phrase);
                                  }),
                                  r.on("accepted", function (e) {
                                    var t = e.response;
                                    n.notify(t.status_code, t.reason_phrase);
                                  }),
                                  r.on("_failed", function (e) {
                                    var t = e.message,
                                      i = e.cause;
                                    t
                                      ? n.notify(t.status_code, t.reason_phrase)
                                      : n.notify(487, i);
                                  }),
                                  e.refer_to.uri.hasHeader("replaces"))
                                ) {
                                  var s = decodeURIComponent(
                                    e.refer_to.uri.getHeader("replaces")
                                  );
                                  (i.extraHeaders = p.cloneArray(
                                    i.extraHeaders
                                  )),
                                    i.extraHeaders.push("Replaces: ".concat(s));
                                }
                                r.connect(e.refer_to.uri.toAor(), i, t);
                              }
                              function r() {
                                n.notify(603);
                              }
                              A.debug('emit "refer"'),
                                this.emit("refer", {
                                  request: e,
                                  accept: function (e, n) {
                                    i.call(t, e, n);
                                  },
                                  reject: function () {
                                    r.call(t);
                                  },
                                });
                            },
                          },
                          {
                            key: "_receiveNotify",
                            value: function (e) {
                              if (
                                (A.debug("receiveNotify()"),
                                e.event || e.reply(400),
                                "refer" === e.event.event)
                              ) {
                                var t, n;
                                if (e.event.params && e.event.params.id)
                                  (t = e.event.params.id),
                                    (n = this._referSubscribers[t]);
                                else {
                                  if (
                                    1 !==
                                    Object.keys(this._referSubscribers).length
                                  )
                                    return void e.reply(
                                      400,
                                      "Missing event id parameter"
                                    );
                                  n =
                                    this._referSubscribers[
                                      Object.keys(this._referSubscribers)[0]
                                    ];
                                }
                                if (!n)
                                  return void e.reply(
                                    481,
                                    "Subscription does not exist"
                                  );
                                n.receiveNotify(e), e.reply(200);
                              } else e.reply(489);
                            },
                          },
                          {
                            key: "_receiveReplaces",
                            value: function (e) {
                              var t = this;
                              function n(t) {
                                var n = this;
                                if (
                                  this._status !== R.STATUS_WAITING_FOR_ACK &&
                                  this._status !== R.STATUS_CONFIRMED
                                )
                                  return !1;
                                var i = new u(this._ua);
                                i.on("confirmed", function () {
                                  n.terminate();
                                }),
                                  i.init_incoming(e, t);
                              }
                              function i() {
                                A.debug("Replaced INVITE rejected by the user"),
                                  e.reply(486);
                              }
                              A.debug("receiveReplaces()"),
                                this.emit("replaces", {
                                  request: e,
                                  accept: function (e) {
                                    n.call(t, e);
                                  },
                                  reject: function () {
                                    i.call(t);
                                  },
                                });
                            },
                          },
                          {
                            key: "_sendInitialRequest",
                            value: function (e, t, n) {
                              var i = this,
                                r = new C(this._ua, this._request, {
                                  onRequestTimeout: function () {
                                    i.onRequestTimeout();
                                  },
                                  onTransportError: function () {
                                    i.onTransportError();
                                  },
                                  onAuthenticated: function (e) {
                                    i._request = e;
                                  },
                                  onReceiveResponse: function (e) {
                                    i._receiveInviteResponse(e);
                                  },
                                });
                              Promise.resolve()
                                .then(function () {
                                  return (
                                    n ||
                                    (e.audio || e.video
                                      ? ((i._localMediaStreamLocallyGenerated =
                                          !0),
                                        navigator.mediaDevices
                                          .getUserMedia(e)
                                          .catch(function (e) {
                                            if (
                                              i._status === R.STATUS_TERMINATED
                                            )
                                              throw new Error("terminated");
                                            throw (
                                              (i._failed(
                                                "local",
                                                null,
                                                _.causes
                                                  .USER_DENIED_MEDIA_ACCESS
                                              ),
                                              A.warn(
                                                'emit "getusermediafailed" [error:%o]',
                                                e
                                              ),
                                              i.emit("getusermediafailed", e),
                                              e)
                                            );
                                          }))
                                      : void 0)
                                  );
                                })
                                .then(function (e) {
                                  if (i._status === R.STATUS_TERMINATED)
                                    throw new Error("terminated");
                                  return (
                                    (i._localMediaStream = e),
                                    e &&
                                      e.getTracks().forEach(function (t) {
                                        i._connection.addTrack(t, e);
                                      }),
                                    i._connecting(i._request),
                                    i
                                      ._createLocalDescription("offer", t)
                                      .catch(function (e) {
                                        throw (
                                          (i._failed(
                                            "local",
                                            null,
                                            _.causes.WEBRTC_ERROR
                                          ),
                                          e)
                                        );
                                      })
                                  );
                                })
                                .then(function (e) {
                                  if (
                                    i._is_canceled ||
                                    i._status === R.STATUS_TERMINATED
                                  )
                                    throw new Error("terminated");
                                  (i._request.body = e),
                                    (i._status = R.STATUS_INVITE_SENT),
                                    A.debug(
                                      'emit "sending" [request:%o]',
                                      i._request
                                    ),
                                    i.emit("sending", { request: i._request }),
                                    r.send();
                                })
                                .catch(function (e) {
                                  i._status !== R.STATUS_TERMINATED &&
                                    A.warn(e);
                                });
                            },
                          },
                          {
                            key: "_getDTMFRTPSender",
                            value: function () {
                              var e = this._connection
                                .getSenders()
                                .find(function (e) {
                                  return e.track && "audio" === e.track.kind;
                                });
                              if (e && e.dtmf) return e.dtmf;
                              A.warn(
                                "sendDTMF() | no local audio track to send DTMF with"
                              );
                            },
                          },
                          {
                            key: "_receiveInviteResponse",
                            value: function (e) {
                              var t = this;
                              if (
                                (A.debug("receiveInviteResponse()"),
                                this._dialog &&
                                  e.status_code >= 200 &&
                                  e.status_code <= 299)
                              ) {
                                if (
                                  this._dialog.id.call_id === e.call_id &&
                                  this._dialog.id.local_tag === e.from_tag &&
                                  this._dialog.id.remote_tag === e.to_tag
                                )
                                  return void this.sendRequest(_.ACK);
                                var n = new y(this, e, "UAC");
                                return void 0 !== n.error
                                  ? void A.debug(n.error)
                                  : (this.sendRequest(_.ACK),
                                    void this.sendRequest(_.BYE));
                              }
                              if (this._is_canceled)
                                e.status_code >= 100 && e.status_code < 200
                                  ? this._request.cancel(this._cancel_reason)
                                  : e.status_code >= 200 &&
                                    e.status_code < 299 &&
                                    this._acceptAndTerminate(e);
                              else if (
                                this._status === R.STATUS_INVITE_SENT ||
                                this._status === R.STATUS_1XX_RECEIVED
                              )
                                switch (!0) {
                                  case /^100$/.test(e.status_code):
                                    this._status = R.STATUS_1XX_RECEIVED;
                                    break;
                                  case /^1[0-9]{2}$/.test(e.status_code):
                                    if (!e.to_tag) {
                                      A.debug(
                                        "1xx response received without to tag"
                                      );
                                      break;
                                    }
                                    if (
                                      e.hasHeader("contact") &&
                                      !this._createDialog(e, "UAC", !0)
                                    )
                                      break;
                                    if (
                                      ((this._status = R.STATUS_1XX_RECEIVED),
                                      !e.body)
                                    ) {
                                      this._progress("remote", e);
                                      break;
                                    }
                                    var i = {
                                      originator: "remote",
                                      type: "answer",
                                      sdp: e.body,
                                    };
                                    A.debug('emit "sdp"'), this.emit("sdp", i);
                                    var r = new RTCSessionDescription({
                                      type: "answer",
                                      sdp: i.sdp,
                                    });
                                    this._connectionPromiseQueue =
                                      this._connectionPromiseQueue
                                        .then(function () {
                                          return t._connection.setRemoteDescription(
                                            r
                                          );
                                        })
                                        .then(function () {
                                          return t._progress("remote", e);
                                        })
                                        .catch(function (e) {
                                          A.warn(
                                            'emit "peerconnection:setremotedescriptionfailed" [error:%o]',
                                            e
                                          ),
                                            t.emit(
                                              "peerconnection:setremotedescriptionfailed",
                                              e
                                            );
                                        });
                                    break;
                                  case /^2[0-9]{2}$/.test(e.status_code):
                                    if (
                                      ((this._status = R.STATUS_CONFIRMED),
                                      !e.body)
                                    ) {
                                      this._acceptAndTerminate(
                                        e,
                                        400,
                                        _.causes.MISSING_SDP
                                      ),
                                        this._failed(
                                          "remote",
                                          e,
                                          _.causes.BAD_MEDIA_DESCRIPTION
                                        );
                                      break;
                                    }
                                    if (!this._createDialog(e, "UAC")) break;
                                    var s = {
                                      originator: "remote",
                                      type: "answer",
                                      sdp: e.body,
                                    };
                                    A.debug('emit "sdp"'), this.emit("sdp", s);
                                    var o = new RTCSessionDescription({
                                      type: "answer",
                                      sdp: s.sdp,
                                    });
                                    this._connectionPromiseQueue =
                                      this._connectionPromiseQueue
                                        .then(function () {
                                          if (
                                            "stable" ===
                                            t._connection.signalingState
                                          )
                                            return t._connection
                                              .createOffer(
                                                t._rtcOfferConstraints
                                              )
                                              .then(function (e) {
                                                return t._connection.setLocalDescription(
                                                  e
                                                );
                                              })
                                              .catch(function (n) {
                                                t._acceptAndTerminate(
                                                  e,
                                                  500,
                                                  n.toString()
                                                ),
                                                  t._failed(
                                                    "local",
                                                    e,
                                                    _.causes.WEBRTC_ERROR
                                                  );
                                              });
                                        })
                                        .then(function () {
                                          t._connection
                                            .setRemoteDescription(o)
                                            .then(function () {
                                              t._handleSessionTimersInIncomingResponse(
                                                e
                                              ),
                                                t._accepted("remote", e),
                                                t.sendRequest(_.ACK),
                                                t._confirmed("local", null);
                                            })
                                            .catch(function (n) {
                                              t._acceptAndTerminate(
                                                e,
                                                488,
                                                "Not Acceptable Here"
                                              ),
                                                t._failed(
                                                  "remote",
                                                  e,
                                                  _.causes.BAD_MEDIA_DESCRIPTION
                                                ),
                                                A.warn(
                                                  'emit "peerconnection:setremotedescriptionfailed" [error:%o]',
                                                  n
                                                ),
                                                t.emit(
                                                  "peerconnection:setremotedescriptionfailed",
                                                  n
                                                );
                                            });
                                        });
                                    break;
                                  default:
                                    var l = p.sipErrorCause(e.status_code);
                                    this._failed("remote", e, l);
                                }
                            },
                          },
                          {
                            key: "_sendReinvite",
                            value: function () {
                              var e = this,
                                t =
                                  arguments.length > 0 &&
                                  void 0 !== arguments[0]
                                    ? arguments[0]
                                    : {};
                              A.debug("sendReinvite()");
                              var n = p.cloneArray(t.extraHeaders),
                                i = p.cloneObject(t.eventHandlers),
                                r =
                                  t.rtcOfferConstraints ||
                                  this._rtcOfferConstraints ||
                                  null,
                                s = !1;
                              function o(e) {
                                var t = this;
                                if (
                                  this._status !== R.STATUS_TERMINATED &&
                                  (this.sendRequest(_.ACK), !s)
                                )
                                  if (
                                    (this._handleSessionTimersInIncomingResponse(
                                      e
                                    ),
                                    e.body)
                                  )
                                    if (
                                      e.hasHeader("Content-Type") &&
                                      "application/sdp" ===
                                        e
                                          .getHeader("Content-Type")
                                          .toLowerCase()
                                    ) {
                                      var n = {
                                        originator: "remote",
                                        type: "answer",
                                        sdp: e.body,
                                      };
                                      A.debug('emit "sdp"'),
                                        this.emit("sdp", n);
                                      var r = new RTCSessionDescription({
                                        type: "answer",
                                        sdp: n.sdp,
                                      });
                                      this._connectionPromiseQueue =
                                        this._connectionPromiseQueue
                                          .then(function () {
                                            return t._connection.setRemoteDescription(
                                              r
                                            );
                                          })
                                          .then(function () {
                                            i.succeeded && i.succeeded(e);
                                          })
                                          .catch(function (e) {
                                            l.call(t),
                                              A.warn(
                                                'emit "peerconnection:setremotedescriptionfailed" [error:%o]',
                                                e
                                              ),
                                              t.emit(
                                                "peerconnection:setremotedescriptionfailed",
                                                e
                                              );
                                          });
                                    } else l.call(this);
                                  else l.call(this);
                              }
                              function l(e) {
                                i.failed && i.failed(e);
                              }
                              n.push("Contact: ".concat(this._contact)),
                                n.push("Content-Type: application/sdp"),
                                this._sessionTimers.running &&
                                  n.push(
                                    "Session-Expires: "
                                      .concat(
                                        this._sessionTimers.currentExpires,
                                        ";refresher="
                                      )
                                      .concat(
                                        this._sessionTimers.refresher
                                          ? "uac"
                                          : "uas"
                                      )
                                  ),
                                (this._connectionPromiseQueue =
                                  this._connectionPromiseQueue
                                    .then(function () {
                                      return e._createLocalDescription(
                                        "offer",
                                        r
                                      );
                                    })
                                    .then(function (t) {
                                      var i = {
                                        originator: "local",
                                        type: "offer",
                                        sdp: (t = e._mangleOffer(t)),
                                      };
                                      A.debug('emit "sdp"'),
                                        e.emit("sdp", i),
                                        e.sendRequest(_.INVITE, {
                                          extraHeaders: n,
                                          body: t,
                                          eventHandlers: {
                                            onSuccessResponse: function (t) {
                                              o.call(e, t), (s = !0);
                                            },
                                            onErrorResponse: function (t) {
                                              l.call(e, t);
                                            },
                                            onTransportError: function () {
                                              e.onTransportError();
                                            },
                                            onRequestTimeout: function () {
                                              e.onRequestTimeout();
                                            },
                                            onDialogError: function () {
                                              e.onDialogError();
                                            },
                                          },
                                        });
                                    })
                                    .catch(function () {
                                      l();
                                    }));
                            },
                          },
                          {
                            key: "_sendUpdate",
                            value: function () {
                              var e = this,
                                t =
                                  arguments.length > 0 &&
                                  void 0 !== arguments[0]
                                    ? arguments[0]
                                    : {};
                              A.debug("sendUpdate()");
                              var n = p.cloneArray(t.extraHeaders),
                                i = p.cloneObject(t.eventHandlers),
                                r =
                                  t.rtcOfferConstraints ||
                                  this._rtcOfferConstraints ||
                                  null,
                                s = t.sdpOffer || !1,
                                o = !1;
                              function l(e) {
                                var t = this;
                                if (this._status !== R.STATUS_TERMINATED && !o)
                                  if (
                                    (this._handleSessionTimersInIncomingResponse(
                                      e
                                    ),
                                    s)
                                  ) {
                                    if (!e.body) return void a.call(this);
                                    if (
                                      !e.hasHeader("Content-Type") ||
                                      "application/sdp" !==
                                        e
                                          .getHeader("Content-Type")
                                          .toLowerCase()
                                    )
                                      return void a.call(this);
                                    var n = {
                                      originator: "remote",
                                      type: "answer",
                                      sdp: e.body,
                                    };
                                    A.debug('emit "sdp"'), this.emit("sdp", n);
                                    var r = new RTCSessionDescription({
                                      type: "answer",
                                      sdp: n.sdp,
                                    });
                                    this._connectionPromiseQueue =
                                      this._connectionPromiseQueue
                                        .then(function () {
                                          return t._connection.setRemoteDescription(
                                            r
                                          );
                                        })
                                        .then(function () {
                                          i.succeeded && i.succeeded(e);
                                        })
                                        .catch(function (e) {
                                          a.call(t),
                                            A.warn(
                                              'emit "peerconnection:setremotedescriptionfailed" [error:%o]',
                                              e
                                            ),
                                            t.emit(
                                              "peerconnection:setremotedescriptionfailed",
                                              e
                                            );
                                        });
                                  } else i.succeeded && i.succeeded(e);
                              }
                              function a(e) {
                                i.failed && i.failed(e);
                              }
                              n.push("Contact: ".concat(this._contact)),
                                this._sessionTimers.running &&
                                  n.push(
                                    "Session-Expires: "
                                      .concat(
                                        this._sessionTimers.currentExpires,
                                        ";refresher="
                                      )
                                      .concat(
                                        this._sessionTimers.refresher
                                          ? "uac"
                                          : "uas"
                                      )
                                  ),
                                s
                                  ? (n.push("Content-Type: application/sdp"),
                                    (this._connectionPromiseQueue =
                                      this._connectionPromiseQueue
                                        .then(function () {
                                          return e._createLocalDescription(
                                            "offer",
                                            r
                                          );
                                        })
                                        .then(function (t) {
                                          var i = {
                                            originator: "local",
                                            type: "offer",
                                            sdp: (t = e._mangleOffer(t)),
                                          };
                                          A.debug('emit "sdp"'),
                                            e.emit("sdp", i),
                                            e.sendRequest(_.UPDATE, {
                                              extraHeaders: n,
                                              body: t,
                                              eventHandlers: {
                                                onSuccessResponse: function (
                                                  t
                                                ) {
                                                  l.call(e, t), (o = !0);
                                                },
                                                onErrorResponse: function (t) {
                                                  a.call(e, t);
                                                },
                                                onTransportError: function () {
                                                  e.onTransportError();
                                                },
                                                onRequestTimeout: function () {
                                                  e.onRequestTimeout();
                                                },
                                                onDialogError: function () {
                                                  e.onDialogError();
                                                },
                                              },
                                            });
                                        })
                                        .catch(function () {
                                          a.call(e);
                                        })))
                                  : this.sendRequest(_.UPDATE, {
                                      extraHeaders: n,
                                      eventHandlers: {
                                        onSuccessResponse: function (t) {
                                          l.call(e, t);
                                        },
                                        onErrorResponse: function (t) {
                                          a.call(e, t);
                                        },
                                        onTransportError: function () {
                                          e.onTransportError();
                                        },
                                        onRequestTimeout: function () {
                                          e.onRequestTimeout();
                                        },
                                        onDialogError: function () {
                                          e.onDialogError();
                                        },
                                      },
                                    });
                            },
                          },
                          {
                            key: "_acceptAndTerminate",
                            value: function (e, t, n) {
                              A.debug("acceptAndTerminate()");
                              var i = [];
                              t &&
                                ((n = n || _.REASON_PHRASE[t] || ""),
                                i.push(
                                  "Reason: SIP ;cause="
                                    .concat(t, '; text="')
                                    .concat(n, '"')
                                )),
                                (this._dialog ||
                                  this._createDialog(e, "UAC")) &&
                                  (this.sendRequest(_.ACK),
                                  this.sendRequest(_.BYE, { extraHeaders: i })),
                                (this._status = R.STATUS_TERMINATED);
                            },
                          },
                          {
                            key: "_mangleOffer",
                            value: function (e) {
                              if (!this._localHold && !this._remoteHold)
                                return e;
                              if (
                                ((e = d.parse(e)),
                                this._localHold && !this._remoteHold)
                              ) {
                                A.debug(
                                  "mangleOffer() | me on hold, mangling offer"
                                );
                                var t,
                                  n = r(e.media);
                                try {
                                  for (n.s(); !(t = n.n()).done; ) {
                                    var i = t.value;
                                    -1 !== I.indexOf(i.type) &&
                                      (i.direction
                                        ? "sendrecv" === i.direction
                                          ? (i.direction = "sendonly")
                                          : "recvonly" === i.direction &&
                                            (i.direction = "inactive")
                                        : (i.direction = "sendonly"));
                                  }
                                } catch (e) {
                                  n.e(e);
                                } finally {
                                  n.f();
                                }
                              } else if (this._localHold && this._remoteHold) {
                                A.debug(
                                  "mangleOffer() | both on hold, mangling offer"
                                );
                                var s,
                                  o = r(e.media);
                                try {
                                  for (o.s(); !(s = o.n()).done; ) {
                                    var l = s.value;
                                    -1 !== I.indexOf(l.type) &&
                                      (l.direction = "inactive");
                                  }
                                } catch (e) {
                                  o.e(e);
                                } finally {
                                  o.f();
                                }
                              } else if (this._remoteHold) {
                                A.debug(
                                  "mangleOffer() | remote on hold, mangling offer"
                                );
                                var a,
                                  u = r(e.media);
                                try {
                                  for (u.s(); !(a = u.n()).done; ) {
                                    var c = a.value;
                                    -1 !== I.indexOf(c.type) &&
                                      (c.direction
                                        ? "sendrecv" === c.direction
                                          ? (c.direction = "recvonly")
                                          : "recvonly" === c.direction &&
                                            (c.direction = "inactive")
                                        : (c.direction = "recvonly"));
                                  }
                                } catch (e) {
                                  u.e(e);
                                } finally {
                                  u.f();
                                }
                              }
                              return d.write(e);
                            },
                          },
                          {
                            key: "_setLocalMediaStatus",
                            value: function () {
                              var e = !0,
                                t = !0;
                              (this._localHold || this._remoteHold) &&
                                ((e = !1), (t = !1)),
                                this._audioMuted && (e = !1),
                                this._videoMuted && (t = !1),
                                this._toggleMuteAudio(!e),
                                this._toggleMuteVideo(!t);
                            },
                          },
                          {
                            key: "_handleSessionTimersInIncomingRequest",
                            value: function (e, t) {
                              var n;
                              this._sessionTimers.enabled &&
                                (e.session_expires &&
                                e.session_expires >= _.MIN_SESSION_EXPIRES
                                  ? ((this._sessionTimers.currentExpires =
                                      e.session_expires),
                                    (n = e.session_expires_refresher || "uas"))
                                  : ((this._sessionTimers.currentExpires =
                                      this._sessionTimers.defaultExpires),
                                    (n = "uas")),
                                t.push(
                                  "Session-Expires: "
                                    .concat(
                                      this._sessionTimers.currentExpires,
                                      ";refresher="
                                    )
                                    .concat(n)
                                ),
                                (this._sessionTimers.refresher = "uas" === n),
                                this._runSessionTimer());
                            },
                          },
                          {
                            key: "_handleSessionTimersInIncomingResponse",
                            value: function (e) {
                              var t;
                              this._sessionTimers.enabled &&
                                (e.session_expires &&
                                e.session_expires >= _.MIN_SESSION_EXPIRES
                                  ? ((this._sessionTimers.currentExpires =
                                      e.session_expires),
                                    (t = e.session_expires_refresher || "uac"))
                                  : ((this._sessionTimers.currentExpires =
                                      this._sessionTimers.defaultExpires),
                                    (t = "uac")),
                                (this._sessionTimers.refresher = "uac" === t),
                                this._runSessionTimer());
                            },
                          },
                          {
                            key: "_runSessionTimer",
                            value: function () {
                              var e = this,
                                t = this._sessionTimers.currentExpires;
                              (this._sessionTimers.running = !0),
                                clearTimeout(this._sessionTimers.timer),
                                this._sessionTimers.refresher
                                  ? (this._sessionTimers.timer = setTimeout(
                                      function () {
                                        e._status !== R.STATUS_TERMINATED &&
                                          e._isReadyToReOffer() &&
                                          (A.debug(
                                            "runSessionTimer() | sending session refresh request"
                                          ),
                                          e._sessionTimers.refreshMethod ===
                                          _.UPDATE
                                            ? e._sendUpdate()
                                            : e._sendReinvite());
                                      },
                                      500 * t
                                    ))
                                  : (this._sessionTimers.timer = setTimeout(
                                      function () {
                                        e._status !== R.STATUS_TERMINATED &&
                                          (A.warn(
                                            "runSessionTimer() | timer expired, terminating the session"
                                          ),
                                          e.terminate({
                                            cause: _.causes.REQUEST_TIMEOUT,
                                            status_code: 408,
                                            reason_phrase:
                                              "Session Timer Expired",
                                          }));
                                      },
                                      1100 * t
                                    ));
                            },
                          },
                          {
                            key: "_toggleMuteAudio",
                            value: function (e) {
                              var t,
                                n = r(
                                  this._connection
                                    .getSenders()
                                    .filter(function (e) {
                                      return (
                                        e.track && "audio" === e.track.kind
                                      );
                                    })
                                );
                              try {
                                for (n.s(); !(t = n.n()).done; )
                                  t.value.track.enabled = !e;
                              } catch (e) {
                                n.e(e);
                              } finally {
                                n.f();
                              }
                            },
                          },
                          {
                            key: "_toggleMuteVideo",
                            value: function (e) {
                              var t,
                                n = r(
                                  this._connection
                                    .getSenders()
                                    .filter(function (e) {
                                      return (
                                        e.track && "video" === e.track.kind
                                      );
                                    })
                                );
                              try {
                                for (n.s(); !(t = n.n()).done; )
                                  t.value.track.enabled = !e;
                              } catch (e) {
                                n.e(e);
                              } finally {
                                n.f();
                              }
                            },
                          },
                          {
                            key: "_newRTCSession",
                            value: function (e, t) {
                              A.debug("newRTCSession()"),
                                this._ua.newRTCSession(this, {
                                  originator: e,
                                  session: this,
                                  request: t,
                                });
                            },
                          },
                          {
                            key: "_connecting",
                            value: function (e) {
                              A.debug("session connecting"),
                                A.debug('emit "connecting"'),
                                this.emit("connecting", { request: e });
                            },
                          },
                          {
                            key: "_progress",
                            value: function (e, t) {
                              A.debug("session progress"),
                                A.debug('emit "progress"'),
                                this.emit("progress", {
                                  originator: e,
                                  response: t || null,
                                });
                            },
                          },
                          {
                            key: "_accepted",
                            value: function (e, t) {
                              A.debug("session accepted"),
                                (this._start_time = new Date()),
                                A.debug('emit "accepted"'),
                                this.emit("accepted", {
                                  originator: e,
                                  response: t || null,
                                });
                            },
                          },
                          {
                            key: "_confirmed",
                            value: function (e, t) {
                              A.debug("session confirmed"),
                                (this._is_confirmed = !0),
                                A.debug('emit "confirmed"'),
                                this.emit("confirmed", {
                                  originator: e,
                                  ack: t || null,
                                });
                            },
                          },
                          {
                            key: "_ended",
                            value: function (e, t, n) {
                              A.debug("session ended"),
                                (this._end_time = new Date()),
                                this._close(),
                                A.debug('emit "ended"'),
                                this.emit("ended", {
                                  originator: e,
                                  message: t || null,
                                  cause: n,
                                });
                            },
                          },
                          {
                            key: "_failed",
                            value: function (e, t, n) {
                              A.debug("session failed"),
                                A.debug('emit "_failed"'),
                                this.emit("_failed", {
                                  originator: e,
                                  message: t || null,
                                  cause: n,
                                }),
                                this._close(),
                                A.debug('emit "failed"'),
                                this.emit("failed", {
                                  originator: e,
                                  message: t || null,
                                  cause: n,
                                });
                            },
                          },
                          {
                            key: "_onhold",
                            value: function (e) {
                              A.debug("session onhold"),
                                this._setLocalMediaStatus(),
                                A.debug('emit "hold"'),
                                this.emit("hold", { originator: e });
                            },
                          },
                          {
                            key: "_onunhold",
                            value: function (e) {
                              A.debug("session onunhold"),
                                this._setLocalMediaStatus(),
                                A.debug('emit "unhold"'),
                                this.emit("unhold", { originator: e });
                            },
                          },
                          {
                            key: "_onmute",
                            value: function (e) {
                              var t = e.audio,
                                n = e.video;
                              A.debug("session onmute"),
                                this._setLocalMediaStatus(),
                                A.debug('emit "muted"'),
                                this.emit("muted", { audio: t, video: n });
                            },
                          },
                          {
                            key: "_onunmute",
                            value: function (e) {
                              var t = e.audio,
                                n = e.video;
                              A.debug("session onunmute"),
                                this._setLocalMediaStatus(),
                                A.debug('emit "unmuted"'),
                                this.emit("unmuted", { audio: t, video: n });
                            },
                          },
                        ]),
                        (i = [
                          {
                            key: "C",
                            get: function () {
                              return R;
                            },
                          },
                        ]),
                        n && o(t.prototype, n),
                        i && o(t, i),
                        Object.defineProperty(t, "prototype", { writable: !1 }),
                        u
                      );
                    })(c);
                  },
                  {
                    "./Constants": 2,
                    "./Dialog": 3,
                    "./Exceptions": 6,
                    "./Logger": 9,
                    "./RTCSession/DTMF": 16,
                    "./RTCSession/Info": 17,
                    "./RTCSession/ReferNotifier": 18,
                    "./RTCSession/ReferSubscriber": 19,
                    "./RequestSender": 21,
                    "./SIPMessage": 22,
                    "./Timers": 25,
                    "./Transactions": 26,
                    "./URI": 29,
                    "./Utils": 30,
                    events: 33,
                    "sdp-transform": 39,
                  },
                ],
                16: [
                  function (e, t, n) {
                    "use strict";
                    function i(e) {
                      return (
                        (i =
                          "function" == typeof Symbol &&
                          "symbol" == typeof Symbol.iterator
                            ? function (e) {
                                return typeof e;
                              }
                            : function (e) {
                                return e &&
                                  "function" == typeof Symbol &&
                                  e.constructor === Symbol &&
                                  e !== Symbol.prototype
                                  ? "symbol"
                                  : typeof e;
                              }),
                        i(e)
                      );
                    }
                    function r(e, t) {
                      return (
                        (r = Object.setPrototypeOf
                          ? Object.setPrototypeOf.bind()
                          : function (e, t) {
                              return (e.__proto__ = t), e;
                            }),
                        r(e, t)
                      );
                    }
                    function s(e) {
                      var t = (function () {
                        if ("undefined" == typeof Reflect || !Reflect.construct)
                          return !1;
                        if (Reflect.construct.sham) return !1;
                        if ("function" == typeof Proxy) return !0;
                        try {
                          return (
                            Boolean.prototype.valueOf.call(
                              Reflect.construct(Boolean, [], function () {})
                            ),
                            !0
                          );
                        } catch (e) {
                          return !1;
                        }
                      })();
                      return function () {
                        var n,
                          r = o(e);
                        if (t) {
                          var s = o(this).constructor;
                          n = Reflect.construct(r, arguments, s);
                        } else n = r.apply(this, arguments);
                        return (function (e, t) {
                          if (
                            t &&
                            ("object" === i(t) || "function" == typeof t)
                          )
                            return t;
                          if (void 0 !== t)
                            throw new TypeError(
                              "Derived constructors may only return object or undefined"
                            );
                          return (function (e) {
                            if (void 0 === e)
                              throw new ReferenceError(
                                "this hasn't been initialised - super() hasn't been called"
                              );
                            return e;
                          })(e);
                        })(this, n);
                      };
                    }
                    function o(e) {
                      return (
                        (o = Object.setPrototypeOf
                          ? Object.getPrototypeOf.bind()
                          : function (e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                            }),
                        o(e)
                      );
                    }
                    var l = e("events").EventEmitter,
                      a = e("../Logger"),
                      u = e("../Constants"),
                      c = e("../Exceptions"),
                      d = e("../Utils"),
                      h = new a("RTCSession:DTMF"),
                      _ = {
                        MIN_DURATION: 70,
                        MAX_DURATION: 6e3,
                        DEFAULT_DURATION: 100,
                        MIN_INTER_TONE_GAP: 50,
                        DEFAULT_INTER_TONE_GAP: 500,
                      };
                    (t.exports = (function (e) {
                      !(function (e, t) {
                        if ("function" != typeof t && null !== t)
                          throw new TypeError(
                            "Super expression must either be null or a function"
                          );
                        (e.prototype = Object.create(t && t.prototype, {
                          constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0,
                          },
                        })),
                          Object.defineProperty(e, "prototype", {
                            writable: !1,
                          }),
                          t && r(e, t);
                      })(o, e);
                      var t,
                        n,
                        i = s(o);
                      function o(e) {
                        var t;
                        return (
                          (function (e, t) {
                            if (!(e instanceof t))
                              throw new TypeError(
                                "Cannot call a class as a function"
                              );
                          })(this, o),
                          ((t = i.call(this))._session = e),
                          (t._direction = null),
                          (t._tone = null),
                          (t._duration = null),
                          (t._request = null),
                          t
                        );
                      }
                      return (
                        (t = o),
                        (n = [
                          {
                            key: "tone",
                            get: function () {
                              return this._tone;
                            },
                          },
                          {
                            key: "duration",
                            get: function () {
                              return this._duration;
                            },
                          },
                          {
                            key: "send",
                            value: function (e) {
                              var t = this,
                                n =
                                  arguments.length > 1 &&
                                  void 0 !== arguments[1]
                                    ? arguments[1]
                                    : {};
                              if (void 0 === e)
                                throw new TypeError("Not enough arguments");
                              if (
                                ((this._direction = "outgoing"),
                                this._session.status !==
                                  this._session.C.STATUS_CONFIRMED &&
                                  this._session.status !==
                                    this._session.C.STATUS_WAITING_FOR_ACK)
                              )
                                throw new c.InvalidStateError(
                                  this._session.status
                                );
                              var i = d.cloneArray(n.extraHeaders);
                              if (
                                ((this.eventHandlers = d.cloneObject(
                                  n.eventHandlers
                                )),
                                "string" == typeof e)
                              )
                                e = e.toUpperCase();
                              else {
                                if ("number" != typeof e)
                                  throw new TypeError(
                                    "Invalid tone: ".concat(e)
                                  );
                                e = e.toString();
                              }
                              if (!e.match(/^[0-9A-DR#*]$/))
                                throw new TypeError("Invalid tone: ".concat(e));
                              (this._tone = e),
                                (this._duration = n.duration),
                                i.push("Content-Type: application/dtmf-relay");
                              var r = "Signal=".concat(this._tone, "\r\n");
                              (r += "Duration=".concat(this._duration)),
                                this._session.newDTMF({
                                  originator: "local",
                                  dtmf: this,
                                  request: this._request,
                                }),
                                this._session.sendRequest(u.INFO, {
                                  extraHeaders: i,
                                  eventHandlers: {
                                    onSuccessResponse: function (e) {
                                      t.emit("succeeded", {
                                        originator: "remote",
                                        response: e,
                                      });
                                    },
                                    onErrorResponse: function (e) {
                                      t.eventHandlers.onFailed &&
                                        t.eventHandlers.onFailed(),
                                        t.emit("failed", {
                                          originator: "remote",
                                          response: e,
                                        });
                                    },
                                    onRequestTimeout: function () {
                                      t._session.onRequestTimeout();
                                    },
                                    onTransportError: function () {
                                      t._session.onTransportError();
                                    },
                                    onDialogError: function () {
                                      t._session.onDialogError();
                                    },
                                  },
                                  body: r,
                                });
                            },
                          },
                          {
                            key: "init_incoming",
                            value: function (e) {
                              var t =
                                  /^(Signal\s*?=\s*?)([0-9A-D#*]{1})(\s)?.*/,
                                n = /^(Duration\s?=\s?)([0-9]{1,4})(\s)?.*/;
                              if (
                                ((this._direction = "incoming"),
                                (this._request = e),
                                e.reply(200),
                                e.body)
                              ) {
                                var i = e.body.split("\n");
                                i.length >= 1 &&
                                  t.test(i[0]) &&
                                  (this._tone = i[0].replace(t, "$2")),
                                  i.length >= 2 &&
                                    n.test(i[1]) &&
                                    (this._duration = parseInt(
                                      i[1].replace(n, "$2"),
                                      10
                                    ));
                              }
                              this._duration ||
                                (this._duration = _.DEFAULT_DURATION),
                                this._tone
                                  ? this._session.newDTMF({
                                      originator: "remote",
                                      dtmf: this,
                                      request: e,
                                    })
                                  : h.debug(
                                      "invalid INFO DTMF received, discarded"
                                    );
                            },
                          },
                        ]),
                        n &&
                          (function (e, t) {
                            for (var n = 0; n < t.length; n++) {
                              var i = t[n];
                              (i.enumerable = i.enumerable || !1),
                                (i.configurable = !0),
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(e, i.key, i);
                            }
                          })(t.prototype, n),
                        Object.defineProperty(t, "prototype", { writable: !1 }),
                        o
                      );
                    })(l)),
                      (t.exports.C = _);
                  },
                  {
                    "../Constants": 2,
                    "../Exceptions": 6,
                    "../Logger": 9,
                    "../Utils": 30,
                    events: 33,
                  },
                ],
                17: [
                  function (e, t, n) {
                    "use strict";
                    function i(e) {
                      return (
                        (i =
                          "function" == typeof Symbol &&
                          "symbol" == typeof Symbol.iterator
                            ? function (e) {
                                return typeof e;
                              }
                            : function (e) {
                                return e &&
                                  "function" == typeof Symbol &&
                                  e.constructor === Symbol &&
                                  e !== Symbol.prototype
                                  ? "symbol"
                                  : typeof e;
                              }),
                        i(e)
                      );
                    }
                    function r(e, t) {
                      return (
                        (r = Object.setPrototypeOf
                          ? Object.setPrototypeOf.bind()
                          : function (e, t) {
                              return (e.__proto__ = t), e;
                            }),
                        r(e, t)
                      );
                    }
                    function s(e) {
                      var t = (function () {
                        if ("undefined" == typeof Reflect || !Reflect.construct)
                          return !1;
                        if (Reflect.construct.sham) return !1;
                        if ("function" == typeof Proxy) return !0;
                        try {
                          return (
                            Boolean.prototype.valueOf.call(
                              Reflect.construct(Boolean, [], function () {})
                            ),
                            !0
                          );
                        } catch (e) {
                          return !1;
                        }
                      })();
                      return function () {
                        var n,
                          r = o(e);
                        if (t) {
                          var s = o(this).constructor;
                          n = Reflect.construct(r, arguments, s);
                        } else n = r.apply(this, arguments);
                        return (function (e, t) {
                          if (
                            t &&
                            ("object" === i(t) || "function" == typeof t)
                          )
                            return t;
                          if (void 0 !== t)
                            throw new TypeError(
                              "Derived constructors may only return object or undefined"
                            );
                          return (function (e) {
                            if (void 0 === e)
                              throw new ReferenceError(
                                "this hasn't been initialised - super() hasn't been called"
                              );
                            return e;
                          })(e);
                        })(this, n);
                      };
                    }
                    function o(e) {
                      return (
                        (o = Object.setPrototypeOf
                          ? Object.getPrototypeOf.bind()
                          : function (e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                            }),
                        o(e)
                      );
                    }
                    var l = e("events").EventEmitter,
                      a = e("../Constants"),
                      u = e("../Exceptions"),
                      c = e("../Utils");
                    t.exports = (function (e) {
                      !(function (e, t) {
                        if ("function" != typeof t && null !== t)
                          throw new TypeError(
                            "Super expression must either be null or a function"
                          );
                        (e.prototype = Object.create(t && t.prototype, {
                          constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0,
                          },
                        })),
                          Object.defineProperty(e, "prototype", {
                            writable: !1,
                          }),
                          t && r(e, t);
                      })(o, e);
                      var t,
                        n,
                        i = s(o);
                      function o(e) {
                        var t;
                        return (
                          (function (e, t) {
                            if (!(e instanceof t))
                              throw new TypeError(
                                "Cannot call a class as a function"
                              );
                          })(this, o),
                          ((t = i.call(this))._session = e),
                          (t._direction = null),
                          (t._contentType = null),
                          (t._body = null),
                          t
                        );
                      }
                      return (
                        (t = o),
                        (n = [
                          {
                            key: "contentType",
                            get: function () {
                              return this._contentType;
                            },
                          },
                          {
                            key: "body",
                            get: function () {
                              return this._body;
                            },
                          },
                          {
                            key: "send",
                            value: function (e, t) {
                              var n = this,
                                i =
                                  arguments.length > 2 &&
                                  void 0 !== arguments[2]
                                    ? arguments[2]
                                    : {};
                              if (
                                ((this._direction = "outgoing"),
                                t && void 0 === e)
                              )
                                throw new TypeError("Not enough arguments");
                              if (
                                this._session.status !==
                                  this._session.C.STATUS_CONFIRMED &&
                                this._session.status !==
                                  this._session.C.STATUS_WAITING_FOR_ACK
                              )
                                throw new u.InvalidStateError(
                                  this._session.status
                                );
                              (this._contentType = e), (this._body = t);
                              var r = c.cloneArray(i.extraHeaders);
                              e && r.push("Content-Type: ".concat(e)),
                                this._session.newInfo({
                                  originator: "local",
                                  info: this,
                                  request: this.request,
                                }),
                                this._session.sendRequest(a.INFO, {
                                  extraHeaders: r,
                                  eventHandlers: {
                                    onSuccessResponse: function (e) {
                                      n.emit("succeeded", {
                                        originator: "remote",
                                        response: e,
                                      });
                                    },
                                    onErrorResponse: function (e) {
                                      n.emit("failed", {
                                        originator: "remote",
                                        response: e,
                                      });
                                    },
                                    onTransportError: function () {
                                      n._session.onTransportError();
                                    },
                                    onRequestTimeout: function () {
                                      n._session.onRequestTimeout();
                                    },
                                    onDialogError: function () {
                                      n._session.onDialogError();
                                    },
                                  },
                                  body: t,
                                });
                            },
                          },
                          {
                            key: "init_incoming",
                            value: function (e) {
                              (this._direction = "incoming"),
                                (this.request = e),
                                e.reply(200),
                                (this._contentType = e.hasHeader("Content-Type")
                                  ? e.getHeader("Content-Type").toLowerCase()
                                  : void 0),
                                (this._body = e.body),
                                this._session.newInfo({
                                  originator: "remote",
                                  info: this,
                                  request: e,
                                });
                            },
                          },
                        ]),
                        n &&
                          (function (e, t) {
                            for (var n = 0; n < t.length; n++) {
                              var i = t[n];
                              (i.enumerable = i.enumerable || !1),
                                (i.configurable = !0),
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(e, i.key, i);
                            }
                          })(t.prototype, n),
                        Object.defineProperty(t, "prototype", { writable: !1 }),
                        o
                      );
                    })(l);
                  },
                  {
                    "../Constants": 2,
                    "../Exceptions": 6,
                    "../Utils": 30,
                    events: 33,
                  },
                ],
                18: [
                  function (e, t, n) {
                    "use strict";
                    var i = e("../Logger"),
                      r = e("../Constants"),
                      s = new i("RTCSession:ReferNotifier");
                    t.exports = (function () {
                      function e(t, n, i) {
                        (function (e, t) {
                          if (!(e instanceof t))
                            throw new TypeError(
                              "Cannot call a class as a function"
                            );
                        })(this, e),
                          (this._session = t),
                          (this._id = n),
                          (this._expires = i || 300),
                          (this._active = !0),
                          this.notify(100);
                      }
                      return (
                        (t = e),
                        (n = [
                          {
                            key: "notify",
                            value: function (e, t) {
                              if ((s.debug("notify()"), !1 !== this._active)) {
                                var n;
                                (t = t || r.REASON_PHRASE[e] || ""),
                                  (n =
                                    e >= 200
                                      ? "terminated;reason=noresource"
                                      : "active;expires=".concat(
                                          this._expires
                                        ));
                                try {
                                  this._session.sendRequest(r.NOTIFY, {
                                    extraHeaders: [
                                      "Event: "
                                        .concat("refer", ";id=")
                                        .concat(this._id),
                                      "Subscription-State: ".concat(n),
                                      "Content-Type: ".concat(
                                        "message/sipfrag;version=2.0"
                                      ),
                                    ],
                                    body: "SIP/2.0 ".concat(e, " ").concat(t),
                                    eventHandlers: {
                                      onErrorResponse: function () {
                                        this._active = !1;
                                      },
                                    },
                                  });
                                } catch (e) {
                                  s.debug("send NOTIFY exception [ignored]");
                                }
                              }
                            },
                          },
                        ]) &&
                          (function (e, t) {
                            for (var n = 0; n < t.length; n++) {
                              var i = t[n];
                              (i.enumerable = i.enumerable || !1),
                                (i.configurable = !0),
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(e, i.key, i);
                            }
                          })(t.prototype, n),
                        Object.defineProperty(t, "prototype", { writable: !1 }),
                        e
                      );
                      var t, n;
                    })();
                  },
                  { "../Constants": 2, "../Logger": 9 },
                ],
                19: [
                  function (e, t, n) {
                    "use strict";
                    function i(e) {
                      return (
                        (i =
                          "function" == typeof Symbol &&
                          "symbol" == typeof Symbol.iterator
                            ? function (e) {
                                return typeof e;
                              }
                            : function (e) {
                                return e &&
                                  "function" == typeof Symbol &&
                                  e.constructor === Symbol &&
                                  e !== Symbol.prototype
                                  ? "symbol"
                                  : typeof e;
                              }),
                        i(e)
                      );
                    }
                    function r(e, t) {
                      return (
                        (r = Object.setPrototypeOf
                          ? Object.setPrototypeOf.bind()
                          : function (e, t) {
                              return (e.__proto__ = t), e;
                            }),
                        r(e, t)
                      );
                    }
                    function s(e) {
                      var t = (function () {
                        if ("undefined" == typeof Reflect || !Reflect.construct)
                          return !1;
                        if (Reflect.construct.sham) return !1;
                        if ("function" == typeof Proxy) return !0;
                        try {
                          return (
                            Boolean.prototype.valueOf.call(
                              Reflect.construct(Boolean, [], function () {})
                            ),
                            !0
                          );
                        } catch (e) {
                          return !1;
                        }
                      })();
                      return function () {
                        var n,
                          r = o(e);
                        if (t) {
                          var s = o(this).constructor;
                          n = Reflect.construct(r, arguments, s);
                        } else n = r.apply(this, arguments);
                        return (function (e, t) {
                          if (
                            t &&
                            ("object" === i(t) || "function" == typeof t)
                          )
                            return t;
                          if (void 0 !== t)
                            throw new TypeError(
                              "Derived constructors may only return object or undefined"
                            );
                          return (function (e) {
                            if (void 0 === e)
                              throw new ReferenceError(
                                "this hasn't been initialised - super() hasn't been called"
                              );
                            return e;
                          })(e);
                        })(this, n);
                      };
                    }
                    function o(e) {
                      return (
                        (o = Object.setPrototypeOf
                          ? Object.getPrototypeOf.bind()
                          : function (e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                            }),
                        o(e)
                      );
                    }
                    var l = e("events").EventEmitter,
                      a = e("../Logger"),
                      u = e("../Constants"),
                      c = e("../Grammar"),
                      d = e("../Utils"),
                      h = new a("RTCSession:ReferSubscriber");
                    t.exports = (function (e) {
                      !(function (e, t) {
                        if ("function" != typeof t && null !== t)
                          throw new TypeError(
                            "Super expression must either be null or a function"
                          );
                        (e.prototype = Object.create(t && t.prototype, {
                          constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0,
                          },
                        })),
                          Object.defineProperty(e, "prototype", {
                            writable: !1,
                          }),
                          t && r(e, t);
                      })(o, e);
                      var t,
                        n,
                        i = s(o);
                      function o(e) {
                        var t;
                        return (
                          (function (e, t) {
                            if (!(e instanceof t))
                              throw new TypeError(
                                "Cannot call a class as a function"
                              );
                          })(this, o),
                          ((t = i.call(this))._id = null),
                          (t._session = e),
                          t
                        );
                      }
                      return (
                        (t = o),
                        (n = [
                          {
                            key: "id",
                            get: function () {
                              return this._id;
                            },
                          },
                          {
                            key: "sendRefer",
                            value: function (e) {
                              var t = this,
                                n =
                                  arguments.length > 1 &&
                                  void 0 !== arguments[1]
                                    ? arguments[1]
                                    : {};
                              h.debug("sendRefer()");
                              var i = d.cloneArray(n.extraHeaders),
                                r = d.cloneObject(n.eventHandlers);
                              for (var s in r)
                                Object.prototype.hasOwnProperty.call(r, s) &&
                                  this.on(s, r[s]);
                              var o = null;
                              n.replaces &&
                                ((o = n.replaces._request.call_id),
                                (o += ";to-tag=".concat(n.replaces._to_tag)),
                                (o += ";from-tag=".concat(
                                  n.replaces._from_tag
                                )),
                                (o = encodeURIComponent(o)));
                              var l = "Refer-To: <"
                                .concat(e)
                                .concat(o ? "?Replaces=".concat(o) : "", ">");
                              if (
                                (i.push(l),
                                !i.some(function (e) {
                                  return e
                                    .toLowerCase()
                                    .startsWith("referred-by:");
                                }))
                              ) {
                                var a = "Referred-By: <"
                                  .concat(
                                    this._session._ua._configuration.uri
                                      ._scheme,
                                    ":"
                                  )
                                  .concat(
                                    this._session._ua._configuration.uri._user,
                                    "@"
                                  )
                                  .concat(
                                    this._session._ua._configuration.uri._host,
                                    ">"
                                  );
                                i.push(a);
                              }
                              i.push("Contact: ".concat(this._session.contact));
                              var c = this._session.sendRequest(u.REFER, {
                                extraHeaders: i,
                                eventHandlers: {
                                  onSuccessResponse: function (e) {
                                    t._requestSucceeded(e);
                                  },
                                  onErrorResponse: function (e) {
                                    t._requestFailed(e, u.causes.REJECTED);
                                  },
                                  onTransportError: function () {
                                    t._requestFailed(
                                      null,
                                      u.causes.CONNECTION_ERROR
                                    );
                                  },
                                  onRequestTimeout: function () {
                                    t._requestFailed(
                                      null,
                                      u.causes.REQUEST_TIMEOUT
                                    );
                                  },
                                  onDialogError: function () {
                                    t._requestFailed(
                                      null,
                                      u.causes.DIALOG_ERROR
                                    );
                                  },
                                },
                              });
                              this._id = c.cseq;
                            },
                          },
                          {
                            key: "receiveNotify",
                            value: function (e) {
                              if ((h.debug("receiveNotify()"), e.body)) {
                                var t = c.parse(
                                  e.body.trim().split("\r\n", 1)[0],
                                  "Status_Line"
                                );
                                if (-1 !== t)
                                  switch (!0) {
                                    case /^100$/.test(t.status_code):
                                      this.emit("trying", {
                                        request: e,
                                        status_line: t,
                                      });
                                      break;
                                    case /^1[0-9]{2}$/.test(t.status_code):
                                      this.emit("progress", {
                                        request: e,
                                        status_line: t,
                                      });
                                      break;
                                    case /^2[0-9]{2}$/.test(t.status_code):
                                      this.emit("accepted", {
                                        request: e,
                                        status_line: t,
                                      });
                                      break;
                                    default:
                                      this.emit("failed", {
                                        request: e,
                                        status_line: t,
                                      });
                                  }
                                else
                                  h.debug(
                                    'receiveNotify() | error parsing NOTIFY body: "'.concat(
                                      e.body,
                                      '"'
                                    )
                                  );
                              }
                            },
                          },
                          {
                            key: "_requestSucceeded",
                            value: function (e) {
                              h.debug("REFER succeeded"),
                                h.debug('emit "requestSucceeded"'),
                                this.emit("requestSucceeded", { response: e });
                            },
                          },
                          {
                            key: "_requestFailed",
                            value: function (e, t) {
                              h.debug("REFER failed"),
                                h.debug('emit "requestFailed"'),
                                this.emit("requestFailed", {
                                  response: e || null,
                                  cause: t,
                                });
                            },
                          },
                        ]),
                        n &&
                          (function (e, t) {
                            for (var n = 0; n < t.length; n++) {
                              var i = t[n];
                              (i.enumerable = i.enumerable || !1),
                                (i.configurable = !0),
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(e, i.key, i);
                            }
                          })(t.prototype, n),
                        Object.defineProperty(t, "prototype", { writable: !1 }),
                        o
                      );
                    })(l);
                  },
                  {
                    "../Constants": 2,
                    "../Grammar": 7,
                    "../Logger": 9,
                    "../Utils": 30,
                    events: 33,
                  },
                ],
                20: [
                  function (e, t, n) {
                    "use strict";
                    var i = e("./Logger"),
                      r = e("./Utils"),
                      s = e("./Constants"),
                      o = e("./SIPMessage"),
                      l = e("./RequestSender"),
                      a = new i("Registrator");
                    t.exports = (function () {
                      function e(t, n) {
                        (function (e, t) {
                          if (!(e instanceof t))
                            throw new TypeError(
                              "Cannot call a class as a function"
                            );
                        })(this, e),
                          (this._reg_id = 1),
                          (this._ua = t),
                          (this._transport = n),
                          (this._registrar = t.configuration.registrar_server),
                          (this._expires = t.configuration.register_expires),
                          (this._call_id = r.createRandomToken(22)),
                          (this._cseq = 0),
                          (this._to_uri = t.configuration.uri),
                          (this._registrationTimer = null),
                          (this._registering = !1),
                          (this._registered = !1),
                          (this._contact = this._ua.contact.toString()),
                          (this._contact += ";+sip.ice"),
                          (this._extraHeaders = []),
                          (this._extraContactParams = ""),
                          (this._sipInstance = '"<urn:uuid:'.concat(
                            this._ua.configuration.instance_id,
                            '>"'
                          )),
                          (this._contact += ";reg-id=".concat(this._reg_id)),
                          (this._contact += ";+sip.instance=".concat(
                            this._sipInstance
                          )),
                          (this._auth = null);
                      }
                      return (
                        (t = e),
                        (n = [
                          {
                            key: "registered",
                            get: function () {
                              return this._registered;
                            },
                          },
                          {
                            key: "setExtraHeaders",
                            value: function (e) {
                              Array.isArray(e) || (e = []),
                                (this._extraHeaders = e.slice());
                            },
                          },
                          {
                            key: "setExtraContactParams",
                            value: function (e) {
                              for (var t in (e instanceof Object || (e = {}),
                              (this._extraContactParams = ""),
                              e))
                                if (
                                  Object.prototype.hasOwnProperty.call(e, t)
                                ) {
                                  var n = e[t];
                                  (this._extraContactParams += ";".concat(t)),
                                    n &&
                                      (this._extraContactParams += "=".concat(
                                        n
                                      ));
                                }
                            },
                          },
                          {
                            key: "register",
                            value: function () {
                              var e = this;
                              if (this._registering)
                                a.debug("Register request in progress...");
                              else {
                                var t = this._extraHeaders.slice();
                                t.push(
                                  "Contact: "
                                    .concat(this._contact, ";expires=")
                                    .concat(this._expires)
                                    .concat(this._extraContactParams)
                                ),
                                  t.push("Expires: ".concat(this._expires)),
                                  this._auth && t.push(this._auth);
                                var n = new o.OutgoingRequest(
                                    s.REGISTER,
                                    this._registrar,
                                    this._ua,
                                    {
                                      to_uri: this._to_uri,
                                      call_id: this._call_id,
                                      cseq: (this._cseq += 1),
                                    },
                                    t
                                  ),
                                  i = new l(this._ua, n, {
                                    onRequestTimeout: function () {
                                      e._registrationFailure(
                                        null,
                                        s.causes.REQUEST_TIMEOUT
                                      );
                                    },
                                    onTransportError: function () {
                                      e._registrationFailure(
                                        null,
                                        s.causes.CONNECTION_ERROR
                                      );
                                    },
                                    onAuthenticated: function (t) {
                                      var n, i;
                                      (e._cseq += 1),
                                        e._ua.modes.cache_register_auth_mode &&
                                          ((i = t.getHeader(
                                            (n = "Authorization")
                                          )) ||
                                            (i = t.getHeader(
                                              (n = "Proxy-Authorization")
                                            ))) &&
                                          (e._auth = ""
                                            .concat(n, ": ")
                                            .concat(i));
                                    },
                                    onReceiveResponse: function (t) {
                                      if (t.cseq === e._cseq)
                                        switch (
                                          (null !== e._registrationTimer &&
                                            (clearTimeout(e._registrationTimer),
                                            (e._registrationTimer = null)),
                                          !0)
                                        ) {
                                          case /^1[0-9]{2}$/.test(
                                            t.status_code
                                          ):
                                            break;
                                          case /^2[0-9]{2}$/.test(
                                            t.status_code
                                          ):
                                            if (
                                              ((e._registering = !1),
                                              !t.hasHeader("Contact"))
                                            ) {
                                              a.debug(
                                                "no Contact header in response to REGISTER, response ignored"
                                              );
                                              break;
                                            }
                                            var n = t.headers.Contact.reduce(
                                                function (e, t) {
                                                  return e.concat(t.parsed);
                                                },
                                                []
                                              ),
                                              i = n.find(function (t) {
                                                return (
                                                  e._sipInstance ===
                                                    t.getParam(
                                                      "+sip.instance"
                                                    ) &&
                                                  e._reg_id ===
                                                    parseInt(
                                                      t.getParam("reg-id")
                                                    )
                                                );
                                              });
                                            if (
                                              (i ||
                                                (i = n.find(function (t) {
                                                  return (
                                                    t.uri.user ===
                                                    e._ua.contact.uri.user
                                                  );
                                                })),
                                              !i)
                                            ) {
                                              a.debug(
                                                "no Contact header pointing to us, response ignored"
                                              );
                                              break;
                                            }
                                            var o = i.getParam("expires");
                                            !o &&
                                              t.hasHeader("expires") &&
                                              (o = t.getHeader("expires")),
                                              o || (o = e._expires),
                                              (o = Number(o)) < 10 && (o = 10);
                                            var l =
                                              o >= 140
                                                ? (1e3 * o) / 2 +
                                                  Math.floor(
                                                    1e3 *
                                                      (o / 2 - 70) *
                                                      Math.random()
                                                  )
                                                : 1e3 * o - 5e3;
                                            (e._registrationTimer = setTimeout(
                                              function () {
                                                (e._registrationTimer = null),
                                                  0 ===
                                                  e._ua.listeners(
                                                    "registrationExpiring"
                                                  ).length
                                                    ? e.register()
                                                    : e._ua.emit(
                                                        "registrationExpiring"
                                                      );
                                              },
                                              l
                                            )),
                                              i.hasParam("temp-gruu") &&
                                                (e._ua.contact.temp_gruu = i
                                                  .getParam("temp-gruu")
                                                  .replace(/"/g, "")),
                                              i.hasParam("pub-gruu") &&
                                                (e._ua.contact.pub_gruu = i
                                                  .getParam("pub-gruu")
                                                  .replace(/"/g, "")),
                                              e._registered ||
                                                ((e._registered = !0),
                                                e._ua.registered({
                                                  response: t,
                                                }));
                                            break;
                                          case /^423$/.test(t.status_code):
                                            t.hasHeader("min-expires")
                                              ? ((e._expires = Number(
                                                  t.getHeader("min-expires")
                                                )),
                                                e._expires < 10 &&
                                                  (e._expires = 10),
                                                e.register())
                                              : (a.debug(
                                                  "423 response received for REGISTER without Min-Expires"
                                                ),
                                                e._registrationFailure(
                                                  t,
                                                  s.causes.SIP_FAILURE_CODE
                                                ));
                                            break;
                                          default:
                                            var u = r.sipErrorCause(
                                              t.status_code
                                            );
                                            e._registrationFailure(t, u);
                                        }
                                    },
                                  });
                                (this._registering = !0), i.send();
                              }
                            },
                          },
                          {
                            key: "unregister",
                            value: function () {
                              var e = this,
                                t =
                                  arguments.length > 0 &&
                                  void 0 !== arguments[0]
                                    ? arguments[0]
                                    : {};
                              if (this._registered) {
                                (this._registered = !1),
                                  null !== this._registrationTimer &&
                                    (clearTimeout(this._registrationTimer),
                                    (this._registrationTimer = null));
                                var n = this._extraHeaders.slice();
                                t.all
                                  ? n.push(
                                      "Contact: *".concat(
                                        this._extraContactParams
                                      )
                                    )
                                  : n.push(
                                      "Contact: "
                                        .concat(this._contact, ";expires=0")
                                        .concat(this._extraContactParams)
                                    ),
                                  n.push("Expires: 0"),
                                  this._auth && n.push(this._auth);
                                var i = new o.OutgoingRequest(
                                  s.REGISTER,
                                  this._registrar,
                                  this._ua,
                                  {
                                    to_uri: this._to_uri,
                                    call_id: this._call_id,
                                    cseq: (this._cseq += 1),
                                  },
                                  n
                                );
                                new l(this._ua, i, {
                                  onRequestTimeout: function () {
                                    e._unregistered(
                                      null,
                                      s.causes.REQUEST_TIMEOUT
                                    );
                                  },
                                  onTransportError: function () {
                                    e._unregistered(
                                      null,
                                      s.causes.CONNECTION_ERROR
                                    );
                                  },
                                  onAuthenticated: function () {
                                    e._cseq += 1;
                                  },
                                  onReceiveResponse: function (t) {
                                    switch (!0) {
                                      case /^1[0-9]{2}$/.test(t.status_code):
                                        break;
                                      case /^2[0-9]{2}$/.test(t.status_code):
                                        e._unregistered(t);
                                        break;
                                      default:
                                        var n = r.sipErrorCause(t.status_code);
                                        e._unregistered(t, n);
                                    }
                                  },
                                }).send(),
                                  (this._auth = null);
                              } else a.debug("already unregistered");
                            },
                          },
                          {
                            key: "close",
                            value: function () {
                              this._registered && this.unregister();
                            },
                          },
                          {
                            key: "onTransportClosed",
                            value: function () {
                              (this._registering = !1),
                                null !== this._registrationTimer &&
                                  (clearTimeout(this._registrationTimer),
                                  (this._registrationTimer = null)),
                                this._registered &&
                                  ((this._registered = !1),
                                  this._ua.unregistered({}));
                            },
                          },
                          {
                            key: "_registrationFailure",
                            value: function (e, t) {
                              (this._registering = !1),
                                this._ua.registrationFailed({
                                  response: e || null,
                                  cause: t,
                                }),
                                this._registered &&
                                  ((this._registered = !1),
                                  this._ua.unregistered({
                                    response: e || null,
                                    cause: t,
                                  }));
                            },
                          },
                          {
                            key: "_unregistered",
                            value: function (e, t) {
                              (this._registering = !1),
                                (this._registered = !1),
                                this._ua.unregistered({
                                  response: e || null,
                                  cause: t || null,
                                });
                            },
                          },
                        ]),
                        n &&
                          (function (e, t) {
                            for (var n = 0; n < t.length; n++) {
                              var i = t[n];
                              (i.enumerable = i.enumerable || !1),
                                (i.configurable = !0),
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(e, i.key, i);
                            }
                          })(t.prototype, n),
                        Object.defineProperty(t, "prototype", { writable: !1 }),
                        e
                      );
                      var t, n;
                    })();
                  },
                  {
                    "./Constants": 2,
                    "./Logger": 9,
                    "./RequestSender": 21,
                    "./SIPMessage": 22,
                    "./Utils": 30,
                  },
                ],
                21: [
                  function (e, t, n) {
                    "use strict";
                    var i = e("./Logger"),
                      r = e("./Constants"),
                      s = e("./DigestAuthentication"),
                      o = e("./Transactions"),
                      l = new i("RequestSender"),
                      a = {
                        onRequestTimeout: function () {},
                        onTransportError: function () {},
                        onReceiveResponse: function () {},
                        onAuthenticated: function () {},
                      };
                    t.exports = (function () {
                      function e(t, n, i) {
                        for (var s in ((function (e, t) {
                          if (!(e instanceof t))
                            throw new TypeError(
                              "Cannot call a class as a function"
                            );
                        })(this, e),
                        (this._ua = t),
                        (this._eventHandlers = i),
                        (this._method = n.method),
                        (this._request = n),
                        (this._auth = null),
                        (this._challenged = !1),
                        (this._staled = !1),
                        a))
                          Object.prototype.hasOwnProperty.call(a, s) &&
                            (this._eventHandlers[s] ||
                              (this._eventHandlers[s] = a[s]));
                        t.status !== t.C.STATUS_USER_CLOSED ||
                          (this._method === r.BYE && this._method === r.ACK) ||
                          this._eventHandlers.onTransportError();
                      }
                      return (
                        (t = e),
                        (n = [
                          {
                            key: "send",
                            value: function () {
                              var e = this,
                                t = {
                                  onRequestTimeout: function () {
                                    e._eventHandlers.onRequestTimeout();
                                  },
                                  onTransportError: function () {
                                    e._eventHandlers.onTransportError();
                                  },
                                  onReceiveResponse: function (t) {
                                    e._receiveResponse(t);
                                  },
                                };
                              switch (this._method) {
                                case "INVITE":
                                  this.clientTransaction =
                                    new o.InviteClientTransaction(
                                      this._ua,
                                      this._ua.transport,
                                      this._request,
                                      t
                                    );
                                  break;
                                case "ACK":
                                  this.clientTransaction =
                                    new o.AckClientTransaction(
                                      this._ua,
                                      this._ua.transport,
                                      this._request,
                                      t
                                    );
                                  break;
                                default:
                                  this.clientTransaction =
                                    new o.NonInviteClientTransaction(
                                      this._ua,
                                      this._ua.transport,
                                      this._request,
                                      t
                                    );
                              }
                              this._ua._configuration.authorization_jwt &&
                                this._request.setHeader(
                                  "Authorization",
                                  this._ua._configuration.authorization_jwt
                                ),
                                this.clientTransaction.send();
                            },
                          },
                          {
                            key: "_receiveResponse",
                            value: function (e) {
                              var t,
                                n,
                                i = e.status_code;
                              if (
                                (401 !== i && 407 !== i) ||
                                (null === this._ua.configuration.password &&
                                  null === this._ua.configuration.ha1)
                              )
                                this._eventHandlers.onReceiveResponse(e);
                              else {
                                if (
                                  (401 === e.status_code
                                    ? ((t = e.parseHeader("www-authenticate")),
                                      (n = "authorization"))
                                    : ((t =
                                        e.parseHeader("proxy-authenticate")),
                                      (n = "proxy-authorization")),
                                  !t)
                                )
                                  return (
                                    l.debug(
                                      "".concat(
                                        e.status_code,
                                        " with wrong or missing challenge, cannot authenticate"
                                      )
                                    ),
                                    void this._eventHandlers.onReceiveResponse(
                                      e
                                    )
                                  );
                                if (
                                  !this._challenged ||
                                  (!this._staled && !0 === t.stale)
                                ) {
                                  if (!this._auth) {
                                    var r = this._ua.getCredential(t.realm);
                                    this._auth = new s(r);
                                  }
                                  if (
                                    !this._auth.authenticate(this._request, t)
                                  )
                                    return void this._eventHandlers.onReceiveResponse(
                                      e
                                    );
                                  (this._challenged = !0),
                                    this._ua.updateCredential(
                                      t.realm,
                                      this._auth.get("realm"),
                                      this._auth.get("ha1")
                                    ),
                                    t.stale && (this._staled = !0),
                                    (this._request = this._request.clone()),
                                    (this._request.cseq += 1),
                                    this._request.setHeader(
                                      "cseq",
                                      ""
                                        .concat(this._request.cseq, " ")
                                        .concat(this._method)
                                    ),
                                    this._request.setHeader(
                                      n,
                                      this._auth.toString()
                                    ),
                                    this._eventHandlers.onAuthenticated(
                                      this._request
                                    ),
                                    this.send();
                                } else this._eventHandlers.onReceiveResponse(e);
                              }
                            },
                          },
                        ]) &&
                          (function (e, t) {
                            for (var n = 0; n < t.length; n++) {
                              var i = t[n];
                              (i.enumerable = i.enumerable || !1),
                                (i.configurable = !0),
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(e, i.key, i);
                            }
                          })(t.prototype, n),
                        Object.defineProperty(t, "prototype", { writable: !1 }),
                        e
                      );
                      var t, n;
                    })();
                  },
                  {
                    "./Constants": 2,
                    "./DigestAuthentication": 5,
                    "./Logger": 9,
                    "./Transactions": 26,
                  },
                ],
                22: [
                  function (e, t, n) {
                    "use strict";
                    function i(e) {
                      return (
                        (i =
                          "function" == typeof Symbol &&
                          "symbol" == typeof Symbol.iterator
                            ? function (e) {
                                return typeof e;
                              }
                            : function (e) {
                                return e &&
                                  "function" == typeof Symbol &&
                                  e.constructor === Symbol &&
                                  e !== Symbol.prototype
                                  ? "symbol"
                                  : typeof e;
                              }),
                        i(e)
                      );
                    }
                    function r(e, t) {
                      if ("function" != typeof t && null !== t)
                        throw new TypeError(
                          "Super expression must either be null or a function"
                        );
                      (e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                          value: e,
                          writable: !0,
                          configurable: !0,
                        },
                      })),
                        Object.defineProperty(e, "prototype", { writable: !1 }),
                        t && s(e, t);
                    }
                    function s(e, t) {
                      return (
                        (s = Object.setPrototypeOf
                          ? Object.setPrototypeOf.bind()
                          : function (e, t) {
                              return (e.__proto__ = t), e;
                            }),
                        s(e, t)
                      );
                    }
                    function o(e) {
                      var t = (function () {
                        if ("undefined" == typeof Reflect || !Reflect.construct)
                          return !1;
                        if (Reflect.construct.sham) return !1;
                        if ("function" == typeof Proxy) return !0;
                        try {
                          return (
                            Boolean.prototype.valueOf.call(
                              Reflect.construct(Boolean, [], function () {})
                            ),
                            !0
                          );
                        } catch (e) {
                          return !1;
                        }
                      })();
                      return function () {
                        var n,
                          r = l(e);
                        if (t) {
                          var s = l(this).constructor;
                          n = Reflect.construct(r, arguments, s);
                        } else n = r.apply(this, arguments);
                        return (function (e, t) {
                          if (
                            t &&
                            ("object" === i(t) || "function" == typeof t)
                          )
                            return t;
                          if (void 0 !== t)
                            throw new TypeError(
                              "Derived constructors may only return object or undefined"
                            );
                          return (function (e) {
                            if (void 0 === e)
                              throw new ReferenceError(
                                "this hasn't been initialised - super() hasn't been called"
                              );
                            return e;
                          })(e);
                        })(this, n);
                      };
                    }
                    function l(e) {
                      return (
                        (l = Object.setPrototypeOf
                          ? Object.getPrototypeOf.bind()
                          : function (e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                            }),
                        l(e)
                      );
                    }
                    function a(e, t) {
                      var n =
                        ("undefined" != typeof Symbol && e[Symbol.iterator]) ||
                        e["@@iterator"];
                      if (!n) {
                        if (
                          Array.isArray(e) ||
                          (n = (function (e, t) {
                            if (e) {
                              if ("string" == typeof e) return u(e, t);
                              var n = Object.prototype.toString
                                .call(e)
                                .slice(8, -1);
                              return (
                                "Object" === n &&
                                  e.constructor &&
                                  (n = e.constructor.name),
                                "Map" === n || "Set" === n
                                  ? Array.from(e)
                                  : "Arguments" === n ||
                                    /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(
                                      n
                                    )
                                  ? u(e, t)
                                  : void 0
                              );
                            }
                          })(e)) ||
                          (t && e && "number" == typeof e.length)
                        ) {
                          n && (e = n);
                          var i = 0,
                            r = function () {};
                          return {
                            s: r,
                            n: function () {
                              return i >= e.length
                                ? { done: !0 }
                                : { done: !1, value: e[i++] };
                            },
                            e: function (e) {
                              throw e;
                            },
                            f: r,
                          };
                        }
                        throw new TypeError(
                          "Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
                        );
                      }
                      var s,
                        o = !0,
                        l = !1;
                      return {
                        s: function () {
                          n = n.call(e);
                        },
                        n: function () {
                          var e = n.next();
                          return (o = e.done), e;
                        },
                        e: function (e) {
                          (l = !0), (s = e);
                        },
                        f: function () {
                          try {
                            o || null == n.return || n.return();
                          } finally {
                            if (l) throw s;
                          }
                        },
                      };
                    }
                    function u(e, t) {
                      (null == t || t > e.length) && (t = e.length);
                      for (var n = 0, i = new Array(t); n < t; n++) i[n] = e[n];
                      return i;
                    }
                    function c(e, t) {
                      if (!(e instanceof t))
                        throw new TypeError(
                          "Cannot call a class as a function"
                        );
                    }
                    function d(e, t) {
                      for (var n = 0; n < t.length; n++) {
                        var i = t[n];
                        (i.enumerable = i.enumerable || !1),
                          (i.configurable = !0),
                          "value" in i && (i.writable = !0),
                          Object.defineProperty(e, i.key, i);
                      }
                    }
                    function h(e, t, n) {
                      return (
                        t && d(e.prototype, t),
                        n && d(e, n),
                        Object.defineProperty(e, "prototype", { writable: !1 }),
                        e
                      );
                    }
                    var _ = e("sdp-transform"),
                      f = e("./Logger"),
                      g = e("./Constants"),
                      p = e("./Utils"),
                      v = e("./NameAddrHeader"),
                      m = e("./Grammar"),
                      y = new f("SIPMessage"),
                      C = (function () {
                        function e(t, n, i, r, s, o) {
                          if ((c(this, e), !t || !n || !i)) return null;
                          (r = r || {}),
                            (this.ua = i),
                            (this.headers = {}),
                            (this.method = t),
                            (this.ruri = n),
                            (this.body = o),
                            (this.extraHeaders = p.cloneArray(s)),
                            this.ua.configuration.extra_headers &&
                              (this.extraHeaders = this.extraHeaders.concat(
                                this.ua.configuration.extra_headers
                              )),
                            r.route_set
                              ? this.setHeader("route", r.route_set)
                              : i.configuration.use_preloaded_route &&
                                this.setHeader(
                                  "route",
                                  "<".concat(i.transport.sip_uri, ";lr>")
                                ),
                            this.setHeader("via", ""),
                            this.setHeader("max-forwards", g.MAX_FORWARDS);
                          var l = r.to_uri || n,
                            a = r.to_tag ? { tag: r.to_tag } : null,
                            u =
                              void 0 !== r.to_display_name
                                ? r.to_display_name
                                : null;
                          (this.to = new v(l, u, a)),
                            this.setHeader("to", this.to.toString());
                          var d,
                            h = r.from_uri || i.configuration.uri,
                            _ = { tag: r.from_tag || p.newTag() };
                          (d =
                            void 0 !== r.from_display_name
                              ? r.from_display_name
                              : i.configuration.display_name
                              ? i.configuration.display_name
                              : null),
                            (this.from = new v(h, d, _)),
                            this.setHeader("from", this.from.toString());
                          var f =
                            r.call_id ||
                            i.configuration.jssip_id + p.createRandomToken(15);
                          (this.call_id = f), this.setHeader("call-id", f);
                          var m = r.cseq || Math.floor(1e4 * Math.random());
                          (this.cseq = m),
                            this.setHeader("cseq", "".concat(m, " ").concat(t));
                        }
                        return (
                          h(e, [
                            {
                              key: "setHeader",
                              value: function (e, t) {
                                for (
                                  var n = new RegExp(
                                      "^\\s*".concat(e, "\\s*:"),
                                      "i"
                                    ),
                                    i = 0;
                                  i < this.extraHeaders.length;
                                  i++
                                )
                                  n.test(this.extraHeaders[i]) &&
                                    this.extraHeaders.splice(i, 1);
                                this.headers[p.headerize(e)] = Array.isArray(t)
                                  ? t
                                  : [t];
                              },
                            },
                            {
                              key: "getHeader",
                              value: function (e) {
                                var t = this.headers[p.headerize(e)];
                                if (t) {
                                  if (t[0]) return t[0];
                                } else {
                                  var n,
                                    i = new RegExp(
                                      "^\\s*".concat(e, "\\s*:"),
                                      "i"
                                    ),
                                    r = a(this.extraHeaders);
                                  try {
                                    for (r.s(); !(n = r.n()).done; ) {
                                      var s = n.value;
                                      if (i.test(s))
                                        return s
                                          .substring(s.indexOf(":") + 1)
                                          .trim();
                                    }
                                  } catch (e) {
                                    r.e(e);
                                  } finally {
                                    r.f();
                                  }
                                }
                              },
                            },
                            {
                              key: "getHeaders",
                              value: function (e) {
                                var t = this.headers[p.headerize(e)],
                                  n = [];
                                if (t) {
                                  var i,
                                    r = a(t);
                                  try {
                                    for (r.s(); !(i = r.n()).done; ) {
                                      var s = i.value;
                                      n.push(s);
                                    }
                                  } catch (e) {
                                    r.e(e);
                                  } finally {
                                    r.f();
                                  }
                                  return n;
                                }
                                var o,
                                  l = new RegExp(
                                    "^\\s*".concat(e, "\\s*:"),
                                    "i"
                                  ),
                                  u = a(this.extraHeaders);
                                try {
                                  for (u.s(); !(o = u.n()).done; ) {
                                    var c = o.value;
                                    l.test(c) &&
                                      n.push(
                                        c.substring(c.indexOf(":") + 1).trim()
                                      );
                                  }
                                } catch (e) {
                                  u.e(e);
                                } finally {
                                  u.f();
                                }
                                return n;
                              },
                            },
                            {
                              key: "hasHeader",
                              value: function (e) {
                                if (this.headers[p.headerize(e)]) return !0;
                                var t,
                                  n = new RegExp(
                                    "^\\s*".concat(e, "\\s*:"),
                                    "i"
                                  ),
                                  i = a(this.extraHeaders);
                                try {
                                  for (i.s(); !(t = i.n()).done; ) {
                                    var r = t.value;
                                    if (n.test(r)) return !0;
                                  }
                                } catch (e) {
                                  i.e(e);
                                } finally {
                                  i.f();
                                }
                                return !1;
                              },
                            },
                            {
                              key: "parseSDP",
                              value: function (e) {
                                return (
                                  (!e && this.sdp) ||
                                    (this.sdp = _.parse(this.body || "")),
                                  this.sdp
                                );
                              },
                            },
                            {
                              key: "toString",
                              value: function () {
                                var e = ""
                                  .concat(this.method, " ")
                                  .concat(this.ruri, " SIP/2.0\r\n");
                                for (var t in this.headers)
                                  if (
                                    Object.prototype.hasOwnProperty.call(
                                      this.headers,
                                      t
                                    )
                                  ) {
                                    var n,
                                      i = a(this.headers[t]);
                                    try {
                                      for (i.s(); !(n = i.n()).done; ) {
                                        var r = n.value;
                                        e += ""
                                          .concat(t, ": ")
                                          .concat(r, "\r\n");
                                      }
                                    } catch (e) {
                                      i.e(e);
                                    } finally {
                                      i.f();
                                    }
                                  }
                                var s,
                                  o = a(this.extraHeaders);
                                try {
                                  for (o.s(); !(s = o.n()).done; ) {
                                    var l = s.value;
                                    e += "".concat(l.trim(), "\r\n");
                                  }
                                } catch (e) {
                                  o.e(e);
                                } finally {
                                  o.f();
                                }
                                var u = [];
                                switch (this.method) {
                                  case g.REGISTER:
                                    u.push("path", "gruu");
                                    break;
                                  case g.INVITE:
                                    this.ua.configuration.session_timers &&
                                      u.push("timer"),
                                      (this.ua.contact.pub_gruu ||
                                        this.ua.contact.temp_gruu) &&
                                        u.push("gruu"),
                                      u.push("ice", "replaces");
                                    break;
                                  case g.UPDATE:
                                    this.ua.configuration.session_timers &&
                                      u.push("timer"),
                                      u.push("ice");
                                }
                                u.push("outbound");
                                var c =
                                  this.ua.configuration.user_agent ||
                                  g.USER_AGENT;
                                if (
                                  ((e += "Allow: ".concat(
                                    g.ALLOWED_METHODS,
                                    "\r\n"
                                  )),
                                  (e += "Supported: ".concat(u, "\r\n")),
                                  (e += "User-Agent: ".concat(c, "\r\n")),
                                  this.body)
                                ) {
                                  var d = p.str_utf8_length(this.body);
                                  (e += "Content-Length: ".concat(
                                    d,
                                    "\r\n\r\n"
                                  )),
                                    (e += this.body);
                                } else e += "Content-Length: 0\r\n\r\n";
                                return e;
                              },
                            },
                            {
                              key: "clone",
                              value: function () {
                                var t = new e(this.method, this.ruri, this.ua);
                                return (
                                  Object.keys(this.headers).forEach(function (
                                    e
                                  ) {
                                    t.headers[e] = this.headers[e].slice();
                                  },
                                  this),
                                  (t.body = this.body),
                                  (t.extraHeaders = p.cloneArray(
                                    this.extraHeaders
                                  )),
                                  (t.to = this.to),
                                  (t.from = this.from),
                                  (t.call_id = this.call_id),
                                  (t.cseq = this.cseq),
                                  t
                                );
                              },
                            },
                          ]),
                          e
                        );
                      })(),
                      b = (function (e) {
                        r(n, e);
                        var t = o(n);
                        function n(e, i, r, s, o) {
                          var l;
                          return (
                            c(this, n),
                            ((l = t.call(
                              this,
                              g.INVITE,
                              e,
                              i,
                              r,
                              s,
                              o
                            )).transaction = null),
                            l
                          );
                        }
                        return (
                          h(n, [
                            {
                              key: "cancel",
                              value: function (e) {
                                this.transaction.cancel(e);
                              },
                            },
                            {
                              key: "clone",
                              value: function () {
                                var e = new n(this.ruri, this.ua);
                                return (
                                  Object.keys(this.headers).forEach(function (
                                    t
                                  ) {
                                    e.headers[t] = this.headers[t].slice();
                                  },
                                  this),
                                  (e.body = this.body),
                                  (e.extraHeaders = p.cloneArray(
                                    this.extraHeaders
                                  )),
                                  (e.to = this.to),
                                  (e.from = this.from),
                                  (e.call_id = this.call_id),
                                  (e.cseq = this.cseq),
                                  (e.transaction = this.transaction),
                                  e
                                );
                              },
                            },
                          ]),
                          n
                        );
                      })(C),
                      S = (function () {
                        function e() {
                          c(this, e),
                            (this.data = null),
                            (this.headers = null),
                            (this.method = null),
                            (this.via = null),
                            (this.via_branch = null),
                            (this.call_id = null),
                            (this.cseq = null),
                            (this.from = null),
                            (this.from_tag = null),
                            (this.to = null),
                            (this.to_tag = null),
                            (this.body = null),
                            (this.sdp = null);
                        }
                        return (
                          h(e, [
                            {
                              key: "addHeader",
                              value: function (e, t) {
                                var n = { raw: t };
                                (e = p.headerize(e)),
                                  this.headers[e]
                                    ? this.headers[e].push(n)
                                    : (this.headers[e] = [n]);
                              },
                            },
                            {
                              key: "getHeader",
                              value: function (e) {
                                var t = this.headers[p.headerize(e)];
                                if (t) return t[0] ? t[0].raw : void 0;
                              },
                            },
                            {
                              key: "getHeaders",
                              value: function (e) {
                                var t = this.headers[p.headerize(e)],
                                  n = [];
                                if (!t) return [];
                                var i,
                                  r = a(t);
                                try {
                                  for (r.s(); !(i = r.n()).done; ) {
                                    var s = i.value;
                                    n.push(s.raw);
                                  }
                                } catch (e) {
                                  r.e(e);
                                } finally {
                                  r.f();
                                }
                                return n;
                              },
                            },
                            {
                              key: "hasHeader",
                              value: function (e) {
                                return !!this.headers[p.headerize(e)];
                              },
                            },
                            {
                              key: "parseHeader",
                              value: function (e) {
                                var t =
                                  arguments.length > 1 &&
                                  void 0 !== arguments[1]
                                    ? arguments[1]
                                    : 0;
                                if (((e = p.headerize(e)), this.headers[e])) {
                                  if (!(t >= this.headers[e].length)) {
                                    var n = this.headers[e][t],
                                      i = n.raw;
                                    if (n.parsed) return n.parsed;
                                    var r = m.parse(i, e.replace(/-/g, "_"));
                                    return -1 === r
                                      ? (this.headers[e].splice(t, 1),
                                        void y.debug(
                                          'error parsing "'
                                            .concat(
                                              e,
                                              '" header field with value "'
                                            )
                                            .concat(i, '"')
                                        ))
                                      : ((n.parsed = r), r);
                                  }
                                  y.debug(
                                    'not so many "'.concat(
                                      e,
                                      '" headers present'
                                    )
                                  );
                                } else
                                  y.debug(
                                    'header "'.concat(e, '" not present')
                                  );
                              },
                            },
                            {
                              key: "s",
                              value: function (e, t) {
                                return this.parseHeader(e, t);
                              },
                            },
                            {
                              key: "setHeader",
                              value: function (e, t) {
                                var n = { raw: t };
                                this.headers[p.headerize(e)] = [n];
                              },
                            },
                            {
                              key: "parseSDP",
                              value: function (e) {
                                return (
                                  (!e && this.sdp) ||
                                    (this.sdp = _.parse(this.body || "")),
                                  this.sdp
                                );
                              },
                            },
                            {
                              key: "toString",
                              value: function () {
                                return this.data;
                              },
                            },
                          ]),
                          e
                        );
                      })(),
                      T = (function (e) {
                        r(n, e);
                        var t = o(n);
                        function n(e) {
                          var i;
                          return (
                            c(this, n),
                            ((i = t.call(this)).ua = e),
                            (i.headers = {}),
                            (i.ruri = null),
                            (i.transport = null),
                            (i.server_transaction = null),
                            i
                          );
                        }
                        return (
                          h(n, [
                            {
                              key: "reply",
                              value: function (e, t, n, i, r, s) {
                                var o = [],
                                  l = this.getHeader("To");
                                if (
                                  ((t = t || null),
                                  !(e = e || null) || e < 100 || e > 699)
                                )
                                  throw new TypeError(
                                    "Invalid status_code: ".concat(e)
                                  );
                                if (
                                  t &&
                                  "string" != typeof t &&
                                  !(t instanceof String)
                                )
                                  throw new TypeError(
                                    "Invalid reason_phrase: ".concat(t)
                                  );
                                (t = t || g.REASON_PHRASE[e] || ""),
                                  (n = p.cloneArray(n)),
                                  this.ua.configuration.extra_headers &&
                                    (n = n.concat(
                                      this.ua.configuration.extra_headers
                                    ));
                                var u = "SIP/2.0 "
                                  .concat(e, " ")
                                  .concat(t, "\r\n");
                                if (
                                  this.method === g.INVITE &&
                                  e > 100 &&
                                  e <= 200
                                ) {
                                  var c,
                                    d = a(this.getHeaders("record-route"));
                                  try {
                                    for (d.s(); !(c = d.n()).done; ) {
                                      var h = c.value;
                                      u += "Record-Route: ".concat(h, "\r\n");
                                    }
                                  } catch (e) {
                                    d.e(e);
                                  } finally {
                                    d.f();
                                  }
                                }
                                var _,
                                  f = a(this.getHeaders("via"));
                                try {
                                  for (f.s(); !(_ = f.n()).done; ) {
                                    var v = _.value;
                                    u += "Via: ".concat(v, "\r\n");
                                  }
                                } catch (e) {
                                  f.e(e);
                                } finally {
                                  f.f();
                                }
                                !this.to_tag && e > 100
                                  ? (l += ";tag=".concat(p.newTag()))
                                  : this.to_tag &&
                                    !this.s("to").hasParam("tag") &&
                                    (l += ";tag=".concat(this.to_tag)),
                                  (u += "To: ".concat(l, "\r\n")),
                                  (u += "From: ".concat(
                                    this.getHeader("From"),
                                    "\r\n"
                                  )),
                                  (u += "Call-ID: ".concat(
                                    this.call_id,
                                    "\r\n"
                                  )),
                                  (u += "CSeq: "
                                    .concat(this.cseq, " ")
                                    .concat(this.method, "\r\n"));
                                var m,
                                  y = a(n);
                                try {
                                  for (y.s(); !(m = y.n()).done; ) {
                                    var C = m.value;
                                    u += "".concat(C.trim(), "\r\n");
                                  }
                                } catch (e) {
                                  y.e(e);
                                } finally {
                                  y.f();
                                }
                                switch (this.method) {
                                  case g.INVITE:
                                    this.ua.configuration.session_timers &&
                                      o.push("timer"),
                                      (this.ua.contact.pub_gruu ||
                                        this.ua.contact.temp_gruu) &&
                                        o.push("gruu"),
                                      o.push("ice", "replaces");
                                    break;
                                  case g.UPDATE:
                                    this.ua.configuration.session_timers &&
                                      o.push("timer"),
                                      i && o.push("ice"),
                                      o.push("replaces");
                                }
                                if (
                                  (o.push("outbound"),
                                  this.method === g.OPTIONS
                                    ? ((u += "Allow: ".concat(
                                        g.ALLOWED_METHODS,
                                        "\r\n"
                                      )),
                                      (u += "Accept: ".concat(
                                        g.ACCEPTED_BODY_TYPES,
                                        "\r\n"
                                      )))
                                    : 405 === e
                                    ? (u += "Allow: ".concat(
                                        g.ALLOWED_METHODS,
                                        "\r\n"
                                      ))
                                    : 415 === e &&
                                      (u += "Accept: ".concat(
                                        g.ACCEPTED_BODY_TYPES,
                                        "\r\n"
                                      )),
                                  (u += "Supported: ".concat(o, "\r\n")),
                                  i)
                                ) {
                                  var b = p.str_utf8_length(i);
                                  (u += "Content-Type: application/sdp\r\n"),
                                    (u += "Content-Length: ".concat(
                                      b,
                                      "\r\n\r\n"
                                    )),
                                    (u += i);
                                } else
                                  u += "Content-Length: ".concat(0, "\r\n\r\n");
                                this.server_transaction.receiveResponse(
                                  e,
                                  u,
                                  r,
                                  s
                                );
                              },
                            },
                            {
                              key: "reply_sl",
                              value: function () {
                                var e =
                                    arguments.length > 0 &&
                                    void 0 !== arguments[0]
                                      ? arguments[0]
                                      : null,
                                  t =
                                    arguments.length > 1 &&
                                    void 0 !== arguments[1]
                                      ? arguments[1]
                                      : null,
                                  n = this.getHeaders("via");
                                if (!e || e < 100 || e > 699)
                                  throw new TypeError(
                                    "Invalid status_code: ".concat(e)
                                  );
                                if (
                                  t &&
                                  "string" != typeof t &&
                                  !(t instanceof String)
                                )
                                  throw new TypeError(
                                    "Invalid reason_phrase: ".concat(t)
                                  );
                                t = t || g.REASON_PHRASE[e] || "";
                                var i,
                                  r = "SIP/2.0 "
                                    .concat(e, " ")
                                    .concat(t, "\r\n"),
                                  s = a(n);
                                try {
                                  for (s.s(); !(i = s.n()).done; ) {
                                    var o = i.value;
                                    r += "Via: ".concat(o, "\r\n");
                                  }
                                } catch (e) {
                                  s.e(e);
                                } finally {
                                  s.f();
                                }
                                var l = this.getHeader("To");
                                if (
                                  (!this.to_tag && e > 100
                                    ? (l += ";tag=".concat(p.newTag()))
                                    : this.to_tag &&
                                      !this.s("to").hasParam("tag") &&
                                      (l += ";tag=".concat(this.to_tag)),
                                  (r += "To: ".concat(l, "\r\n")),
                                  (r += "From: ".concat(
                                    this.getHeader("From"),
                                    "\r\n"
                                  )),
                                  (r += "Call-ID: ".concat(
                                    this.call_id,
                                    "\r\n"
                                  )),
                                  (r += "CSeq: "
                                    .concat(this.cseq, " ")
                                    .concat(this.method, "\r\n")),
                                  this.ua.configuration.extra_headers)
                                ) {
                                  var u,
                                    c = a(this.ua.configuration.extra_headers);
                                  try {
                                    for (c.s(); !(u = c.n()).done; ) {
                                      var d = u.value;
                                      r += "".concat(d.trim(), "\r\n");
                                    }
                                  } catch (e) {
                                    c.e(e);
                                  } finally {
                                    c.f();
                                  }
                                }
                                (r += "Content-Length: ".concat(0, "\r\n\r\n")),
                                  this.transport.send(r);
                              },
                            },
                          ]),
                          n
                        );
                      })(S),
                      w = (function (e) {
                        r(n, e);
                        var t = o(n);
                        function n() {
                          var e;
                          return (
                            c(this, n),
                            ((e = t.call(this)).headers = {}),
                            (e.status_code = null),
                            (e.reason_phrase = null),
                            e
                          );
                        }
                        return h(n);
                      })(S);
                    t.exports = {
                      OutgoingRequest: C,
                      InitialOutgoingInviteRequest: b,
                      IncomingRequest: T,
                      IncomingResponse: w,
                    };
                  },
                  {
                    "./Constants": 2,
                    "./Grammar": 7,
                    "./Logger": 9,
                    "./NameAddrHeader": 11,
                    "./Utils": 30,
                    "sdp-transform": 39,
                  },
                ],
                23: [
                  function (e, t, n) {
                    "use strict";
                    var i = e("./Logger"),
                      r = e("./Utils"),
                      s = e("./Grammar"),
                      o = new i("Socket");
                    n.isSocket = function (e) {
                      if (Array.isArray(e)) return !1;
                      if (void 0 === e)
                        return o.warn("undefined JsSIP.Socket instance"), !1;
                      try {
                        if (!r.isString(e.url))
                          throw (
                            (o.warn(
                              "missing or invalid JsSIP.Socket url property"
                            ),
                            new Error(
                              "Missing or invalid JsSIP.Socket url property"
                            ))
                          );
                        if (!r.isString(e.via_transport))
                          throw (
                            (o.warn(
                              "missing or invalid JsSIP.Socket via_transport property"
                            ),
                            new Error(
                              "Missing or invalid JsSIP.Socket via_transport property"
                            ))
                          );
                        if (-1 === s.parse(e.sip_uri, "SIP_URI"))
                          throw (
                            (o.warn(
                              "missing or invalid JsSIP.Socket sip_uri property"
                            ),
                            new Error(
                              "missing or invalid JsSIP.Socket sip_uri property"
                            ))
                          );
                      } catch (e) {
                        return !1;
                      }
                      try {
                        ["connect", "disconnect", "send"].forEach(function (t) {
                          if (!r.isFunction(e[t]))
                            throw (
                              (o.warn(
                                "missing or invalid JsSIP.Socket method: ".concat(
                                  t
                                )
                              ),
                              new Error(
                                "Missing or invalid JsSIP.Socket method: ".concat(
                                  t
                                )
                              ))
                            );
                        });
                      } catch (e) {
                        return !1;
                      }
                      return !0;
                    };
                  },
                  { "./Grammar": 7, "./Logger": 9, "./Utils": 30 },
                ],
                24: [
                  function (e, t, n) {
                    "use strict";
                    function i(e) {
                      return (
                        (i =
                          "function" == typeof Symbol &&
                          "symbol" == typeof Symbol.iterator
                            ? function (e) {
                                return typeof e;
                              }
                            : function (e) {
                                return e &&
                                  "function" == typeof Symbol &&
                                  e.constructor === Symbol &&
                                  e !== Symbol.prototype
                                  ? "symbol"
                                  : typeof e;
                              }),
                        i(e)
                      );
                    }
                    function r(e, t) {
                      var n =
                        ("undefined" != typeof Symbol && e[Symbol.iterator]) ||
                        e["@@iterator"];
                      if (!n) {
                        if (
                          Array.isArray(e) ||
                          (n = (function (e, t) {
                            if (e) {
                              if ("string" == typeof e) return s(e, t);
                              var n = Object.prototype.toString
                                .call(e)
                                .slice(8, -1);
                              return (
                                "Object" === n &&
                                  e.constructor &&
                                  (n = e.constructor.name),
                                "Map" === n || "Set" === n
                                  ? Array.from(e)
                                  : "Arguments" === n ||
                                    /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(
                                      n
                                    )
                                  ? s(e, t)
                                  : void 0
                              );
                            }
                          })(e)) ||
                          (t && e && "number" == typeof e.length)
                        ) {
                          n && (e = n);
                          var i = 0,
                            r = function () {};
                          return {
                            s: r,
                            n: function () {
                              return i >= e.length
                                ? { done: !0 }
                                : { done: !1, value: e[i++] };
                            },
                            e: function (e) {
                              throw e;
                            },
                            f: r,
                          };
                        }
                        throw new TypeError(
                          "Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
                        );
                      }
                      var o,
                        l = !0,
                        a = !1;
                      return {
                        s: function () {
                          n = n.call(e);
                        },
                        n: function () {
                          var e = n.next();
                          return (l = e.done), e;
                        },
                        e: function (e) {
                          (a = !0), (o = e);
                        },
                        f: function () {
                          try {
                            l || null == n.return || n.return();
                          } finally {
                            if (a) throw o;
                          }
                        },
                      };
                    }
                    function s(e, t) {
                      (null == t || t > e.length) && (t = e.length);
                      for (var n = 0, i = new Array(t); n < t; n++) i[n] = e[n];
                      return i;
                    }
                    function o(e, t) {
                      for (var n = 0; n < t.length; n++) {
                        var i = t[n];
                        (i.enumerable = i.enumerable || !1),
                          (i.configurable = !0),
                          "value" in i && (i.writable = !0),
                          Object.defineProperty(e, i.key, i);
                      }
                    }
                    function l(e, t) {
                      return (
                        (l = Object.setPrototypeOf
                          ? Object.setPrototypeOf.bind()
                          : function (e, t) {
                              return (e.__proto__ = t), e;
                            }),
                        l(e, t)
                      );
                    }
                    function a(e) {
                      var t = (function () {
                        if ("undefined" == typeof Reflect || !Reflect.construct)
                          return !1;
                        if (Reflect.construct.sham) return !1;
                        if ("function" == typeof Proxy) return !0;
                        try {
                          return (
                            Boolean.prototype.valueOf.call(
                              Reflect.construct(Boolean, [], function () {})
                            ),
                            !0
                          );
                        } catch (e) {
                          return !1;
                        }
                      })();
                      return function () {
                        var n,
                          r = u(e);
                        if (t) {
                          var s = u(this).constructor;
                          n = Reflect.construct(r, arguments, s);
                        } else n = r.apply(this, arguments);
                        return (function (e, t) {
                          if (
                            t &&
                            ("object" === i(t) || "function" == typeof t)
                          )
                            return t;
                          if (void 0 !== t)
                            throw new TypeError(
                              "Derived constructors may only return object or undefined"
                            );
                          return (function (e) {
                            if (void 0 === e)
                              throw new ReferenceError(
                                "this hasn't been initialised - super() hasn't been called"
                              );
                            return e;
                          })(e);
                        })(this, n);
                      };
                    }
                    function u(e) {
                      return (
                        (u = Object.setPrototypeOf
                          ? Object.getPrototypeOf.bind()
                          : function (e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                            }),
                        u(e)
                      );
                    }
                    var c = e("events").EventEmitter,
                      d = e("./Logger"),
                      h = e("./Constants"),
                      _ = e("./Utils"),
                      f = e("./Grammar"),
                      g = e("./SIPMessage"),
                      p = e("./RequestSender"),
                      v = e("./Dialog"),
                      m = new d("Subscriber"),
                      y = {
                        SUBSCRIBE_RESPONSE_TIMEOUT: 0,
                        SUBSCRIBE_TRANSPORT_ERROR: 1,
                        SUBSCRIBE_NON_OK_RESPONSE: 2,
                        SUBSCRIBE_BAD_OK_RESPONSE: 3,
                        SUBSCRIBE_FAILED_AUTHENTICATION: 4,
                        UNSUBSCRIBE_TIMEOUT: 5,
                        RECEIVE_FINAL_NOTIFY: 6,
                        RECEIVE_BAD_NOTIFY: 7,
                        STATE_PENDING: 0,
                        STATE_ACTIVE: 1,
                        STATE_TERMINATED: 2,
                        STATE_INIT: 3,
                        STATE_NOTIFY_WAIT: 4,
                      };
                    t.exports = (function (e) {
                      !(function (e, t) {
                        if ("function" != typeof t && null !== t)
                          throw new TypeError(
                            "Super expression must either be null or a function"
                          );
                        (e.prototype = Object.create(t && t.prototype, {
                          constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0,
                          },
                        })),
                          Object.defineProperty(e, "prototype", {
                            writable: !1,
                          }),
                          t && l(e, t);
                      })(u, e);
                      var t,
                        n,
                        i,
                        s = a(u);
                      function u(e, t, n, i, r) {
                        var o,
                          l = r.expires,
                          a = r.contentType,
                          c = r.allowEvents,
                          d = r.params,
                          h = r.extraHeaders;
                        if (
                          ((function (e, t) {
                            if (!(e instanceof t))
                              throw new TypeError(
                                "Cannot call a class as a function"
                              );
                          })(this, u),
                          m.debug("new"),
                          (o = s.call(this)),
                          !t)
                        )
                          throw new TypeError("target is undefined");
                        if (!n) throw new TypeError("eventName is undefined");
                        if (!i) throw new TypeError("accept is undefined");
                        (o._ua = e),
                          (o._target = t),
                          0 === l || l || (l = 900),
                          (o._expires = l),
                          (o._content_type = a),
                          (o._params = _.cloneObject(d)),
                          o._params.from_uri ||
                            (o._params.from_uri = o._ua.configuration.uri),
                          (o._params.from_tag = _.newTag()),
                          (o._params.to_tag = null),
                          (o._params.call_id = _.createRandomToken(20)),
                          void 0 === o._params.cseq &&
                            (o._params.cseq = Math.floor(
                              1e4 * Math.random() + 1
                            )),
                          (o._state = y.STATE_INIT),
                          (o._dialog = null),
                          (o._expires_timer = null),
                          (o._expires_timestamp = null),
                          (o._terminated = !1),
                          (o._unsubscribe_timeout_timer = null),
                          (o.data = {});
                        var g = f.parse(n, "Event");
                        if (-1 === g)
                          throw new TypeError("eventName - wrong format");
                        (o._event_name = g.event),
                          (o._event_id = g.params && g.params.id);
                        var p = o._event_name;
                        if (
                          (o._event_id && (p += ";id=".concat(o._event_id)),
                          (o._headers = _.cloneArray(h)),
                          (o._headers = o._headers.concat([
                            "Event: ".concat(p),
                            "Expires: ".concat(o._expires),
                            "Accept: ".concat(i),
                          ])),
                          !o._headers.find(function (e) {
                            return e.startsWith("Contact");
                          }))
                        ) {
                          var v = "Contact: ".concat(o._ua._contact.toString());
                          o._headers.push(v);
                        }
                        return (
                          c && o._headers.push("Allow-Events: ".concat(c)),
                          (o._queue = []),
                          o
                        );
                      }
                      return (
                        (t = u),
                        (n = [
                          {
                            key: "C",
                            get: function () {
                              return y;
                            },
                          },
                          {
                            key: "onRequestTimeout",
                            value: function () {
                              this._dialogTerminated(
                                y.SUBSCRIBE_RESPONSE_TIMEOUT
                              );
                            },
                          },
                          {
                            key: "onTransportError",
                            value: function () {
                              this._dialogTerminated(
                                y.SUBSCRIBE_TRANSPORT_ERROR
                              );
                            },
                          },
                          {
                            key: "receiveRequest",
                            value: function (e) {
                              if (e.method !== h.NOTIFY)
                                return (
                                  m.warn("received non-NOTIFY request"),
                                  void e.reply(405)
                                );
                              var t = e.parseHeader("Event");
                              if (!t)
                                return (
                                  m.warn("missed Event header"),
                                  e.reply(400),
                                  void this._dialogTerminated(
                                    y.RECEIVE_BAD_NOTIFY
                                  )
                                );
                              var n = t.event,
                                i = t.params && t.params.id;
                              if (
                                n !== this._event_name ||
                                i !== this._event_id
                              )
                                return (
                                  m.warn(
                                    "Event header does not match SUBSCRIBE"
                                  ),
                                  e.reply(489),
                                  void this._dialogTerminated(
                                    y.RECEIVE_BAD_NOTIFY
                                  )
                                );
                              var r = e.parseHeader("subscription-state");
                              if (!r)
                                return (
                                  m.warn("missed Subscription-State header"),
                                  e.reply(400),
                                  void this._dialogTerminated(
                                    y.RECEIVE_BAD_NOTIFY
                                  )
                                );
                              e.reply(200);
                              var s = this._stateStringToNumber(r.state),
                                o = this._state;
                              if (
                                o !== y.STATE_TERMINATED &&
                                s !== y.STATE_TERMINATED &&
                                ((this._state = s), void 0 !== r.expires)
                              ) {
                                var l = r.expires,
                                  a = new Date().getTime() + 1e3 * l;
                                this._expires_timestamp - a > 2e3 &&
                                  (m.debug("update sending re-SUBSCRIBE time"),
                                  this._scheduleSubscribe(l));
                              }
                              o !== y.STATE_PENDING && s === y.STATE_PENDING
                                ? (m.debug('emit "pending"'),
                                  this.emit("pending"))
                                : o !== y.STATE_ACTIVE &&
                                  s === y.STATE_ACTIVE &&
                                  (m.debug('emit "active"'),
                                  this.emit("active"));
                              var u = e.body,
                                c = s === y.STATE_TERMINATED;
                              if (u) {
                                var d = e.getHeader("content-type");
                                m.debug('emit "notify"'),
                                  this.emit("notify", c, e, u, d);
                              }
                              if (c) {
                                var _ = r.reason,
                                  f = void 0;
                                r.params &&
                                  void 0 !== r.params["retry-after"] &&
                                  (f = parseInt(r.params["retry-after"])),
                                  this._dialogTerminated(
                                    y.RECEIVE_FINAL_NOTIFY,
                                    _,
                                    f
                                  );
                              }
                            },
                          },
                          {
                            key: "subscribe",
                            value: function () {
                              var e =
                                arguments.length > 0 && void 0 !== arguments[0]
                                  ? arguments[0]
                                  : null;
                              m.debug("subscribe()"),
                                this._state === y.STATE_INIT
                                  ? this._sendInitialSubscribe(e, this._headers)
                                  : this._sendSubsequentSubscribe(
                                      e,
                                      this._headers
                                    );
                            },
                          },
                          {
                            key: "terminate",
                            value: function () {
                              var e = this,
                                t =
                                  arguments.length > 0 &&
                                  void 0 !== arguments[0]
                                    ? arguments[0]
                                    : null;
                              if ((m.debug("terminate()"), !this._terminated)) {
                                this._terminated = !0;
                                var n = this._headers.map(function (e) {
                                  return e.startsWith("Expires")
                                    ? "Expires: 0"
                                    : e;
                                });
                                this._state === y.STATE_INIT
                                  ? this._sendInitialSubscribe(t, n)
                                  : this._sendSubsequentSubscribe(t, n),
                                  (this._unsubscribe_timeout_timer = setTimeout(
                                    function () {
                                      e._dialogTerminated(
                                        y.UNSUBSCRIBE_TIMEOUT
                                      );
                                    },
                                    3e4
                                  ));
                              }
                            },
                          },
                          {
                            key: "state",
                            get: function () {
                              return this._state;
                            },
                          },
                          {
                            key: "id",
                            get: function () {
                              return this._dialog ? this._dialog.id : null;
                            },
                          },
                          {
                            key: "_sendInitialSubscribe",
                            value: function (e, t) {
                              var n = this;
                              if (e) {
                                if (!this._content_type)
                                  throw new TypeError(
                                    "content_type is undefined"
                                  );
                                (t = t.slice()).push(
                                  "Content-Type: ".concat(this._content_type)
                                );
                              }
                              this._state = y.STATE_NOTIFY_WAIT;
                              var i = new g.OutgoingRequest(
                                h.SUBSCRIBE,
                                this._ua.normalizeTarget(this._target),
                                this._ua,
                                this._params,
                                t,
                                e
                              );
                              new p(this._ua, i, {
                                onRequestTimeout: function () {
                                  n.onRequestTimeout();
                                },
                                onTransportError: function () {
                                  n.onTransportError();
                                },
                                onReceiveResponse: function (e) {
                                  n._receiveSubscribeResponse(e);
                                },
                              }).send();
                            },
                          },
                          {
                            key: "_receiveSubscribeResponse",
                            value: function (e) {
                              if (e.status_code >= 200 && e.status_code < 300) {
                                if (null === this._dialog) {
                                  var t = new v(this, e, "UAC");
                                  if (t.error)
                                    return (
                                      m.warn(t.error),
                                      void this._dialogTerminated(
                                        y.SUBSCRIBE_BAD_OK_RESPONSE
                                      )
                                    );
                                  (this._dialog = t),
                                    m.debug('emit "accepted"'),
                                    this.emit("accepted");
                                  var n,
                                    i = r(this._queue);
                                  try {
                                    for (i.s(); !(n = i.n()).done; ) {
                                      var s = n.value;
                                      m.debug("dequeue subscribe"),
                                        this._sendSubsequentSubscribe(
                                          s.body,
                                          s.headers
                                        );
                                    }
                                  } catch (e) {
                                    i.e(e);
                                  } finally {
                                    i.f();
                                  }
                                }
                                var o = e.getHeader("expires");
                                0 === o ||
                                  o ||
                                  (m.warn("response without Expires header"),
                                  (o = "900"));
                                var l = parseInt(o);
                                l > 0 && this._scheduleSubscribe(l);
                              } else
                                401 === e.status_code || 407 === e.status_code
                                  ? this._dialogTerminated(
                                      y.SUBSCRIBE_FAILED_AUTHENTICATION
                                    )
                                  : e.status_code >= 300 &&
                                    this._dialogTerminated(
                                      y.SUBSCRIBE_NON_OK_RESPONSE
                                    );
                            },
                          },
                          {
                            key: "_sendSubsequentSubscribe",
                            value: function (e, t) {
                              var n = this;
                              if (this._state !== y.STATE_TERMINATED) {
                                if (!this._dialog)
                                  return (
                                    m.debug("enqueue subscribe"),
                                    void this._queue.push({
                                      body: e,
                                      headers: t.slice(),
                                    })
                                  );
                                if (e) {
                                  if (!this._content_type)
                                    throw new TypeError(
                                      "content_type is undefined"
                                    );
                                  (t = t.slice()).push(
                                    "Content-Type: ".concat(this._content_type)
                                  );
                                }
                                this._dialog.sendRequest(h.SUBSCRIBE, {
                                  body: e,
                                  extraHeaders: t,
                                  eventHandlers: {
                                    onRequestTimeout: function () {
                                      n.onRequestTimeout();
                                    },
                                    onTransportError: function () {
                                      n.onTransportError();
                                    },
                                    onSuccessResponse: function (e) {
                                      n._receiveSubscribeResponse(e);
                                    },
                                    onErrorResponse: function (e) {
                                      n._receiveSubscribeResponse(e);
                                    },
                                    onDialogError: function (e) {
                                      n._receiveSubscribeResponse(e);
                                    },
                                  },
                                });
                              }
                            },
                          },
                          {
                            key: "_dialogTerminated",
                            value: function (e) {
                              var t =
                                  arguments.length > 1 &&
                                  void 0 !== arguments[1]
                                    ? arguments[1]
                                    : void 0,
                                n =
                                  arguments.length > 2 &&
                                  void 0 !== arguments[2]
                                    ? arguments[2]
                                    : void 0;
                              this._state !== y.STATE_TERMINATED &&
                                ((this._state = y.STATE_TERMINATED),
                                clearTimeout(this._expires_timer),
                                clearTimeout(this._unsubscribe_timeout_timer),
                                this._dialog &&
                                  (this._dialog.terminate(),
                                  (this._dialog = null)),
                                m.debug('emit "terminated" code='.concat(e)),
                                this.emit("terminated", e, t, n));
                            },
                          },
                          {
                            key: "_scheduleSubscribe",
                            value: function (e) {
                              var t = this,
                                n =
                                  e >= 140
                                    ? (1e3 * e) / 2 +
                                      Math.floor(
                                        1e3 * (e / 2 - 70) * Math.random()
                                      )
                                    : 1e3 * e - 5e3;
                              (this._expires_timestamp =
                                new Date().getTime() + 1e3 * e),
                                m.debug(
                                  "next SUBSCRIBE will be sent in ".concat(
                                    Math.floor(n / 1e3),
                                    " sec"
                                  )
                                ),
                                clearTimeout(this._expires_timer),
                                (this._expires_timer = setTimeout(function () {
                                  (t._expires_timer = null),
                                    t._sendSubsequentSubscribe(
                                      null,
                                      t._headers
                                    );
                                }, n));
                            },
                          },
                          {
                            key: "_stateStringToNumber",
                            value: function (e) {
                              switch (e) {
                                case "pending":
                                  return y.STATE_PENDING;
                                case "active":
                                  return y.STATE_ACTIVE;
                                case "terminated":
                                  return y.STATE_TERMINATED;
                                case "init":
                                  return y.STATE_INIT;
                                case "notify_wait":
                                  return y.STATE_NOTIFY_WAIT;
                                default:
                                  throw new TypeError("wrong state value");
                              }
                            },
                          },
                        ]),
                        (i = [
                          {
                            key: "C",
                            get: function () {
                              return y;
                            },
                          },
                        ]),
                        n && o(t.prototype, n),
                        i && o(t, i),
                        Object.defineProperty(t, "prototype", { writable: !1 }),
                        u
                      );
                    })(c);
                  },
                  {
                    "./Constants": 2,
                    "./Dialog": 3,
                    "./Grammar": 7,
                    "./Logger": 9,
                    "./RequestSender": 21,
                    "./SIPMessage": 22,
                    "./Utils": 30,
                    events: 33,
                  },
                ],
                25: [
                  function (e, t, n) {
                    "use strict";
                    t.exports = {
                      T1: 500,
                      T2: 4e3,
                      T4: 5e3,
                      TIMER_B: 32e3,
                      TIMER_D: 0,
                      TIMER_F: 32e3,
                      TIMER_H: 32e3,
                      TIMER_I: 0,
                      TIMER_J: 0,
                      TIMER_K: 0,
                      TIMER_L: 32e3,
                      TIMER_M: 32e3,
                      PROVISIONAL_RESPONSE_INTERVAL: 6e4,
                    };
                  },
                  {},
                ],
                26: [
                  function (e, t, n) {
                    "use strict";
                    function i(e) {
                      return (
                        (i =
                          "function" == typeof Symbol &&
                          "symbol" == typeof Symbol.iterator
                            ? function (e) {
                                return typeof e;
                              }
                            : function (e) {
                                return e &&
                                  "function" == typeof Symbol &&
                                  e.constructor === Symbol &&
                                  e !== Symbol.prototype
                                  ? "symbol"
                                  : typeof e;
                              }),
                        i(e)
                      );
                    }
                    function r(e, t) {
                      if (!(e instanceof t))
                        throw new TypeError(
                          "Cannot call a class as a function"
                        );
                    }
                    function s(e, t) {
                      for (var n = 0; n < t.length; n++) {
                        var i = t[n];
                        (i.enumerable = i.enumerable || !1),
                          (i.configurable = !0),
                          "value" in i && (i.writable = !0),
                          Object.defineProperty(e, i.key, i);
                      }
                    }
                    function o(e, t, n) {
                      return (
                        t && s(e.prototype, t),
                        n && s(e, n),
                        Object.defineProperty(e, "prototype", { writable: !1 }),
                        e
                      );
                    }
                    function l(e, t) {
                      if ("function" != typeof t && null !== t)
                        throw new TypeError(
                          "Super expression must either be null or a function"
                        );
                      (e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                          value: e,
                          writable: !0,
                          configurable: !0,
                        },
                      })),
                        Object.defineProperty(e, "prototype", { writable: !1 }),
                        t && a(e, t);
                    }
                    function a(e, t) {
                      return (
                        (a = Object.setPrototypeOf
                          ? Object.setPrototypeOf.bind()
                          : function (e, t) {
                              return (e.__proto__ = t), e;
                            }),
                        a(e, t)
                      );
                    }
                    function u(e) {
                      var t = (function () {
                        if ("undefined" == typeof Reflect || !Reflect.construct)
                          return !1;
                        if (Reflect.construct.sham) return !1;
                        if ("function" == typeof Proxy) return !0;
                        try {
                          return (
                            Boolean.prototype.valueOf.call(
                              Reflect.construct(Boolean, [], function () {})
                            ),
                            !0
                          );
                        } catch (e) {
                          return !1;
                        }
                      })();
                      return function () {
                        var n,
                          r = d(e);
                        if (t) {
                          var s = d(this).constructor;
                          n = Reflect.construct(r, arguments, s);
                        } else n = r.apply(this, arguments);
                        return (function (e, t) {
                          if (
                            t &&
                            ("object" === i(t) || "function" == typeof t)
                          )
                            return t;
                          if (void 0 !== t)
                            throw new TypeError(
                              "Derived constructors may only return object or undefined"
                            );
                          return c(e);
                        })(this, n);
                      };
                    }
                    function c(e) {
                      if (void 0 === e)
                        throw new ReferenceError(
                          "this hasn't been initialised - super() hasn't been called"
                        );
                      return e;
                    }
                    function d(e) {
                      return (
                        (d = Object.setPrototypeOf
                          ? Object.getPrototypeOf.bind()
                          : function (e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                            }),
                        d(e)
                      );
                    }
                    var h = e("events").EventEmitter,
                      _ = e("./Logger"),
                      f = e("./Constants"),
                      g = e("./SIPMessage"),
                      p = e("./Timers"),
                      v = new _("NonInviteClientTransaction"),
                      m = new _("InviteClientTransaction"),
                      y = new _("AckClientTransaction"),
                      C = new _("NonInviteServerTransaction"),
                      b = new _("InviteServerTransaction"),
                      S = {
                        STATUS_TRYING: 1,
                        STATUS_PROCEEDING: 2,
                        STATUS_CALLING: 3,
                        STATUS_ACCEPTED: 4,
                        STATUS_COMPLETED: 5,
                        STATUS_TERMINATED: 6,
                        STATUS_CONFIRMED: 7,
                        NON_INVITE_CLIENT: "nict",
                        NON_INVITE_SERVER: "nist",
                        INVITE_CLIENT: "ict",
                        INVITE_SERVER: "ist",
                      },
                      T = (function (e) {
                        l(n, e);
                        var t = u(n);
                        function n(e, i, s, o) {
                          var l;
                          r(this, n),
                            ((l = t.call(this)).type = S.NON_INVITE_CLIENT),
                            (l.id = "z9hG4bK".concat(
                              Math.floor(1e7 * Math.random())
                            )),
                            (l.ua = e),
                            (l.transport = i),
                            (l.request = s),
                            (l.eventHandlers = o);
                          var a = "SIP/2.0/".concat(i.via_transport);
                          return (
                            (a += " "
                              .concat(e.configuration.via_host, ";branch=")
                              .concat(l.id)),
                            l.request.setHeader("via", a),
                            l.ua.newTransaction(c(l)),
                            l
                          );
                        }
                        return (
                          o(n, [
                            {
                              key: "C",
                              get: function () {
                                return S;
                              },
                            },
                            {
                              key: "stateChanged",
                              value: function (e) {
                                (this.state = e), this.emit("stateChanged");
                              },
                            },
                            {
                              key: "send",
                              value: function () {
                                var e = this;
                                this.stateChanged(S.STATUS_TRYING),
                                  (this.F = setTimeout(function () {
                                    e.timer_F();
                                  }, p.TIMER_F)),
                                  this.transport.send(this.request) ||
                                    this.onTransportError();
                              },
                            },
                            {
                              key: "onTransportError",
                              value: function () {
                                v.debug(
                                  "transport error occurred, deleting transaction ".concat(
                                    this.id
                                  )
                                ),
                                  clearTimeout(this.F),
                                  this.stateChanged(S.STATUS_TERMINATED),
                                  this.ua.destroyTransaction(this),
                                  this.eventHandlers.onTransportError();
                              },
                            },
                            {
                              key: "timer_F",
                              value: function () {
                                v.debug(
                                  "Timer F expired for transaction ".concat(
                                    this.id
                                  )
                                ),
                                  this.stateChanged(S.STATUS_TERMINATED),
                                  this.ua.destroyTransaction(this),
                                  this.eventHandlers.onRequestTimeout();
                              },
                            },
                            {
                              key: "timer_K",
                              value: function () {
                                this.stateChanged(S.STATUS_TERMINATED),
                                  this.ua.destroyTransaction(this);
                              },
                            },
                            {
                              key: "receiveResponse",
                              value: function (e) {
                                var t = e.status_code;
                                if (t < 200)
                                  switch (this.state) {
                                    case S.STATUS_TRYING:
                                    case S.STATUS_PROCEEDING:
                                      this.stateChanged(S.STATUS_PROCEEDING),
                                        this.eventHandlers.onReceiveResponse(e);
                                  }
                                else
                                  switch (this.state) {
                                    case S.STATUS_TRYING:
                                    case S.STATUS_PROCEEDING:
                                      this.stateChanged(S.STATUS_COMPLETED),
                                        clearTimeout(this.F),
                                        408 === t
                                          ? this.eventHandlers.onRequestTimeout()
                                          : this.eventHandlers.onReceiveResponse(
                                              e
                                            ),
                                        this.timer_K();
                                  }
                              },
                            },
                          ]),
                          n
                        );
                      })(h),
                      w = (function (e) {
                        l(n, e);
                        var t = u(n);
                        function n(e, i, s, o) {
                          var l;
                          r(this, n),
                            ((l = t.call(this)).type = S.INVITE_CLIENT),
                            (l.id = "z9hG4bK".concat(
                              Math.floor(1e7 * Math.random())
                            )),
                            (l.ua = e),
                            (l.transport = i),
                            (l.request = s),
                            (l.eventHandlers = o),
                            (s.transaction = c(l));
                          var a = "SIP/2.0/".concat(i.via_transport);
                          return (
                            (a += " "
                              .concat(e.configuration.via_host, ";branch=")
                              .concat(l.id)),
                            l.request.setHeader("via", a),
                            l.ua.newTransaction(c(l)),
                            l
                          );
                        }
                        return (
                          o(n, [
                            {
                              key: "C",
                              get: function () {
                                return S;
                              },
                            },
                            {
                              key: "stateChanged",
                              value: function (e) {
                                (this.state = e), this.emit("stateChanged");
                              },
                            },
                            {
                              key: "send",
                              value: function () {
                                var e = this;
                                this.stateChanged(S.STATUS_CALLING),
                                  (this.B = setTimeout(function () {
                                    e.timer_B();
                                  }, p.TIMER_B)),
                                  this.transport.send(this.request) ||
                                    this.onTransportError();
                              },
                            },
                            {
                              key: "onTransportError",
                              value: function () {
                                clearTimeout(this.B),
                                  clearTimeout(this.M),
                                  this.state !== S.STATUS_ACCEPTED &&
                                    (m.debug(
                                      "transport error occurred, deleting transaction ".concat(
                                        this.id
                                      )
                                    ),
                                    this.eventHandlers.onTransportError()),
                                  this.stateChanged(S.STATUS_TERMINATED),
                                  this.ua.destroyTransaction(this);
                              },
                            },
                            {
                              key: "timer_M",
                              value: function () {
                                m.debug(
                                  "Timer M expired for transaction ".concat(
                                    this.id
                                  )
                                ),
                                  this.state === S.STATUS_ACCEPTED &&
                                    (clearTimeout(this.B),
                                    this.stateChanged(S.STATUS_TERMINATED),
                                    this.ua.destroyTransaction(this));
                              },
                            },
                            {
                              key: "timer_B",
                              value: function () {
                                m.debug(
                                  "Timer B expired for transaction ".concat(
                                    this.id
                                  )
                                ),
                                  this.state === S.STATUS_CALLING &&
                                    (this.stateChanged(S.STATUS_TERMINATED),
                                    this.ua.destroyTransaction(this),
                                    this.eventHandlers.onRequestTimeout());
                              },
                            },
                            {
                              key: "timer_D",
                              value: function () {
                                m.debug(
                                  "Timer D expired for transaction ".concat(
                                    this.id
                                  )
                                ),
                                  clearTimeout(this.B),
                                  this.stateChanged(S.STATUS_TERMINATED),
                                  this.ua.destroyTransaction(this);
                              },
                            },
                            {
                              key: "sendACK",
                              value: function (e) {
                                var t = new g.OutgoingRequest(
                                  f.ACK,
                                  this.request.ruri,
                                  this.ua,
                                  {
                                    route_set: this.request.getHeaders("route"),
                                    call_id: this.request.getHeader("call-id"),
                                    cseq: this.request.cseq,
                                  }
                                );
                                t.setHeader(
                                  "from",
                                  this.request.getHeader("from")
                                ),
                                  t.setHeader(
                                    "via",
                                    this.request.getHeader("via")
                                  ),
                                  t.setHeader("to", e.getHeader("to")),
                                  this.transport.send(t),
                                  this.timer_D();
                              },
                            },
                            {
                              key: "cancel",
                              value: function (e) {
                                if (this.state === S.STATUS_PROCEEDING) {
                                  var t = new g.OutgoingRequest(
                                    f.CANCEL,
                                    this.request.ruri,
                                    this.ua,
                                    {
                                      route_set:
                                        this.request.getHeaders("route"),
                                      call_id:
                                        this.request.getHeader("call-id"),
                                      cseq: this.request.cseq,
                                    }
                                  );
                                  t.setHeader(
                                    "from",
                                    this.request.getHeader("from")
                                  ),
                                    t.setHeader(
                                      "via",
                                      this.request.getHeader("via")
                                    ),
                                    t.setHeader(
                                      "to",
                                      this.request.getHeader("to")
                                    ),
                                    e && t.setHeader("reason", e),
                                    this.transport.send(t);
                                }
                              },
                            },
                            {
                              key: "receiveResponse",
                              value: function (e) {
                                var t = this,
                                  n = e.status_code;
                                if (n >= 100 && n <= 199)
                                  switch (this.state) {
                                    case S.STATUS_CALLING:
                                      this.stateChanged(S.STATUS_PROCEEDING),
                                        this.eventHandlers.onReceiveResponse(e);
                                      break;
                                    case S.STATUS_PROCEEDING:
                                      this.eventHandlers.onReceiveResponse(e);
                                  }
                                else if (n >= 200 && n <= 299)
                                  switch (this.state) {
                                    case S.STATUS_CALLING:
                                    case S.STATUS_PROCEEDING:
                                      this.stateChanged(S.STATUS_ACCEPTED),
                                        (this.M = setTimeout(function () {
                                          t.timer_M();
                                        }, p.TIMER_M)),
                                        this.eventHandlers.onReceiveResponse(e);
                                      break;
                                    case S.STATUS_ACCEPTED:
                                      this.eventHandlers.onReceiveResponse(e);
                                  }
                                else if (n >= 300 && n <= 699)
                                  switch (this.state) {
                                    case S.STATUS_CALLING:
                                    case S.STATUS_PROCEEDING:
                                      this.stateChanged(S.STATUS_COMPLETED),
                                        this.sendACK(e),
                                        this.eventHandlers.onReceiveResponse(e);
                                      break;
                                    case S.STATUS_COMPLETED:
                                      this.sendACK(e);
                                  }
                              },
                            },
                          ]),
                          n
                        );
                      })(h),
                      E = (function (e) {
                        l(n, e);
                        var t = u(n);
                        function n(e, i, s, o) {
                          var l;
                          r(this, n),
                            ((l = t.call(this)).id = "z9hG4bK".concat(
                              Math.floor(1e7 * Math.random())
                            )),
                            (l.transport = i),
                            (l.request = s),
                            (l.eventHandlers = o);
                          var a = "SIP/2.0/".concat(i.via_transport);
                          return (
                            (a += " "
                              .concat(e.configuration.via_host, ";branch=")
                              .concat(l.id)),
                            l.request.setHeader("via", a),
                            l
                          );
                        }
                        return (
                          o(n, [
                            {
                              key: "C",
                              get: function () {
                                return S;
                              },
                            },
                            {
                              key: "send",
                              value: function () {
                                this.transport.send(this.request) ||
                                  this.onTransportError();
                              },
                            },
                            {
                              key: "onTransportError",
                              value: function () {
                                y.debug(
                                  "transport error occurred for transaction ".concat(
                                    this.id
                                  )
                                ),
                                  this.eventHandlers.onTransportError();
                              },
                            },
                          ]),
                          n
                        );
                      })(h),
                      A = (function (e) {
                        l(n, e);
                        var t = u(n);
                        function n(e, i, s) {
                          var o;
                          return (
                            r(this, n),
                            ((o = t.call(this)).type = S.NON_INVITE_SERVER),
                            (o.id = s.via_branch),
                            (o.ua = e),
                            (o.transport = i),
                            (o.request = s),
                            (o.last_response = ""),
                            (s.server_transaction = c(o)),
                            (o.state = S.STATUS_TRYING),
                            e.newTransaction(c(o)),
                            o
                          );
                        }
                        return (
                          o(n, [
                            {
                              key: "C",
                              get: function () {
                                return S;
                              },
                            },
                            {
                              key: "stateChanged",
                              value: function (e) {
                                (this.state = e), this.emit("stateChanged");
                              },
                            },
                            {
                              key: "timer_J",
                              value: function () {
                                C.debug(
                                  "Timer J expired for transaction ".concat(
                                    this.id
                                  )
                                ),
                                  this.stateChanged(S.STATUS_TERMINATED),
                                  this.ua.destroyTransaction(this);
                              },
                            },
                            {
                              key: "onTransportError",
                              value: function () {
                                this.transportError ||
                                  ((this.transportError = !0),
                                  C.debug(
                                    "transport error occurred, deleting transaction ".concat(
                                      this.id
                                    )
                                  ),
                                  this.stateChanged(S.STATUS_TERMINATED),
                                  this.ua.destroyTransaction(this));
                              },
                            },
                            {
                              key: "receiveResponse",
                              value: function (e, t, n, i) {
                                if (100 === e)
                                  switch (this.state) {
                                    case S.STATUS_TRYING:
                                      this.stateChanged(S.STATUS_PROCEEDING),
                                        this.transport.send(t) ||
                                          this.onTransportError();
                                      break;
                                    case S.STATUS_PROCEEDING:
                                      (this.last_response = t),
                                        this.transport.send(t)
                                          ? n && n()
                                          : (this.onTransportError(), i && i());
                                  }
                                else if (e >= 200 && e <= 699)
                                  switch (this.state) {
                                    case S.STATUS_TRYING:
                                    case S.STATUS_PROCEEDING:
                                      this.stateChanged(S.STATUS_COMPLETED),
                                        (this.last_response = t),
                                        this.timer_J(),
                                        this.transport.send(t)
                                          ? n && n()
                                          : (this.onTransportError(), i && i());
                                  }
                              },
                            },
                          ]),
                          n
                        );
                      })(h),
                      R = (function (e) {
                        l(n, e);
                        var t = u(n);
                        function n(e, i, s) {
                          var o;
                          return (
                            r(this, n),
                            ((o = t.call(this)).type = S.INVITE_SERVER),
                            (o.id = s.via_branch),
                            (o.ua = e),
                            (o.transport = i),
                            (o.request = s),
                            (o.last_response = ""),
                            (s.server_transaction = c(o)),
                            (o.state = S.STATUS_PROCEEDING),
                            e.newTransaction(c(o)),
                            (o.resendProvisionalTimer = null),
                            s.reply(100),
                            o
                          );
                        }
                        return (
                          o(n, [
                            {
                              key: "C",
                              get: function () {
                                return S;
                              },
                            },
                            {
                              key: "stateChanged",
                              value: function (e) {
                                (this.state = e), this.emit("stateChanged");
                              },
                            },
                            {
                              key: "timer_H",
                              value: function () {
                                b.debug(
                                  "Timer H expired for transaction ".concat(
                                    this.id
                                  )
                                ),
                                  this.state === S.STATUS_COMPLETED &&
                                    b.debug(
                                      "ACK not received, dialog will be terminated"
                                    ),
                                  this.stateChanged(S.STATUS_TERMINATED),
                                  this.ua.destroyTransaction(this);
                              },
                            },
                            {
                              key: "timer_I",
                              value: function () {
                                this.stateChanged(S.STATUS_TERMINATED),
                                  this.ua.destroyTransaction(this);
                              },
                            },
                            {
                              key: "timer_L",
                              value: function () {
                                b.debug(
                                  "Timer L expired for transaction ".concat(
                                    this.id
                                  )
                                ),
                                  this.state === S.STATUS_ACCEPTED &&
                                    (this.stateChanged(S.STATUS_TERMINATED),
                                    this.ua.destroyTransaction(this));
                              },
                            },
                            {
                              key: "onTransportError",
                              value: function () {
                                this.transportError ||
                                  ((this.transportError = !0),
                                  b.debug(
                                    "transport error occurred, deleting transaction ".concat(
                                      this.id
                                    )
                                  ),
                                  null !== this.resendProvisionalTimer &&
                                    (clearInterval(this.resendProvisionalTimer),
                                    (this.resendProvisionalTimer = null)),
                                  clearTimeout(this.L),
                                  clearTimeout(this.H),
                                  this.stateChanged(S.STATUS_TERMINATED),
                                  this.ua.destroyTransaction(this));
                              },
                            },
                            {
                              key: "resend_provisional",
                              value: function () {
                                this.transport.send(this.last_response) ||
                                  this.onTransportError();
                              },
                            },
                            {
                              key: "receiveResponse",
                              value: function (e, t, n, i) {
                                var r = this;
                                if (
                                  (e >= 100 &&
                                    e <= 199 &&
                                    this.state === S.STATUS_PROCEEDING &&
                                    (this.transport.send(t) ||
                                      this.onTransportError(),
                                    (this.last_response = t)),
                                  e > 100 &&
                                    e <= 199 &&
                                    this.state === S.STATUS_PROCEEDING)
                                )
                                  null === this.resendProvisionalTimer &&
                                    (this.resendProvisionalTimer = setInterval(
                                      function () {
                                        r.resend_provisional();
                                      },
                                      p.PROVISIONAL_RESPONSE_INTERVAL
                                    ));
                                else if (e >= 200 && e <= 299)
                                  switch (this.state) {
                                    case S.STATUS_PROCEEDING:
                                      this.stateChanged(S.STATUS_ACCEPTED),
                                        (this.last_response = t),
                                        (this.L = setTimeout(function () {
                                          r.timer_L();
                                        }, p.TIMER_L)),
                                        null !== this.resendProvisionalTimer &&
                                          (clearInterval(
                                            this.resendProvisionalTimer
                                          ),
                                          (this.resendProvisionalTimer = null));
                                    case S.STATUS_ACCEPTED:
                                      this.transport.send(t)
                                        ? n && n()
                                        : (this.onTransportError(), i && i());
                                  }
                                else
                                  e >= 300 &&
                                    e <= 699 &&
                                    this.state === S.STATUS_PROCEEDING &&
                                    (null !== this.resendProvisionalTimer &&
                                      (clearInterval(
                                        this.resendProvisionalTimer
                                      ),
                                      (this.resendProvisionalTimer = null)),
                                    this.transport.send(t)
                                      ? (this.stateChanged(S.STATUS_COMPLETED),
                                        (this.H = setTimeout(function () {
                                          r.timer_H();
                                        }, p.TIMER_H)),
                                        n && n())
                                      : (this.onTransportError(), i && i()));
                              },
                            },
                          ]),
                          n
                        );
                      })(h);
                    t.exports = {
                      C: S,
                      NonInviteClientTransaction: T,
                      InviteClientTransaction: w,
                      AckClientTransaction: E,
                      NonInviteServerTransaction: A,
                      InviteServerTransaction: R,
                      checkTransaction: function (e, t) {
                        var n,
                          i = e._transactions;
                        switch (t.method) {
                          case f.INVITE:
                            if ((n = i.ist[t.via_branch]))
                              return (
                                n.state === S.STATUS_PROCEEDING &&
                                  n.transport.send(n.last_response),
                                !0
                              );
                            break;
                          case f.ACK:
                            if (!(n = i.ist[t.via_branch])) return !1;
                            if (n.state === S.STATUS_ACCEPTED) return !1;
                            if (n.state === S.STATUS_COMPLETED)
                              return (
                                (n.state = S.STATUS_CONFIRMED), n.timer_I(), !0
                              );
                            break;
                          case f.CANCEL:
                            return (n = i.ist[t.via_branch])
                              ? (t.reply_sl(200),
                                n.state !== S.STATUS_PROCEEDING)
                              : (t.reply_sl(481), !0);
                          default:
                            if ((n = i.nist[t.via_branch])) {
                              switch (n.state) {
                                case S.STATUS_TRYING:
                                  break;
                                case S.STATUS_PROCEEDING:
                                case S.STATUS_COMPLETED:
                                  n.transport.send(n.last_response);
                              }
                              return !0;
                            }
                        }
                      },
                    };
                  },
                  {
                    "./Constants": 2,
                    "./Logger": 9,
                    "./SIPMessage": 22,
                    "./Timers": 25,
                    events: 33,
                  },
                ],
                27: [
                  function (e, t, n) {
                    "use strict";
                    function i(e, t) {
                      var n =
                        ("undefined" != typeof Symbol && e[Symbol.iterator]) ||
                        e["@@iterator"];
                      if (!n) {
                        if (
                          Array.isArray(e) ||
                          (n = (function (e, t) {
                            if (e) {
                              if ("string" == typeof e) return r(e, t);
                              var n = Object.prototype.toString
                                .call(e)
                                .slice(8, -1);
                              return (
                                "Object" === n &&
                                  e.constructor &&
                                  (n = e.constructor.name),
                                "Map" === n || "Set" === n
                                  ? Array.from(e)
                                  : "Arguments" === n ||
                                    /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(
                                      n
                                    )
                                  ? r(e, t)
                                  : void 0
                              );
                            }
                          })(e)) ||
                          (t && e && "number" == typeof e.length)
                        ) {
                          n && (e = n);
                          var i = 0,
                            s = function () {};
                          return {
                            s,
                            n: function () {
                              return i >= e.length
                                ? { done: !0 }
                                : { done: !1, value: e[i++] };
                            },
                            e: function (e) {
                              throw e;
                            },
                            f: s,
                          };
                        }
                        throw new TypeError(
                          "Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
                        );
                      }
                      var o,
                        l = !0,
                        a = !1;
                      return {
                        s: function () {
                          n = n.call(e);
                        },
                        n: function () {
                          var e = n.next();
                          return (l = e.done), e;
                        },
                        e: function (e) {
                          (a = !0), (o = e);
                        },
                        f: function () {
                          try {
                            l || null == n.return || n.return();
                          } finally {
                            if (a) throw o;
                          }
                        },
                      };
                    }
                    function r(e, t) {
                      (null == t || t > e.length) && (t = e.length);
                      for (var n = 0, i = new Array(t); n < t; n++) i[n] = e[n];
                      return i;
                    }
                    var s = e("./Logger"),
                      o = e("./Socket"),
                      l = e("./Constants"),
                      a = new s("Transport"),
                      u = {
                        STATUS_CONNECTED: 0,
                        STATUS_CONNECTING: 1,
                        STATUS_DISCONNECTED: 2,
                        SOCKET_STATUS_READY: 0,
                        SOCKET_STATUS_ERROR: 1,
                        recovery_options: {
                          min_interval: l.CONNECTION_RECOVERY_MIN_INTERVAL,
                          max_interval: l.CONNECTION_RECOVERY_MAX_INTERVAL,
                        },
                      };
                    t.exports = (function () {
                      function e(t, n) {
                        var i =
                          arguments.length > 2 && void 0 !== arguments[2]
                            ? arguments[2]
                            : u.recovery_options;
                        (function (e, t) {
                          if (!(e instanceof t))
                            throw new TypeError(
                              "Cannot call a class as a function"
                            );
                        })(this, e),
                          a.debug("new()"),
                          (this._ua = t),
                          (this.status = u.STATUS_DISCONNECTED),
                          (this.socket = null),
                          (this.sockets = []),
                          (this.recovery_options = i),
                          (this.recover_attempts = 0),
                          (this.recovery_timer = null),
                          (this.close_requested = !1);
                        try {
                          this.textDecoder = new TextDecoder("utf8");
                        } catch (e) {
                          a.warn("cannot use TextDecoder: ".concat(e));
                        }
                        if (void 0 === n)
                          throw new TypeError(
                            "Invalid argument. undefined 'sockets' argument"
                          );
                        n instanceof Array || (n = [n]),
                          n.forEach(function (e) {
                            if (!o.isSocket(e.socket))
                              throw new TypeError(
                                "Invalid argument. invalid 'JsSIP.Socket' instance"
                              );
                            if (e.weight && !Number(e.weight))
                              throw new TypeError(
                                "Invalid argument. 'weight' attribute is not a number"
                              );
                            this.sockets.push({
                              socket: e.socket,
                              weight: e.weight || 0,
                              status: u.SOCKET_STATUS_READY,
                            });
                          }, this),
                          this._getSocket();
                      }
                      return (
                        (t = e),
                        (n = [
                          {
                            key: "via_transport",
                            get: function () {
                              return this.socket.via_transport;
                            },
                          },
                          {
                            key: "url",
                            get: function () {
                              return this.socket.url;
                            },
                          },
                          {
                            key: "sip_uri",
                            get: function () {
                              return this.socket.sip_uri;
                            },
                          },
                          {
                            key: "connect",
                            value: function () {
                              a.debug("connect()"),
                                this.isConnected()
                                  ? a.debug("Transport is already connected")
                                  : this.isConnecting()
                                  ? a.debug("Transport is connecting")
                                  : ((this.close_requested = !1),
                                    (this.status = u.STATUS_CONNECTING),
                                    this.onconnecting({
                                      socket: this.socket,
                                      attempts: this.recover_attempts,
                                    }),
                                    this.close_requested ||
                                      ((this.socket.onconnect =
                                        this._onConnect.bind(this)),
                                      (this.socket.ondisconnect =
                                        this._onDisconnect.bind(this)),
                                      (this.socket.ondata =
                                        this._onData.bind(this)),
                                      this.socket.connect()));
                            },
                          },
                          {
                            key: "disconnect",
                            value: function () {
                              a.debug("close()"),
                                (this.close_requested = !0),
                                (this.recover_attempts = 0),
                                (this.status = u.STATUS_DISCONNECTED),
                                null !== this.recovery_timer &&
                                  (clearTimeout(this.recovery_timer),
                                  (this.recovery_timer = null)),
                                (this.socket.onconnect = function () {}),
                                (this.socket.ondisconnect = function () {}),
                                (this.socket.ondata = function () {}),
                                this.socket.disconnect(),
                                this.ondisconnect({
                                  socket: this.socket,
                                  error: !1,
                                });
                            },
                          },
                          {
                            key: "send",
                            value: function (e) {
                              if ((a.debug("send()"), !this.isConnected()))
                                return (
                                  a.warn(
                                    "unable to send message, transport is not connected"
                                  ),
                                  !1
                                );
                              var t = e.toString();
                              return (
                                a.debug("sending message:\n\n".concat(t, "\n")),
                                this.socket.send(t)
                              );
                            },
                          },
                          {
                            key: "isConnected",
                            value: function () {
                              return this.status === u.STATUS_CONNECTED;
                            },
                          },
                          {
                            key: "isConnecting",
                            value: function () {
                              return this.status === u.STATUS_CONNECTING;
                            },
                          },
                          {
                            key: "_get_number_of_sbc",
                            value: function () {
                              return this.sockets.length;
                            },
                          },
                          {
                            key: "_switch_sbc",
                            value: function () {
                              var e = this.ondisconnect;
                              (this.ondisconnect = function () {}),
                                this.disconnect(),
                                (this.ondisconnect = e),
                                (this.close_requested = !1),
                                this.sockets.forEach(function (e) {
                                  this.socket === e.socket &&
                                    (e.status = u.SOCKET_STATUS_ERROR);
                                }, this),
                                this._getSocket(),
                                this.connect();
                            },
                          },
                          {
                            key: "_register_redirect",
                            value: function (e) {
                              var t,
                                n = null,
                                r = i(this.sockets);
                              try {
                                for (r.s(); !(t = r.n()).done; ) {
                                  var s = t.value;
                                  if (s.socket.url === e) {
                                    n = s.socket;
                                    break;
                                  }
                                }
                              } catch (e) {
                                r.e(e);
                              } finally {
                                r.f();
                              }
                              if (null === n && !e.includes(":", 6)) {
                                e += ":443";
                                var o,
                                  l = i(this.sockets);
                                try {
                                  for (l.s(); !(o = l.n()).done; ) {
                                    var a = o.value;
                                    if (a.socket.url === e) {
                                      n = a.socket;
                                      break;
                                    }
                                  }
                                } catch (e) {
                                  l.e(e);
                                } finally {
                                  l.f();
                                }
                              }
                              if (null === n) return !1;
                              var u = this.ondisconnect;
                              return (
                                (this.ondisconnect = function () {}),
                                this.disconnect(),
                                (this.ondisconnect = u),
                                (this.socket = n),
                                this.connect(),
                                !0
                              );
                            },
                          },
                          {
                            key: "_reconnect",
                            value: function () {
                              var e = this;
                              this.recover_attempts += 1;
                              var t = Math.floor(
                                Math.random() *
                                  Math.pow(2, this.recover_attempts) +
                                  1
                              );
                              t < this.recovery_options.min_interval
                                ? (t = this.recovery_options.min_interval)
                                : t > this.recovery_options.max_interval &&
                                  (t = this.recovery_options.max_interval),
                                a.debug(
                                  "reconnection attempt: "
                                    .concat(
                                      this.recover_attempts,
                                      ". next connection attempt in "
                                    )
                                    .concat(t, " seconds")
                                ),
                                (this.recovery_timer = setTimeout(function () {
                                  e.close_requested ||
                                    e.isConnected() ||
                                    e.isConnecting() ||
                                    (e._getSocket(), e.connect());
                                }, 1e3 * t));
                            },
                          },
                          {
                            key: "_getSocket",
                            value: function () {
                              var e = [];
                              if (
                                (this.sockets.forEach(function (t) {
                                  t.status !== u.SOCKET_STATUS_ERROR &&
                                    (0 === e.length
                                      ? e.push(t)
                                      : t.weight > e[0].weight
                                      ? (e = [t])
                                      : t.weight === e[0].weight && e.push(t));
                                }),
                                0 === e.length)
                              )
                                return (
                                  this.sockets.forEach(function (e) {
                                    e.status = u.SOCKET_STATUS_READY;
                                  }),
                                  void this._getSocket()
                                );
                              var t = Math.floor(Math.random() * e.length);
                              this.socket = e[t].socket;
                            },
                          },
                          {
                            key: "_onConnect",
                            value: function () {
                              (this.recover_attempts = 0),
                                (this._ha_connect_time = void 0),
                                (this.status = u.STATUS_CONNECTED),
                                null !== this.recovery_timer &&
                                  (clearTimeout(this.recovery_timer),
                                  (this.recovery_timer = null)),
                                this.onconnect({ socket: this });
                            },
                          },
                          {
                            key: "_onDisconnect",
                            value: function (e, t, n) {
                              var i = this.status;
                              if (
                                ((this.status = u.STATUS_DISCONNECTED),
                                this.ondisconnect({
                                  socket: this.socket,
                                  error: e,
                                  code: t,
                                  reason: n,
                                }),
                                !this.close_requested)
                              ) {
                                if (
                                  void 0 !== this._ua.modes.sbc_ha_pairs_mode
                                ) {
                                  if (i === u.STATUS_CONNECTED)
                                    return (
                                      a.debug(
                                        "AC: SBC HA pairs mode: Reconnect to the same SBC ".concat(
                                          this._ua.modes.sbc_ha_pairs_mode,
                                          " seconds left"
                                        )
                                      ),
                                      (this._ha_connect_time =
                                        new Date().getTime() +
                                        1e3 * this._ua.modes.sbc_ha_pairs_mode),
                                      void this._connect2()
                                    );
                                  if (void 0 !== this._ha_connect_time) {
                                    var r =
                                      this._ha_connect_time -
                                      new Date().getTime();
                                    if (r > 0)
                                      return (
                                        a.debug(
                                          "AC: SBC HA pairs mode: Repeat ".concat(
                                            r / 1e3,
                                            " seconds left"
                                          )
                                        ),
                                        void this._connect2()
                                      );
                                    a.debug("AC: SBC HA pairs mode: Failed"),
                                      (this._ha_connect_time = void 0);
                                  }
                                }
                                this.sockets.forEach(function (e) {
                                  this.socket === e.socket &&
                                    (e.status = u.SOCKET_STATUS_ERROR);
                                }, this),
                                  this._reconnect();
                              }
                            },
                          },
                          {
                            key: "_connect2",
                            value: function () {
                              var e = this,
                                t = 0;
                              if (this._ha_last_connect) {
                                var n =
                                  new Date().getTime() - this._ha_last_connect;
                                t = n > 500 ? 0 : 500 - n;
                              }
                              this.recovery_timer = setTimeout(function () {
                                e.close_requested ||
                                  e.isConnected() ||
                                  e.isConnecting() ||
                                  ((e._ha_last_connect = new Date().getTime()),
                                  e.connect());
                              }, t);
                            },
                          },
                          {
                            key: "_onData",
                            value: function (e) {
                              if ("\r\n" !== e) {
                                if ("string" != typeof e) {
                                  try {
                                    e = this.textDecoder
                                      ? this.textDecoder.decode(e)
                                      : String.fromCharCode.apply(
                                          null,
                                          new Uint8Array(e)
                                        );
                                  } catch (e) {
                                    return void a.debug(
                                      "received binary message failed to be converted into string, message discarded"
                                    );
                                  }
                                  a.debug(
                                    "received binary message:\n\n".concat(
                                      e,
                                      "\n"
                                    )
                                  );
                                } else
                                  a.debug(
                                    "received text message:\n\n".concat(e, "\n")
                                  );
                                this.ondata({ transport: this, message: e });
                              } else
                                a.debug(
                                  "received message with CRLF Keep Alive response"
                                );
                            },
                          },
                        ]) &&
                          (function (e, t) {
                            for (var n = 0; n < t.length; n++) {
                              var i = t[n];
                              (i.enumerable = i.enumerable || !1),
                                (i.configurable = !0),
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(e, i.key, i);
                            }
                          })(t.prototype, n),
                        Object.defineProperty(t, "prototype", { writable: !1 }),
                        e
                      );
                      var t, n;
                    })();
                  },
                  { "./Constants": 2, "./Logger": 9, "./Socket": 23 },
                ],
                28: [
                  function (e, t, n) {
                    "use strict";
                    function i(e) {
                      return (
                        (i =
                          "function" == typeof Symbol &&
                          "symbol" == typeof Symbol.iterator
                            ? function (e) {
                                return typeof e;
                              }
                            : function (e) {
                                return e &&
                                  "function" == typeof Symbol &&
                                  e.constructor === Symbol &&
                                  e !== Symbol.prototype
                                  ? "symbol"
                                  : typeof e;
                              }),
                        i(e)
                      );
                    }
                    function r(e, t) {
                      for (var n = 0; n < t.length; n++) {
                        var i = t[n];
                        (i.enumerable = i.enumerable || !1),
                          (i.configurable = !0),
                          "value" in i && (i.writable = !0),
                          Object.defineProperty(e, i.key, i);
                      }
                    }
                    function s(e, t) {
                      return (
                        (s = Object.setPrototypeOf
                          ? Object.setPrototypeOf.bind()
                          : function (e, t) {
                              return (e.__proto__ = t), e;
                            }),
                        s(e, t)
                      );
                    }
                    function o(e) {
                      var t = (function () {
                        if ("undefined" == typeof Reflect || !Reflect.construct)
                          return !1;
                        if (Reflect.construct.sham) return !1;
                        if ("function" == typeof Proxy) return !0;
                        try {
                          return (
                            Boolean.prototype.valueOf.call(
                              Reflect.construct(Boolean, [], function () {})
                            ),
                            !0
                          );
                        } catch (e) {
                          return !1;
                        }
                      })();
                      return function () {
                        var n,
                          r = a(e);
                        if (t) {
                          var s = a(this).constructor;
                          n = Reflect.construct(r, arguments, s);
                        } else n = r.apply(this, arguments);
                        return (function (e, t) {
                          if (
                            t &&
                            ("object" === i(t) || "function" == typeof t)
                          )
                            return t;
                          if (void 0 !== t)
                            throw new TypeError(
                              "Derived constructors may only return object or undefined"
                            );
                          return l(e);
                        })(this, n);
                      };
                    }
                    function l(e) {
                      if (void 0 === e)
                        throw new ReferenceError(
                          "this hasn't been initialised - super() hasn't been called"
                        );
                      return e;
                    }
                    function a(e) {
                      return (
                        (a = Object.setPrototypeOf
                          ? Object.getPrototypeOf.bind()
                          : function (e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                            }),
                        a(e)
                      );
                    }
                    var u = e("events").EventEmitter,
                      c = e("./Logger"),
                      d = e("./Constants"),
                      h = e("./Registrator"),
                      _ = e("./RTCSession"),
                      f = e("./Subscriber"),
                      g = e("./Notifier"),
                      p = e("./Message"),
                      v = e("./Options"),
                      m = e("./Transactions"),
                      y = e("./Transport"),
                      C = e("./Utils"),
                      b = e("./Exceptions"),
                      S = e("./URI"),
                      T = e("./Parser"),
                      w = e("./SIPMessage"),
                      E = e("./sanityCheck"),
                      A = e("./Config"),
                      R = new c("UA"),
                      I = {
                        STATUS_INIT: 0,
                        STATUS_READY: 1,
                        STATUS_USER_CLOSED: 2,
                        STATUS_NOT_READY: 3,
                        CONFIGURATION_ERROR: 1,
                        NETWORK_ERROR: 2,
                      };
                    function k(e) {
                      this.emit("connecting", e);
                    }
                    function O(e) {
                      this._status !== I.STATUS_USER_CLOSED &&
                        ((this._status = I.STATUS_READY),
                        (this._error = null),
                        this.emit("connected", e),
                        this._dynConfiguration.register &&
                          this._registrator.register());
                    }
                    function x(e) {
                      for (
                        var t = 0, n = ["nict", "ict", "nist", "ist"];
                        t < n.length;
                        t++
                      ) {
                        var i = n[t];
                        for (var r in this._transactions[i])
                          Object.prototype.hasOwnProperty.call(
                            this._transactions[i],
                            r
                          ) && this._transactions[i][r].onTransportError();
                      }
                      this.emit("disconnected", e),
                        this._registrator.onTransportClosed(),
                        this._status !== I.STATUS_USER_CLOSED &&
                          ((this._status = I.STATUS_NOT_READY),
                          (this._error = I.NETWORK_ERROR));
                    }
                    function P(e) {
                      var t = e.transport,
                        n = e.message;
                      if (
                        (n = T.parseMessage(n, this)) &&
                        !(
                          this._status === I.STATUS_USER_CLOSED &&
                          n instanceof w.IncomingRequest
                        ) &&
                        E(n, this, t)
                      )
                        if (n instanceof w.IncomingRequest)
                          (n.transport = t), this.receiveRequest(n);
                        else if (n instanceof w.IncomingResponse) {
                          var i;
                          switch (n.method) {
                            case d.INVITE:
                              (i = this._transactions.ict[n.via_branch]) &&
                                i.receiveResponse(n);
                              break;
                            case d.ACK:
                              break;
                            default:
                              (i = this._transactions.nict[n.via_branch]) &&
                                i.receiveResponse(n);
                          }
                        }
                    }
                    t.exports = (function (e) {
                      !(function (e, t) {
                        if ("function" != typeof t && null !== t)
                          throw new TypeError(
                            "Super expression must either be null or a function"
                          );
                        (e.prototype = Object.create(t && t.prototype, {
                          constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0,
                          },
                        })),
                          Object.defineProperty(e, "prototype", {
                            writable: !1,
                          }),
                          t && s(e, t);
                      })(u, e);
                      var t,
                        n,
                        i,
                        a = o(u);
                      function u(e) {
                        var t;
                        if (
                          ((function (e, t) {
                            if (!(e instanceof t))
                              throw new TypeError(
                                "Cannot call a class as a function"
                              );
                          })(this, u),
                          ((t = a.call(this)).modes = {}),
                          (t._credentials = {}),
                          (t._cache = { credentials: {} }),
                          (t._configuration = Object.assign({}, A.settings)),
                          (t._dynConfiguration = {}),
                          (t._dialogs = {}),
                          (t._applicants = {}),
                          (t._sessions = {}),
                          (t._transport = null),
                          (t._contact = null),
                          (t._status = I.STATUS_INIT),
                          (t._error = null),
                          (t._transactions = {
                            nist: {},
                            nict: {},
                            ist: {},
                            ict: {},
                          }),
                          (t._data = {}),
                          (t._closeTimer = null),
                          void 0 === e)
                        )
                          throw new TypeError("Not enough arguments");
                        try {
                          t._loadConfig(e);
                        } catch (e) {
                          throw (
                            ((t._status = I.STATUS_NOT_READY),
                            (t._error = I.CONFIGURATION_ERROR),
                            e)
                          );
                        }
                        return (t._registrator = new h(l(t))), t;
                      }
                      return (
                        (t = u),
                        (n = [
                          {
                            key: "C",
                            get: function () {
                              return I;
                            },
                          },
                          {
                            key: "status",
                            get: function () {
                              return this._status;
                            },
                          },
                          {
                            key: "contact",
                            get: function () {
                              return this._contact;
                            },
                          },
                          {
                            key: "configuration",
                            get: function () {
                              return this._configuration;
                            },
                          },
                          {
                            key: "transport",
                            get: function () {
                              return this._transport;
                            },
                          },
                          {
                            key: "start",
                            value: function () {
                              R.debug("start()"),
                                this._status === I.STATUS_INIT
                                  ? this._transport.connect()
                                  : this._status === I.STATUS_USER_CLOSED
                                  ? (R.debug("restarting UA"),
                                    null !== this._closeTimer &&
                                      (clearTimeout(this._closeTimer),
                                      (this._closeTimer = null),
                                      this._transport.disconnect()),
                                    (this._status = I.STATUS_INIT),
                                    this._transport.connect())
                                  : this._status === I.STATUS_READY
                                  ? R.debug(
                                      "UA is in READY status, not restarted"
                                    )
                                  : R.debug(
                                      "ERROR: connection is down, Auto-Recovery system is trying to reconnect"
                                    ),
                                (this._dynConfiguration.register =
                                  this._configuration.register);
                            },
                          },
                          {
                            key: "register",
                            value: function () {
                              R.debug("register()"),
                                (this._dynConfiguration.register = !0),
                                this._registrator.register();
                            },
                          },
                          {
                            key: "unregister",
                            value: function (e) {
                              R.debug("unregister()"),
                                (this._dynConfiguration.register = !1),
                                this._registrator.unregister(e);
                            },
                          },
                          {
                            key: "registrator",
                            value: function () {
                              return this._registrator;
                            },
                          },
                          {
                            key: "isRegistered",
                            value: function () {
                              return this._registrator.registered;
                            },
                          },
                          {
                            key: "isConnected",
                            value: function () {
                              return this._transport.isConnected();
                            },
                          },
                          {
                            key: "call",
                            value: function (e, t) {
                              R.debug("call()");
                              var n = new _(this);
                              return n.connect(e, t), n;
                            },
                          },
                          {
                            key: "sendMessage",
                            value: function (e, t, n) {
                              R.debug("sendMessage()");
                              var i = new p(this);
                              return i.send(e, t, n), i;
                            },
                          },
                          {
                            key: "subscribe",
                            value: function (e, t, n, i) {
                              return (
                                R.debug("subscribe()"), new f(this, e, t, n, i)
                              );
                            },
                          },
                          {
                            key: "notify",
                            value: function (e, t, n) {
                              return R.debug("notify()"), new g(this, e, t, n);
                            },
                          },
                          {
                            key: "addCredential",
                            value: function (e) {
                              this._credentials[e.realm] = C.cloneObject(e);
                            },
                          },
                          {
                            key: "getCredential",
                            value: function (e) {
                              return (
                                this._credentials[e] || {
                                  username:
                                    this._configuration.authorization_user,
                                  password: this._configuration.password,
                                  realm: this._configuration.realm,
                                  ha1: this._configuration.ha1,
                                }
                              );
                            },
                          },
                          {
                            key: "updateCredential",
                            value: function (e, t, n) {
                              var i = this._credentials[e];
                              i
                                ? ((i.realm = t), (i.ha1 = n))
                                : (this.set("realm", t), this.set("ha1", n));
                            },
                          },
                          {
                            key: "sendOptions",
                            value: function (e, t, n) {
                              R.debug("sendOptions()");
                              var i = new v(this);
                              return i.send(e, t, n), i;
                            },
                          },
                          {
                            key: "terminateSessions",
                            value: function (e) {
                              for (var t in (R.debug("terminateSessions()"),
                              this._sessions))
                                this._sessions[t].isEnded() ||
                                  this._sessions[t].terminate(e);
                            },
                          },
                          {
                            key: "stop",
                            value: function () {
                              var e = this;
                              if (
                                (R.debug("stop()"),
                                (this._dynConfiguration = {}),
                                this._status !== I.STATUS_USER_CLOSED)
                              ) {
                                this._registrator.close();
                                var t = Object.keys(this._sessions).length;
                                for (var n in this._sessions)
                                  if (
                                    Object.prototype.hasOwnProperty.call(
                                      this._sessions,
                                      n
                                    )
                                  ) {
                                    R.debug("closing session ".concat(n));
                                    try {
                                      this._sessions[n].terminate();
                                    } catch (e) {}
                                  }
                                for (var i in this._applicants)
                                  if (
                                    Object.prototype.hasOwnProperty.call(
                                      this._applicants,
                                      i
                                    )
                                  )
                                    try {
                                      this._applicants[i].close();
                                    } catch (e) {}
                                (this._status = I.STATUS_USER_CLOSED),
                                  0 ===
                                    Object.keys(this._transactions.nict)
                                      .length +
                                      Object.keys(this._transactions.nist)
                                        .length +
                                      Object.keys(this._transactions.ict)
                                        .length +
                                      Object.keys(this._transactions.ist)
                                        .length && 0 === t
                                    ? this._transport.disconnect()
                                    : (this._closeTimer = setTimeout(
                                        function () {
                                          (e._closeTimer = null),
                                            e._transport.disconnect();
                                        },
                                        2e3
                                      ));
                              } else R.debug("UA already closed");
                            },
                          },
                          {
                            key: "normalizeTarget",
                            value: function (e) {
                              return C.normalizeTarget(
                                e,
                                this._configuration.hostport_params
                              );
                            },
                          },
                          {
                            key: "get",
                            value: function (e) {
                              switch (e) {
                                case "authorization_user":
                                  return this._configuration.authorization_user;
                                case "realm":
                                  return this._configuration.realm;
                                case "ha1":
                                  return this._configuration.ha1;
                                case "authorization_jwt":
                                  return this._configuration.authorization_jwt;
                                default:
                                  return void R.warn(
                                    'get() | cannot get "%s" parameter in runtime',
                                    e
                                  );
                              }
                            },
                          },
                          {
                            key: "set",
                            value: function (e, t) {
                              switch (e) {
                                case "authorization_user":
                                  this._configuration.authorization_user =
                                    String(t);
                                  break;
                                case "password":
                                  this._configuration.password = String(t);
                                  break;
                                case "realm":
                                  this._configuration.realm = String(t);
                                  break;
                                case "ha1":
                                  (this._configuration.ha1 = String(t)),
                                    (this._configuration.password = null);
                                  break;
                                case "authorization_jwt":
                                  this._configuration.authorization_jwt =
                                    String(t);
                                  break;
                                case "display_name":
                                  this._configuration.display_name = t;
                                  break;
                                default:
                                  return (
                                    R.warn(
                                      'set() | cannot set "%s" parameter in runtime',
                                      e
                                    ),
                                    !1
                                  );
                              }
                              return !0;
                            },
                          },
                          {
                            key: "registerRedirect",
                            value: function (e) {
                              return (
                                !!this._transport._register_redirect(e) ||
                                (R.debug(
                                  'registerRedirect: ignored, "'.concat(
                                    e,
                                    '" is not found in configuration'
                                  )
                                ),
                                !1)
                              );
                            },
                          },
                          {
                            key: "switchSBC",
                            value: function (e) {
                              return this._transport._get_number_of_sbc() < 2
                                ? (R.debug("switchSBC: ignored, no other SBC"),
                                  !1)
                                : (e &&
                                    this._registrator._unregistered(
                                      null,
                                      d.causes.CONNECTION_ERROR
                                    ),
                                  this._transport._switch_sbc(),
                                  !0);
                            },
                          },
                          {
                            key: "getNumberOfSBC",
                            value: function () {
                              return this._transport._get_number_of_sbc();
                            },
                          },
                          {
                            key: "newTransaction",
                            value: function (e) {
                              (this._transactions[e.type][e.id] = e),
                                this.emit("newTransaction", { transaction: e });
                            },
                          },
                          {
                            key: "destroyTransaction",
                            value: function (e) {
                              delete this._transactions[e.type][e.id],
                                this.emit("transactionDestroyed", {
                                  transaction: e,
                                });
                            },
                          },
                          {
                            key: "newDialog",
                            value: function (e) {
                              this._dialogs[e.id] = e;
                            },
                          },
                          {
                            key: "destroyDialog",
                            value: function (e) {
                              delete this._dialogs[e.id];
                            },
                          },
                          {
                            key: "newMessage",
                            value: function (e, t) {
                              (this._applicants[e] = e),
                                this.emit("newMessage", t);
                            },
                          },
                          {
                            key: "newOptions",
                            value: function (e, t) {
                              (this._applicants[e] = e),
                                this.emit("newOptions", t);
                            },
                          },
                          {
                            key: "destroyMessage",
                            value: function (e) {
                              delete this._applicants[e];
                            },
                          },
                          {
                            key: "newRTCSession",
                            value: function (e, t) {
                              (this._sessions[e.id] = e),
                                this.emit("newRTCSession", t);
                            },
                          },
                          {
                            key: "destroyRTCSession",
                            value: function (e) {
                              delete this._sessions[e.id];
                            },
                          },
                          {
                            key: "registered",
                            value: function (e) {
                              this.emit("registered", e);
                            },
                          },
                          {
                            key: "unregistered",
                            value: function (e) {
                              this.emit("unregistered", e);
                            },
                          },
                          {
                            key: "registrationFailed",
                            value: function (e) {
                              this.emit("registrationFailed", e);
                            },
                          },
                          {
                            key: "receiveRequest",
                            value: function (e) {
                              var t = e.method;
                              if (
                                e.ruri.user !== this._configuration.uri.user &&
                                e.ruri.user !== this._contact.uri.user
                              )
                                return (
                                  R.debug("Request-URI does not point to us"),
                                  void (e.method !== d.ACK && e.reply_sl(404))
                                );
                              if (e.ruri.scheme !== d.SIPS) {
                                if (!m.checkTransaction(this, e)) {
                                  if (
                                    (t === d.INVITE
                                      ? new m.InviteServerTransaction(
                                          this,
                                          this._transport,
                                          e
                                        )
                                      : t !== d.ACK &&
                                        t !== d.CANCEL &&
                                        new m.NonInviteServerTransaction(
                                          this,
                                          this._transport,
                                          e
                                        ),
                                    t === d.OPTIONS)
                                  ) {
                                    if (
                                      0 === this.listeners("newOptions").length
                                    )
                                      return void e.reply(200);
                                    new v(this).init_incoming(e);
                                  } else if (t === d.MESSAGE) {
                                    if (
                                      0 === this.listeners("newMessage").length
                                    )
                                      return void e.reply(405);
                                    new p(this).init_incoming(e);
                                  } else if (t === d.SUBSCRIBE) {
                                    if (
                                      0 ===
                                      this.listeners("newSubscribe").length
                                    )
                                      return void e.reply(405);
                                  } else if (
                                    t === d.INVITE &&
                                    !e.to_tag &&
                                    0 === this.listeners("newRTCSession").length
                                  )
                                    return void e.reply(405);
                                  var n, i;
                                  if (e.to_tag)
                                    (n = this._findDialog(
                                      e.call_id,
                                      e.from_tag,
                                      e.to_tag
                                    ))
                                      ? n.receiveRequest(e)
                                      : t === d.NOTIFY
                                      ? (i = this._findSession(e))
                                        ? i.receiveRequest(e)
                                        : (R.debug(
                                            "received NOTIFY request for a non existent subscription"
                                          ),
                                          e.reply(
                                            481,
                                            "Subscription does not exist"
                                          ))
                                      : t !== d.ACK && e.reply(481);
                                  else
                                    switch (t) {
                                      case d.INVITE:
                                        if (window.RTCPeerConnection)
                                          if (e.hasHeader("replaces")) {
                                            var r = e.replaces;
                                            (n = this._findDialog(
                                              r.call_id,
                                              r.from_tag,
                                              r.to_tag
                                            ))
                                              ? (i = n.owner).isEnded()
                                                ? e.reply(603)
                                                : i.receiveRequest(e)
                                              : e.reply(481);
                                          } else
                                            (i = new _(this)).init_incoming(e);
                                        else
                                          R.warn(
                                            "INVITE received but WebRTC is not supported"
                                          ),
                                            e.reply(488);
                                        break;
                                      case d.BYE:
                                        e.reply(481);
                                        break;
                                      case d.CANCEL:
                                        (i = this._findSession(e))
                                          ? i.receiveRequest(e)
                                          : R.debug(
                                              "received CANCEL request for a non existent session"
                                            );
                                        break;
                                      case d.ACK:
                                        break;
                                      case d.NOTIFY:
                                        this.emit("sipEvent", {
                                          event: e.event,
                                          request: e,
                                        }),
                                          e.reply(200);
                                        break;
                                      case d.SUBSCRIBE:
                                        this.emit("newSubscribe", {
                                          event: e.event,
                                          request: e,
                                        });
                                        break;
                                      default:
                                        e.reply(405);
                                    }
                                }
                              } else e.reply_sl(416);
                            },
                          },
                          {
                            key: "_findSession",
                            value: function (e) {
                              var t = e.call_id,
                                n = e.from_tag,
                                i = e.to_tag,
                                r = t + n,
                                s = this._sessions[r],
                                o = t + i,
                                l = this._sessions[o];
                              return s || l || null;
                            },
                          },
                          {
                            key: "_findDialog",
                            value: function (e, t, n) {
                              var i = e + t + n,
                                r = this._dialogs[i];
                              return (
                                r ||
                                ((i = e + n + t),
                                (r = this._dialogs[i]) || null)
                              );
                            },
                          },
                          {
                            key: "_loadConfig",
                            value: function (e) {
                              try {
                                A.load(this._configuration, e);
                              } catch (e) {
                                throw e;
                              }
                              0 === this._configuration.display_name &&
                                (this._configuration.display_name = "0"),
                                this._configuration.instance_id ||
                                  (this._configuration.instance_id =
                                    C.newUUID()),
                                (this._configuration.jssip_id =
                                  C.createRandomToken(5));
                              var t = this._configuration.uri.clone();
                              (t.user = null),
                                (this._configuration.hostport_params = t
                                  .toString()
                                  .replace(/^sip:/i, ""));
                              try {
                                (this._transport = new y(
                                  this,
                                  this._configuration.sockets,
                                  {
                                    max_interval:
                                      this._configuration
                                        .connection_recovery_max_interval,
                                    min_interval:
                                      this._configuration
                                        .connection_recovery_min_interval,
                                  }
                                )),
                                  (this._transport.onconnecting = k.bind(this)),
                                  (this._transport.onconnect = O.bind(this)),
                                  (this._transport.ondisconnect = x.bind(this)),
                                  (this._transport.ondata = P.bind(this));
                              } catch (e) {
                                throw (
                                  (R.warn(e),
                                  new b.ConfigurationError(
                                    "sockets",
                                    this._configuration.sockets
                                  ))
                                );
                              }
                              if (
                                (delete this._configuration.sockets,
                                this._configuration.authorization_user ||
                                  (this._configuration.authorization_user =
                                    this._configuration.uri.user),
                                !this._configuration.registrar_server)
                              ) {
                                var n = this._configuration.uri.clone();
                                (n.user = null),
                                  n.clearParams(),
                                  n.clearHeaders(),
                                  (this._configuration.registrar_server = n);
                              }
                              (this._configuration.no_answer_timeout *= 1e3),
                                this._configuration.contact_uri
                                  ? (this._configuration.via_host =
                                      this._configuration.contact_uri.host)
                                  : (this._configuration.contact_uri = new S(
                                      "sip",
                                      C.createRandomToken(8),
                                      this._configuration.via_host,
                                      null,
                                      { transport: "ws" }
                                    )),
                                (this._contact = {
                                  pub_gruu: null,
                                  temp_gruu: null,
                                  uri: this._configuration.contact_uri,
                                  toString: function () {
                                    var e =
                                        arguments.length > 0 &&
                                        void 0 !== arguments[0]
                                          ? arguments[0]
                                          : {},
                                      t = e.anonymous || null,
                                      n = e.outbound || null,
                                      i = "<";
                                    return (
                                      (i += t
                                        ? this.temp_gruu ||
                                          "sip:anonymous@anonymous.invalid;transport=ws"
                                        : this.pub_gruu || this.uri.toString()),
                                      !n ||
                                        (t ? this.temp_gruu : this.pub_gruu) ||
                                        (i += ";ob"),
                                      i + ">"
                                    );
                                  },
                                });
                              var i = [
                                "authorization_user",
                                "password",
                                "realm",
                                "ha1",
                                "authorization_jwt",
                                "display_name",
                                "register",
                              ];
                              for (var r in this._configuration)
                                Object.prototype.hasOwnProperty.call(
                                  this._configuration,
                                  r
                                ) &&
                                  (-1 !== i.indexOf(r)
                                    ? Object.defineProperty(
                                        this._configuration,
                                        r,
                                        { writable: !0, configurable: !1 }
                                      )
                                    : Object.defineProperty(
                                        this._configuration,
                                        r,
                                        { writable: !1, configurable: !1 }
                                      ));
                              for (var s in (R.debug(
                                "configuration parameters after validation:"
                              ),
                              this._configuration))
                                if (
                                  Object.prototype.hasOwnProperty.call(
                                    A.settings,
                                    s
                                  )
                                )
                                  switch (s) {
                                    case "uri":
                                    case "registrar_server":
                                      R.debug(
                                        "- "
                                          .concat(s, ": ")
                                          .concat(this._configuration[s])
                                      );
                                      break;
                                    case "password":
                                    case "ha1":
                                    case "authorization_jwt":
                                      R.debug("- ".concat(s, ": NOT SHOWN"));
                                      break;
                                    default:
                                      R.debug(
                                        "- "
                                          .concat(s, ": ")
                                          .concat(
                                            JSON.stringify(
                                              this._configuration[s]
                                            )
                                          )
                                      );
                                  }
                            },
                          },
                        ]),
                        (i = [
                          {
                            key: "C",
                            get: function () {
                              return I;
                            },
                          },
                        ]),
                        n && r(t.prototype, n),
                        i && r(t, i),
                        Object.defineProperty(t, "prototype", { writable: !1 }),
                        u
                      );
                    })(u);
                  },
                  {
                    "./Config": 1,
                    "./Constants": 2,
                    "./Exceptions": 6,
                    "./Logger": 9,
                    "./Message": 10,
                    "./Notifier": 12,
                    "./Options": 13,
                    "./Parser": 14,
                    "./RTCSession": 15,
                    "./Registrator": 20,
                    "./SIPMessage": 22,
                    "./Subscriber": 24,
                    "./Transactions": 26,
                    "./Transport": 27,
                    "./URI": 29,
                    "./Utils": 30,
                    "./sanityCheck": 32,
                    events: 33,
                  },
                ],
                29: [
                  function (e, t, n) {
                    "use strict";
                    function i(e, t) {
                      var n =
                        ("undefined" != typeof Symbol && e[Symbol.iterator]) ||
                        e["@@iterator"];
                      if (!n) {
                        if (
                          Array.isArray(e) ||
                          (n = (function (e, t) {
                            if (e) {
                              if ("string" == typeof e) return r(e, t);
                              var n = Object.prototype.toString
                                .call(e)
                                .slice(8, -1);
                              return (
                                "Object" === n &&
                                  e.constructor &&
                                  (n = e.constructor.name),
                                "Map" === n || "Set" === n
                                  ? Array.from(e)
                                  : "Arguments" === n ||
                                    /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(
                                      n
                                    )
                                  ? r(e, t)
                                  : void 0
                              );
                            }
                          })(e)) ||
                          (t && e && "number" == typeof e.length)
                        ) {
                          n && (e = n);
                          var i = 0,
                            s = function () {};
                          return {
                            s,
                            n: function () {
                              return i >= e.length
                                ? { done: !0 }
                                : { done: !1, value: e[i++] };
                            },
                            e: function (e) {
                              throw e;
                            },
                            f: s,
                          };
                        }
                        throw new TypeError(
                          "Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
                        );
                      }
                      var o,
                        l = !0,
                        a = !1;
                      return {
                        s: function () {
                          n = n.call(e);
                        },
                        n: function () {
                          var e = n.next();
                          return (l = e.done), e;
                        },
                        e: function (e) {
                          (a = !0), (o = e);
                        },
                        f: function () {
                          try {
                            l || null == n.return || n.return();
                          } finally {
                            if (a) throw o;
                          }
                        },
                      };
                    }
                    function r(e, t) {
                      (null == t || t > e.length) && (t = e.length);
                      for (var n = 0, i = new Array(t); n < t; n++) i[n] = e[n];
                      return i;
                    }
                    function s(e, t) {
                      for (var n = 0; n < t.length; n++) {
                        var i = t[n];
                        (i.enumerable = i.enumerable || !1),
                          (i.configurable = !0),
                          "value" in i && (i.writable = !0),
                          Object.defineProperty(e, i.key, i);
                      }
                    }
                    var o = e("./Constants"),
                      l = e("./Utils"),
                      a = e("./Grammar");
                    t.exports = (function () {
                      function e(t, n, i, r) {
                        var s =
                            arguments.length > 4 && void 0 !== arguments[4]
                              ? arguments[4]
                              : {},
                          l =
                            arguments.length > 5 && void 0 !== arguments[5]
                              ? arguments[5]
                              : {};
                        if (
                          ((function (e, t) {
                            if (!(e instanceof t))
                              throw new TypeError(
                                "Cannot call a class as a function"
                              );
                          })(this, e),
                          !i)
                        )
                          throw new TypeError(
                            'missing or invalid "host" parameter'
                          );
                        for (var a in ((this._parameters = {}),
                        (this._headers = {}),
                        (this._scheme = t || o.SIP),
                        (this._user = n),
                        (this._host = i),
                        (this._port = r),
                        s))
                          Object.prototype.hasOwnProperty.call(s, a) &&
                            this.setParam(a, s[a]);
                        for (var u in l)
                          Object.prototype.hasOwnProperty.call(l, u) &&
                            this.setHeader(u, l[u]);
                      }
                      return (
                        (t = e),
                        (r = [
                          {
                            key: "parse",
                            value: function (e) {
                              return -1 !== (e = a.parse(e, "SIP_URI"))
                                ? e
                                : void 0;
                            },
                          },
                        ]),
                        (n = [
                          {
                            key: "scheme",
                            get: function () {
                              return this._scheme;
                            },
                            set: function (e) {
                              this._scheme = e.toLowerCase();
                            },
                          },
                          {
                            key: "user",
                            get: function () {
                              return this._user;
                            },
                            set: function (e) {
                              this._user = e;
                            },
                          },
                          {
                            key: "host",
                            get: function () {
                              return this._host;
                            },
                            set: function (e) {
                              this._host = e.toLowerCase();
                            },
                          },
                          {
                            key: "port",
                            get: function () {
                              return this._port;
                            },
                            set: function (e) {
                              this._port =
                                0 === e ? e : parseInt(e, 10) || null;
                            },
                          },
                          {
                            key: "setParam",
                            value: function (e, t) {
                              e &&
                                (this._parameters[e.toLowerCase()] =
                                  null == t ? null : t.toString());
                            },
                          },
                          {
                            key: "getParam",
                            value: function (e) {
                              if (e) return this._parameters[e.toLowerCase()];
                            },
                          },
                          {
                            key: "hasParam",
                            value: function (e) {
                              if (e)
                                return !!this._parameters.hasOwnProperty(
                                  e.toLowerCase()
                                );
                            },
                          },
                          {
                            key: "deleteParam",
                            value: function (e) {
                              if (
                                ((e = e.toLowerCase()),
                                this._parameters.hasOwnProperty(e))
                              ) {
                                var t = this._parameters[e];
                                return delete this._parameters[e], t;
                              }
                            },
                          },
                          {
                            key: "clearParams",
                            value: function () {
                              this._parameters = {};
                            },
                          },
                          {
                            key: "setHeader",
                            value: function (e, t) {
                              this._headers[l.headerize(e)] = Array.isArray(t)
                                ? t
                                : [t];
                            },
                          },
                          {
                            key: "getHeader",
                            value: function (e) {
                              if (e) return this._headers[l.headerize(e)];
                            },
                          },
                          {
                            key: "hasHeader",
                            value: function (e) {
                              if (e)
                                return !!this._headers.hasOwnProperty(
                                  l.headerize(e)
                                );
                            },
                          },
                          {
                            key: "deleteHeader",
                            value: function (e) {
                              if (
                                ((e = l.headerize(e)),
                                this._headers.hasOwnProperty(e))
                              ) {
                                var t = this._headers[e];
                                return delete this._headers[e], t;
                              }
                            },
                          },
                          {
                            key: "clearHeaders",
                            value: function () {
                              this._headers = {};
                            },
                          },
                          {
                            key: "clone",
                            value: function () {
                              return new e(
                                this._scheme,
                                this._user,
                                this._host,
                                this._port,
                                JSON.parse(JSON.stringify(this._parameters)),
                                JSON.parse(JSON.stringify(this._headers))
                              );
                            },
                          },
                          {
                            key: "toString",
                            value: function () {
                              var e = [],
                                t = "".concat(this._scheme, ":");
                              for (var n in (this._user &&
                                (t += "".concat(l.escapeUser(this._user), "@")),
                              (t += this._host),
                              (this._port || 0 === this._port) &&
                                (t += ":".concat(this._port)),
                              this._parameters))
                                Object.prototype.hasOwnProperty.call(
                                  this._parameters,
                                  n
                                ) &&
                                  ((t += ";".concat(n)),
                                  null !== this._parameters[n] &&
                                    (t += "=".concat(this._parameters[n])));
                              for (var r in this._headers)
                                if (
                                  Object.prototype.hasOwnProperty.call(
                                    this._headers,
                                    r
                                  )
                                ) {
                                  var s,
                                    o = i(this._headers[r]);
                                  try {
                                    for (o.s(); !(s = o.n()).done; ) {
                                      var a = s.value;
                                      e.push("".concat(r, "=").concat(a));
                                    }
                                  } catch (e) {
                                    o.e(e);
                                  } finally {
                                    o.f();
                                  }
                                }
                              return (
                                e.length > 0 && (t += "?".concat(e.join("&"))),
                                t
                              );
                            },
                          },
                          {
                            key: "toAor",
                            value: function (e) {
                              var t = "".concat(this._scheme, ":");
                              return (
                                this._user &&
                                  (t += "".concat(
                                    l.escapeUser(this._user),
                                    "@"
                                  )),
                                (t += this._host),
                                e &&
                                  (this._port || 0 === this._port) &&
                                  (t += ":".concat(this._port)),
                                t
                              );
                            },
                          },
                        ]) && s(t.prototype, n),
                        r && s(t, r),
                        Object.defineProperty(t, "prototype", { writable: !1 }),
                        e
                      );
                      var t, n, r;
                    })();
                  },
                  { "./Constants": 2, "./Grammar": 7, "./Utils": 30 },
                ],
                30: [
                  function (e, t, n) {
                    "use strict";
                    function i(e) {
                      return (
                        (i =
                          "function" == typeof Symbol &&
                          "symbol" == typeof Symbol.iterator
                            ? function (e) {
                                return typeof e;
                              }
                            : function (e) {
                                return e &&
                                  "function" == typeof Symbol &&
                                  e.constructor === Symbol &&
                                  e !== Symbol.prototype
                                  ? "symbol"
                                  : typeof e;
                              }),
                        i(e)
                      );
                    }
                    function r(e, t) {
                      var n =
                        ("undefined" != typeof Symbol && e[Symbol.iterator]) ||
                        e["@@iterator"];
                      if (!n) {
                        if (
                          Array.isArray(e) ||
                          (n = (function (e, t) {
                            if (e) {
                              if ("string" == typeof e) return s(e, t);
                              var n = Object.prototype.toString
                                .call(e)
                                .slice(8, -1);
                              return (
                                "Object" === n &&
                                  e.constructor &&
                                  (n = e.constructor.name),
                                "Map" === n || "Set" === n
                                  ? Array.from(e)
                                  : "Arguments" === n ||
                                    /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(
                                      n
                                    )
                                  ? s(e, t)
                                  : void 0
                              );
                            }
                          })(e)) ||
                          (t && e && "number" == typeof e.length)
                        ) {
                          n && (e = n);
                          var i = 0,
                            r = function () {};
                          return {
                            s: r,
                            n: function () {
                              return i >= e.length
                                ? { done: !0 }
                                : { done: !1, value: e[i++] };
                            },
                            e: function (e) {
                              throw e;
                            },
                            f: r,
                          };
                        }
                        throw new TypeError(
                          "Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
                        );
                      }
                      var o,
                        l = !0,
                        a = !1;
                      return {
                        s: function () {
                          n = n.call(e);
                        },
                        n: function () {
                          var e = n.next();
                          return (l = e.done), e;
                        },
                        e: function (e) {
                          (a = !0), (o = e);
                        },
                        f: function () {
                          try {
                            l || null == n.return || n.return();
                          } finally {
                            if (a) throw o;
                          }
                        },
                      };
                    }
                    function s(e, t) {
                      (null == t || t > e.length) && (t = e.length);
                      for (var n = 0, i = new Array(t); n < t; n++) i[n] = e[n];
                      return i;
                    }
                    var o = e("./Constants"),
                      l = e("./URI"),
                      a = e("./Grammar");
                    n.str_utf8_length = function (e) {
                      return unescape(encodeURIComponent(e)).length;
                    };
                    var u = (n.isFunction = function (e) {
                      return (
                        void 0 !== e &&
                        "[object Function]" ===
                          Object.prototype.toString.call(e)
                      );
                    });
                    (n.isString = function (e) {
                      return (
                        void 0 !== e &&
                        "[object String]" === Object.prototype.toString.call(e)
                      );
                    }),
                      (n.isDecimal = function (e) {
                        return !isNaN(e) && parseFloat(e) === parseInt(e, 10);
                      }),
                      (n.isEmpty = function (e) {
                        return (
                          null === e ||
                          "" === e ||
                          void 0 === e ||
                          (Array.isArray(e) && 0 === e.length) ||
                          ("number" == typeof e && isNaN(e))
                        );
                      }),
                      (n.hasMethods = function (e) {
                        for (
                          var t = arguments.length,
                            n = new Array(t > 1 ? t - 1 : 0),
                            i = 1;
                          i < t;
                          i++
                        )
                          n[i - 1] = arguments[i];
                        for (var r = 0, s = n; r < s.length; r++) {
                          var o = s[r];
                          if (u(e[o])) return !1;
                        }
                        return !0;
                      });
                    var c = (n.createRandomToken = function (e) {
                      var t,
                        n =
                          arguments.length > 1 && void 0 !== arguments[1]
                            ? arguments[1]
                            : 32,
                        i = "";
                      for (t = 0; t < e; t++)
                        i += ((Math.random() * n) | 0).toString(n);
                      return i;
                    });
                    (n.newTag = function () {
                      return c(10);
                    }),
                      (n.newUUID = function () {
                        return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(
                          /[xy]/g,
                          function (e) {
                            var t = (16 * Math.random()) | 0;
                            return ("x" === e ? t : (3 & t) | 8).toString(16);
                          }
                        );
                      }),
                      (n.hostType = function (e) {
                        if (e)
                          return -1 !== (e = a.parse(e, "host"))
                            ? e.host_type
                            : void 0;
                      });
                    var d = (n.escapeUser = function (e) {
                      return encodeURIComponent(decodeURIComponent(e))
                        .replace(/%3A/gi, ":")
                        .replace(/%2B/gi, "+")
                        .replace(/%3F/gi, "?")
                        .replace(/%2F/gi, "/");
                    });
                    (n.normalizeTarget = function (e, t) {
                      if (e) {
                        if (e instanceof l) return e;
                        if ("string" == typeof e) {
                          var n,
                            i,
                            r,
                            s = e.split("@");
                          switch (s.length) {
                            case 1:
                              if (!t) return;
                              (n = e), (i = t);
                              break;
                            case 2:
                              (n = s[0]), (i = s[1]);
                              break;
                            default:
                              (n = s.slice(0, s.length - 1).join("@")),
                                (i = s[s.length - 1]);
                          }
                          return (
                            (n = n.replace(/^(sips?|tel):/i, "")),
                            /^[-.()]*\+?[0-9\-.()]+$/.test(n) &&
                              (n = n.replace(/[-.()]/g, "")),
                            (e = ""
                              .concat(o.SIP, ":")
                              .concat(d(n), "@")
                              .concat(i)),
                            (r = l.parse(e)) ? r : void 0
                          );
                        }
                      }
                    }),
                      (n.headerize = function (e) {
                        var t,
                          n = {
                            "Call-Id": "Call-ID",
                            Cseq: "CSeq",
                            "Www-Authenticate": "WWW-Authenticate",
                          },
                          i = e.toLowerCase().replace(/_/g, "-").split("-"),
                          r = "",
                          s = i.length;
                        for (t = 0; t < s; t++)
                          0 !== t && (r += "-"),
                            (r +=
                              i[t].charAt(0).toUpperCase() + i[t].substring(1));
                        return n[r] && (r = n[r]), r;
                      }),
                      (n.sipErrorCause = function (e) {
                        for (var t in o.SIP_ERROR_CAUSES)
                          if (-1 !== o.SIP_ERROR_CAUSES[t].indexOf(e))
                            return o.causes[t];
                        return o.causes.SIP_FAILURE_CODE;
                      }),
                      (n.getRandomTestNetIP = function () {
                        return "192.0.2.".concat(
                          Math.floor(254 * Math.random() + 1)
                        );
                      }),
                      (n.calculateMD5 = function (e) {
                        function t(e, t) {
                          return (e << t) | (e >>> (32 - t));
                        }
                        function n(e, t) {
                          var n = 2147483648 & e,
                            i = 2147483648 & t,
                            r = 1073741824 & e,
                            s = 1073741824 & t,
                            o = (1073741823 & e) + (1073741823 & t);
                          return r & s
                            ? 2147483648 ^ o ^ n ^ i
                            : r | s
                            ? 1073741824 & o
                              ? 3221225472 ^ o ^ n ^ i
                              : 1073741824 ^ o ^ n ^ i
                            : o ^ n ^ i;
                        }
                        function i(e, i, r, s, o, l, a) {
                          return (
                            (e = n(
                              e,
                              n(
                                n(
                                  (function (e, t, n) {
                                    return (e & t) | (~e & n);
                                  })(i, r, s),
                                  o
                                ),
                                a
                              )
                            )),
                            n(t(e, l), i)
                          );
                        }
                        function r(e, i, r, s, o, l, a) {
                          return (
                            (e = n(
                              e,
                              n(
                                n(
                                  (function (e, t, n) {
                                    return (e & n) | (t & ~n);
                                  })(i, r, s),
                                  o
                                ),
                                a
                              )
                            )),
                            n(t(e, l), i)
                          );
                        }
                        function s(e, i, r, s, o, l, a) {
                          return (
                            (e = n(
                              e,
                              n(
                                n(
                                  (function (e, t, n) {
                                    return e ^ t ^ n;
                                  })(i, r, s),
                                  o
                                ),
                                a
                              )
                            )),
                            n(t(e, l), i)
                          );
                        }
                        function o(e, i, r, s, o, l, a) {
                          return (
                            (e = n(
                              e,
                              n(
                                n(
                                  (function (e, t, n) {
                                    return t ^ (e | ~n);
                                  })(i, r, s),
                                  o
                                ),
                                a
                              )
                            )),
                            n(t(e, l), i)
                          );
                        }
                        function l(e) {
                          var t,
                            n = "",
                            i = "";
                          for (t = 0; t <= 3; t++)
                            n += (i = "0".concat(
                              ((e >>> (8 * t)) & 255).toString(16)
                            )).substr(i.length - 2, 2);
                          return n;
                        }
                        var a, u, c, d, h, _, f, g, p, v;
                        for (
                          v = (function (e) {
                            for (
                              var t,
                                n = e.length,
                                i = n + 8,
                                r = 16 * ((i - (i % 64)) / 64 + 1),
                                s = new Array(r - 1),
                                o = 0,
                                l = 0;
                              l < n;

                            )
                              (o = (l % 4) * 8),
                                (s[(t = (l - (l % 4)) / 4)] =
                                  s[t] | (e.charCodeAt(l) << o)),
                                l++;
                            return (
                              (o = (l % 4) * 8),
                              (s[(t = (l - (l % 4)) / 4)] = s[t] | (128 << o)),
                              (s[r - 2] = n << 3),
                              (s[r - 1] = n >>> 29),
                              s
                            );
                          })(
                            (e = (function (e) {
                              for (var t = "", n = 0; n < e.length; n++) {
                                var i = e.charCodeAt(n);
                                i < 128
                                  ? (t += String.fromCharCode(i))
                                  : i > 127 && i < 2048
                                  ? ((t += String.fromCharCode((i >> 6) | 192)),
                                    (t += String.fromCharCode((63 & i) | 128)))
                                  : ((t += String.fromCharCode(
                                      (i >> 12) | 224
                                    )),
                                    (t += String.fromCharCode(
                                      ((i >> 6) & 63) | 128
                                    )),
                                    (t += String.fromCharCode((63 & i) | 128)));
                              }
                              return t;
                            })(e))
                          ),
                            _ = 1732584193,
                            f = 4023233417,
                            g = 2562383102,
                            p = 271733878,
                            a = 0;
                          a < v.length;
                          a += 16
                        )
                          (u = _),
                            (c = f),
                            (d = g),
                            (h = p),
                            (_ = i(_, f, g, p, v[a + 0], 7, 3614090360)),
                            (p = i(p, _, f, g, v[a + 1], 12, 3905402710)),
                            (g = i(g, p, _, f, v[a + 2], 17, 606105819)),
                            (f = i(f, g, p, _, v[a + 3], 22, 3250441966)),
                            (_ = i(_, f, g, p, v[a + 4], 7, 4118548399)),
                            (p = i(p, _, f, g, v[a + 5], 12, 1200080426)),
                            (g = i(g, p, _, f, v[a + 6], 17, 2821735955)),
                            (f = i(f, g, p, _, v[a + 7], 22, 4249261313)),
                            (_ = i(_, f, g, p, v[a + 8], 7, 1770035416)),
                            (p = i(p, _, f, g, v[a + 9], 12, 2336552879)),
                            (g = i(g, p, _, f, v[a + 10], 17, 4294925233)),
                            (f = i(f, g, p, _, v[a + 11], 22, 2304563134)),
                            (_ = i(_, f, g, p, v[a + 12], 7, 1804603682)),
                            (p = i(p, _, f, g, v[a + 13], 12, 4254626195)),
                            (g = i(g, p, _, f, v[a + 14], 17, 2792965006)),
                            (_ = r(
                              _,
                              (f = i(f, g, p, _, v[a + 15], 22, 1236535329)),
                              g,
                              p,
                              v[a + 1],
                              5,
                              4129170786
                            )),
                            (p = r(p, _, f, g, v[a + 6], 9, 3225465664)),
                            (g = r(g, p, _, f, v[a + 11], 14, 643717713)),
                            (f = r(f, g, p, _, v[a + 0], 20, 3921069994)),
                            (_ = r(_, f, g, p, v[a + 5], 5, 3593408605)),
                            (p = r(p, _, f, g, v[a + 10], 9, 38016083)),
                            (g = r(g, p, _, f, v[a + 15], 14, 3634488961)),
                            (f = r(f, g, p, _, v[a + 4], 20, 3889429448)),
                            (_ = r(_, f, g, p, v[a + 9], 5, 568446438)),
                            (p = r(p, _, f, g, v[a + 14], 9, 3275163606)),
                            (g = r(g, p, _, f, v[a + 3], 14, 4107603335)),
                            (f = r(f, g, p, _, v[a + 8], 20, 1163531501)),
                            (_ = r(_, f, g, p, v[a + 13], 5, 2850285829)),
                            (p = r(p, _, f, g, v[a + 2], 9, 4243563512)),
                            (g = r(g, p, _, f, v[a + 7], 14, 1735328473)),
                            (_ = s(
                              _,
                              (f = r(f, g, p, _, v[a + 12], 20, 2368359562)),
                              g,
                              p,
                              v[a + 5],
                              4,
                              4294588738
                            )),
                            (p = s(p, _, f, g, v[a + 8], 11, 2272392833)),
                            (g = s(g, p, _, f, v[a + 11], 16, 1839030562)),
                            (f = s(f, g, p, _, v[a + 14], 23, 4259657740)),
                            (_ = s(_, f, g, p, v[a + 1], 4, 2763975236)),
                            (p = s(p, _, f, g, v[a + 4], 11, 1272893353)),
                            (g = s(g, p, _, f, v[a + 7], 16, 4139469664)),
                            (f = s(f, g, p, _, v[a + 10], 23, 3200236656)),
                            (_ = s(_, f, g, p, v[a + 13], 4, 681279174)),
                            (p = s(p, _, f, g, v[a + 0], 11, 3936430074)),
                            (g = s(g, p, _, f, v[a + 3], 16, 3572445317)),
                            (f = s(f, g, p, _, v[a + 6], 23, 76029189)),
                            (_ = s(_, f, g, p, v[a + 9], 4, 3654602809)),
                            (p = s(p, _, f, g, v[a + 12], 11, 3873151461)),
                            (g = s(g, p, _, f, v[a + 15], 16, 530742520)),
                            (_ = o(
                              _,
                              (f = s(f, g, p, _, v[a + 2], 23, 3299628645)),
                              g,
                              p,
                              v[a + 0],
                              6,
                              4096336452
                            )),
                            (p = o(p, _, f, g, v[a + 7], 10, 1126891415)),
                            (g = o(g, p, _, f, v[a + 14], 15, 2878612391)),
                            (f = o(f, g, p, _, v[a + 5], 21, 4237533241)),
                            (_ = o(_, f, g, p, v[a + 12], 6, 1700485571)),
                            (p = o(p, _, f, g, v[a + 3], 10, 2399980690)),
                            (g = o(g, p, _, f, v[a + 10], 15, 4293915773)),
                            (f = o(f, g, p, _, v[a + 1], 21, 2240044497)),
                            (_ = o(_, f, g, p, v[a + 8], 6, 1873313359)),
                            (p = o(p, _, f, g, v[a + 15], 10, 4264355552)),
                            (g = o(g, p, _, f, v[a + 6], 15, 2734768916)),
                            (f = o(f, g, p, _, v[a + 13], 21, 1309151649)),
                            (_ = o(_, f, g, p, v[a + 4], 6, 4149444226)),
                            (p = o(p, _, f, g, v[a + 11], 10, 3174756917)),
                            (g = o(g, p, _, f, v[a + 2], 15, 718787259)),
                            (f = o(f, g, p, _, v[a + 9], 21, 3951481745)),
                            (_ = n(_, u)),
                            (f = n(f, c)),
                            (g = n(g, d)),
                            (p = n(p, h));
                        return (l(_) + l(f) + l(g) + l(p)).toLowerCase();
                      }),
                      (n.closeMediaStream = function (e) {
                        if (e)
                          try {
                            if (e.getTracks) {
                              var t,
                                n = r(e.getTracks());
                              try {
                                for (n.s(); !(t = n.n()).done; ) t.value.stop();
                              } catch (e) {
                                n.e(e);
                              } finally {
                                n.f();
                              }
                            } else {
                              var s,
                                o = r(e.getAudioTracks());
                              try {
                                for (o.s(); !(s = o.n()).done; ) s.value.stop();
                              } catch (e) {
                                o.e(e);
                              } finally {
                                o.f();
                              }
                              var l,
                                a = r(e.getVideoTracks());
                              try {
                                for (a.s(); !(l = a.n()).done; ) l.value.stop();
                              } catch (e) {
                                a.e(e);
                              } finally {
                                a.f();
                              }
                            }
                          } catch (t) {
                            ("function" != typeof e.stop &&
                              "object" !== i(e.stop)) ||
                              e.stop();
                          }
                      }),
                      (n.cloneArray = function (e) {
                        return (e && e.slice()) || [];
                      }),
                      (n.cloneObject = function (e) {
                        var t =
                          arguments.length > 1 && void 0 !== arguments[1]
                            ? arguments[1]
                            : {};
                        return (e && Object.assign({}, e)) || t;
                      });
                  },
                  { "./Constants": 2, "./Grammar": 7, "./URI": 29 },
                ],
                31: [
                  function (e, t, n) {
                    "use strict";
                    var i = e("./Logger"),
                      r = e("./Grammar"),
                      s = new i("WebSocketInterface");
                    t.exports = (function () {
                      function e(t) {
                        (function (e, t) {
                          if (!(e instanceof t))
                            throw new TypeError(
                              "Cannot call a class as a function"
                            );
                        })(this, e),
                          s.debug('new() [url:"%s"]', t),
                          (this._url = t),
                          (this._sip_uri = null),
                          (this._via_transport = null),
                          (this._ws = null);
                        var n = r.parse(t, "absoluteURI");
                        if (-1 === n)
                          throw (
                            (s.warn("invalid WebSocket URI: ".concat(t)),
                            new TypeError("Invalid argument: ".concat(t)))
                          );
                        if ("wss" !== n.scheme && "ws" !== n.scheme)
                          throw (
                            (s.warn(
                              "invalid WebSocket URI scheme: ".concat(n.scheme)
                            ),
                            new TypeError("Invalid argument: ".concat(t)))
                          );
                        (this._sip_uri = "sip:"
                          .concat(n.host)
                          .concat(
                            n.port ? ":".concat(n.port) : "",
                            ";transport=ws"
                          )),
                          (this._via_transport = n.scheme.toUpperCase());
                      }
                      return (
                        (t = e),
                        (n = [
                          {
                            key: "via_transport",
                            get: function () {
                              return this._via_transport;
                            },
                            set: function (e) {
                              this._via_transport = e.toUpperCase();
                            },
                          },
                          {
                            key: "sip_uri",
                            get: function () {
                              return this._sip_uri;
                            },
                          },
                          {
                            key: "url",
                            get: function () {
                              return this._url;
                            },
                          },
                          {
                            key: "connect",
                            value: function () {
                              if ((s.debug("connect()"), this.isConnected()))
                                s.debug(
                                  "WebSocket ".concat(
                                    this._url,
                                    " is already connected"
                                  )
                                );
                              else if (this.isConnecting())
                                s.debug(
                                  "WebSocket ".concat(
                                    this._url,
                                    " is connecting"
                                  )
                                );
                              else {
                                this._ws && this.disconnect(),
                                  s.debug(
                                    "connecting to WebSocket ".concat(this._url)
                                  );
                                try {
                                  (this._ws = new WebSocket(this._url, "sip")),
                                    (this._ws.binaryType = "arraybuffer"),
                                    (this._ws.onopen = this._onOpen.bind(this)),
                                    (this._ws.onclose =
                                      this._onClose.bind(this)),
                                    (this._ws.onmessage =
                                      this._onMessage.bind(this)),
                                    (this._ws.onerror =
                                      this._onError.bind(this));
                                } catch (e) {
                                  this._onError(e);
                                }
                              }
                            },
                          },
                          {
                            key: "disconnect",
                            value: function () {
                              s.debug("disconnect()"),
                                this._ws &&
                                  ((this._ws.onopen = function () {}),
                                  (this._ws.onclose = function () {}),
                                  (this._ws.onmessage = function () {}),
                                  (this._ws.onerror = function () {}),
                                  this._ws.close(),
                                  (this._ws = null));
                            },
                          },
                          {
                            key: "send",
                            value: function (e) {
                              return (
                                s.debug("send()"),
                                this.isConnected()
                                  ? (this._ws.send(e), !0)
                                  : (s.warn(
                                      "unable to send message, WebSocket is not open"
                                    ),
                                    !1)
                              );
                            },
                          },
                          {
                            key: "isConnected",
                            value: function () {
                              return (
                                this._ws &&
                                this._ws.readyState === this._ws.OPEN
                              );
                            },
                          },
                          {
                            key: "isConnecting",
                            value: function () {
                              return (
                                this._ws &&
                                this._ws.readyState === this._ws.CONNECTING
                              );
                            },
                          },
                          {
                            key: "_onOpen",
                            value: function () {
                              s.debug(
                                "WebSocket ".concat(this._url, " connected")
                              ),
                                this.onconnect();
                            },
                          },
                          {
                            key: "_onClose",
                            value: function (e) {
                              var t = e.wasClean,
                                n = e.code,
                                i = e.reason;
                              s.debug(
                                "WebSocket ".concat(this._url, " closed")
                              ),
                                !1 === t &&
                                  s.debug("WebSocket abrupt disconnection"),
                                this.ondisconnect(!t, n, i);
                            },
                          },
                          {
                            key: "_onMessage",
                            value: function (e) {
                              var t = e.data;
                              s.debug("received WebSocket message"),
                                this.ondata(t);
                            },
                          },
                          {
                            key: "_onError",
                            value: function (e) {
                              s.warn(
                                "WebSocket ".concat(this._url, " error: "),
                                e
                              );
                            },
                          },
                        ]) &&
                          (function (e, t) {
                            for (var n = 0; n < t.length; n++) {
                              var i = t[n];
                              (i.enumerable = i.enumerable || !1),
                                (i.configurable = !0),
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(e, i.key, i);
                            }
                          })(t.prototype, n),
                        Object.defineProperty(t, "prototype", { writable: !1 }),
                        e
                      );
                      var t, n;
                    })();
                  },
                  { "./Grammar": 7, "./Logger": 9 },
                ],
                32: [
                  function (e, t, n) {
                    "use strict";
                    function i(e, t) {
                      var n =
                        ("undefined" != typeof Symbol && e[Symbol.iterator]) ||
                        e["@@iterator"];
                      if (!n) {
                        if (
                          Array.isArray(e) ||
                          (n = (function (e, t) {
                            if (e) {
                              if ("string" == typeof e) return r(e, t);
                              var n = Object.prototype.toString
                                .call(e)
                                .slice(8, -1);
                              return (
                                "Object" === n &&
                                  e.constructor &&
                                  (n = e.constructor.name),
                                "Map" === n || "Set" === n
                                  ? Array.from(e)
                                  : "Arguments" === n ||
                                    /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(
                                      n
                                    )
                                  ? r(e, t)
                                  : void 0
                              );
                            }
                          })(e)) ||
                          (t && e && "number" == typeof e.length)
                        ) {
                          n && (e = n);
                          var i = 0,
                            s = function () {};
                          return {
                            s,
                            n: function () {
                              return i >= e.length
                                ? { done: !0 }
                                : { done: !1, value: e[i++] };
                            },
                            e: function (e) {
                              throw e;
                            },
                            f: s,
                          };
                        }
                        throw new TypeError(
                          "Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
                        );
                      }
                      var o,
                        l = !0,
                        a = !1;
                      return {
                        s: function () {
                          n = n.call(e);
                        },
                        n: function () {
                          var e = n.next();
                          return (l = e.done), e;
                        },
                        e: function (e) {
                          (a = !0), (o = e);
                        },
                        f: function () {
                          try {
                            l || null == n.return || n.return();
                          } finally {
                            if (a) throw o;
                          }
                        },
                      };
                    }
                    function r(e, t) {
                      (null == t || t > e.length) && (t = e.length);
                      for (var n = 0, i = new Array(t); n < t; n++) i[n] = e[n];
                      return i;
                    }
                    var s,
                      o,
                      l,
                      a = e("./Logger"),
                      u = e("./Constants"),
                      c = e("./SIPMessage"),
                      d = e("./Utils"),
                      h = new a("sanityCheck"),
                      _ = [
                        function () {
                          for (
                            var e = 0,
                              t = ["from", "to", "call_id", "cseq", "via"];
                            e < t.length;
                            e++
                          ) {
                            var n = t[e];
                            if (!s.hasHeader(n))
                              return (
                                h.debug(
                                  "missing mandatory header field : ".concat(
                                    n,
                                    ", dropping the response"
                                  )
                                ),
                                !1
                              );
                          }
                        },
                      ],
                      f = [
                        function () {
                          if ("sip" !== s.s("to").uri.scheme) return p(416), !1;
                        },
                        function () {
                          if (
                            !s.to_tag &&
                            s.call_id.substr(0, 5) === o.configuration.jssip_id
                          )
                            return p(482), !1;
                        },
                        function () {
                          if (
                            d.str_utf8_length(s.body) <
                            s.getHeader("content-length")
                          )
                            return p(400), !1;
                        },
                        function () {
                          var e,
                            t = s.from_tag,
                            n = s.call_id,
                            i = s.cseq;
                          if (!s.to_tag)
                            if (s.method === u.INVITE) {
                              if (o._transactions.ist[s.via_branch]) return !1;
                              for (var r in o._transactions.ist)
                                if (
                                  Object.prototype.hasOwnProperty.call(
                                    o._transactions.ist,
                                    r
                                  ) &&
                                  (e = o._transactions.ist[r]).request
                                    .from_tag === t &&
                                  e.request.call_id === n &&
                                  e.request.cseq === i
                                )
                                  return p(482), !1;
                            } else {
                              if (o._transactions.nist[s.via_branch]) return !1;
                              for (var l in o._transactions.nist)
                                if (
                                  Object.prototype.hasOwnProperty.call(
                                    o._transactions.nist,
                                    l
                                  ) &&
                                  (e = o._transactions.nist[l]).request
                                    .from_tag === t &&
                                  e.request.call_id === n &&
                                  e.request.cseq === i
                                )
                                  return p(482), !1;
                            }
                        },
                      ],
                      g = [
                        function () {
                          if (s.getHeaders("via").length > 1)
                            return (
                              h.debug(
                                "more than one Via header field present in the response, dropping the response"
                              ),
                              !1
                            );
                        },
                        function () {
                          if (
                            d.str_utf8_length(s.body) <
                            s.getHeader("content-length")
                          )
                            return (
                              h.debug(
                                "message body length is lower than the value in Content-Length header field, dropping the response"
                              ),
                              !1
                            );
                        },
                      ];
                    function p(e) {
                      var t,
                        n,
                        r = s.getHeaders("via"),
                        o = "SIP/2.0 "
                          .concat(e, " ")
                          .concat(u.REASON_PHRASE[e], "\r\n"),
                        a = i(r);
                      try {
                        for (a.s(); !(n = a.n()).done; ) {
                          var c = n.value;
                          o += "Via: ".concat(c, "\r\n");
                        }
                      } catch (e) {
                        a.e(e);
                      } finally {
                        a.f();
                      }
                      (t = s.getHeader("To")),
                        s.to_tag || (t += ";tag=".concat(d.newTag())),
                        (o += "To: ".concat(t, "\r\n")),
                        (o += "From: ".concat(s.getHeader("From"), "\r\n")),
                        (o += "Call-ID: ".concat(s.call_id, "\r\n")),
                        (o += "CSeq: "
                          .concat(s.cseq, " ")
                          .concat(s.method, "\r\n")),
                        (o += "\r\n"),
                        l.send(o);
                    }
                    t.exports = function (e, t, n) {
                      (s = e), (o = t), (l = n);
                      var r,
                        a = i(_);
                      try {
                        for (a.s(); !(r = a.n()).done; )
                          if (!1 === (0, r.value)()) return !1;
                      } catch (e) {
                        a.e(e);
                      } finally {
                        a.f();
                      }
                      if (s instanceof c.IncomingRequest) {
                        var u,
                          d = i(f);
                        try {
                          for (d.s(); !(u = d.n()).done; )
                            if (!1 === (0, u.value)()) return !1;
                        } catch (e) {
                          d.e(e);
                        } finally {
                          d.f();
                        }
                      } else if (s instanceof c.IncomingResponse) {
                        var h,
                          p = i(g);
                        try {
                          for (p.s(); !(h = p.n()).done; )
                            if (!1 === (0, h.value)()) return !1;
                        } catch (e) {
                          p.e(e);
                        } finally {
                          p.f();
                        }
                      }
                      return !0;
                    };
                  },
                  {
                    "./Constants": 2,
                    "./Logger": 9,
                    "./SIPMessage": 22,
                    "./Utils": 30,
                  },
                ],
                33: [
                  function (e, t, n) {
                    var i =
                        Object.create ||
                        function (e) {
                          var t = function () {};
                          return (t.prototype = e), new t();
                        },
                      r =
                        Object.keys ||
                        function (e) {
                          var t = [];
                          for (var n in e)
                            Object.prototype.hasOwnProperty.call(e, n) &&
                              t.push(n);
                          return n;
                        },
                      s =
                        Function.prototype.bind ||
                        function (e) {
                          var t = this;
                          return function () {
                            return t.apply(e, arguments);
                          };
                        };
                    function o() {
                      (this._events &&
                        Object.prototype.hasOwnProperty.call(
                          this,
                          "_events"
                        )) ||
                        ((this._events = i(null)), (this._eventsCount = 0)),
                        (this._maxListeners = this._maxListeners || void 0);
                    }
                    (t.exports = o),
                      (o.EventEmitter = o),
                      (o.prototype._events = void 0),
                      (o.prototype._maxListeners = void 0);
                    var l,
                      a = 10;
                    try {
                      var u = {};
                      Object.defineProperty &&
                        Object.defineProperty(u, "x", { value: 0 }),
                        (l = 0 === u.x);
                    } catch (e) {
                      l = !1;
                    }
                    function c(e) {
                      return void 0 === e._maxListeners
                        ? o.defaultMaxListeners
                        : e._maxListeners;
                    }
                    function d(e, t, n, r) {
                      var s, o, l;
                      if ("function" != typeof n)
                        throw new TypeError(
                          '"listener" argument must be a function'
                        );
                      if (
                        ((o = e._events)
                          ? (o.newListener &&
                              (e.emit(
                                "newListener",
                                t,
                                n.listener ? n.listener : n
                              ),
                              (o = e._events)),
                            (l = o[t]))
                          : ((o = e._events = i(null)), (e._eventsCount = 0)),
                        l)
                      ) {
                        if (
                          ("function" == typeof l
                            ? (l = o[t] = r ? [n, l] : [l, n])
                            : r
                            ? l.unshift(n)
                            : l.push(n),
                          !l.warned && (s = c(e)) && s > 0 && l.length > s)
                        ) {
                          l.warned = !0;
                          var a = new Error(
                            "Possible EventEmitter memory leak detected. " +
                              l.length +
                              ' "' +
                              String(t) +
                              '" listeners added. Use emitter.setMaxListeners() to increase limit.'
                          );
                          (a.name = "MaxListenersExceededWarning"),
                            (a.emitter = e),
                            (a.type = t),
                            (a.count = l.length),
                            "object" == typeof console &&
                              console.warn &&
                              console.warn("%s: %s", a.name, a.message);
                        }
                      } else (l = o[t] = n), ++e._eventsCount;
                      return e;
                    }
                    function h() {
                      if (!this.fired)
                        switch (
                          (this.target.removeListener(this.type, this.wrapFn),
                          (this.fired = !0),
                          arguments.length)
                        ) {
                          case 0:
                            return this.listener.call(this.target);
                          case 1:
                            return this.listener.call(
                              this.target,
                              arguments[0]
                            );
                          case 2:
                            return this.listener.call(
                              this.target,
                              arguments[0],
                              arguments[1]
                            );
                          case 3:
                            return this.listener.call(
                              this.target,
                              arguments[0],
                              arguments[1],
                              arguments[2]
                            );
                          default:
                            for (
                              var e = new Array(arguments.length), t = 0;
                              t < e.length;
                              ++t
                            )
                              e[t] = arguments[t];
                            this.listener.apply(this.target, e);
                        }
                    }
                    function _(e, t, n) {
                      var i = {
                          fired: !1,
                          wrapFn: void 0,
                          target: e,
                          type: t,
                          listener: n,
                        },
                        r = s.call(h, i);
                      return (r.listener = n), (i.wrapFn = r), r;
                    }
                    function f(e, t, n) {
                      var i = e._events;
                      if (!i) return [];
                      var r = i[t];
                      return r
                        ? "function" == typeof r
                          ? n
                            ? [r.listener || r]
                            : [r]
                          : n
                          ? (function (e) {
                              for (
                                var t = new Array(e.length), n = 0;
                                n < t.length;
                                ++n
                              )
                                t[n] = e[n].listener || e[n];
                              return t;
                            })(r)
                          : p(r, r.length)
                        : [];
                    }
                    function g(e) {
                      var t = this._events;
                      if (t) {
                        var n = t[e];
                        if ("function" == typeof n) return 1;
                        if (n) return n.length;
                      }
                      return 0;
                    }
                    function p(e, t) {
                      for (var n = new Array(t), i = 0; i < t; ++i) n[i] = e[i];
                      return n;
                    }
                    l
                      ? Object.defineProperty(o, "defaultMaxListeners", {
                          enumerable: !0,
                          get: function () {
                            return a;
                          },
                          set: function (e) {
                            if ("number" != typeof e || e < 0 || e != e)
                              throw new TypeError(
                                '"defaultMaxListeners" must be a positive number'
                              );
                            a = e;
                          },
                        })
                      : (o.defaultMaxListeners = a),
                      (o.prototype.setMaxListeners = function (e) {
                        if ("number" != typeof e || e < 0 || isNaN(e))
                          throw new TypeError(
                            '"n" argument must be a positive number'
                          );
                        return (this._maxListeners = e), this;
                      }),
                      (o.prototype.getMaxListeners = function () {
                        return c(this);
                      }),
                      (o.prototype.emit = function (e) {
                        var t,
                          n,
                          i,
                          r,
                          s,
                          o,
                          l = "error" === e;
                        if ((o = this._events)) l = l && null == o.error;
                        else if (!l) return !1;
                        if (l) {
                          if (
                            (arguments.length > 1 && (t = arguments[1]),
                            t instanceof Error)
                          )
                            throw t;
                          var a = new Error(
                            'Unhandled "error" event. (' + t + ")"
                          );
                          throw ((a.context = t), a);
                        }
                        if (!(n = o[e])) return !1;
                        var u = "function" == typeof n;
                        switch ((i = arguments.length)) {
                          case 1:
                            !(function (e, t, n) {
                              if (t) e.call(n);
                              else
                                for (
                                  var i = e.length, r = p(e, i), s = 0;
                                  s < i;
                                  ++s
                                )
                                  r[s].call(n);
                            })(n, u, this);
                            break;
                          case 2:
                            !(function (e, t, n, i) {
                              if (t) e.call(n, i);
                              else
                                for (
                                  var r = e.length, s = p(e, r), o = 0;
                                  o < r;
                                  ++o
                                )
                                  s[o].call(n, i);
                            })(n, u, this, arguments[1]);
                            break;
                          case 3:
                            !(function (e, t, n, i, r) {
                              if (t) e.call(n, i, r);
                              else
                                for (
                                  var s = e.length, o = p(e, s), l = 0;
                                  l < s;
                                  ++l
                                )
                                  o[l].call(n, i, r);
                            })(n, u, this, arguments[1], arguments[2]);
                            break;
                          case 4:
                            !(function (e, t, n, i, r, s) {
                              if (t) e.call(n, i, r, s);
                              else
                                for (
                                  var o = e.length, l = p(e, o), a = 0;
                                  a < o;
                                  ++a
                                )
                                  l[a].call(n, i, r, s);
                            })(
                              n,
                              u,
                              this,
                              arguments[1],
                              arguments[2],
                              arguments[3]
                            );
                            break;
                          default:
                            for (r = new Array(i - 1), s = 1; s < i; s++)
                              r[s - 1] = arguments[s];
                            !(function (e, t, n, i) {
                              if (t) e.apply(n, i);
                              else
                                for (
                                  var r = e.length, s = p(e, r), o = 0;
                                  o < r;
                                  ++o
                                )
                                  s[o].apply(n, i);
                            })(n, u, this, r);
                        }
                        return !0;
                      }),
                      (o.prototype.addListener = function (e, t) {
                        return d(this, e, t, !1);
                      }),
                      (o.prototype.on = o.prototype.addListener),
                      (o.prototype.prependListener = function (e, t) {
                        return d(this, e, t, !0);
                      }),
                      (o.prototype.once = function (e, t) {
                        if ("function" != typeof t)
                          throw new TypeError(
                            '"listener" argument must be a function'
                          );
                        return this.on(e, _(this, e, t)), this;
                      }),
                      (o.prototype.prependOnceListener = function (e, t) {
                        if ("function" != typeof t)
                          throw new TypeError(
                            '"listener" argument must be a function'
                          );
                        return this.prependListener(e, _(this, e, t)), this;
                      }),
                      (o.prototype.removeListener = function (e, t) {
                        var n, r, s, o, l;
                        if ("function" != typeof t)
                          throw new TypeError(
                            '"listener" argument must be a function'
                          );
                        if (!(r = this._events)) return this;
                        if (!(n = r[e])) return this;
                        if (n === t || n.listener === t)
                          0 == --this._eventsCount
                            ? (this._events = i(null))
                            : (delete r[e],
                              r.removeListener &&
                                this.emit(
                                  "removeListener",
                                  e,
                                  n.listener || t
                                ));
                        else if ("function" != typeof n) {
                          for (s = -1, o = n.length - 1; o >= 0; o--)
                            if (n[o] === t || n[o].listener === t) {
                              (l = n[o].listener), (s = o);
                              break;
                            }
                          if (s < 0) return this;
                          0 === s
                            ? n.shift()
                            : (function (e, t) {
                                for (
                                  var n = t, i = n + 1, r = e.length;
                                  i < r;
                                  n += 1, i += 1
                                )
                                  e[n] = e[i];
                                e.pop();
                              })(n, s),
                            1 === n.length && (r[e] = n[0]),
                            r.removeListener &&
                              this.emit("removeListener", e, l || t);
                        }
                        return this;
                      }),
                      (o.prototype.removeAllListeners = function (e) {
                        var t, n, s;
                        if (!(n = this._events)) return this;
                        if (!n.removeListener)
                          return (
                            0 === arguments.length
                              ? ((this._events = i(null)),
                                (this._eventsCount = 0))
                              : n[e] &&
                                (0 == --this._eventsCount
                                  ? (this._events = i(null))
                                  : delete n[e]),
                            this
                          );
                        if (0 === arguments.length) {
                          var o,
                            l = r(n);
                          for (s = 0; s < l.length; ++s)
                            "removeListener" !== (o = l[s]) &&
                              this.removeAllListeners(o);
                          return (
                            this.removeAllListeners("removeListener"),
                            (this._events = i(null)),
                            (this._eventsCount = 0),
                            this
                          );
                        }
                        if ("function" == typeof (t = n[e]))
                          this.removeListener(e, t);
                        else if (t)
                          for (s = t.length - 1; s >= 0; s--)
                            this.removeListener(e, t[s]);
                        return this;
                      }),
                      (o.prototype.listeners = function (e) {
                        return f(this, e, !0);
                      }),
                      (o.prototype.rawListeners = function (e) {
                        return f(this, e, !1);
                      }),
                      (o.listenerCount = function (e, t) {
                        return "function" == typeof e.listenerCount
                          ? e.listenerCount(t)
                          : g.call(e, t);
                      }),
                      (o.prototype.listenerCount = g),
                      (o.prototype.eventNames = function () {
                        return this._eventsCount > 0
                          ? Reflect.ownKeys(this._events)
                          : [];
                      });
                  },
                  {},
                ],
                34: [
                  function (e, t, n) {
                    (function (i) {
                      (function () {
                        (n.formatArgs = function (e) {
                          if (
                            ((e[0] =
                              (this.useColors ? "%c" : "") +
                              this.namespace +
                              (this.useColors ? " %c" : " ") +
                              e[0] +
                              (this.useColors ? "%c " : " ") +
                              "+" +
                              t.exports.humanize(this.diff)),
                            !this.useColors)
                          )
                            return;
                          const n = "color: " + this.color;
                          e.splice(1, 0, n, "color: inherit");
                          let i = 0,
                            r = 0;
                          e[0].replace(/%[a-zA-Z%]/g, (e) => {
                            "%%" !== e && (i++, "%c" === e && (r = i));
                          }),
                            e.splice(r, 0, n);
                        }),
                          (n.save = function (e) {
                            try {
                              e
                                ? n.storage.setItem("debug", e)
                                : n.storage.removeItem("debug");
                            } catch (e) {}
                          }),
                          (n.load = function () {
                            let e;
                            try {
                              e = n.storage.getItem("debug");
                            } catch (e) {}
                            return (
                              !e &&
                                void 0 !== i &&
                                "env" in i &&
                                (e = i.env.DEBUG),
                              e
                            );
                          }),
                          (n.useColors = function () {
                            return (
                              !(
                                "undefined" == typeof window ||
                                !window.process ||
                                ("renderer" !== window.process.type &&
                                  !window.process.__nwjs)
                              ) ||
                              (("undefined" == typeof navigator ||
                                !navigator.userAgent ||
                                !navigator.userAgent
                                  .toLowerCase()
                                  .match(/(edge|trident)\/(\d+)/)) &&
                                (("undefined" != typeof document &&
                                  document.documentElement &&
                                  document.documentElement.style &&
                                  document.documentElement.style
                                    .WebkitAppearance) ||
                                  ("undefined" != typeof window &&
                                    window.console &&
                                    (window.console.firebug ||
                                      (window.console.exception &&
                                        window.console.table))) ||
                                  ("undefined" != typeof navigator &&
                                    navigator.userAgent &&
                                    navigator.userAgent
                                      .toLowerCase()
                                      .match(/firefox\/(\d+)/) &&
                                    parseInt(RegExp.$1, 10) >= 31) ||
                                  ("undefined" != typeof navigator &&
                                    navigator.userAgent &&
                                    navigator.userAgent
                                      .toLowerCase()
                                      .match(/applewebkit\/(\d+)/))))
                            );
                          }),
                          (n.storage = (function () {
                            try {
                              return localStorage;
                            } catch (e) {}
                          })()),
                          (n.destroy = (() => {
                            let e = !1;
                            return () => {
                              e ||
                                ((e = !0),
                                console.warn(
                                  "Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."
                                ));
                            };
                          })()),
                          (n.colors = [
                            "#0000CC",
                            "#0000FF",
                            "#0033CC",
                            "#0033FF",
                            "#0066CC",
                            "#0066FF",
                            "#0099CC",
                            "#0099FF",
                            "#00CC00",
                            "#00CC33",
                            "#00CC66",
                            "#00CC99",
                            "#00CCCC",
                            "#00CCFF",
                            "#3300CC",
                            "#3300FF",
                            "#3333CC",
                            "#3333FF",
                            "#3366CC",
                            "#3366FF",
                            "#3399CC",
                            "#3399FF",
                            "#33CC00",
                            "#33CC33",
                            "#33CC66",
                            "#33CC99",
                            "#33CCCC",
                            "#33CCFF",
                            "#6600CC",
                            "#6600FF",
                            "#6633CC",
                            "#6633FF",
                            "#66CC00",
                            "#66CC33",
                            "#9900CC",
                            "#9900FF",
                            "#9933CC",
                            "#9933FF",
                            "#99CC00",
                            "#99CC33",
                            "#CC0000",
                            "#CC0033",
                            "#CC0066",
                            "#CC0099",
                            "#CC00CC",
                            "#CC00FF",
                            "#CC3300",
                            "#CC3333",
                            "#CC3366",
                            "#CC3399",
                            "#CC33CC",
                            "#CC33FF",
                            "#CC6600",
                            "#CC6633",
                            "#CC9900",
                            "#CC9933",
                            "#CCCC00",
                            "#CCCC33",
                            "#FF0000",
                            "#FF0033",
                            "#FF0066",
                            "#FF0099",
                            "#FF00CC",
                            "#FF00FF",
                            "#FF3300",
                            "#FF3333",
                            "#FF3366",
                            "#FF3399",
                            "#FF33CC",
                            "#FF33FF",
                            "#FF6600",
                            "#FF6633",
                            "#FF9900",
                            "#FF9933",
                            "#FFCC00",
                            "#FFCC33",
                          ]),
                          (n.log = console.debug || console.log || (() => {})),
                          (t.exports = e("./common")(n));
                        const { formatters: r } = t.exports;
                        r.j = function (e) {
                          try {
                            return JSON.stringify(e);
                          } catch (e) {
                            return "[UnexpectedJSONParseError]: " + e.message;
                          }
                        };
                      }).call(this);
                    }).call(this, e("_process"));
                  },
                  { "./common": 35, _process: 37 },
                ],
                35: [
                  function (e, t, n) {
                    t.exports = function (t) {
                      function n(e) {
                        let t,
                          r,
                          s,
                          o = null;
                        function l(...e) {
                          if (!l.enabled) return;
                          const i = l,
                            r = Number(new Date()),
                            s = r - (t || r);
                          (i.diff = s),
                            (i.prev = t),
                            (i.curr = r),
                            (t = r),
                            (e[0] = n.coerce(e[0])),
                            "string" != typeof e[0] && e.unshift("%O");
                          let o = 0;
                          (e[0] = e[0].replace(/%([a-zA-Z%])/g, (t, r) => {
                            if ("%%" === t) return "%";
                            o++;
                            const s = n.formatters[r];
                            if ("function" == typeof s) {
                              const n = e[o];
                              (t = s.call(i, n)), e.splice(o, 1), o--;
                            }
                            return t;
                          })),
                            n.formatArgs.call(i, e),
                            (i.log || n.log).apply(i, e);
                        }
                        return (
                          (l.namespace = e),
                          (l.useColors = n.useColors()),
                          (l.color = n.selectColor(e)),
                          (l.extend = i),
                          (l.destroy = n.destroy),
                          Object.defineProperty(l, "enabled", {
                            enumerable: !0,
                            configurable: !1,
                            get: () =>
                              null !== o
                                ? o
                                : (r !== n.namespaces &&
                                    ((r = n.namespaces), (s = n.enabled(e))),
                                  s),
                            set: (e) => {
                              o = e;
                            },
                          }),
                          "function" == typeof n.init && n.init(l),
                          l
                        );
                      }
                      function i(e, t) {
                        const i = n(
                          this.namespace + (void 0 === t ? ":" : t) + e
                        );
                        return (i.log = this.log), i;
                      }
                      function r(e) {
                        return e
                          .toString()
                          .substring(2, e.toString().length - 2)
                          .replace(/\.\*\?$/, "*");
                      }
                      return (
                        (n.debug = n),
                        (n.default = n),
                        (n.coerce = function (e) {
                          return e instanceof Error ? e.stack || e.message : e;
                        }),
                        (n.disable = function () {
                          const e = [
                            ...n.names.map(r),
                            ...n.skips.map(r).map((e) => "-" + e),
                          ].join(",");
                          return n.enable(""), e;
                        }),
                        (n.enable = function (e) {
                          let t;
                          n.save(e),
                            (n.namespaces = e),
                            (n.names = []),
                            (n.skips = []);
                          const i = ("string" == typeof e ? e : "").split(
                              /[\s,]+/
                            ),
                            r = i.length;
                          for (t = 0; t < r; t++)
                            i[t] &&
                              ("-" === (e = i[t].replace(/\*/g, ".*?"))[0]
                                ? n.skips.push(
                                    new RegExp("^" + e.slice(1) + "$")
                                  )
                                : n.names.push(new RegExp("^" + e + "$")));
                        }),
                        (n.enabled = function (e) {
                          if ("*" === e[e.length - 1]) return !0;
                          let t, i;
                          for (t = 0, i = n.skips.length; t < i; t++)
                            if (n.skips[t].test(e)) return !1;
                          for (t = 0, i = n.names.length; t < i; t++)
                            if (n.names[t].test(e)) return !0;
                          return !1;
                        }),
                        (n.humanize = e("ms")),
                        (n.destroy = function () {
                          console.warn(
                            "Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."
                          );
                        }),
                        Object.keys(t).forEach((e) => {
                          n[e] = t[e];
                        }),
                        (n.names = []),
                        (n.skips = []),
                        (n.formatters = {}),
                        (n.selectColor = function (e) {
                          let t = 0;
                          for (let n = 0; n < e.length; n++)
                            (t = (t << 5) - t + e.charCodeAt(n)), (t |= 0);
                          return n.colors[Math.abs(t) % n.colors.length];
                        }),
                        n.enable(n.load()),
                        n
                      );
                    };
                  },
                  { ms: 36 },
                ],
                36: [
                  function (e, t, n) {
                    var i = 1e3,
                      r = 60 * i,
                      s = 60 * r,
                      o = 24 * s,
                      l = 7 * o;
                    function a(e, t, n, i) {
                      var r = t >= 1.5 * n;
                      return Math.round(e / n) + " " + i + (r ? "s" : "");
                    }
                    t.exports = function (e, t) {
                      t = t || {};
                      var n,
                        u,
                        c = typeof e;
                      if ("string" === c && e.length > 0)
                        return (function (e) {
                          if (!((e = String(e)).length > 100)) {
                            var t =
                              /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(
                                e
                              );
                            if (t) {
                              var n = parseFloat(t[1]);
                              switch ((t[2] || "ms").toLowerCase()) {
                                case "years":
                                case "year":
                                case "yrs":
                                case "yr":
                                case "y":
                                  return 315576e5 * n;
                                case "weeks":
                                case "week":
                                case "w":
                                  return n * l;
                                case "days":
                                case "day":
                                case "d":
                                  return n * o;
                                case "hours":
                                case "hour":
                                case "hrs":
                                case "hr":
                                case "h":
                                  return n * s;
                                case "minutes":
                                case "minute":
                                case "mins":
                                case "min":
                                case "m":
                                  return n * r;
                                case "seconds":
                                case "second":
                                case "secs":
                                case "sec":
                                case "s":
                                  return n * i;
                                case "milliseconds":
                                case "millisecond":
                                case "msecs":
                                case "msec":
                                case "ms":
                                  return n;
                                default:
                                  return;
                              }
                            }
                          }
                        })(e);
                      if ("number" === c && isFinite(e))
                        return t.long
                          ? ((n = e),
                            (u = Math.abs(n)) >= o
                              ? a(n, u, o, "day")
                              : u >= s
                              ? a(n, u, s, "hour")
                              : u >= r
                              ? a(n, u, r, "minute")
                              : u >= i
                              ? a(n, u, i, "second")
                              : n + " ms")
                          : (function (e) {
                              var t = Math.abs(e);
                              return t >= o
                                ? Math.round(e / o) + "d"
                                : t >= s
                                ? Math.round(e / s) + "h"
                                : t >= r
                                ? Math.round(e / r) + "m"
                                : t >= i
                                ? Math.round(e / i) + "s"
                                : e + "ms";
                            })(e);
                      throw new Error(
                        "val is not a non-empty string or a valid number. val=" +
                          JSON.stringify(e)
                      );
                    };
                  },
                  {},
                ],
                37: [
                  function (e, t, n) {
                    var i,
                      r,
                      s = (t.exports = {});
                    function o() {
                      throw new Error("setTimeout has not been defined");
                    }
                    function l() {
                      throw new Error("clearTimeout has not been defined");
                    }
                    function a(e) {
                      if (i === setTimeout) return setTimeout(e, 0);
                      if ((i === o || !i) && setTimeout)
                        return (i = setTimeout), setTimeout(e, 0);
                      try {
                        return i(e, 0);
                      } catch (t) {
                        try {
                          return i.call(null, e, 0);
                        } catch (t) {
                          return i.call(this, e, 0);
                        }
                      }
                    }
                    !(function () {
                      try {
                        i = "function" == typeof setTimeout ? setTimeout : o;
                      } catch (e) {
                        i = o;
                      }
                      try {
                        r =
                          "function" == typeof clearTimeout ? clearTimeout : l;
                      } catch (e) {
                        r = l;
                      }
                    })();
                    var u,
                      c = [],
                      d = !1,
                      h = -1;
                    function _() {
                      d &&
                        u &&
                        ((d = !1),
                        u.length ? (c = u.concat(c)) : (h = -1),
                        c.length && f());
                    }
                    function f() {
                      if (!d) {
                        var e = a(_);
                        d = !0;
                        for (var t = c.length; t; ) {
                          for (u = c, c = []; ++h < t; ) u && u[h].run();
                          (h = -1), (t = c.length);
                        }
                        (u = null),
                          (d = !1),
                          (function (e) {
                            if (r === clearTimeout) return clearTimeout(e);
                            if ((r === l || !r) && clearTimeout)
                              return (r = clearTimeout), clearTimeout(e);
                            try {
                              return r(e);
                            } catch (t) {
                              try {
                                return r.call(null, e);
                              } catch (t) {
                                return r.call(this, e);
                              }
                            }
                          })(e);
                      }
                    }
                    function g(e, t) {
                      (this.fun = e), (this.array = t);
                    }
                    function p() {}
                    (s.nextTick = function (e) {
                      var t = new Array(arguments.length - 1);
                      if (arguments.length > 1)
                        for (var n = 1; n < arguments.length; n++)
                          t[n - 1] = arguments[n];
                      c.push(new g(e, t)), 1 !== c.length || d || a(f);
                    }),
                      (g.prototype.run = function () {
                        this.fun.apply(null, this.array);
                      }),
                      (s.title = "browser"),
                      (s.browser = !0),
                      (s.env = {}),
                      (s.argv = []),
                      (s.version = ""),
                      (s.versions = {}),
                      (s.on = p),
                      (s.addListener = p),
                      (s.once = p),
                      (s.off = p),
                      (s.removeListener = p),
                      (s.removeAllListeners = p),
                      (s.emit = p),
                      (s.prependListener = p),
                      (s.prependOnceListener = p),
                      (s.listeners = function (e) {
                        return [];
                      }),
                      (s.binding = function (e) {
                        throw new Error("process.binding is not supported");
                      }),
                      (s.cwd = function () {
                        return "/";
                      }),
                      (s.chdir = function (e) {
                        throw new Error("process.chdir is not supported");
                      }),
                      (s.umask = function () {
                        return 0;
                      });
                  },
                  {},
                ],
                38: [
                  function (e, t, n) {
                    var i = (t.exports = {
                      v: [{ name: "version", reg: /^(\d*)$/ }],
                      o: [
                        {
                          name: "origin",
                          reg: /^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,
                          names: [
                            "username",
                            "sessionId",
                            "sessionVersion",
                            "netType",
                            "ipVer",
                            "address",
                          ],
                          format: "%s %s %d %s IP%d %s",
                        },
                      ],
                      s: [{ name: "name" }],
                      i: [{ name: "description" }],
                      u: [{ name: "uri" }],
                      e: [{ name: "email" }],
                      p: [{ name: "phone" }],
                      z: [{ name: "timezones" }],
                      r: [{ name: "repeats" }],
                      t: [
                        {
                          name: "timing",
                          reg: /^(\d*) (\d*)/,
                          names: ["start", "stop"],
                          format: "%d %d",
                        },
                      ],
                      c: [
                        {
                          name: "connection",
                          reg: /^IN IP(\d) (\S*)/,
                          names: ["version", "ip"],
                          format: "IN IP%d %s",
                        },
                      ],
                      b: [
                        {
                          push: "bandwidth",
                          reg: /^(TIAS|AS|CT|RR|RS):(\d*)/,
                          names: ["type", "limit"],
                          format: "%s:%s",
                        },
                      ],
                      m: [
                        {
                          reg: /^(\w*) (\d*) ([\w/]*)(?: (.*))?/,
                          names: ["type", "port", "protocol", "payloads"],
                          format: "%s %d %s %s",
                        },
                      ],
                      a: [
                        {
                          push: "rtp",
                          reg: /^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,
                          names: ["payload", "codec", "rate", "encoding"],
                          format: function (e) {
                            return e.encoding
                              ? "rtpmap:%d %s/%s/%s"
                              : e.rate
                              ? "rtpmap:%d %s/%s"
                              : "rtpmap:%d %s";
                          },
                        },
                        {
                          push: "fmtp",
                          reg: /^fmtp:(\d*) ([\S| ]*)/,
                          names: ["payload", "config"],
                          format: "fmtp:%d %s",
                        },
                        {
                          name: "control",
                          reg: /^control:(.*)/,
                          format: "control:%s",
                        },
                        {
                          name: "rtcp",
                          reg: /^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,
                          names: ["port", "netType", "ipVer", "address"],
                          format: function (e) {
                            return null != e.address
                              ? "rtcp:%d %s IP%d %s"
                              : "rtcp:%d";
                          },
                        },
                        {
                          push: "rtcpFbTrrInt",
                          reg: /^rtcp-fb:(\*|\d*) trr-int (\d*)/,
                          names: ["payload", "value"],
                          format: "rtcp-fb:%s trr-int %d",
                        },
                        {
                          push: "rtcpFb",
                          reg: /^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,
                          names: ["payload", "type", "subtype"],
                          format: function (e) {
                            return null != e.subtype
                              ? "rtcp-fb:%s %s %s"
                              : "rtcp-fb:%s %s";
                          },
                        },
                        {
                          push: "ext",
                          reg: /^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,
                          names: [
                            "value",
                            "direction",
                            "encrypt-uri",
                            "uri",
                            "config",
                          ],
                          format: function (e) {
                            return (
                              "extmap:%d" +
                              (e.direction ? "/%s" : "%v") +
                              (e["encrypt-uri"] ? " %s" : "%v") +
                              " %s" +
                              (e.config ? " %s" : "")
                            );
                          },
                        },
                        {
                          name: "extmapAllowMixed",
                          reg: /^(extmap-allow-mixed)/,
                        },
                        {
                          push: "crypto",
                          reg: /^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,
                          names: ["id", "suite", "config", "sessionConfig"],
                          format: function (e) {
                            return null != e.sessionConfig
                              ? "crypto:%d %s %s %s"
                              : "crypto:%d %s %s";
                          },
                        },
                        {
                          name: "setup",
                          reg: /^setup:(\w*)/,
                          format: "setup:%s",
                        },
                        {
                          name: "connectionType",
                          reg: /^connection:(new|existing)/,
                          format: "connection:%s",
                        },
                        { name: "mid", reg: /^mid:([^\s]*)/, format: "mid:%s" },
                        { name: "msid", reg: /^msid:(.*)/, format: "msid:%s" },
                        {
                          name: "ptime",
                          reg: /^ptime:(\d*(?:\.\d*)*)/,
                          format: "ptime:%d",
                        },
                        {
                          name: "maxptime",
                          reg: /^maxptime:(\d*(?:\.\d*)*)/,
                          format: "maxptime:%d",
                        },
                        {
                          name: "direction",
                          reg: /^(sendrecv|recvonly|sendonly|inactive)/,
                        },
                        { name: "icelite", reg: /^(ice-lite)/ },
                        {
                          name: "iceUfrag",
                          reg: /^ice-ufrag:(\S*)/,
                          format: "ice-ufrag:%s",
                        },
                        {
                          name: "icePwd",
                          reg: /^ice-pwd:(\S*)/,
                          format: "ice-pwd:%s",
                        },
                        {
                          name: "fingerprint",
                          reg: /^fingerprint:(\S*) (\S*)/,
                          names: ["type", "hash"],
                          format: "fingerprint:%s %s",
                        },
                        {
                          push: "candidates",
                          reg: /^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,
                          names: [
                            "foundation",
                            "component",
                            "transport",
                            "priority",
                            "ip",
                            "port",
                            "type",
                            "raddr",
                            "rport",
                            "tcptype",
                            "generation",
                            "network-id",
                            "network-cost",
                          ],
                          format: function (e) {
                            var t = "candidate:%s %d %s %d %s %d typ %s";
                            return (
                              (t +=
                                null != e.raddr
                                  ? " raddr %s rport %d"
                                  : "%v%v"),
                              (t += null != e.tcptype ? " tcptype %s" : "%v"),
                              null != e.generation && (t += " generation %d"),
                              (t +=
                                null != e["network-id"]
                                  ? " network-id %d"
                                  : "%v") +
                                (null != e["network-cost"]
                                  ? " network-cost %d"
                                  : "%v")
                            );
                          },
                        },
                        {
                          name: "endOfCandidates",
                          reg: /^(end-of-candidates)/,
                        },
                        {
                          name: "remoteCandidates",
                          reg: /^remote-candidates:(.*)/,
                          format: "remote-candidates:%s",
                        },
                        {
                          name: "iceOptions",
                          reg: /^ice-options:(\S*)/,
                          format: "ice-options:%s",
                        },
                        {
                          push: "ssrcs",
                          reg: /^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,
                          names: ["id", "attribute", "value"],
                          format: function (e) {
                            var t = "ssrc:%d";
                            return (
                              null != e.attribute &&
                                ((t += " %s"), null != e.value && (t += ":%s")),
                              t
                            );
                          },
                        },
                        {
                          push: "ssrcGroups",
                          reg: /^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,
                          names: ["semantics", "ssrcs"],
                          format: "ssrc-group:%s %s",
                        },
                        {
                          name: "msidSemantic",
                          reg: /^msid-semantic:\s?(\w*) (\S*)/,
                          names: ["semantic", "token"],
                          format: "msid-semantic: %s %s",
                        },
                        {
                          push: "groups",
                          reg: /^group:(\w*) (.*)/,
                          names: ["type", "mids"],
                          format: "group:%s %s",
                        },
                        { name: "rtcpMux", reg: /^(rtcp-mux)/ },
                        { name: "rtcpRsize", reg: /^(rtcp-rsize)/ },
                        {
                          name: "sctpmap",
                          reg: /^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,
                          names: ["sctpmapNumber", "app", "maxMessageSize"],
                          format: function (e) {
                            return null != e.maxMessageSize
                              ? "sctpmap:%s %s %s"
                              : "sctpmap:%s %s";
                          },
                        },
                        {
                          name: "xGoogleFlag",
                          reg: /^x-google-flag:([^\s]*)/,
                          format: "x-google-flag:%s",
                        },
                        {
                          push: "rids",
                          reg: /^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,
                          names: ["id", "direction", "params"],
                          format: function (e) {
                            return e.params ? "rid:%s %s %s" : "rid:%s %s";
                          },
                        },
                        {
                          push: "imageattrs",
                          reg: new RegExp(
                            "^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"
                          ),
                          names: ["pt", "dir1", "attrs1", "dir2", "attrs2"],
                          format: function (e) {
                            return (
                              "imageattr:%s %s %s" + (e.dir2 ? " %s %s" : "")
                            );
                          },
                        },
                        {
                          name: "simulcast",
                          reg: new RegExp(
                            "^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"
                          ),
                          names: ["dir1", "list1", "dir2", "list2"],
                          format: function (e) {
                            return "simulcast:%s %s" + (e.dir2 ? " %s %s" : "");
                          },
                        },
                        {
                          name: "simulcast_03",
                          reg: /^simulcast:[\s\t]+([\S+\s\t]+)$/,
                          names: ["value"],
                          format: "simulcast: %s",
                        },
                        {
                          name: "framerate",
                          reg: /^framerate:(\d+(?:$|\.\d+))/,
                          format: "framerate:%s",
                        },
                        {
                          name: "sourceFilter",
                          reg: /^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,
                          names: [
                            "filterMode",
                            "netType",
                            "addressTypes",
                            "destAddress",
                            "srcList",
                          ],
                          format: "source-filter: %s %s %s %s %s",
                        },
                        { name: "bundleOnly", reg: /^(bundle-only)/ },
                        {
                          name: "label",
                          reg: /^label:(.+)/,
                          format: "label:%s",
                        },
                        {
                          name: "sctpPort",
                          reg: /^sctp-port:(\d+)$/,
                          format: "sctp-port:%s",
                        },
                        {
                          name: "maxMessageSize",
                          reg: /^max-message-size:(\d+)$/,
                          format: "max-message-size:%s",
                        },
                        {
                          push: "tsRefClocks",
                          reg: /^ts-refclk:([^\s=]*)(?:=(\S*))?/,
                          names: ["clksrc", "clksrcExt"],
                          format: function (e) {
                            return (
                              "ts-refclk:%s" +
                              (null != e.clksrcExt ? "=%s" : "")
                            );
                          },
                        },
                        {
                          name: "mediaClk",
                          reg: /^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,
                          names: [
                            "id",
                            "mediaClockName",
                            "mediaClockValue",
                            "rateNumerator",
                            "rateDenominator",
                          ],
                          format: function (e) {
                            var t = "mediaclk:";
                            return (
                              (t += null != e.id ? "id=%s %s" : "%v%s"),
                              (t += null != e.mediaClockValue ? "=%s" : ""),
                              (t += null != e.rateNumerator ? " rate=%s" : "") +
                                (null != e.rateDenominator ? "/%s" : "")
                            );
                          },
                        },
                        {
                          name: "keywords",
                          reg: /^keywds:(.+)$/,
                          format: "keywds:%s",
                        },
                        {
                          name: "content",
                          reg: /^content:(.+)/,
                          format: "content:%s",
                        },
                        {
                          name: "bfcpFloorCtrl",
                          reg: /^floorctrl:(c-only|s-only|c-s)/,
                          format: "floorctrl:%s",
                        },
                        {
                          name: "bfcpConfId",
                          reg: /^confid:(\d+)/,
                          format: "confid:%s",
                        },
                        {
                          name: "bfcpUserId",
                          reg: /^userid:(\d+)/,
                          format: "userid:%s",
                        },
                        {
                          name: "bfcpFloorId",
                          reg: /^floorid:(.+) (?:m-stream|mstrm):(.+)/,
                          names: ["id", "mStream"],
                          format: "floorid:%s mstrm:%s",
                        },
                        { push: "invalid", names: ["value"] },
                      ],
                    });
                    Object.keys(i).forEach(function (e) {
                      i[e].forEach(function (e) {
                        e.reg || (e.reg = /(.*)/),
                          e.format || (e.format = "%s");
                      });
                    });
                  },
                  {},
                ],
                39: [
                  function (e, t, n) {
                    var i = e("./parser"),
                      r = e("./writer");
                    (n.write = r),
                      (n.parse = i.parse),
                      (n.parseParams = i.parseParams),
                      (n.parseFmtpConfig = i.parseFmtpConfig),
                      (n.parsePayloads = i.parsePayloads),
                      (n.parseRemoteCandidates = i.parseRemoteCandidates),
                      (n.parseImageAttributes = i.parseImageAttributes),
                      (n.parseSimulcastStreamList = i.parseSimulcastStreamList);
                  },
                  { "./parser": 40, "./writer": 41 },
                ],
                40: [
                  function (e, t, n) {
                    var i = function (e) {
                        return String(Number(e)) === e ? Number(e) : e;
                      },
                      r = function (e, t, n) {
                        var r = e.name && e.names;
                        e.push && !t[e.push]
                          ? (t[e.push] = [])
                          : r && !t[e.name] && (t[e.name] = {});
                        var s = e.push ? {} : r ? t[e.name] : t;
                        (function (e, t, n, r) {
                          if (r && !n) t[r] = i(e[1]);
                          else
                            for (var s = 0; s < n.length; s += 1)
                              null != e[s + 1] && (t[n[s]] = i(e[s + 1]));
                        })(n.match(e.reg), s, e.names, e.name),
                          e.push && t[e.push].push(s);
                      },
                      s = e("./grammar"),
                      o = RegExp.prototype.test.bind(/^([a-z])=(.*)/);
                    n.parse = function (e) {
                      var t = {},
                        n = [],
                        i = t;
                      return (
                        e
                          .split(/(\r\n|\r|\n)/)
                          .filter(o)
                          .forEach(function (e) {
                            var t = e[0],
                              o = e.slice(2);
                            "m" === t &&
                              (n.push({ rtp: [], fmtp: [] }),
                              (i = n[n.length - 1]));
                            for (var l = 0; l < (s[t] || []).length; l += 1) {
                              var a = s[t][l];
                              if (a.reg.test(o)) return r(a, i, o);
                            }
                          }),
                        (t.media = n),
                        t
                      );
                    };
                    var l = function (e, t) {
                      var n = t.split(/=(.+)/, 2);
                      return (
                        2 === n.length
                          ? (e[n[0]] = i(n[1]))
                          : 1 === n.length &&
                            t.length > 1 &&
                            (e[n[0]] = void 0),
                        e
                      );
                    };
                    (n.parseParams = function (e) {
                      return e.split(/;\s?/).reduce(l, {});
                    }),
                      (n.parseFmtpConfig = n.parseParams),
                      (n.parsePayloads = function (e) {
                        return e.toString().split(" ").map(Number);
                      }),
                      (n.parseRemoteCandidates = function (e) {
                        for (
                          var t = [], n = e.split(" ").map(i), r = 0;
                          r < n.length;
                          r += 3
                        )
                          t.push({
                            component: n[r],
                            ip: n[r + 1],
                            port: n[r + 2],
                          });
                        return t;
                      }),
                      (n.parseImageAttributes = function (e) {
                        return e.split(" ").map(function (e) {
                          return e
                            .substring(1, e.length - 1)
                            .split(",")
                            .reduce(l, {});
                        });
                      }),
                      (n.parseSimulcastStreamList = function (e) {
                        return e.split(";").map(function (e) {
                          return e.split(",").map(function (e) {
                            var t,
                              n = !1;
                            return (
                              "~" !== e[0]
                                ? (t = i(e))
                                : ((t = i(e.substring(1, e.length))), (n = !0)),
                              { scid: t, paused: n }
                            );
                          });
                        });
                      });
                  },
                  { "./grammar": 38 },
                ],
                41: [
                  function (e, t, n) {
                    var i = e("./grammar"),
                      r = /%[sdv%]/g,
                      s = function (e) {
                        var t = 1,
                          n = arguments,
                          i = n.length;
                        return e.replace(r, function (e) {
                          if (t >= i) return e;
                          var r = n[t];
                          switch (((t += 1), e)) {
                            case "%%":
                              return "%";
                            case "%s":
                              return String(r);
                            case "%d":
                              return Number(r);
                            case "%v":
                              return "";
                          }
                        });
                      },
                      o = function (e, t, n) {
                        var i = [
                          e +
                            "=" +
                            (t.format instanceof Function
                              ? t.format(t.push ? n : n[t.name])
                              : t.format),
                        ];
                        if (t.names)
                          for (var r = 0; r < t.names.length; r += 1) {
                            var o = t.names[r];
                            t.name
                              ? i.push(n[t.name][o])
                              : i.push(n[t.names[r]]);
                          }
                        else i.push(n[t.name]);
                        return s.apply(null, i);
                      },
                      l = [
                        "v",
                        "o",
                        "s",
                        "i",
                        "u",
                        "e",
                        "p",
                        "c",
                        "b",
                        "t",
                        "r",
                        "z",
                        "a",
                      ],
                      a = ["i", "c", "b", "a"];
                    t.exports = function (e, t) {
                      (t = t || {}),
                        null == e.version && (e.version = 0),
                        null == e.name && (e.name = " "),
                        e.media.forEach(function (e) {
                          null == e.payloads && (e.payloads = "");
                        });
                      var n = t.outerOrder || l,
                        r = t.innerOrder || a,
                        s = [];
                      return (
                        n.forEach(function (t) {
                          i[t].forEach(function (n) {
                            n.name in e && null != e[n.name]
                              ? s.push(o(t, n, e))
                              : n.push in e &&
                                null != e[n.push] &&
                                e[n.push].forEach(function (e) {
                                  s.push(o(t, n, e));
                                });
                          });
                        }),
                        e.media.forEach(function (e) {
                          s.push(o("m", i.m[0], e)),
                            r.forEach(function (t) {
                              i[t].forEach(function (n) {
                                n.name in e && null != e[n.name]
                                  ? s.push(o(t, n, e))
                                  : n.push in e &&
                                    null != e[n.push] &&
                                    e[n.push].forEach(function (e) {
                                      s.push(o(t, n, e));
                                    });
                              });
                            });
                        }),
                        s.join("\r\n") + "\r\n"
                      );
                    };
                  },
                  { "./grammar": 38 },
                ],
                42: [
                  function (e, t, n) {
                    t.exports = {
                      name: "jssip",
                      title: "JsSIP",
                      description: "the Javascript SIP library",
                      version: "3.10.0",
                      homepage: "https://jssip.net",
                      contributors: [
                        "José Luis Millán <jmillan@aliax.net> (https://github.com/jmillan)",
                        "Iñaki Baz Castillo <ibc@aliax.net> (https://inakibaz.me)",
                      ],
                      types: "lib/JsSIP.d.ts",
                      main: "lib-es5/JsSIP.js",
                      keywords: [
                        "sip",
                        "websocket",
                        "webrtc",
                        "node",
                        "browser",
                        "library",
                      ],
                      license: "MIT",
                      repository: {
                        type: "git",
                        url: "https://github.com/versatica/JsSIP.git",
                      },
                      bugs: {
                        url: "https://github.com/versatica/JsSIP/issues",
                      },
                      dependencies: {
                        "@types/events": "^3.0.0",
                        "@types/debug": "^4.1.7",
                        debug: "^4.3.1",
                        events: "^3.3.0",
                        "sdp-transform": "^2.14.1",
                      },
                      devDependencies: {
                        "@babel/core": "^7.19.6",
                        "@babel/preset-env": "^7.19.4",
                        "ansi-colors": "^3.2.4",
                        browserify: "^16.5.1",
                        eslint: "^5.16.0",
                        "fancy-log": "^1.3.3",
                        gulp: "^4.0.2",
                        "gulp-babel": "^8.0.0",
                        "gulp-eslint": "^5.0.0",
                        "gulp-expect-file": "^1.0.2",
                        "gulp-header": "^2.0.9",
                        "gulp-nodeunit-runner": "^0.2.2",
                        "gulp-plumber": "^1.2.1",
                        "gulp-rename": "^1.4.0",
                        "gulp-uglify-es": "^1.0.4",
                        pegjs: "^0.7.0",
                        "vinyl-buffer": "^1.0.1",
                        "vinyl-source-stream": "^2.0.0",
                      },
                      scripts: {
                        lint: "node npm-scripts.js lint",
                        test: "node npm-scripts.js test",
                        prepublish: "node npm-scripts.js prepublish",
                        release: "node npm-scripts.js release",
                      },
                    };
                  },
                  {},
                ],
              },
              {},
              [8]
            )(8);
          },
          57: (e, t) => {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 }),
              (t.SelectDevices = void 0),
              (t.SelectDevices = class {
                constructor(e) {
                  (this.AudioCodesUA = e),
                    (this.defaultPseudoDevice = !0),
                    (this.names = []),
                    (this.enumerateDevices =
                      this.AudioCodesUA.getWR().mediaDevices.enumerateDevices),
                    (this.browserDefaultLabel = "-- browser default--"),
                    (this.emptyLabel = "-- no label --"),
                    (this.previousSelection = null),
                    this.setDevices(!0, [
                      { name: "microphone", kind: "audioinput" },
                      { name: "camera", kind: "videoinput" },
                      { name: "speaker", kind: "audiooutput" },
                    ]);
                }
                setDevices(e, t) {
                  (this.defaultPseudoDevice = e), (this.names = []);
                  for (let e of t) {
                    if (
                      !["audioinput", "audiooutput", "videoinput"].includes(
                        e.kind
                      )
                    )
                      throw new Error(`Illegal kind: ${e.kind}`);
                    this.names.push(e.name), (this[e.name] = { kind: e.kind });
                  }
                }
                setEnumerateDevices(e) {
                  this.enumerateDevices = e;
                }
                enumerate(e) {
                  let t,
                    n = !1;
                  return Promise.resolve()
                    .then(() => this.doEnumerate())
                    .then(
                      (t) => (
                        (n = t),
                        n && e
                          ? this.AudioCodesUA.getWR().getUserMedia({
                              audio: !0,
                              video: !0,
                            })
                          : Promise.resolve(null)
                      )
                    )
                    .then((e) => {
                      if (((t = e), t)) return this.doEnumerate();
                    })
                    .then(() => {
                      var e;
                      t &&
                        ((n = !1),
                        null === (e = null == t ? void 0 : t.getTracks()) ||
                          void 0 === e ||
                          e.forEach((e) => e.stop()));
                    })
                    .then(() => {
                      if (this.previousSelection)
                        for (let e of this.names)
                          this.findPreviousSelection(e) ||
                            (n && this.addPreviousSelection(e));
                    });
                }
                doEnumerate() {
                  let e = !1,
                    t = this.emptyLabel;
                  function n(n, i) {
                    return i || ((e = n.incomplete = !0), t);
                  }
                  for (let e of this.names) {
                    let t = this.getDevice(e);
                    (t.incomplete = !1),
                      this.defaultPseudoDevice
                        ? ((t.index = 0),
                          (t.list = [
                            { deviceId: null, label: this.browserDefaultLabel },
                          ]))
                        : ((t.index = -1), (t.list = []));
                  }
                  return this.enumerateDevices()
                    .then((e) => {
                      for (let t of e)
                        for (let e of this.names) {
                          let i = this.getDevice(e);
                          t.kind === i.kind &&
                            i.list.push({
                              deviceId: t.deviceId,
                              label: n(i, t.label),
                            });
                        }
                    })
                    .then(() => e);
                }
                findPreviousSelection(e) {
                  let t = this.getDevice(e),
                    n = this.previousSelection && this.previousSelection[e];
                  if (!n || n.label === this.emptyLabel) return !1;
                  for (let e = 0; e < t.list.length; e++)
                    if (t.list[e].label === n.label) return (t.index = e), !0;
                  return !1;
                }
                addPreviousSelection(e) {
                  let t = this.getDevice(e),
                    n = this.previousSelection && this.previousSelection[e];
                  n &&
                    n.label !== this.browserDefaultLabel &&
                    n.label !== this.emptyLabel &&
                    (this.AudioCodesUA.ac_log(
                      `devices: added previously selected ${e} "${n.label}"`
                    ),
                    t.list.push(n),
                    (t.index = t.list.length - 1));
                }
                getDevice(e) {
                  if (!this[e]) throw new TypeError(`wrong device name: ${e}`);
                  return this[e];
                }
                getSelected(e) {
                  let t = this.getDevice(e);
                  return 0 === t.list.length || -1 === t.index
                    ? { deviceId: null, label: this.emptyLabel }
                    : t.list[t.index];
                }
                getNumber(e) {
                  return this.getDevice(e).list.length;
                }
                setSelectedIndex(e, t) {
                  let n = this.getDevice(e);
                  if (t < 0 || t >= n.list.length)
                    throw new RangeError(`setSelectedIndex ${e} index=${t}`);
                  n.index = t;
                }
                store() {
                  this.previousSelection = null;
                  for (let e of this.names) {
                    let t = this.getDevice(e);
                    0 !== t.list.length &&
                      -1 !== t.index &&
                      (this.previousSelection || (this.previousSelection = {}),
                      (this.previousSelection[e] = this.getSelected(e)));
                  }
                  return this.previousSelection;
                }
                load(e) {
                  this.previousSelection = e;
                }
                addDeviceChangeListener(e) {
                  this.AudioCodesUA.getWR().mediaDevices.addDeviceChangeListener(
                    e
                  );
                }
                removeDeviceChangeListener(e) {
                  this.AudioCodesUA.getWR().mediaDevices.removeDeviceChangeListener(
                    e
                  );
                }
              });
          },
        }),
          (t = {}),
          (function n(i) {
            var r = t[i];
            if (void 0 !== r) return r.exports;
            var s = (t[i] = { exports: {} });
            return e[i].call(s.exports, s, s.exports, n), s.exports;
          })(338);
      },
    },
    t = {};
  !(function n(i) {
    var r = t[i];
    if (void 0 !== r) return r.exports;
    var s = (t[i] = { exports: {} });
    return e[i](s, s.exports, n), s.exports;
  })(641);
  class n extends HTMLElement {
    constructor() {
      super(),
        (this.displaydom = () => {
          var e, t;
          this.render(),
            null ===
              (e = this.shadowRoot.getElementById("click-to-call-button")) ||
              void 0 === e ||
              e.addEventListener("click", () => {
                this.displayClickToCall();
              }),
            null ===
              (t = this.shadowRoot.getElementById(
                "click-to-call-close-button"
              )) ||
              void 0 === t ||
              t.addEventListener("click", () => {
                this.hideClickToCall();
              });
        }),
        this.attachShadow({ mode: "open" });
    }
    connectedCallback() {
      this.displaydom();
    }
    disconnectedCallback() {
      var e, t;
      null === (e = this.shadowRoot.getElementById("click-to-call-button")) ||
        void 0 === e ||
        e.removeEventListener("click", () => {
          this.displayClickToCall();
        }),
        null ===
          (t = this.shadowRoot.getElementById("click-to-call-close-button")) ||
          void 0 === t ||
          t.removeEventListener("click", () => {
            this.hideClickToCall();
          });
    }
    static get observedAttributes() {
      return ["config", "payload"];
    }
    get config() {
      var e;
      return null !== (e = this.getAttribute("config")) && void 0 !== e
        ? e
        : "{}";
    }
    set config(e) {
      this.setAttribute("config", e);
    }
    get payload() {
      var e;
      return null !== (e = this.getAttribute("payload")) && void 0 !== e
        ? e
        : "{}";
    }
    set payload(e) {
      this.setAttribute("payload", e);
    }
    displayClickToCall() {
      const e = this.shadowRoot.querySelector(".click-to-call-container"),
        t = this.shadowRoot.querySelector("#click-to-call-button");
      (e.style.display = "flex"),
        e.classList.add("active"),
        e.classList.remove("inactive"),
        (t.style.display = "none");
    }
    hideClickToCall() {
      const e = this.shadowRoot.querySelector(".click-to-call-container"),
        t = this.shadowRoot.querySelector("#click-to-call-button");
      (e.style.display = "flex"),
        e.classList.add("inactive"),
        e.classList.remove("active"),
        (t.style.display = "block");
    }
    render() {
      const e = JSON.parse(this.config);
      this.shadowRoot &&
        (this.shadowRoot.innerHTML = `\n                <style>\n                .container {\n                    display: flex;\n                }\n                \n                .container #click-to-call-button {\n                    height: 40px;\n                    width: 40px;\n                    position: absolute;\n                    bottom: 1rem;\n                    right: 1rem;\n                    cursor: pointer;\n                    border: 0;\n                    outline: 0;\n                    border-radius: 5px;\n                }\n                \n                #click-to-call-close-button {\n                    position: relative;\n                    width: 18px;\n                    height: 18px;\n                    cursor: pointer;\n                }\n                \n                #click-to-call-close-button::before,\n                #click-to-call-close-button::after {\n                    content: "";\n                    position: absolute;\n                    top: 50%;\n                    left: 50%;\n                    width: 18px;\n                    height: 2px;\n                    background-color: black;\n                }\n                \n                #click-to-call-close-button::before {\n                    transform: translate(-50%, -50%) rotate(45deg);\n                }\n                \n                #click-to-call-close-button::after {\n                    transform: translate(-50%, -50%) rotate(-45deg);\n                }\n                \n                .click-to-call-close-button-container {\n                    display: flex;\n                    justify-content: flex-end;\n                    align-items: center;\n                    padding: 1rem;\n                }\n                \n                click-to-call {\n                    width: 100%;\n                }\n                \n                .click-to-call-container {\n                    display: none;\n                    position: relative;\n                    flex-direction: column;\n                    width: 290px;\n                    padding: 0;\n                    border-radius: 5px;\n                    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);\n                    transition:\n                        transform 0.6s ease-out,\n                        opacity 1s ease-in;\n                    transform: translateY(100%);\n                    opacity: 0;\n                    overflow: hidden;\n                }\n                \n                .active {\n                    transform: translateY(0);\n                    opacity: 1;\n                    animation: slideUp 2s ease forwards;\n                    background-color: white;\n                }\n                \n                .inactive {\n                    animation: slideDown 2s ease forwards;\n                }\n                \n                @keyframes slideUp {\n                    from {\n                        transform: translateY(100%);\n                    }\n                    to {\n                        transform: translateY(0);\n                    }\n                }\n                \n                @keyframes slideDown {\n                    from {\n                        transform: translateY(0);\n                    }\n                    to {\n                        transform: translateY(100%);\n                    }\n                }\n                \n                #on-going-call {\n                    display: flex;\n                    flex-direction: column;\n                    align-items: center;\n                    width: 100%;\n                }\n                \n                #on-going-call-icon {\n                    margin: 1rem 0;\n                    display: flex;\n                    justify-content: center;\n                }\n                \n                .click-to-call-header {\n                    display: flex;\n                    flex-basis: 50%;\n                    flex-direction: row;\n                    align-items: center;\n                    border-bottom: 1px solid #c3c3c3;\n                }\n                \n                \n                .click-to-call-header .title {\n                    padding-left: 20px;\n                    flex-grow: 1;\n                    font-weight: 500;\n                    line-height: 1.6;\n                    font-size: 1rem;\n                    text-transform: uppercase;\n                    color: rgb(33, 150, 243);\n                }\n                </style>\n                <div class="click-to-call-container" style="display: none;">\n                <div class="click-to-call-header">\n                                                    <div class="title">Click To Call</div>\n                                                    <div class="click-to-call-close-button-container">\n                                                        <div id="click-to-call-close-button"></div>\n                                                    </div>\n                                                    </div>\n                                                    <div>\n                                                    <div id='on-going-call-icon'>\n                                                    <svg width="70" height="70" viewBox="0 0 70 70" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <circle cx="35" cy="35" r="35" fill="url(#paint0_linear_18514_14349)" fill-opacity="0.2" />\n        <path fill-rule="evenodd" clip-rule="evenodd"\n            d="M31.7468 14.2968C27.5006 14.7763 23.904 16.6053 20.3952 20.0696C19.3239 21.1273 16.0432 26.517 16.0432 27.2194C16.0432 27.4346 15.6125 27.8064 15.0857 28.0452C13.6391 28.7017 12.3659 29.7825 11.6455 30.965C11.1233 31.823 10.999 32.6983 11 35.5177C11.0011 38.5361 11.1052 39.1786 11.7712 40.2685C12.8021 41.9557 14.74 43.2942 16.7656 43.7179C18.2505 44.0284 18.488 44.1978 18.9974 45.3071C20.6222 48.8472 25.187 53.2145 29.0687 54.9423C31.3346 55.9509 31.6333 56.0043 34.9774 55.9998C38.293 55.9949 38.6429 55.9327 40.937 54.9399C44.5147 53.3914 48.5158 49.8163 50.3437 46.5348C51.6256 44.233 51.8349 44.0196 53.1227 43.6994C56.5884 42.8383 58.3188 41.0327 58.8494 37.7236C59.2306 35.3486 58.8605 32.1168 58.051 30.7525C57.4487 29.737 55.6685 28.312 54.5314 27.935C54.084 27.7869 53.5639 27.0964 53.1576 26.1109C51.416 21.8891 47.0257 17.2824 43.3515 15.8219C42.4066 15.4462 41.3715 15.0176 41.0515 14.8695C40.5046 14.6164 35.1063 13.9235 34.3309 14.0069C34.1345 14.0282 32.9717 14.1584 31.7468 14.2968ZM35.007 29.8818C38.6774 32.4877 43.2551 34.3036 46.1546 34.3036C46.9964 34.3036 47.7843 34.4438 47.9058 34.615C48.2892 35.1556 48.5228 38.1433 48.2728 39.3052C48.0493 40.3444 47.8491 40.4943 45.3552 41.4901C41.7116 42.9452 41.5323 43.0068 39.5161 43.4927C37.8171 43.9024 37.707 43.8915 36.7308 43.2104C35.4485 42.316 34.248 42.3099 32.9838 43.1919C30.8889 44.6533 32.104 47.6581 34.7905 47.6581C35.46 47.6581 36.2552 47.472 36.5574 47.2447C36.86 47.0174 38.3606 46.5406 39.8925 46.1851C41.4244 45.8297 43.5197 45.2588 44.5488 44.9162C45.5777 44.5735 46.4923 44.3568 46.5814 44.4345C46.9776 44.7796 44.6728 47.5139 42.5246 49.2479C38.0583 52.8521 35.0617 53.4706 31.0749 51.611C26.9418 49.6837 23.1809 45.1653 21.8112 40.4819C21.242 38.5358 21.0919 35.6063 21.532 35.0326C21.6727 34.8493 22.4832 34.6044 23.3334 34.4887C25.6369 34.1749 28.7425 32.5903 30.6846 30.738C31.6319 29.8344 32.4069 28.9694 32.4069 28.8158C32.4069 28.2589 33.1506 28.5636 35.007 29.8818Z"\n            fill="url(#paint1_linear_18514_14349)" />\n        <defs>\n            <linearGradient id="paint0_linear_18514_14349" x1="4.50836e-08" y1="4.2" x2="71.8953" y2="7.65134"\n                gradientUnits="userSpaceOnUse">\n                <stop stop-color="#56AAFF" />\n                <stop offset="1" stop-color="#8636FF" />\n            </linearGradient>\n            <linearGradient id="paint1_linear_18514_14349" x1="11" y1="16.52" x2="60.265" y2="19.2228"\n                gradientUnits="userSpaceOnUse">\n                <stop stop-color="#56AAFF" />\n                <stop offset="1" stop-color="#8636FF" />\n            </linearGradient>\n        </defs>\n    </svg>\n    </div>\n                                                    <click-to-call id="click2call" config=${JSON.stringify(
          e
        )} form='{"isValid": true}' generateCode="generateCode" payload=${JSON.stringify(
          this.payload
        )}>\n                                                    <div slot='on-going-call' id='on-going-call'>\n                                                   \n                                                   <div id="on-going-call-message" ></div>\n                                                   <div id="on-going-call-duration"></div>\n                                                </div>\n                                                    </click-to-call> \n                                                    </div>\n                                                </div>\n                                                \n                                                <div class="container">\n                                                        <svg id="click-to-call-button" class="svg-icon" viewBox="0 0 1099 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M756.705882 557.176471c-6.776471 0-13.552941-3.764706-16.564706-10.541177C682.164706 429.929412 566.211765 349.364706 436.705882 337.317647c-10.541176-0.752941-18.070588-10.541176-16.564706-20.329412 0.752941-10.541176 10.541176-18.070588 20.329412-16.564706 142.305882 13.552941 269.552941 101.647059 333.552941 230.4 4.517647 9.035294 0.752941 20.329412-8.282353 24.847059-3.764706 0.752941-6.776471 1.505882-9.035294 1.505883z" fill="#6097FD" /><path d="M911.058824 559.435294c-7.529412 0-15.058824-5.270588-18.070589-12.8-71.529412-210.070588-269.552941-351.623529-491.670588-351.623529-10.541176 0-21.835294 0-32.376471 0.752941s-19.576471-7.529412-19.57647-17.317647c-0.752941-10.541176 7.529412-19.576471 17.317647-19.576471 11.294118-0.752941 23.341176-0.752941 34.635294-0.752941 238.682353 0 450.258824 151.341176 527.811765 377.223529 3.011765 9.788235-2.258824 20.329412-12.047059 24.094118h-6.023529z" fill="#6097FD" /><path d="M1078.964706 584.282353c-8.282353 0-16.564706-6.023529-18.070588-15.058824-67.764706-306.447059-344.847059-529.317647-658.82353-529.317647-34.635294 0-70.023529 3.011765-103.905882 8.282353-10.541176 1.505882-19.576471-5.270588-21.835294-15.811764-1.505882-10.541176 5.270588-19.576471 15.811764-21.835295C328.282353 5.270588 365.176471 2.258824 401.317647 2.258824 564.705882 2.258824 724.329412 58.729412 850.823529 161.882353c124.988235 101.647059 212.329412 243.2 246.211765 399.058823 2.258824 9.788235-4.517647 20.329412-14.305882 22.588236-1.505882 0.752941-3.011765 0.752941-3.764706 0.752941z" fill="#6097FD" /><path d="M864.376471 879.435294c-2.258824 6.023529-5.270588 12.047059-9.035295 17.317647-1.505882 2.258824-2.258824 3.764706-3.764705 6.02353-28.611765 46.682353-71.529412 87.341176-124.988236 105.411764-57.976471 19.576471-124.988235 7.529412-182.211764-6.77647-181.458824-45.929412-326.023529-141.552941-430.682353-287.62353-18.823529-25.6-36.141176-52.705882-51.952942-82.070588-18.823529-33.129412-33.882353-67.764706-44.423529-104.658823-2.258824-6.776471-3.764706-13.552941-6.023529-20.329412-14.305882-54.964706-2.258824-105.411765 28.611764-152.094118 11.294118-16.564706 23.341176-31.623529 36.141177-46.682353 4.517647-6.023529 9.788235-11.294118 15.811765-15.811765 0.752941-0.752941 1.505882-0.752941 1.505882-1.505882 34.635294-27.105882 82.070588-30.870588 118.964706-6.023529 36.141176 24.094118 70.023529 50.447059 103.152941 79.058823 33.882353 30.117647 42.164706 76.8 24.094118 116.705883-0.752941 1.505882-0.752941 3.011765-1.505883 3.764705-2.258824 4.517647-4.517647 8.282353-7.529412 12.8-9.035294 12.8-18.823529 24.847059-28.611764 37.647059-21.082353 27.105882-19.576471 51.2 3.011764 76.8 55.717647 61.741176 121.976471 109.929412 195.011765 149.082353 27.105882 14.305882 51.2 9.035294 70.776471-15.058823 9.788235-12.047059 19.576471-24.847059 29.364706-36.894118 5.270588-6.023529 10.541176-12.047059 17.317647-16.564706 35.388235-27.105882 84.329412-30.117647 121.97647-3.764706 32.376471 22.588235 64 47.435294 94.870589 72.282353 36.894118 30.117647 48.188235 78.305882 30.117647 118.964706z" fill="#4988FD" /><path d="M340.329412 481.129412c-0.752941 1.505882-0.752941 3.011765-1.505883 3.764706L94.117647 290.635294c34.635294-27.105882 82.070588-30.870588 118.964706-6.023529 36.141176 24.094118 70.023529 50.447059 103.152941 79.058823 33.882353 30.117647 41.411765 76.8 24.094118 117.458824z" fill="#6097FD" /><path d="M851.576471 902.776471c-3.764706 0.752941-12.047059 17.317647-14.305883 21.082353-6.023529 8.282353-12.047059 16.564706-18.823529 24.847058-12.8 14.305882-26.352941 27.858824-42.164706 38.4-95.623529 63.247059-236.423529 21.835294-334.305882-17.317647-130.258824-52.705882-245.458824-140.8-327.529412-255.247059-18.823529-25.6-36.141176-52.705882-51.952941-82.070588-18.823529-33.129412-33.882353-67.764706-44.42353-104.658823 304.188235 415.623529 604.611765 432.941176 833.505883 374.964706z" fill="#3973F4" /><path d="M864.376471 879.435294L617.411765 691.952941c35.388235-27.105882 84.329412-30.117647 121.97647-3.764706 32.376471 22.588235 64 46.682353 94.870589 72.282353 36.894118 30.870588 48.188235 78.305882 30.117647 118.964706z" fill="#6097FD" /></svg>\n                                                </div>\n                                                `);
    }
  }
  customElements.define("click-to-call-widget", n);
})();